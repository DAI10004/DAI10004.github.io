"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{9312:function(e,i,r){let n,s,o,a;r.d(i,{wlLive2d:function(){return cb}});var h,l,u,c,d,f,p,_,g,v,y,b,x=r(9079),T=r(8620).Buffer;function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}tX=eg=eg||{},tH=function(){function e(){}return e.getVersion=function(){return tQ.ccall("csmGetVersion","number",[],[])},e.getLatestMocVersion=function(){return tQ.ccall("csmGetLatestMocVersion","number",[],[])},e.getMocVersion=function(e,i){return tQ.ccall("csmGetMocVersion","number",["number","number"],[e,i])},e.getSizeofModel=function(e){return tQ.ccall("csmGetSizeofModel","number",["number"],[e])},e.reviveMocInPlace=function(e,i){return tQ.ccall("csmReviveMocInPlace","number",["number","number"],[e,i])},e.initializeModelInPlace=function(e,i,r){return tQ.ccall("csmInitializeModelInPlace","number",["number","number","number"],[e,i,r])},e.hasMocConsistency=function(e,i){return tQ.ccall("csmHasMocConsistency","number",["number","number"],[e,i])},e.getParameterCount=function(e){return tQ.ccall("csmGetParameterCount","number",["number"],[e])},e.getParameterIds=function(e){return tQ.ccall("csmGetParameterIds","number",["number"],[e])},e.getParameterMinimumValues=function(e){return tQ.ccall("csmGetParameterMinimumValues","number",["number"],[e])},e.getParameterTypes=function(e){return tQ.ccall("csmGetParameterTypes","number",["number"],[e])},e.getParameterMaximumValues=function(e){return tQ.ccall("csmGetParameterMaximumValues","number",["number"],[e])},e.getParameterDefaultValues=function(e){return tQ.ccall("csmGetParameterDefaultValues","number",["number"],[e])},e.getParameterValues=function(e){return tQ.ccall("csmGetParameterValues","number",["number"],[e])},e.getParameterKeyCounts=function(e){return tQ.ccall("csmGetParameterKeyCounts","number",["number"],[e])},e.getParameterKeyValues=function(e){return tQ.ccall("csmGetParameterKeyValues","number",["number"],[e])},e.getPartCount=function(e){return tQ.ccall("csmGetPartCount","number",["number"],[e])},e.getPartIds=function(e){return tQ.ccall("csmGetPartIds","number",["number"],[e])},e.getPartOpacities=function(e){return tQ.ccall("csmGetPartOpacities","number",["number"],[e])},e.getPartParentPartIndices=function(e){return tQ.ccall("csmGetPartParentPartIndices","number",["number"],[e])},e.getDrawableCount=function(e){return tQ.ccall("csmGetDrawableCount","number",["number"],[e])},e.getDrawableIds=function(e){return tQ.ccall("csmGetDrawableIds","number",["number"],[e])},e.getDrawableConstantFlags=function(e){return tQ.ccall("csmGetDrawableConstantFlags","number",["number"],[e])},e.getDrawableDynamicFlags=function(e){return tQ.ccall("csmGetDrawableDynamicFlags","number",["number"],[e])},e.getDrawableTextureIndices=function(e){return tQ.ccall("csmGetDrawableTextureIndices","number",["number"],[e])},e.getDrawableDrawOrders=function(e){return tQ.ccall("csmGetDrawableDrawOrders","number",["number"],[e])},e.getDrawableRenderOrders=function(e){return tQ.ccall("csmGetDrawableRenderOrders","number",["number"],[e])},e.getDrawableOpacities=function(e){return tQ.ccall("csmGetDrawableOpacities","number",["number"],[e])},e.getDrawableMaskCounts=function(e){return tQ.ccall("csmGetDrawableMaskCounts","number",["number"],[e])},e.getDrawableMasks=function(e){return tQ.ccall("csmGetDrawableMasks","number",["number"],[e])},e.getDrawableVertexCounts=function(e){return tQ.ccall("csmGetDrawableVertexCounts","number",["number"],[e])},e.getDrawableVertexPositions=function(e){return tQ.ccall("csmGetDrawableVertexPositions","number",["number"],[e])},e.getDrawableVertexUvs=function(e){return tQ.ccall("csmGetDrawableVertexUvs","number",["number"],[e])},e.getDrawableIndexCounts=function(e){return tQ.ccall("csmGetDrawableIndexCounts","number",["number"],[e])},e.getDrawableIndices=function(e){return tQ.ccall("csmGetDrawableIndices","number",["number"],[e])},e.getDrawableMultiplyColors=function(e){return tQ.ccall("csmGetDrawableMultiplyColors","number",["number"],[e])},e.getDrawableScreenColors=function(e){return tQ.ccall("csmGetDrawableScreenColors","number",["number"],[e])},e.getDrawableParentPartIndices=function(e){return tQ.ccall("csmGetDrawableParentPartIndices","number",["number"],[e])},e.mallocMoc=function(e){return tQ.ccall("csmMallocMoc","number",["number"],[e])},e.mallocModelAndInitialize=function(e){return tQ.ccall("csmMallocModelAndInitialize","number",["number"],[e])},e.malloc=function(e){return tQ.ccall("csmMalloc","number",["number"],[e])},e.setLogFunction=function(e){tQ.ccall("csmSetLogFunction",null,["number"],[e])},e.updateModel=function(e){tQ.ccall("csmUpdateModel",null,["number"],[e])},e.readCanvasInfo=function(e,i,r,n){tQ.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[e,i,r,n])},e.resetDrawableDynamicFlags=function(e){tQ.ccall("csmResetDrawableDynamicFlags",null,["number"],[e])},e.free=function(e){tQ.ccall("csmFree",null,["number"],[e])},e.initializeAmountOfMemory=function(e){tQ.ccall("csmInitializeAmountOfMemory",null,["number"],[e])},e}(),tX.AlignofMoc=64,tX.AlignofModel=16,tX.MocVersion_Unknown=0,tX.MocVersion_30=1,tX.MocVersion_33=2,tX.MocVersion_40=3,tX.MocVersion_42=4,tX.MocVersion_50=5,tX.ParameterType_Normal=0,tX.ParameterType_BlendShape=1,tj=function(){function e(){}return e.csmGetVersion=function(){return tH.getVersion()},e.csmGetLatestMocVersion=function(){return tH.getLatestMocVersion()},e.csmGetMocVersion=function(e,i){return tH.getMocVersion(e._ptr,i.byteLength)},e}(),tX.Version=tj,tj=function(){function e(){}return e.csmSetLogFunction=function(i){e.logFunction=i,i=tQ.addFunction(e.wrapLogFunction,"vi"),tH.setLogFunction(i)},e.csmGetLogFunction=function(){return e.logFunction},e.wrapLogFunction=function(i){i=tQ.UTF8ToString(i),e.logFunction(i)},e}(),tX.Logging=tj,tj=function(){function e(e){var i=tH.mallocMoc(e.byteLength);i&&(new Uint8Array(tQ.HEAPU8.buffer,i,e.byteLength).set(new Uint8Array(e)),this._ptr=tH.reviveMocInPlace(i,e.byteLength),this._ptr||tH.free(i))}return e.prototype.hasMocConsistency=function(e){var i=tH.mallocMoc(e.byteLength);if(i)return new Uint8Array(tQ.HEAPU8.buffer,i,e.byteLength).set(new Uint8Array(e)),e=tH.hasMocConsistency(i,e.byteLength),tH.free(i),e},e.fromArrayBuffer=function(i){return i&&(i=new e(i))._ptr?i:null},e.prototype._release=function(){tH.free(this._ptr),this._ptr=0},e}(),tX.Moc=tj,tj=function(){function e(e){this._ptr=tH.mallocModelAndInitialize(e._ptr),this._ptr&&(this.parameters=new tz(this._ptr),this.parts=new tW(this._ptr),this.drawables=new tq(this._ptr),this.canvasinfo=new tY(this._ptr))}return e.fromMoc=function(i){return(i=new e(i))._ptr?i:null},e.prototype.update=function(){tH.updateModel(this._ptr)},e.prototype.release=function(){tH.free(this._ptr),this._ptr=0},e}(),tX.Model=tj,tY=function(e){var i,r,n,s,o,a,h;e&&(n=(i=new Float32Array(2)).length*i.BYTES_PER_ELEMENT,r=tH.malloc(n),(r=new Uint8Array(tQ.HEAPU8.buffer,r,n)).set(new Uint8Array(i.buffer)),o=(n=new Float32Array(2)).length*n.BYTES_PER_ELEMENT,s=tH.malloc(o),(s=new Uint8Array(tQ.HEAPU8.buffer,s,o)).set(new Uint8Array(n.buffer)),a=(o=new Float32Array(1)).length*o.BYTES_PER_ELEMENT,h=tH.malloc(a),(h=new Uint8Array(tQ.HEAPU8.buffer,h,a)).set(new Uint8Array(o.buffer)),tH.readCanvasInfo(e,r.byteOffset,s.byteOffset,h.byteOffset),i=new Float32Array(r.buffer,r.byteOffset,r.length),n=new Float32Array(s.buffer,s.byteOffset,s.length),o=new Float32Array(h.buffer,h.byteOffset,h.length),this.CanvasWidth=i[0],this.CanvasHeight=i[1],this.CanvasOriginX=n[0],this.CanvasOriginY=n[1],this.PixelsPerUnit=o[0],tH.free(r.byteOffset),tH.free(s.byteOffset),tH.free(h.byteOffset))},tX.CanvasInfo=tY,tz=function(e){this.count=tH.getParameterCount(e),i=tH.getParameterCount(e),this.ids=Array(i);for(var i,r,n=new Uint32Array(tQ.HEAPU32.buffer,tH.getParameterIds(e),i),s=0;s<n.length;s++)this.ids[s]=tQ.UTF8ToString(n[s]);i=tH.getParameterCount(e),this.minimumValues=new Float32Array(tQ.HEAPF32.buffer,tH.getParameterMinimumValues(e),i),i=tH.getParameterCount(e),this.types=new Int32Array(tQ.HEAP32.buffer,tH.getParameterTypes(e),i),i=tH.getParameterCount(e),this.maximumValues=new Float32Array(tQ.HEAPF32.buffer,tH.getParameterMaximumValues(e),i),i=tH.getParameterCount(e),this.defaultValues=new Float32Array(tQ.HEAPF32.buffer,tH.getParameterDefaultValues(e),i),i=tH.getParameterCount(e),this.values=new Float32Array(tQ.HEAPF32.buffer,tH.getParameterValues(e),i),i=tH.getParameterCount(e),this.keyCounts=new Int32Array(tQ.HEAP32.buffer,tH.getParameterKeyCounts(e),i),i=tH.getParameterCount(e),r=new Int32Array(tQ.HEAP32.buffer,tH.getParameterKeyCounts(e),i),this.keyValues=Array(i);var o=new Uint32Array(tQ.HEAPU32.buffer,tH.getParameterKeyValues(e),i);for(s=0;s<o.length;s++)this.keyValues[s]=new Float32Array(tQ.HEAPF32.buffer,o[s],r[s])},tX.Parameters=tz,tW=function(e){this.count=tH.getPartCount(e),i=tH.getPartCount(e),this.ids=Array(i);for(var i,r=new Uint32Array(tQ.HEAPU32.buffer,tH.getPartIds(e),i),n=0;n<r.length;n++)this.ids[n]=tQ.UTF8ToString(r[n]);i=tH.getPartCount(e),this.opacities=new Float32Array(tQ.HEAPF32.buffer,tH.getPartOpacities(e),i),i=tH.getPartCount(e),this.parentIndices=new Int32Array(tQ.HEAP32.buffer,tH.getPartParentPartIndices(e),i)},tX.Parts=tW,tq=function(){function e(e){this._modelPtr=e;for(var i,r=null,n=(this.count=tH.getDrawableCount(e),i=tH.getDrawableCount(e),this.ids=Array(i),new Uint32Array(tQ.HEAPU32.buffer,tH.getDrawableIds(e),i)),s=0;s<n.length;s++)this.ids[s]=tQ.UTF8ToString(n[s]);i=tH.getDrawableCount(e),this.constantFlags=new Uint8Array(tQ.HEAPU8.buffer,tH.getDrawableConstantFlags(e),i),i=tH.getDrawableCount(e),this.dynamicFlags=new Uint8Array(tQ.HEAPU8.buffer,tH.getDrawableDynamicFlags(e),i),i=tH.getDrawableCount(e),this.textureIndices=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableTextureIndices(e),i),i=tH.getDrawableCount(e),this.drawOrders=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableDrawOrders(e),i),i=tH.getDrawableCount(e),this.renderOrders=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableRenderOrders(e),i),i=tH.getDrawableCount(e),this.opacities=new Float32Array(tQ.HEAPF32.buffer,tH.getDrawableOpacities(e),i),i=tH.getDrawableCount(e),this.maskCounts=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableMaskCounts(e),i),i=tH.getDrawableCount(e),this.vertexCounts=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableVertexCounts(e),i),i=tH.getDrawableCount(e),this.indexCounts=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableIndexCounts(e),i),i=tH.getDrawableCount(e),this.multiplyColors=new Float32Array(tQ.HEAPF32.buffer,tH.getDrawableMultiplyColors(e),4*i),i=tH.getDrawableCount(e),this.screenColors=new Float32Array(tQ.HEAPF32.buffer,tH.getDrawableScreenColors(e),4*i),i=tH.getDrawableCount(e),this.parentPartIndices=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableParentPartIndices(e),i),i=tH.getDrawableCount(e),r=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableMaskCounts(e),i),this.masks=Array(i);var o=new Uint32Array(tQ.HEAPU32.buffer,tH.getDrawableMasks(e),i);for(s=0;s<o.length;s++)this.masks[s]=new Int32Array(tQ.HEAP32.buffer,o[s],r[s]);i=tH.getDrawableCount(e),r=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableVertexCounts(e),i),this.vertexPositions=Array(i);var a=new Uint32Array(tQ.HEAPU32.buffer,tH.getDrawableVertexPositions(e),i);for(s=0;s<a.length;s++)this.vertexPositions[s]=new Float32Array(tQ.HEAPF32.buffer,a[s],2*r[s]);i=tH.getDrawableCount(e),r=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableVertexCounts(e),i),this.vertexUvs=Array(i);var h=new Uint32Array(tQ.HEAPU32.buffer,tH.getDrawableVertexUvs(e),i);for(s=0;s<h.length;s++)this.vertexUvs[s]=new Float32Array(tQ.HEAPF32.buffer,h[s],2*r[s]);i=tH.getDrawableCount(e),r=new Int32Array(tQ.HEAP32.buffer,tH.getDrawableIndexCounts(e),i),this.indices=Array(i);var l=new Uint32Array(tQ.HEAPU32.buffer,tH.getDrawableIndices(e),i);for(s=0;s<l.length;s++)this.indices[s]=new Uint16Array(tQ.HEAPU16.buffer,l[s],r[s])}return e.prototype.resetDynamicFlags=function(){tH.resetDrawableDynamicFlags(this._modelPtr)},e}(),tX.Drawables=tq,tj=function(){function e(){}return e.hasBlendAdditiveBit=function(e){return!(1&~e)},e.hasBlendMultiplicativeBit=function(e){return!(2&~e)},e.hasIsDoubleSidedBit=function(e){return!(4&~e)},e.hasIsInvertedMaskBit=function(e){return!(8&~e)},e.hasIsVisibleBit=function(e){return!(1&~e)},e.hasVisibilityDidChangeBit=function(e){return!(2&~e)},e.hasOpacityDidChangeBit=function(e){return!(4&~e)},e.hasDrawOrderDidChangeBit=function(e){return!(8&~e)},e.hasRenderOrderDidChangeBit=function(e){return!(16&~e)},e.hasVertexPositionsDidChangeBit=function(e){return!(32&~e)},e.hasBlendColorDidChangeBit=function(e){return!(64&~e)},e}(),tX.Utils=tj,tj=function(){function e(){}return e.initializeAmountOfMemory=function(e){16777216<e&&tH.initializeAmountOfMemory(e)},e}(),tX.Memory=tj,tV="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,tZ=function(e){e=e||{};var i,r,n={};for(r in i=i||(void 0!==e?e:{}))i.hasOwnProperty(r)&&(n[r]=i[r]);var s,o,a,h,l="object"==A(window),u="function"==typeof importScripts,c="object"==(void 0===x?"undefined":A(x))&&"object"==A(x.versions)&&"string"==typeof x.versions.node&&!l&&!u,d=!l&&!c&&!u,f="",p=(c?(f=__dirname+"/",a=function(e,i){var r=K(e);return r||(s=s||require("fs"),e=(o=o||require("path")).normalize(e),r=s.readFileSync(e)),i?r:r.toString()},h=function(e){return S((e=(e=a(e,!0)).buffer?e:new Uint8Array(e)).buffer),e},1<x.argv.length&&x.argv[1].replace(/\\/g,"/"),x.argv.slice(2),x.on("uncaughtException",function(e){throw e}),x.on("unhandledRejection",j),i.inspect=function(){return"[Emscripten Module object]"}):d?("undefined"!=typeof read&&(a=function(e){var i=K(e);return i?Q(i):read(e)}),h=function(e){var i;if(!(i=K(e))){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));S("object"==A(i=read(e,"binary")))}return i},"undefined"!=typeof print&&((console="undefined"==typeof console?{}:console).log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||u)&&(u?f=self.location.href:document.currentScript&&(f=document.currentScript.src),f=0!==(f=tV||f).indexOf("blob:")?f.substr(0,f.lastIndexOf("/")+1):"",a=function(e){try{var i=new XMLHttpRequest;return i.open("GET",e,!1),i.send(null),i.responseText}catch(i){if(e=K(e))return Q(e);throw i}},u)&&(h=function(e){try{var i=new XMLHttpRequest;return i.open("GET",e,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}catch(i){if(e=K(e))return e;throw i}}),i.print||console.log.bind(console)),_=i.printErr||console.warn.bind(console);for(r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);function g(){return{exports:function(e,i,r){var n=new ArrayBuffer(8),s=new Int32Array(n),o=new Float32Array(n),a=new Float64Array(n);function h(e){o[0]=e}function l(){return o[0]}n=i.buffer;var u,c,d,f,p,_,g,v,y,b,x,A,E,w,S,P,M,I,C,R,O,D,$,L=new Uint8Array(n);return(n=function(e,i){var r,n;if(void 0===T)for(r=atob(i),n=0;n<r.length;n++)L[e+n]=r.charCodeAt(n);else for(r=T.from(i,"base64"),n=0;n<r.length;n++)L[e+n]=r[n]})(1024,"QW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGludGVycG9sYXRpb24gZm9yIGJsZW5kIHNoYXBlcy4gQ29tYmluYXRpb25Db3VudCBpcyAlZC4ACgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgc2l6ZSBpcyBpbnZhbGlkLgoAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbV11Sb3RhdGlvbkRlZm9ybWVyOiBOb3QgZm91bmQgdHJhbnNmb3JtZWQgRGlyZWN0aW9uLgoAW0NTTV0gW0VdVXBkYXRlRGVmb3JtZXJIaWVyYXJjaHkoKTogVW5rbm93biBEZWZvcm1lciBUeXBlLgoAJXMKACAgAE1PQzMAImFkZHJlc3MiIGlzIG51bGwuACUwMlggAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBGaWxlVHlwZSBpcyBpbnZhbGlkLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogVGhpcyBtb2MzIHZlciBpcyBpbnZhbGlkIFt2ZXI6JWRdLgoAInNpemUiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgAibW9kZWwiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBIZWFkZXIgc2VjdGlvbiBpcyBpbnZhbGlkLgoAIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AW0NTTV0gW0VdY3NtSGFzTW9jQ29uc2lzdGVuY3k6IERhdGEgc2VjdGlvbiBpcyBpbnZhbGlkLgoAIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgBbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gQ29ycnVwdGVkICBtb2MzIGZpbGUuCgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIFRoZSBDb3JlIHVuc3VwcG9ydCBsYXRlciB0aGFuIG1vYzMgdmVyOlslZF0uIFRoaXMgbW9jMyB2ZXIgaXMgWyVkXS4KACJtb2MiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUdldE1vY1ZlcnNpb24gaXMgZmFpbGVkLiBDb3JydXB0ZWQgbW9jMyBmaWxlLgoAInNpemUiIGlzIGludmFsaWQATGl2ZTJEIEN1YmlzbSBTREsgQ29yZSBWZXJzaW9uICVkLiVkLiVkAGNzbUdldE1vY1ZlcnNpb24AY3NtSGFzTW9jQ29uc2lzdGVuY3kAY3NtUmV2aXZlTW9jSW5QbGFjZQBjc21SZWFkQ2FudmFzSW5mbwBjc21HZXRTaXplb2ZNb2RlbABjc21Jbml0aWFsaXplTW9kZWxJblBsYWNlAGNzbVVwZGF0ZU1vZGVsAGNzbUdldFBhcmFtZXRlckNvdW50AGNzbUdldFBhcmFtZXRlcklkcwBjc21HZXRQYXJhbWV0ZXJUeXBlcwBjc21HZXRQYXJhbWV0ZXJNaW5pbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlck1heGltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyRGVmYXVsdFZhbHVlcwBjc21HZXRQYXJhbWV0ZXJWYWx1ZXMAY3NtR2V0UGFydENvdW50AGNzbUdldFBhcnRJZHMAY3NtR2V0UGFydE9wYWNpdGllcwBjc21HZXRQYXJ0UGFyZW50UGFydEluZGljZXMAY3NtR2V0RHJhd2FibGVDb3VudABjc21HZXREcmF3YWJsZUlkcwBjc21HZXREcmF3YWJsZUNvbnN0YW50RmxhZ3MAY3NtR2V0RHJhd2FibGVEeW5hbWljRmxhZ3MAY3NtR2V0RHJhd2FibGVUZXh0dXJlSW5kaWNlcwBjc21HZXREcmF3YWJsZURyYXdPcmRlcnMAY3NtR2V0RHJhd2FibGVSZW5kZXJPcmRlcnMAY3NtR2V0RHJhd2FibGVPcGFjaXRpZXMAY3NtR2V0RHJhd2FibGVNYXNrQ291bnRzAGNzbUdldERyYXdhYmxlTWFza3MAY3NtR2V0RHJhd2FibGVWZXJ0ZXhDb3VudHMAY3NtR2V0RHJhd2FibGVWZXJ0ZXhQb3NpdGlvbnMAY3NtR2V0RHJhd2FibGVWZXJ0ZXhVdnMAY3NtR2V0RHJhd2FibGVJbmRleENvdW50cwBjc21HZXREcmF3YWJsZUluZGljZXMAY3NtR2V0RHJhd2FibGVNdWx0aXBseUNvbG9ycwBjc21HZXREcmF3YWJsZVNjcmVlbkNvbG9ycwBjc21HZXREcmF3YWJsZVBhcmVudFBhcnRJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3MAY3NtR2V0UGFyYW1ldGVyS2V5Q291bnRzAGNzbUdldFBhcmFtZXRlcktleVZhbHVlcw=="),n(3228,"Cg=="),n(3267,"//////8="),n(3336,"LSsgICAwWDB4AChudWxsKQ=="),n(3360,"EQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),n(3392,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),n(3441,"Cw=="),n(3450,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),n(3499,"DA=="),n(3511,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),n(3557,"Dg=="),n(3569,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),n(3615,"EA=="),n(3627,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),n(3682,"EgAAABISEgAAAAAAAAk="),n(3731,"Cw=="),n(3743,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),n(3789,"DA=="),n(3801,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAuAAAAAKgaAAAAAAAAAwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),n(6675,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="),n(6824,"BQ=="),n(6836,"DQ=="),n(6860,"DgAAAA8AAABYHAAAAAQ="),n(6884,"AQ=="),n(6899,"Cv////8="),n(7156,"gCA="),u={Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},c=i.buffer,d=(n=e).memory,f=new u.Int8Array(c),p=new u.Int16Array(c),_=new u.Int32Array(c),g=new u.Uint8Array(c),v=new u.Uint16Array(c),y=new u.Uint32Array(c),b=new u.Float32Array(c),x=new u.Float64Array(c),A=u.Math.imul,E=u.Math.fround,w=u.Math.abs,S=u.Math.clz32,P=u.Math.min,u.Math.max,M=u.Math.floor,u.Math.ceil,u.Math.sqrt,n.abort,u.NaN,I=u.Infinity,C=n.a,R=n.b,O=n.c,D=5251744,$=0,r[1]=function(e,i,r,n,s){e|=0,i|=0,r|=0,n|=0,s|=0;var o,a,h,l,u,c,d,f,p,g,v,y,T,S,P,M,I,C,R,O,$,L,F,k,N=0,U=E(0),G=E(0),X=0,V=E(0),H=E(0),j=E(0),Y=E(0),z=E(0),W=E(0),q=E(0),Z=E(0),Q=E(0),J=E(0),K=E(0),tt=E(0),te=E(0),ti=E(0),tr=E(0),tn=E(0),ts=E(0),to=E(0),ta=E(0),th=(E(0),E(0),E(0),E(0),E(0),E(0),E(0),E(0),E(0),0);if(D=k=D-32|0,1<=(0|s))for(o=_[16+(_[e+308>>2]+(i<<5)|0)>>2],N=_[e+60>>2]+A(o,24)|0,i=(a=_[N+8>>2])+-1|0,y=(u=_[N+4>>2])+-1|0,T=p=(o=_[_[e+152>>2]+(o<<2)>>2])+(a<<3)|0,S=g=o+((f=A(u,h=a+1|0))<<3)|0,P=v=o+(a+f<<3)|0,F=_[N+12>>2],c=E(0|u),d=E(0|a),e=0;G=E((j=b[4+(N=(l=e<<3)+r|0)>>2])*c),U=E((Y=b[N>>2])*d),N=j>=E(1),G=!(j<E(0)^1)||N|Y>=E(1)|Y<E(0)?(th||(z=E((Q=b[4+P>>2])-(M=b[o+4>>2])),W=E((I=b[4+T>>2])-(C=b[4+S>>2])),J=E(E(z-W)*E(.5)),q=E((R=b[v>>2])-(O=b[o>>2])),Z=E(($=b[p>>2])-(L=b[g>>2])),K=E(E(q-Z)*E(.5)),W=E(E(W+z)*E(.5)),Z=E(E(Z+q)*E(.5)),th=1,z=E(E(E(E(E(M+I)+C)+Q)*E(.25))-E(z*E(.5))),q=E(E(E(E(E(O+$)+L)+R)*E(.25))-E(q*E(.5)))),j<E(3)^1|Y>E(-2)^1|Y<E(3)^1|j>E(-2)^1?(b[n+l>>2]=E(j*K)+E(E(Y*Z)+q),U=E(j*J),E(E(Y*W)+z)):(Y<=E(0)?j<=E(0)?(H=E(E(j+E(2))*E(.5)),V=E(E(Y+E(2))*E(.5)),U=E(J+J),to=E(z-U),G=E(K+K),ta=E(q-G),tn=E(z-E(W+W)),tt=E(tn-U),ts=E(q-E(Z+Z)),te=E(ts-G),ti=b[o+4>>2],tr=b[o>>2]):N?(U=E(J*E(3)),G=E(z-E(W+W)),tn=E(U+G),tt=E(K*E(3)),te=E(q-E(Z+Z)),ts=E(tt+te),H=E(E(j+E(-1))*E(.5)),V=E(E(Y+E(2))*E(.5)),ti=E(U+z),tr=E(tt+q),tt=E(J+G),te=E(K+te),to=b[4+S>>2],ta=b[g>>2]):(U=E(z-E(W+W)),N=y,X=E(w(G))<E(2147483648)?~~G:-2147483648,H=E(0|(N=(0|X)==(0|u)?N:X)),V=E(H/c),tt=E(E(V*J)+U),Q=E(V*K),V=E(q-E(Z+Z)),te=E(Q+V),j=E(E(0|(X=N+1|0))/c),tn=E(E(j*J)+U),ts=E(E(j*K)+V),V=E(E(Y+E(2))*E(.5)),H=E(G-H),to=b[(N=o+(A(N,h)<<3)|0)+4>>2],ta=b[N>>2],ti=b[(N=o+(A(X,h)<<3)|0)+4>>2],tr=b[N>>2]):Y>=E(1)?j<=E(0)?(H=E(E(j+E(2))*E(.5)),V=E(E(Y+E(-1))*E(.5)),U=E(J+J),tt=E(E(W+z)-U),G=E(K+K),te=E(E(Z+q)-G),ti=E(E(W*E(3))+z),to=E(ti-U),tr=E(E(Z*E(3))+q),ta=E(tr-G),tn=b[4+T>>2],ts=b[p>>2]):N?(U=E(J*E(3)),tn=E(U+E(W+z)),G=E(K*E(3)),ts=E(G+E(Z+q)),Q=U,U=E(E(W*E(3))+z),ti=E(Q+U),Q=G,G=E(E(Z*E(3))+q),tr=E(Q+G),H=E(E(j+E(-1))*E(.5)),V=E(E(Y+E(-1))*E(.5)),to=E(J+U),ta=E(K+G),tt=b[4+P>>2],te=b[v>>2]):(U=E(E(W*E(3))+z),N=y,X=E(w(G))<E(2147483648)?~~G:-2147483648,H=E(0|(N=(0|X)==(0|u)?N:X)),V=E(H/c),to=E(E(V*J)+U),Q=E(V*K),V=E(E(Z*E(3))+q),ta=E(Q+V),j=E(E(0|(X=N+1|0))/c),ti=E(E(j*J)+U),tr=E(E(j*K)+V),V=E(E(Y+E(-1))*E(.5)),H=E(G-H),tt=b[(N=o+(A(N,h)+a<<3)|0)+4>>2],te=b[N>>2],tn=b[(N=o+(A(X,h)+a<<3)|0)+4>>2],ts=b[N>>2]):j<=E(0)?(H=E(E(j+E(2))*E(.5)),N=i,X=E(w(G=U))<E(2147483648)?~~U:-2147483648,U=E(0|(N=(0|X)==(0|a)?N:X)),V=E(G-U),U=E(U/d),G=E(J+J),tt=E(E(E(U*W)+z)-G),Q=E(E(U*Z)+q),U=E(K+K),te=E(Q-U),j=E(E(0|(X=N+1|0))/d),to=E(E(E(j*W)+z)-G),ta=E(E(E(j*Z)+q)-U),tn=b[4+(N=o+(N<<3)|0)>>2],ts=b[N>>2],ti=b[4+(N=o+(X<<3)|0)>>2],tr=b[N>>2]):N?(Q=G=E(J*E(3)),N=i,X=E(w(U))<E(2147483648)?~~U:-2147483648,V=E(0|(N=(0|X)==(0|a)?N:X)),H=E(V/d),tn=E(Q+E(E(H*W)+z)),Y=E(K*E(3)),ts=E(Y+E(E(H*Z)+q)),Q=G,G=E(E(0|(X=N+1|0))/d),ti=E(Q+E(E(G*W)+z)),tr=E(Y+E(E(G*Z)+q)),H=E(E(j+E(-1))*E(.5)),V=E(U-V),tt=b[4+(N=o+(N+f<<3)|0)>>2],te=b[N>>2],to=b[4+(N=o+(X+f<<3)|0)>>2],ta=b[N>>2]):(x[16+k>>3]=j,_[k>>2]=e,x[8+k>>3]=Y,B(4,1107,k)),E(V+H)<=E(1)?(b[n+l>>2]=E(te+E(E(ta-te)*V))+E(E(ts-te)*H),U=E(tt+E(E(to-tt)*V)),E(E(tn-tt)*H)):(U=E(E(1)-V),G=E(E(1)-H),b[n+l>>2]=E(tr+E(E(ts-tr)*U))+E(E(ta-tr)*G),U=E(ti+E(E(tn-ti)*U)),E(E(to-ti)*G)))):(N=E(w(Q=G))<E(2147483648)?~~G:-2147483648,H=E(Q-E(0|N)),X=E(w(G=U))<E(2147483648)?~~U:-2147483648,V=E(G-E(0|X)),N=X+A(N,h)|0,F?(U=E(E(1)-H),G=E(E(1)-V),X=o+(N<<3)|0,N=o+(N+h<<3)|0,b[n+l>>2]=E(E(E(U*E(G*b[X>>2]))+E(U*E(V*b[X+8>>2])))+E(H*E(G*b[N>>2])))+E(H*E(V*b[N+8>>2])),U=E(E(E(U*E(G*b[X+4>>2]))+E(U*E(V*b[X+12>>2])))+E(H*E(G*b[N+4>>2]))),E(H*E(V*b[N+12>>2]))):E(V+H)<=E(1)?(U=E(E(E(1)-V)-H),X=o+(N<<3)|0,N=o+(N+h<<3)|0,b[n+l>>2]=E(E(U*b[X>>2])+E(V*b[X+8>>2]))+E(H*b[N>>2]),U=E(E(U*b[X+4>>2])+E(V*b[X+12>>2])),E(H*b[N+4>>2])):(U=E(E(V+E(-1))+H),X=o+(N+h<<3)|0,G=E(E(1)-V),j=E(E(1)-H),N=o+(N<<3)|0,b[n+l>>2]=E(E(U*b[X+8>>2])+E(G*b[X>>2]))+E(j*b[N+8>>2]),U=E(E(U*b[X+12>>2])+E(G*b[X+4>>2])),E(j*b[N+12>>2]))),b[4+(n+l|0)>>2]=U+G,(0|s)!=(0|(e=e+1|0)););D=32+k|0},r[2]=function(e,i){e|=0,i|=0;var n=0,s=0,o=0,a=0,h=0,l=E(0),u=0,c=0,d=(E(0),0),f=0;a=_[e+320>>2],n=_[e+316>>2],h=_[e+308>>2],-1==(0|(s=_[8+(o=h+(i<<5)|0)>>2]))?(_[(f=n)+(n=i<<2)>>2]=_[_[e+148>>2]+(_[o+16>>2]<<2)>>2],_[n+a>>2]=1065353216):(u=_[o+16>>2],c=_[_[e+152>>2]+(u<<2)>>2],r[_[24+(h+(s<<5)|0)>>2]](e,s,c,c,_[16+(_[e+60>>2]+A(u,24)|0)>>2]),l=b[_[e+148>>2]+(_[o+16>>2]<<2)>>2],o=_[o+8>>2]<<2,b[(s=i<<2)+n>>2]=l*b[o+n>>2],_[s+a>>2]=_[o+a>>2]),4<=g[_[e>>2]+4|0]&&(a=i<<2,n=_[e+308>>2]+(i<<5)|0,s=_[n+16>>2]<<2,o=_[e+328>>2],i=_[e+324>>2],-1==(0|(h=_[n+8>>2]))?(h=_[e+156>>2],_[(n=a<<2)+i>>2]=_[h+(s<<=2)>>2],_[(u=4|n)+i>>2]=_[(c=4|s)+h>>2],_[(d=8|n)+i>>2]=_[h+(f=8|s)>>2],_[i+((a|=3)<<2)>>2]=1065353216,e=_[e+160>>2],_[n+o>>2]=_[e+s>>2],_[o+u>>2]=_[e+c>>2],_[o+d>>2]=_[e+f>>2]):(s=(c=s<<2)+_[e+156>>2]|0,b[(n=(u=a<<2)+i|0)>>2]=b[s>>2]*b[(h=(d=h<<4)+i|0)>>2],b[n+4>>2]=b[s+4>>2]*b[h+4>>2],b[n+8>>2]=b[s+8>>2]*b[h+8>>2],_[i+((a|=3)<<2)>>2]=1065353216,f=b[(e=c+_[e+160>>2]|0)>>2],l=b[(n=o+d|0)>>2],b[(i=o+u|0)>>2]=E(f+l)-E(f*l),f=b[e+4>>2],l=b[n+4>>2],b[i+4>>2]=E(f+l)-E(f*l),f=b[e+8>>2],l=b[n+8>>2],b[i+8>>2]=E(f+l)-E(f*l)),_[o+(a<<2)>>2]=1065353216)},r[3]=function(e,i,r,n,o){e|=0,i|=0,r|=0,n|=0,o|=0;var a,l,u,c,d,f=0,p=(E(0),E(0),E(0),E(0),E(0),E(0),E(0),E(0),f=(i=_[16+(_[e+308>>2]+(i<<5)|0)>>2])<<2,function(e){var i,r,n,o,a=E(0);D=n=D-16|0,h(e);t:if((i=2147483647&(o=s[0]))>>>0<=1061752794)a=E(1),i>>>0<964689920||(a=X(+e));else if(i>>>0<=1081824209)r=+e,a=1075235812<=i>>>0?E(-X(((0|o)<0?3.141592653589793:-3.141592653589793)+r)):G((0|o)<=-1?1.5707963267948966+r:1.5707963267948966-r);else if(i>>>0<=1088565717)a=1085271520<=i>>>0?X(+e+((0|o)<0?6.283185307179586:-6.283185307179586)):G((0|o)<=-1?-4.71238898038469-+e:+e-4.71238898038469);else if(a=E(e-e),!(2139095040<=i>>>0)){if((i=3&tm(e,8+n|0))>>>0<=2){switch(i-1|0){default:a=X(x[8+n>>3]);break t;case 0:a=G(-x[8+n>>3]);break t;case 1:}a=E(-X(x[8+n>>3]))}else a=G(x[8+n>>3])}return D=16+n|0,a}(y=E(E(E(b[4+(_[e+168>>2]+A(i,12)|0)>>2]+b[f+_[e+284>>2]>>2])*E(3.1415927410125732))/E(180)))),g=b[f+_[e+272>>2]>>2],v=_[f+_[e+292>>2]>>2],y=function(e){var i,r,n,o=0;D=r=D-16|0,h(e);t:if((i=2147483647&(n=s[0]))>>>0<=1061752794)i>>>0<964689920||(e=G(+e));else if(i>>>0<=1081824209)o=+e,e=i>>>0<=1075235811?(0|n)<=-1?E(-X(o+1.5707963267948966)):X(o+-1.5707963267948966):G(-(((0|n)<0?3.141592653589793:-3.141592653589793)+o));else if(i>>>0<=1088565717)o=+e,e=i>>>0<=1085271519?(0|n)<=-1?X(o+4.71238898038469):E(-X(o+-4.71238898038469)):G(((0|n)<0?6.283185307179586:-6.283185307179586)+o);else if(2139095040<=i>>>0)e=E(e-e);else if((i=3&tm(e,8+r|0))>>>0<=2){switch(i-1|0){default:e=G(x[8+r>>3]);break t;case 0:e=X(x[8+r>>3]);break t;case 1:}e=G(-x[8+r>>3])}else e=E(-X(x[8+r>>3]));return D=16+r|0,e}(y);if((i=0)<(0|o))for(p=E(g*p),l=E(v?-1:1),c=E(p*l),a=_[f+_[e+288>>2]>>2]?E(-1):E(1),d=E(E(g*y)*a),p=E(p*a),g=E(E(g*E(-y))*l),y=b[f+_[e+280>>2]>>2],l=b[f+_[e+276>>2]>>2];f=(e=i<<3)+n|0,a=b[(e=e+r|0)>>2],u=b[e+4>>2],b[f+4>>2]=y+E(E(d*a)+E(c*u)),b[f>>2]=l+E(E(p*a)+E(g*u)),(0|o)!=(0|(i=i+1|0)););},r[4]=function(e,i){e|=0,i|=0;var n,s,o,a,h,l,u=0,c=0,d=0,f=E(0),p=0,v=0,y=E(0),x=0,T=0,A=0;if(E(0),E(0),E(0),E(0),D=l=D+-64|0,x=_[e+320>>2],T=_[e+316>>2],c=_[e+308>>2],-1==(0|(p=_[8+(d=c+(i<<5)|0)>>2])))u=_[d+16>>2]<<2,_[(c=i<<2)+T>>2]=_[u+_[e+268>>2]>>2],_[c+x>>2]=_[u+_[e+272>>2]>>2];else{u=_[d+16>>2]<<2,A=_[u+_[e+276>>2]>>2],_[24+l>>2]=A,u=_[u+_[e+280>>2]>>2],_[28+l>>2]=u,_[16+l>>2]=0,s=1==_[12+(v=c+(p<<5)|0)>>2]?E(-10):E(-.10000000149011612),b[20+l>>2]=s,_[60+l>>2]=u,_[56+l>>2]=A,r[_[v+24>>2]](e,p,56+l|0,48+l|0,1),f=E(1),c=9;t:{for(;;){if(u=c,y=E(f*E(0)),b[32+l>>2]=y+b[56+l>>2],n=E(s*f),b[36+l>>2]=n+b[60+l>>2],r[_[v+24>>2]](e,p,32+l|0,40+l|0,1),o=E(b[44+l>>2]-b[52+l>>2]),b[44+l>>2]=o,a=E(b[40+l>>2]-b[48+l>>2]),b[40+l>>2]=a,o!=E(0)||a!=E(0)){c=_[44+l>>2],_[8+l>>2]=_[40+l>>2],_[12+l>>2]=c;break t}if(b[32+l>>2]=b[56+l>>2]-y,b[36+l>>2]=b[60+l>>2]-n,r[_[v+24>>2]](e,p,32+l|0,40+l|0,1),y=E(b[40+l>>2]-b[48+l>>2]),b[40+l>>2]=y,n=E(b[44+l>>2]-b[52+l>>2]),(b[44+l>>2]=n)!=E(0)||y!=E(0)){b[12+l>>2]=-n,b[8+l>>2]=-y;break t}if(c=u+-1|0,f=E(f*E(.10000000149011612)),!u)break}B(3,1311,0)}f=function(e,i){var r=E(0);if((r=E(tp(b[4+e>>2],b[e>>2])-tp(b[4+i>>2],b[i>>2])))<E(-3.1415927410125732))for(;(r=E(r+E(6.2831854820251465)))<E(-3.1415927410125732););if(r>E(3.1415927410125732))for(;(r=E(r+E(-6.2831854820251465)))>E(3.1415927410125732););return r}(16+l|0,8+l|0),r[_[v+24>>2]](e,_[d+8>>2],24+l|0,24+l|0,1),c=_[d+16>>2]<<2,_[c+_[e+276>>2]>>2]=_[24+l>>2],_[c+_[e+280>>2]>>2]=_[28+l>>2],b[(u=c+_[e+284>>2]|0)>>2]=b[u>>2]+E(E(f*E(-180))/E(3.1415927410125732)),d=_[d+8>>2]<<2,b[(u=i<<2)+T>>2]=b[c+_[e+268>>2]>>2]*b[d+T>>2],f=E(b[(c=c+_[e+272>>2]|0)>>2]*b[d+x>>2]),b[u+x>>2]=f,b[c>>2]=f}4<=g[_[e>>2]+4|0]&&(u=i<<2,d=_[e+308>>2]+(i<<5)|0,p=_[d+16>>2]<<2,c=_[e+328>>2],i=_[e+324>>2],-1==(0|(v=_[d+8>>2]))?(v=_[e+296>>2],_[(d=u<<2)+i>>2]=_[v+(p<<=2)>>2],_[(x=4|d)+i>>2]=_[(T=4|p)+v>>2],_[(A=8|d)+i>>2]=_[v+(h=8|p)>>2],_[i+((u|=3)<<2)>>2]=1065353216,e=_[e+300>>2],_[c+d>>2]=_[e+p>>2],_[c+x>>2]=_[e+T>>2],_[c+A>>2]=_[e+h>>2]):(p=(T=p<<2)+_[e+296>>2]|0,b[(d=(x=u<<2)+i|0)>>2]=b[p>>2]*b[(v=(A=v<<4)+i|0)>>2],b[d+4>>2]=b[p+4>>2]*b[v+4>>2],b[d+8>>2]=b[p+8>>2]*b[v+8>>2],_[i+((u|=3)<<2)>>2]=1065353216,f=b[(e=T+_[e+300>>2]|0)>>2],y=b[(d=c+A|0)>>2],b[(i=c+x|0)>>2]=E(f+y)-E(f*y),f=b[e+4>>2],y=b[d+4>>2],b[i+4>>2]=E(f+y)-E(f*y),f=b[e+8>>2],y=b[d+8>>2],b[i+8>>2]=E(f+y)-E(f*y)),_[c+(u<<2)>>2]=1065353216),D=64+l|0},r[5]=function(e,i){return e|=0,i|=0,E(0),E(0),0|((e=b[e>>2])<(i=b[i>>2])?-1:i<e)},r[6]=function(e,i,r,n){e|=0,i|=0,r|=0,n|=0;var s=0,o=0,a=E(0),h=0,l=0,u=0,c=0,d=0;if(1<=(0|(h=_[e+8>>2])))for(u=_[e+12>>2],l=_[e+20>>2];b[(o=s<<2)+u>>2]=b[i+o>>2]*b[o+l>>2],(0|(s=s+1|0))<(0|h););if(!((0|(h=_[e>>2]))<1)){if(u=_[e+4>>2],n)for(o=i=0;;){if(_[n>>2]){if((0|(s=_[(l=i<<2)+_[e+16>>2]>>2]))<1)a=E(0);else for(c=s+o|0,d=_[e+12>>2],a=E(0),s=o;a=E(a+b[d+(s<<2)>>2]),(0|(s=s+1|0))<(0|c););b[r+l>>2]=a}if(n=n+4|0,o=_[u+(i<<2)>>2]+o|0,!((0|(i=i+1|0))<(0|h)))break}else for(l=_[e+16>>2],i=n=0;;){if((0|(s=_[(o=n<<2)+l>>2]))<=0)a=E(0);else for(c=i+s|0,d=_[e+12>>2],a=E(0),s=i;a=E(a+b[d+(s<<2)>>2]),(0|(s=s+1|0))<(0|c););if(b[r+o>>2]=a,i=_[o+u>>2]+i|0,!((0|(n=n+1|0))<(0|h)))break}}},r[7]=function(e,i,r,n){e|=0,i|=0,r|=0,n|=0;var s=0,o=E(0),a=0,h=0,l=0,u=0,c=0;if(1<=(0|(u=_[e+8>>2])))for(h=_[e+12>>2],l=_[e+20>>2];b[(a=s<<2)+h>>2]=b[i+a>>2]*b[a+l>>2],(0|(s=s+1|0))<(0|u););if(!((0|(s=_[e>>2]))<1)){if(u=_[e+4>>2],n)for(a=i=0;;){if(_[n>>2]){if((0|(s=_[(h=i<<2)+_[e+16>>2]>>2]))<1)o=E(0);else for(l=s+a|0,c=_[e+12>>2],o=E(0),s=a;o=E(o+b[c+(s<<2)>>2]),(0|(s=s+1|0))<(0|l););s=r+h|0,o=E(o+E(.0010000000474974513)),h=E(w(o))<E(2147483648)?~~o:-2147483648,_[s>>2]=h,s=_[e>>2]}if(n=n+4|0,a=_[u+(i<<2)>>2]+a|0,!((0|(i=i+1|0))<(0|s)))break}else for(h=_[e+16>>2],i=n=0;;){if((0|(s=_[(a=n<<2)+h>>2]))<=0)o=E(0);else for(l=i+s|0,c=_[e+12>>2],o=E(0),s=i;o=E(o+b[c+(s<<2)>>2]),(0|(s=s+1|0))<(0|l););if(s=r+a|0,o=E(o+E(.0010000000474974513)),l=E(w(o))<E(2147483648)?~~o:-2147483648,_[s>>2]=l,i=_[a+u>>2]+i|0,!((0|(n=n+1|0))<_[e>>2]))break}}},r[8]=function(e,i,r,n,s,o){e|=0,i|=0,r|=0,n|=0,s|=0,o|=0;var a,h,l=0,u=0,c=0,d=0,f=0,p=0,g=0,v=0,y=0,x=0,T=E(0),w=0,S=_[e>>2];if(!((0|S)<1)){if(a=s<<2,h=_[e+4>>2],o)for(;;){if(_[o>>2]&&(c=_[(l=d<<2)+_[e+16>>2]>>2],g=_[r+l>>2],(l=(0|(v=A(u=_[n+l>>2],s)))<1)||V(g,0,A(u,a)),!(l|(0|c)<1)))for(y=c+p|0,x=_[e+20>>2],l=p;;){for(T=b[(u=l<<2)+x>>2],w=_[i+u>>2],f=0;b[(u=(c=f<<2)+g|0)>>2]=b[u>>2]+E(T*b[c+w>>2]),(0|v)!=(0|(f=f+1|0)););if(!((0|(l=l+1|0))<(0|y)))break}if(o=o+4|0,p=_[(d<<2)+h>>2]+p|0,!((0|(d=d+1|0))<(0|S)))break}else for(o=0;;){if(c=_[(d=o<<2)+_[e+16>>2]>>2],g=_[r+d>>2],(l=(0|(v=A(u=_[n+d>>2],s)))<1)||V(g,0,A(u,a)),!(l|(0|c)<=0))for(y=c+p|0,x=_[e+20>>2],l=p;;){for(T=b[(u=l<<2)+x>>2],w=_[i+u>>2],f=0;b[(u=(c=f<<2)+g|0)>>2]=b[u>>2]+E(T*b[c+w>>2]),(0|v)!=(0|(f=f+1|0)););if(!((0|(l=l+1|0))<(0|y)))break}if(p=_[d+h>>2]+p|0,!((0|(o=o+1|0))<(0|S)))break}}},r[9]=function(e){var i,r,n,s=0,o=0,a=0,h=0;if(!(_[648+(e|=0)>>2]||(0|(s=_[e+332>>2]))<1))for(r=(o=_[e+336>>2])+A(s,20)|0,s=_[e+424>>2],h=_[e+444>>2];;){if(_[s>>2]&&!((0|(a=_[o+16>>2]))<(e=1)))for(a<<=1,n=_[h>>2];b[(i=(e<<2)+n|0)>>2]=-b[i>>2],(0|(e=e+2|0))<(0|a););if(h=h+4|0,s=s+4|0,!((o=o+20|0)>>>0<r>>>0))break}},r[10]=function(e,i,r){var n;return U(n=_[20+(e|=0)>>2],i|=0,i=(r|=0)>>>0<(i=_[e+16>>2]-n|0)>>>0?r:i),_[e+20>>2]=i+_[e+20>>2],0|r},r[11]=function(e,i,r,n,o,h){e|=0,i=+i,r|=0,n|=0,o|=0,h|=0;var l,u,c,d,p,v,y=0,b=0,x=0,T=0,E=0,S=0,P=0,M=0,I=0,C=0,R=0,O=0,L=0,F=0,B=0;if(_[44+(D=p=D-560|0)>>2]=0,l=+i,a[0]=l,y=0|s[1],d=4294967295<s[0]>>>0?0:1,v=(0|y)<-1||(0|y)<=-1&&d?(u=i=-i,a[0]=u,y=0|s[1],s[0],F=1,3840):2048&o?(F=1,3843):(F=1&o)?3846:3841,2146435072&~y){if(i=function e(i,r){var n,o,h,l=0;if(n=+i,a[0]=n,l=0|s[1],o=0|s[0],2047!=(0|(l=(h=l)>>>20&2047))){if(!l)return l=r,r=0==i?0:(i=e(18446744073709552e3*i,r),_[r>>2]+-64|0),_[l>>2]=r,i;_[r>>2]=l+-1022,s[0]=0|o,s[1]=-2146435073&h|1071644672,i=+a[0]}return i}(i,44+p|0),0!=(i+=i)&&(_[44+p>>2]=_[44+p>>2]+-1),c=16+p|0,97==(0|(d=32|h))){if(R=(C=32&h)?9+v|0:v,!(11<n>>>0)&&(y=12-n|0)){for(O=8;O*=16,y=y+-1|0;);i=45==g[0|R]?-(O+(-i-O)):i+O-O}for((0|c)==(0|(y=z((x=(y=_[44+p>>2])>>31)^y+x,0,c)))&&(f[15+p|0]=48,y=15+p|0),E=2|F,x=_[44+p>>2],f[0|(I=y+-2|0)]=h+15,f[y+-1|0]=(0|x)<0?45:43,y=8&o,b=16+p|0;h=b,M=C,x=2147483648>w(i)?~~i:-2147483648,f[0|b]=M|g[x+3824|0],1!=((b=h+1|0)-(16+p|0)|0)|(0==(i=16*(i-(0|x)))?!(y|0<(0|n)):0)||(f[h+1|0]=46,b=h+2|0),0!=i;);N(e,32,r,S=(h=!n|(0|n)<=((b-p|0)-18|0)?((c-(16+p|0)|0)-I|0)+b|0:2+((n+c|0)-I|0)|0)+E|0,o),k(e,R,E),N(e,48,r,S,65536^o),k(e,16+p|0,n=b-(16+p|0)|0),N(e,48,h-((y=n)+(n=c-I|0)|0)|0,0,0),k(e,I,n)}else{for(y=(0|n)<0,0==i?T=_[44+p>>2]:(T=_[44+p>>2]+-28|0,_[44+p>>2]=T,i*=268435456),P=y?6:n,x=C=(0|T)<0?48+p|0:336+p|0;x=(n=x)+4|0,0!=(i=1e9*(i-((_[n>>2]=y=i<4294967296&0<=i?~~i>>>0:0)>>>0))););if((0|T)<1)y=x,b=C;else for(b=C;;){if(I=(0|T)<29?T:29,!((y=x+-4|0)>>>0<b>>>0)){for(n=I,M=0;B=M,M=_[(R=y)>>2],E=31&n,E=32<=(63&n)>>>(S=0)?(T=M<<E,0):(T=(1<<E)-1&M>>>32-E,M<<E),S=T+S|0,S=(M=B+E|0)>>>0<E>>>0?S+1|0:S,B=R,R=tM(M=tI(E=M,S,1e9),$,1e9),_[B>>2]=E-R,b>>>0<=(y=y+-4|0)>>>0;);(n=M)&&(_[(b=b+-4|0)>>2]=n)}for(;b>>>0<(y=x)>>>0&&!_[(x=y+-4|0)>>2];);if(T=_[44+p>>2]-I|0,x=y,!(0<(0|(_[44+p>>2]=T))))break}if((0|T)<=-1)for(L=1+((P+25|0)/9|0)|0,I=102==(0|d);;){if(M=(0|T)<-9?9:0-T|0,y>>>0<=b>>>0)b=_[b>>2]?b:b+4|0;else{for(R=1e9>>>M,E=~(-1<<M),T=0,x=b;n=_[x>>2],_[x>>2]=(n>>>M)+T,T=A(R,n&E),(x=x+4|0)>>>0<y>>>0;);b=_[b>>2]?b:b+4|0,T&&(_[y>>2]=T,y=y+4|0)}if(T=M+_[44+p>>2]|0,y=(0|L)<y-(n=I?C:b)>>2?n+(L<<2)|0:y,!((0|(_[44+p>>2]=T))<0))break}if(!(y>>>(x=0)<=b>>>0||(x=A(C-b>>2,9),(n=_[b>>2])>>>0<(T=10))))for(;x=x+1|0,(T=A(T,10))>>>0<=n>>>0;);if((0|(n=(P-(102==(0|d)?0:x)|0)-(103==(0|d)&!!(0|P))|0))<(A(y-C>>2,9)+-9|0)){if(S=(C+((n=(0|(E=n+9216|0))/9|0)<<2)|0)-4092|0,T=10,(0|(n=1+(E-A(n,9)|0)|0))<=8)for(;T=A(T,10),9!=(0|(n=n+1|0)););if(L=S+4|0,((I=(R=_[S>>2])-A(T,E=(R>>>0)/(T>>>0)|0)|0)||(0|L)!=(0|y))&&(O=I>>>0<(n=T>>>1)>>>0?.5:(0|y)==(0|L)&&(0|n)==(0|I)?1:1.5,i=1&E?9007199254740994:9007199254740992,!F|45!=g[0|v]||(O=-O,i=-i),_[S>>2]=n=R-I|0,i+O!=i)){if(1e9<=(_[S>>2]=n=n+T|0)>>>0)for(;(S=S+-4|(_[S>>2]=0))>>>0<b>>>0&&(_[(b=b+-4|0)>>2]=0),n=_[S>>2]+1|0,999999999<(_[S>>2]=n)>>>0;);if(x=A(C-b>>2,9),!((n=_[b>>2])>>>0<(T=10)))for(;x=x+1|0,(T=A(T,10))>>>0<=n>>>0;);}y=(n=S+4|0)>>>0<y>>>0?n:y}t:{for(;;){if((I=y)>>>(R=0)<=b>>>0)break t;if(_[(y=I+-4|0)>>2])break}R=1}if(103!=(0|d))E=8&o;else if(P=((n=(0|x)<(0|(y=P||1))&-5<(0|x))?-1^x:-1)+y|0,h=(n?-1:-2)+h|0,!(E=8&o)){if(y=9,R&&(E=_[I+-4>>2])&&!((E>>>(y=0))%(n=10)))for(;y=y+1|0,!((E>>>0)%((n=A(n,10))>>>0)););n=A(I-C>>2,9)+-9|0,P=102==(32|h)?((E=0)|P)<(0|(n=0<(0|(n=n-y|0))?n:0))?P:n:((E=0)|P)<(0|(n=0<(0|(n=(n+x|0)-y|0))?n:0))?P:n}if(S=!!(0|(T=P|E)),n=e,B=r,y=0<(0|x)?x:0,102!=(0|(M=32|h))){if((c-(y=z((y=x>>31)+x^y,0,c))|0)<=1)for(;f[0|(y=y+-1|0)]=48,(c-y|0)<2;);f[0|(L=y+-2|0)]=h,f[y+-1|0]=(0|x)<0?45:43,y=c-L|0}if(N(n,32,B,S=1+(y+(S+(P+F|0)|0)|0)|0,o),k(e,v,F),N(e,48,r,S,65536^o),102==(0|M)){for(n=16+p|8,x=16+p|9,b=h=C>>>0<b>>>0?C:b;;){if(y=z(_[b>>2],0,x),(0|h)!=(0|b)){if(!(y>>>0<=16+p>>>0))for(;f[0|(y=y+-1|0)]=48,16+p>>>0<y>>>0;);}else(0|y)==(0|x)&&(f[24+p|0]=48,y=n);if(k(e,y,x-y|0),!((b=b+4|0)>>>0<=C>>>0))break}T&&k(e,3875,1);t:if(!((0|P)<1|I>>>0<=b>>>0))for(;;){if(16+p>>>0<(y=z(_[b>>2],0,x))>>>0)for(;f[0|(y=y+-1|0)]=48,16+p>>>0<y>>>0;);if(k(e,y,(0|P)<9?P:9),P=P+-9|0,I>>>0<=(b=b+4|0)>>>0)break t;if(!(0<(0|P)))break}N(e,48,P+9|0,9,0)}else{t:if(!((0|P)<0))for(h=R?I:b+4|0,n=16+p|8,C=16+p|9,x=b;;){if((0|C)==(0|(y=z(_[x>>2],0,C)))&&(f[24+p|0]=48,y=n),(0|b)!=(0|x)){if(!(y>>>0<=16+p>>>0))for(;f[0|(y=y+-1|0)]=48,16+p>>>0<y>>>0;);}else k(e,y,1),y=y+1|0,(0|P)<1&&!E||k(e,3875,1);if(k(e,M=y,(0|(y=C-y|0))<(0|P)?y:P),P=P-y|0,h>>>0<=(x=x+4|0)>>>0)break t;if(!(-1<(0|P)))break}N(e,48,P+18|0,18,0),k(e,L,c-L|0)}}}else N(e,32,r,S=F+3|0,-65537&o),k(e,v,F),n=h>>>5&1,k(e,i!=i?n?3867:3871:n?3859:3863,3);return N(e,32,r,S,8192^o),D=560+p|0,0|((0|S)<(0|r)?r:S)},r[12]=function(e,i){e|=0;var r,n,o,h,l,u,c,d,f,p,g,v,y,b,T,A,E,w,S,P,M,I,C,R,O,$,L,F,B,k,N=i|=0;i=_[i>>2]+15&-16,_[N>>2]=i+16,N=e,r=_[i>>2],n=_[i+4>>2],o=_[i+8>>2],h=_[i+12>>2],d=0,f=0,p=0,D=u=D-32|0,d=(c=d=2147483647&h)-1006698496|0,f=d=(l=f=p=o)>>>0<0?d+1|0:d,d=c-1140785152|0,(0|(d=p>>>0<0?d+1|0:d))==(0|f)&l>>>0<p>>>0|f>>>0<d>>>0?(d=h<<4|o>>>28,o=o<<4|n>>>28,134217728==(0|(p=n&=268435455))&1<=r>>>0|134217728<n>>>0?(d=d+1073741824|0,(r=o+1|0)>>>0<1&&(d=d+1|0),f=r):(d=d-(((f=o)>>>0<0)+-1073741824|0)|0,r|134217728^p||((r=f+(1&f)|0)>>>0<f>>>0&&(d=d+1|0),f=r))):(!p&2147418112==(0|c)?!(r|n):2147418112==(0|c)&p>>>0<0|c>>>0<2147418112)?(d=2146435072,1140785151==((f=0)|c)&4294967295<p>>>0|1140785151<c>>>0||(p=c>>>16)>>>(d=0)<15249||(g=r,v=n,y=o,b=d=65535&h|65536,w=0,S=0,64&(T=15361-p|0)?(g=31&(v=T-64|0),g=32<=(63&v)>>>0?(v=0,b>>>g):(v=b>>>g,((1<<g)-1&b)<<32-g|y>>>g),b=y=0):T&&(S=b,w=31&(E=64-T|0),E=32<=(63&E)>>>0?(S=y<<w,0):(S=(1<<w)-1&y>>>32-w|S<<w,y<<w),A=g,g=31&(w=T),g=(32<=(63&w)>>>0?(w=0,v>>>g):(w=v>>>g,((1<<g)-1&v)<<32-g|A>>>g))|E,v=w|S,w=y,y=31&T,y=32<=(63&T)>>>0?(S=0,b>>>y):(S=b>>>y,((1<<y)-1&b)<<32-y|w>>>y),b=S),_[u>>2]=g,_[4+u>>2]=v,_[8+u>>2]=y,_[12+u>>2]=b,P=16+u|0,M=r,I=n,C=o,R=d,F=0,64&(O=p+-15233|0)?(C=M,M=31&(R=O+-64|0),32<=(63&R)>>>0?(R=C<<M,C=0):(R=(1<<M)-1&C>>>32-M|I<<M,C<<=M),I=M=0):O&&(L=C,C=31&($=O),L=32<=(63&O)>>>0?(F=L<<C,0):(F=(1<<C)-1&L>>>32-C|R<<C,L<<C),C=I,R=31&(O=64-O|0),32<=(63&O)>>>0?(O=0,C>>>=R):(O=C>>>R,C=((1<<R)-1&C)<<32-R|M>>>R),C|=L,R=O|F,O=M,M=31&$,M=32<=(63&$)>>>0?(F=O<<M,0):(F=(1<<M)-1&O>>>32-M|I<<M,O<<M),I=F),_[P>>2]=M,_[4+P>>2]=I,_[8+P>>2]=C,_[12+P>>2]=R,o=_[4+u>>2],r=_[8+u>>2],d=_[12+u>>2]<<4|r>>>28,f=r<<4|o>>>28,134217728==(0|(o=r=268435455&o))&1<=(n=_[u>>2]|0!=(_[16+u>>2]|_[24+u>>2])|0!=(_[20+u>>2]|_[28+u>>2]))>>>0|134217728<r>>>0?((r=f+1|0)>>>0<1&&(d=d+1|0),f=r):n|134217728^o||((r=f+(1&f)|0)>>>0<f>>>0&&(d=d+1|0),f=r))):(f=o<<4|n>>>28,d=524287&(d=h<<4|o>>>28)|2146959360),D=32+u|0,B=0|f,s[0]=B,k=-2147483648&h|d,s[1]=k,e=+a[0],x[N>>3]=e},r[13]=function(e){return 0},r[14]=function(e,i,r){i|=0,r|=0;var n,s,o=0,a=0,h=0,l=0;for(D=s=D-32|0,o=_[28+(e|=0)>>2],_[16+s>>2]=o,h=_[e+20>>2],_[28+s>>2]=r,_[24+s>>2]=i,h=(_[20+s>>2]=i=h-o|0)+r|0,l=2,i=16+s|0;;){t:{if((a=(o=0)|O(_[e+60>>2],0|i,0|l,12+s|0))&&(_[2086]=a,o=-1),(0|(o=o?_[12+s>>2]=-1:_[12+s>>2]))==(0|h))i=_[e+44>>2],_[e+28>>2]=i,_[e+20>>2]=i,_[e+16>>2]=i+_[e+48>>2],e=r;else{if(-1<(0|o))break t;_[e+28>>2]=0,_[e+16>>2]=0,_[e+20>>2]=0,_[e>>2]=32|_[e>>2],2!=((e=0)|l)&&(e=r-_[i+4>>2]|0)}return D=32+s|0,0|e}a=_[i+4>>2],_[(i=(n=a>>>0<o>>>0)?i+8|0:i)>>2]=(a=o-(n?a:0)|0)+_[i>>2],_[i+4>>2]=_[i+4>>2]-a,h=h-o|0,l=l-n|0}},r[15]=function(e,i,r,n){return $=0},{d:function(){},e:function(){return 83886080},f:function(){return 5},g:function(e,i){return i|=0,D=i=D-16|0,e=(e|=0)?ts(e)?(B(4,2150,0),0):g[e+4|0]:(_[i+4>>2]=1444,_[i>>2]=2267,B(4,1294,i),0),D=i+16|0,0|e},h:function(e,i){var r;return i|=0,D=r=D-48|0,e=(e|=0)?(e+63&-64)!=(0|e)?(_[36+r>>2]=1522,_[32+r>>2]=2284,B(4,1294,32+r|0),0):(i+63&-64)==(0|i)&&i?function(e,i){var r,n=0,s=0,o=0,a=0,h=0,l=0,u=0,c=0,d=0,p=0,b=0,x=0,T=0,E=0,w=0,S=0,P=0,M=0,I=0,C=0,R=0;D=h=(r=s=D)-704&-64;t:if(i>>>0<=1343)B(4,1235,0);else if(ts(e))B(4,1469,0);else if(s=g[0|(C=e+4|0)]){if(!(6<=s>>>0)){(S=1==(0|!g[e+5|0]))||(H(C,1),F(e- -64|0,4,160)),V(h- -64|0,0,640),tt(e,h- -64|0),s=e+i|0,i=_[h+64>>2];e:{i:{r:{if(5<=(w=g[e+4|0])>>>0){if(i>>>0<e>>>0|s>>>0<i>>>0||(a=i+256|0)>>>0<e>>>0)break i;if(a>>>0<=s>>>0)break r;break i}if(i>>>0<e>>>0|s>>>0<i>>>0||(a=i+128|0)>>>0<e>>>0|s>>>0<a>>>0)break i}if(!((o=_[h+68>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<a>>>0||(o=o- -64|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(p=_[i>>2]))<0||(a=_[h+72>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=(n=a)+(a=p<<2)|0)>>>0<e>>>0|s>>>0<o>>>0||(u=_[h+76>>2])>>>0<e>>>0|s>>>0<u>>>0|u>>>0<o>>>0||(n=(p<<6)+u|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+80>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+84>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+88>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+92>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+96>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+100>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+4>>2]))<0||(a=_[h+104>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(l=(o=a)+(a=n<<2)|0)>>>0<e>>>0|s>>>0<l>>>0||(o=_[h+108>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<l>>>0||(n=o+(n<<6)|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+112>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+116>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+120>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+124>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+128>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+132>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+136>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+8>>2]))<0||(a=_[h+140>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=(b=n<<2)+a|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+144>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+b|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+148>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+b|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+156>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+b|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+160>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+b|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+164>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+b|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+12>>2]))<0||(a=_[h+172>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=(x=n<<2)+a|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+176>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+x|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+180>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+x|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+188>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=a+x|0)>>>0<e>>>0|s>>>0<n>>>0||(0|(o=_[i+16>>2]))<0||(a=_[h+192>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(l=(n=a)+(a=o<<2)|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+196>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+200>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+204>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+208>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+(o<<6)|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+212>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+216>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+220>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+228>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+232>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+236>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+240>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+244>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+a|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+248>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(n=n+o|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+252>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+256>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+260>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+264>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+268>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+272>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(0|(l=_[i+20>>2]))<0||(o=_[h+276>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(T=(n=o)+(o=l<<2)|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+280>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(l=n+(l<<6)|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+284>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+288>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+292>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+296>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+300>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+308>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+312>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+o|0)>>>0<e>>>0|s>>>0<l>>>0||(0|(T=_[i+24>>2]))<0||(n=_[h+336>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+(T<<2)|0)>>>0<e>>>0|s>>>0<l>>>0||(0|(T=_[i+28>>2]))<0||(n=_[h+340>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=(M=T<<2)+n|0)>>>0<e>>>0|s>>>0<l>>>0||(n=_[h+344>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(l=n+M|0)>>>0<e>>>0|s>>>0<l>>>0||(0|(T=_[i+32>>2]))<0||(n=_[h+356>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<l>>>0||(T=(l=T<<2)+n|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+360>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(T=n+l|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+364>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(T=n+l|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+368>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(T=n+l|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+372>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(T=n+l|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+376>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(T=n+l|0)>>>0<e>>>0|s>>>0<T>>>0||(n=_[h+380>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(T=n+l|0)>>>0<e>>>0|s>>>0<T>>>0||(0|(c=_[i+36>>2]))<0||(n=_[h+392>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<T>>>0||(c=(T=c<<2)+n|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+396>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+T|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+400>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+T|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+40>>2]))<0||(n=_[h+412>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<2)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+44>>2]))<0||(n=_[h+424>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<2)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+48>>2]))<0||(n=_[h+428>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=(d<<=2)+n|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+432>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+d|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+52>>2]))<0||(n=_[h+416>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=(d<<=2)+n|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+420>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+d|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+56>>2]))<0||(n=_[h+552>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<2)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+60>>2]))<0||(n=_[h+556>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<2)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+64>>2]))<0||(n=_[h+560>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<1)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+68>>2]))<0||(n=_[h+564>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<2)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+72>>2]))<0||(n=_[h+568>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(d=(c=n)+(n=d<<2)|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+572>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+576>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+580>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+584>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(c=n+c|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+76>>2]))<0||(n=_[h+588>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(d=(c=d<<2)+n|0)>>>0<e>>>0|s>>>0<d>>>0||(n=_[h+592>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(n=_[h+596>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<d>>>0||(c=n+c|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+80>>2]))<0||(n=_[h+600>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(E=(c=n)+(n=d<<2)|0)>>>0<e>>>0|s>>>0<E>>>0||(c=_[h+604>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<E>>>0||(d=c+(d<<6)|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+608>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+612>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+616>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+620>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+624>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+628>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(d=n+c|0)>>>0<e>>>0|s>>>0<d>>>0||(c=_[h+632>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<d>>>0||(c=n+c|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+84>>2]))<0||(n=_[h+636>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<2)|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+640>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+(d<<1)|0)>>>0<e>>>0|s>>>0<c>>>0||(0|(d=_[i+88>>2]))<0||(n=_[h+644>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(n=n+(d<<2)|0)>>>0<e>>>0|s>>>0<n>>>0)){if(!(w>>>0<2)&&((c=_[h+168>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<n>>>0||(n=c+b|0)>>>0<e>>>0|s>>>0<n>>>0||!(w>>>0<4)&&((c=_[h+324>>2])>>>0<e>>>0|s>>>0<c>>>0|c>>>0<n>>>0||(c=o+c|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+328>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+o|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+332>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(c=n+o|0)>>>0<e>>>0|s>>>0<c>>>0||(n=_[h+152>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<c>>>0||(b=n+b|0)>>>0<e>>>0|s>>>0<b>>>0||(n=_[h+184>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<b>>>0||(b=n+x|0)>>>0<e>>>0|s>>>0<b>>>0||(n=_[h+224>>2])>>>0<e>>>0|s>>>0<n>>>0|n>>>0<b>>>0||(n=n+a|0)>>>0<e>>>0|s>>>0<n>>>0||(0|(b=_[i+92>>2]))<0||(a=_[h+648>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(b=(n=b<<2)+a|0)>>>0<e>>>0|s>>>0<b>>>0||(a=_[h+652>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<b>>>0||(b=n+a|0)>>>0<e>>>0|s>>>0<b>>>0||(a=_[h+656>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<b>>>0||(n=n+a|0)>>>0<e>>>0|s>>>0<n>>>0||(0|(b=_[i+96>>2]))<0||(a=_[h+660>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(b=(n=b<<2)+a|0)>>>0<e>>>0|s>>>0<b>>>0||(a=_[h+664>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<b>>>0||(b=n+a|0)>>>0<e>>>0|s>>>0<b>>>0||(a=_[h+668>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<b>>>0||(n=n+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+304>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+316>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+320>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+100>>2]))<0||(a=_[h+436>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+440>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+444>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+104>>2]))<0||(a=_[h+448>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=a)+(a=n<<2)|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+452>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+456>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+460>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(o=_[h+464>>2])>>>0<e>>>0|s>>>0<o>>>0|o>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+108>>2]))<0||(a=_[h+480>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+484>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+488>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+112>>2]))<0||(a=_[h+504>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+508>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+512>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+116>>2]))<0||(a=_[h+528>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+(n<<2)|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+120>>2]))<0||(a=_[h+532>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+536>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+540>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+124>>2]))<0||(a=_[h+544>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=(n<<=2)+a|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+548>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=n+a|0)>>>0<e>>>0|s>>>0<n>>>0)))break i;if(w>>>0<5||!((a=_[h+348>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=a+M|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+352>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+M|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+384>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+l|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+388>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+l|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+404>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+T|0)>>>0<e>>>0|s>>>0<o>>>0||(a=_[h+408>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(o=a+T|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+128>>2]))<0||(a=_[h+468>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+472>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+476>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+132>>2]))<0||(a=_[h+492>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+496>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+500>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(o=o+a|0)>>>0<e>>>0|s>>>0<o>>>0||(0|(n=_[i+136>>2]))<0||(a=_[h+516>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<o>>>0||(n=(o=n<<2)+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+520>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(n=o+a|0)>>>0<e>>>0|s>>>0<n>>>0||(a=_[h+524>>2])>>>0<e>>>0|s>>>0<a>>>0|a>>>0<n>>>0||(a=o+a|0)>>>0<e>>>0)&&a>>>0<=s>>>0)break e}}B(4,1760,0),H(C,1),F(e- -64|0,4,160);break t}S||(tc(e),f[e+5|0]=0,i=_[h+64>>2],p=_[i>>2],u=_[h+76>>2],w=g[e+4|0]);e:{if((e=0)<(0|p)){for(;;){if(63<q((e<<6)+u|0)>>>0)break e;if((0|p)==(0|(e=e+1|0)))break}if(n=i+48|0,(s=0)<(0|(e=_[i>>2]))){for(a=_[i+48>>2],o=_[h+80>>2];;){if((0|(u=_[o+(s<<2)>>2]))<0|(0|a)<=(0|u))break e;if((0|e)==(0|(s=s+1|0)))break}for(T=i+24|0,a=_[i+24>>2],l=_[h+88>>2],p=_[h+84>>2],s=0;;){if((o=_[(u=s<<2)+l>>2])&&((0|o)<0|(0|a)<(0|o)||(0|(u=_[u+p>>2]))<0|(0|a)<=(0|u)||(o=o+u|0)>>>31|(0|a)<(0|o)))break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+92>>2];;){if(1<y[a+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+96>>2];;){if(1<y[a+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+100>>2];;){if((0|(o=_[a+(s<<2)>>2]))<-1|(0|e)<=(0|o))break e;if((0|e)==(0|(s=s+1|0)))break}}else T=i+24|0}else T=i+24|0,n=i+48|0;if((e=0)<(0|(s=_[i+4>>2]))){for(a=_[h+108>>2];;){if(63<q(a+(e<<6)|0)>>>0)break e;if((0|s)==(0|(e=e+1|0)))break}if(l=(a=_[i+48>>2])+-1|0,!(((s=0)|(e=_[i+4>>2]))<=0)){for(o=_[h+112>>2];;){if((0|(u=_[o+(s<<2)>>2]))<0|(0|a)<=(0|u))break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+116>>2];;){if(1<y[a+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+120>>2];;){if(1<y[a+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(a=_[i>>2],s=0,o=_[h+124>>2];;){if((0|(u=_[o+(s<<2)>>2]))<-1|(0|a)<=(0|u))break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+128>>2];;){if((0|(o=_[a+(s<<2)>>2]))<-1|(0|e)<=(0|o))break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,a=_[h+132>>2];;){if(1<y[a+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(o=i+8|0,u=i+12|0,p=_[h+136>>2],s=0;;){if(1<(x=_[(b=s<<2)+a>>2])>>>0||(0|(b=_[p+b>>2]))<0|(0|b)>=_[(x-1|0?o:u)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}}}else l=_[n>>2]+-1|0;if((e=0)<(0|(s=_[i+8>>2]))){for(a=_[h+140>>2];;){if((0|(o=_[a+(e<<2)>>2]))<0|(0|l)<(0|o))break e;if((0|s)==(0|(e=e+1|0)))break}for(M=i+28|0,a=_[i+28>>2],p=_[h+148>>2],b=_[h+144>>2],e=0;;){if((o=_[(u=e<<2)+p>>2])&&((0|o)<0|(0|a)<(0|o)||(0|(u=_[u+b>>2]))<0|(0|a)<=(0|u)||(o=o+u|0)>>>31|(0|a)<(0|o)))break e;if((0|s)==(0|(e=e+1|0)))break}for(e=0,o=_[h+156>>2],u=_[h+164>>2],p=_[h+160>>2];;){if((0|(b=_[(a=e<<2)+p>>2]))<1||(0|(x=_[a+u>>2]))<1||(0|(a=_[o+a>>2]))<1|(0|a)!=(0|A(x+1|0,b+1|0)))break e;if((0|s)==(0|(e=e+1|0)))break}}else M=i+28|0;if((e=0)<(0|(o=_[i+12>>2]))){for(s=_[h+172>>2];;){if((0|(a=_[s+(e<<2)>>2]))<0|(0|l)<(0|a))break e;if((0|o)==(0|(e=e+1|0)))break}for(c=i+32|0,s=_[i+32>>2],l=_[h+180>>2],p=_[h+176>>2],e=0;;){if((a=_[(u=e<<2)+l>>2])&&((0|a)<0|(0|s)<(0|a)||(0|(u=_[u+p>>2]))<0|(0|s)<=(0|u)||(a=a+u|0)>>>31|(0|s)<(0|a)))break e;if((0|o)==(0|(e=e+1|0)))break}}else c=i+32|0;a=i+16|0;i:{r:{if(!(((e=0)|(s=_[i+16>>2]))<=0)){for(o=_[h+208>>2];;){if(63<q(o+(e<<6)|0)>>>0)break e;if((0|s)==(0|(e=e+1|0)))break}if(!(((s=0)|(e=_[a>>2]))<=0)){for(o=_[n>>2],u=_[h+212>>2];;){if((0|(l=_[u+(s<<2)>>2]))<0|(0|o)<=(0|l))break e;if((0|e)==(0|(s=s+1|0)))break}for(C=i+36|0,o=_[i+36>>2],p=_[h+220>>2],b=_[h+216>>2],s=0;;){if((u=_[(l=s<<2)+p>>2])&&((0|u)<0|(0|o)<(0|u)||(0|(l=_[l+b>>2]))<0|(0|o)<=(0|l)||(u=u+l|0)>>>31|(0|o)<(0|u)))break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,o=_[h+228>>2];;){if(1<y[o+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,o=_[h+232>>2];;){if(1<y[o+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(o=_[i>>2],s=0,u=_[h+236>>2];;){if((0|(l=_[u+(s<<2)>>2]))<-1|(0|o)<=(0|l))break e;if((0|e)==(0|(s=s+1|0)))break}for(o=_[i+4>>2],s=0,u=_[h+240>>2];;){if((0|(l=_[u+(s<<2)>>2]))<-1|(0|o)<=(0|l))break e;if((0|e)==(0|(s=s+1|0)))break}for(o=_[h+244>>2],s=0;;){if(_[o+(s<<2)>>2]<0)break e;if((0|e)==(0|(s=s+1|0)))break}break r}}u=i+68|0,C=i+36|0;break i}for(o=_[h+252>>2],s=0;;){if(_[o+(s<<2)>>2]<0)break e;if((0|e)==(0|(s=s+1|0)))break}for(u=_[i+60>>2],s=0,l=_[h+256>>2];;){if((p=_[(p=s<<2)+l>>2]+(_[o+p>>2]<<1)|0)>>>31|(0|u)<(0|p))break e;if((0|e)==(0|(s=s+1|0)))break}for(o=_[i+64>>2],p=_[h+264>>2],b=_[h+260>>2],s=0;;){if((u=_[(l=s<<2)+p>>2])&&((0|u)<0|(0|o)<(0|u)||(0|(l=_[l+b>>2]))<0|(0|o)<=(0|l)||(u=u+l|0)>>>31|(0|o)<(0|u)))break e;if((0|e)==(0|(s=s+1|0)))break}for(u=i+68|0,o=_[i+68>>2],b=_[h+272>>2],x=_[h+268>>2],s=0;;){if((l=_[(p=s<<2)+b>>2])&&((0|l)<0|(0|o)<(0|l)||(0|(p=_[p+x>>2]))<0|(0|o)<=(0|p)||(l=l+p|0)>>>31|(0|o)<(0|l)))break e;if((0|e)==(0|(s=s+1|0)))break}}i:{r:{if(!(((e=0)|(s=_[i+20>>2]))<=0)){for(o=_[h+280>>2];;){if(63<q(o+(e<<6)|0)>>>0)break e;if((0|s)==(0|(e=e+1|0)))break}if(!(((e=0)|(s=_[i+20>>2]))<=0)){for(o=_[h+296>>2];;){if(1<y[o+(e<<2)>>2])break e;if((0|s)==(0|(e=e+1|0)))break}for(o=_[h+300>>2],e=0;;){if(_[o+(e<<2)>>2]<0)break e;if((0|s)==(0|(e=e+1|0)))break}break r}}e=_[i+52>>2];break i}for(e=_[i+52>>2],b=_[h+312>>2],x=_[h+308>>2],l=0;;){if((o=_[(p=l<<2)+b>>2])&&((0|o)<0|(0|e)<(0|o)||(0|(p=_[p+x>>2]))<0|(0|e)<=(0|p)||(o=o+p|0)>>>31|(0|e)<(0|o)))break e;if((0|s)==(0|(l=l+1|0)))break}}if(o=_[i+40>>2],(s=0)<(0|(l=_[i+8>>2])))for(p=_[h+344>>2],b=_[h+156>>2];;){if((x=_[(x=s<<2)+p>>2]+(_[b+x>>2]<<1)|0)>>>31|(0|o)<(0|x))break e;if((0|l)==(0|(s=s+1|0)))break}if((s=0)<(0|(l=_[c>>2]))){for(p=_[h+376>>2];;){if(1<y[p+(s<<2)>>2])break e;if((0|l)==(0|(s=s+1|0)))break}for(s=0,p=_[h+380>>2];;){if(1<y[p+(s<<2)>>2])break e;if((0|l)==(0|(s=s+1|0)))break}}if((s=0)<(0|(l=_[a>>2])))for(p=_[h+400>>2],b=_[h+252>>2];;){if((x=_[(x=s<<2)+p>>2]+(_[b+x>>2]<<1)|0)>>>31|(0|o)<(0|x))break e;if((0|l)==(0|(s=s+1|0)))break}if((s=0)<(0|(o=_[i+44>>2])))for(p=_[h+424>>2];;){if((0|(b=_[p+(s<<2)>>2]))<0|(0|e)<=(0|b))break e;if((0|o)==(0|(s=s+1|0)))break}if(1<=(0|(b=_[n>>2])))for(s=0,x=_[h+432>>2],d=_[h+428>>2];;){if((n=_[(p=s<<2)+x>>2])&&((0|n)<0|(0|o)<(0|n)||(0|(p=_[d+p>>2]))<0|(0|o)<=(0|p)||(n=n+p|0)>>>31|(0|o)<(0|n)))break e;if((0|b)==(0|(s=s+1|0)))break}if(1<=(0|e))for(o=_[i+56>>2],s=0,b=_[h+420>>2],x=_[h+416>>2];;){if((n=_[(p=s<<2)+b>>2])&&((0|n)<0|(0|o)<(0|n)||(0|(p=_[p+x>>2]))<0|(0|o)<=(0|p)||(n=n+p|0)>>>31|(0|o)<(0|n)))break e;if((0|(s=s+1|0))==(0|e))break}if((e=0)<(0|(s=_[u>>2])))for(o=_[h+564>>2];;){if((0|(u=_[o+(e<<2)>>2]))<-1|(0|l)<=(0|u))break e;if((0|s)==(0|(e=e+1|0)))break}if(e=_[i+76>>2],1<=(0|(u=_[i+72>>2])))for(s=0,l=_[h+572>>2],p=_[h+568>>2];;){if((o=_[(n=s<<2)+l>>2])&&((0|o)<0|(0|e)<(0|o)||(0|(n=_[n+p>>2]))<0|(0|e)<=(0|n)||(o=n+o|0)>>>31|(0|e)<(0|o)))break e;if((0|u)==(0|(s=s+1|0)))break}if((s=0)<(0|e)){for(o=_[h+588>>2];;){if(1<y[o+(s<<2)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(n=_[h+592>>2],s=0;;){if(1<(p=_[(l=s<<2)+o>>2])>>>0||(0|(l=_[n+l>>2]))<0|(0|l)>=_[(p-1|0?a:i)>>2])break e;if((0|e)==(0|(s=s+1|0)))break}for(s=0,o=_[h+596>>2];;){if((0|(n=_[o+(s<<2)>>2]))<-1|(0|u)<=(0|n))break e;if((0|e)==(0|(s=s+1|0)))break}}i:{if(!(((e=0)|(l=_[i+80>>2]))<=0)){for(s=_[h+604>>2];;){if(63<q(s+(e<<6)|0)>>>0)break e;if((0|l)==(0|(e=e+1|0)))break}if(!(((e=0)|(l=_[i+80>>2]))<=0)){for(s=_[i+48>>2],o=_[h+608>>2];;){if((0|(u=_[o+(e<<2)>>2]))<0|(0|s)<=(0|u))break e;if((0|l)==(0|(e=e+1|0)))break}for(b=_[i+88>>2],u=_[h+616>>2],n=_[h+612>>2],e=0;;){if((s=_[(o=e<<2)+u>>2])&&((0|s)<0|(0|b)<(0|s)||(0|(o=_[n+o>>2]))<0|(0|b)<=(0|o)||(s=s+o|0)>>>31|(0|b)<(0|s)))break e;if((0|l)==(0|(e=e+1|0)))break}for(a=_[a>>2],u=_[h+620>>2],e=0;;){if((0|(s=_[u+(e<<2)>>2]))<0|(0|a)<=(0|s))break e;if((0|l)==(0|(e=e+1|0)))break}for(n=_[h+624>>2],e=0;;){if((0|(s=_[n+(e<<2)>>2]))<0|(0|a)<=(0|s))break e;if((0|l)==(0|(e=e+1|0)))break}for(s=_[i+84>>2],p=_[h+632>>2],x=_[h+628>>2],e=0;;){if((o=_[(d=e<<2)+p>>2])&&((0|o)<0|(0|s)<(0|o)||(0|(d=_[d+x>>2]))<0|(0|s)<=(0|d)||(o=o+d|0)>>>31|(0|s)<(0|o)))break e;if((0|l)==(0|(e=e+1|0)))break}for(E=_[h+640>>2],s=_[h+252>>2],o=0;;){if(0<(0|(S=_[(e=o<<2)+p>>2])))for(d=E+(_[e+x>>2]<<1)|0,R=_[s+(_[e+n>>2]<<2)>>2],P=_[s+(_[e+u>>2]<<2)>>2],e=0;;){if((0|R)<=v[d+(2|(I=e<<1))>>1]|(0|P)<=v[d+I>>1])break e;if(!((0|(e=e+2|0))<(0|S)))break}if((0|l)==(0|(o=o+1|0)))break}break i}}a=_[i+16>>2],b=_[i+88>>2]}if(!((255&w)>>>0<2)){if((e=0)<(0|(p=_[i+8>>2])))for(s=_[h+168>>2];;){if(1<y[s+(e<<2)>>2])break e;if((0|p)==(0|(e=e+1|0)))break}if(!((255&w)>>>0<4)){if(u=_[i+56>>2],1<=(0|(x=_[i+20>>2])))for(n=_[h+332>>2],d=_[h+328>>2],e=0;;){if((s=_[(o=e<<2)+n>>2])&&((0|s)<0|(0|u)<(0|s)||(0|(o=_[o+d>>2]))<0|(0|u)<=(0|o)||(s=s+o|0)>>>31|(0|u)<(0|s)))break e;if((0|x)==(0|(e=e+1|0)))break}if((0|(e=_[i+92>>2]))!=_[i+96>>2])break e;if(1<=(0|p))for(d=_[h+152>>2],s=0,E=_[h+148>>2];;){if((o=_[(n=s<<2)+E>>2])&&((0|o)<0|(0|e)<(0|o)||(0|(n=_[n+d>>2]))<0|(0|e)<=(0|n)||(o=n+o|0)>>>31|(0|e)<(0|o)))break e;if((0|p)==(0|(s=s+1|0)))break}if(1<=(0|(R=_[i+12>>2])))for(d=_[h+184>>2],s=0,E=_[h+180>>2];;){if((o=_[(n=s<<2)+E>>2])&&((0|o)<0|(0|e)<(0|o)||(0|(n=_[n+d>>2]))<0|(0|e)<=(0|n)||(o=n+o|0)>>>31|(0|e)<(0|o)))break e;if((0|R)==(0|(s=s+1|0)))break}if(1<=(0|a))for(d=_[h+224>>2],s=0,E=_[h+220>>2];;){if((o=_[(n=s<<2)+E>>2])&&((0|o)<0|(0|e)<(0|o)||(0|(n=_[n+d>>2]))<0|(0|e)<=(0|n)||(o=n+o|0)>>>31|(0|e)<(0|o)))break e;if((0|a)==(0|(s=s+1|0)))break}if((s=0)<(0|x)){for(o=_[h+304>>2];;){if(1<y[o+(s<<2)>>2])break e;if((0|x)==(0|(s=s+1|0)))break}for(o=_[i+100>>2],E=_[h+320>>2],S=_[h+316>>2],s=0;;){if((n=_[(d=s<<2)+E>>2])&&((0|n)<0|(0|o)<(0|n)||(0|(d=_[d+S>>2]))<0|(0|o)<=(0|d)||(n=n+d|0)>>>31|(0|o)<(0|n)))break e;if((0|x)==(0|(s=s+1|0)))break}}else o=_[i+100>>2];if(1<=(0|o)){for(d=_[h+440>>2],s=0,S=_[h+436>>2];;){if((n=_[(E=s<<2)+d>>2])&&((0|n)<0|(0|u)<(0|n)||(0|(E=_[E+S>>2]))<0|(0|u)<=(0|E)||(n=n+E|0)>>>31|(0|u)<(0|n)))break e;if((0|o)==(0|(s=s+1|0)))break}for(u=_[h+444>>2],s=0;;){if((0|(E=_[(n=s<<2)+u>>2]))<0|(0|E)>=_[n+d>>2])break e;if((0|o)==(0|(s=s+1|0)))break}}if((u=0)<(0|(s=_[i+104>>2]))){for(n=_[h+448>>2];;){if((0|(d=_[n+(u<<2)>>2]))<0|(0|o)<=(0|d))break e;if((0|s)==(0|(u=u+1|0)))break}for(n=_[i+116>>2],E=_[h+464>>2],S=_[h+460>>2],o=0;;){if((u=_[(d=o<<2)+E>>2])&&((0|u)<0|(0|n)<(0|u)||(0|(d=_[d+S>>2]))<0|(0|n)<=(0|d)||(u=u+d|0)>>>31|(0|n)<(0|u)))break e;if((0|s)==(0|(o=o+1|0)))break}}else n=_[i+116>>2];if((o=0)<(0|(d=_[i+108>>2]))){for(u=_[h+480>>2];;){if((0|(E=_[u+(o<<2)>>2]))<0|(0|p)<=(0|E))break e;if((0|d)==(0|(o=o+1|0)))break}for(E=_[h+488>>2],P=_[h+484>>2],o=0;;){if((u=_[(p=o<<2)+E>>2])&&((0|u)<0|(0|s)<(0|u)||(0|(p=_[p+P>>2]))<0|(0|s)<=(0|p)||(u=u+p|0)>>>31|(0|s)<(0|u)))break e;if((0|d)==(0|(o=o+1|0)))break}for(E=_[M>>2],o=_[h+456>>2],p=_[h+452>>2],u=0;;){if(I=_[P+(u<<2)>>2]<<2,(S=_[I+o>>2])&&((0|S)<0|(0|E)<(0|S)||(0|(I=_[p+I>>2]))<0|(0|E)<=(0|I)||(0|(S=S+I|0))<0|(0|E)<(0|S)))break e;if((0|d)==(0|(u=u+1|0)))break}}else o=_[h+456>>2],p=_[h+452>>2];if((u=0)<(0|(d=_[i+112>>2]))){for(E=_[h+504>>2];;){if((0|(S=_[E+(u<<2)>>2]))<0|(0|a)<=(0|S))break e;if((0|d)==(0|(u=u+1|0)))break}for(P=_[h+512>>2],S=_[h+508>>2],a=0;;){if((u=_[(E=a<<2)+P>>2])&&((0|u)<0|(0|s)<(0|u)||(0|(E=_[E+S>>2]))<0|(0|s)<=(0|E)||(u=u+E|0)>>>31|(0|s)<(0|u)))break e;if((0|d)==(0|(a=a+1|0)))break}for(u=_[C>>2],a=0;;){if(P=_[S+(a<<2)>>2]<<2,(E=_[P+o>>2])&&((0|E)<0|(0|u)<(0|E)||(0|(P=_[p+P>>2]))<0|(0|u)<=(0|P)||(0|(E=E+P|0))<0|(0|u)<(0|E)))break e;if((0|d)==(0|(a=a+1|0)))break}}if(u=_[i+120>>2],(a=0)<(0|n))for(d=_[h+528>>2];;){if((0|(E=_[d+(a<<2)>>2]))<0|(0|u)<=(0|E))break e;if((0|(a=a+1|0))==(0|n))break}if((a=0)<(0|u)){for(n=_[h+532>>2];;){if((0|(d=_[n+(a<<2)>>2]))<-1|(0|x)<=(0|d))break e;if((0|u)==(0|(a=a+1|0)))break}for(n=_[i+124>>2],E=_[h+540>>2],S=_[h+536>>2],a=0;;){if((x=_[(d=a<<2)+E>>2])&&((0|x)<0|(0|n)<(0|x)||(0|(d=_[d+S>>2]))<0|(0|n)<=(0|d)||(x=d+x|0)>>>31|(0|n)<(0|x)))break e;if((0|u)==(0|(a=a+1|0)))break}}if(!((255&w)>>>0<5)){if((a=0)<(0|(w=_[M>>2]))){for(u=_[h+348>>2];;){if((0|(n=_[u+(a<<2)>>2]))<0|(0|e)<(0|n))break e;if((0|w)==(0|(a=a+1|0)))break}for(u=_[h+352>>2],a=0;;){if((0|(n=_[u+(a<<2)>>2]))<0|(0|e)<(0|n))break e;if((0|w)==(0|(a=a+1|0)))break}}if((w=0)<(0|(a=_[c>>2]))){for(u=_[h+384>>2];;){if((0|(n=_[u+(w<<2)>>2]))<0|(0|e)<(0|n))break e;if((0|a)==(0|(w=w+1|0)))break}for(u=_[h+388>>2],w=0;;){if((0|(n=_[u+(w<<2)>>2]))<0|(0|e)<(0|n))break e;if((0|a)==(0|(w=w+1|0)))break}}if((w=0)<(0|(u=_[C>>2]))){for(n=_[h+404>>2];;){if((0|(x=_[n+(w<<2)>>2]))<0|(0|e)<(0|x))break e;if((0|u)==(0|(w=w+1|0)))break}for(n=_[h+408>>2],w=0;;){if((0|(x=_[n+(w<<2)>>2]))<0|(0|e)<(0|x))break e;if((0|u)==(0|(w=w+1|0)))break}}if((e=0)<(0|(w=_[i+128>>2]))){for(u=_[i>>2],n=_[h+468>>2];;){if((0|(x=_[n+(e<<2)>>2]))<0|(0|u)<=(0|x))break e;if((0|w)==(0|(e=e+1|0)))break}for(M=_[h+476>>2],x=_[h+472>>2],e=0;;){if((u=_[(n=e<<2)+M>>2])&&((0|u)<0|(0|s)<(0|u)||(0|(n=_[n+x>>2]))<0|(0|s)<=(0|n)||(u=n+u|0)>>>31|(0|s)<(0|u)))break e;if((0|w)==(0|(e=e+1|0)))break}for(u=_[T>>2],e=0;;){if(T=_[x+(e<<2)>>2]<<2,(n=_[T+o>>2])&&((0|n)<0|(0|u)<(0|n)||(0|(T=_[p+T>>2]))<0|(0|u)<=(0|T)||(0|(n=n+T|0))<0|(0|u)<(0|n)))break e;if((0|w)==(0|(e=e+1|0)))break}}if((e=0)<(0|(w=_[i+132>>2]))){for(u=_[h+492>>2];;){if((0|(n=_[u+(e<<2)>>2]))<0|(0|R)<=(0|n))break e;if((0|w)==(0|(e=e+1|0)))break}for(T=_[h+500>>2],n=_[h+496>>2],e=0;;){if((u=_[(x=e<<2)+T>>2])&&((0|u)<0|(0|s)<(0|u)||(0|(x=_[n+x>>2]))<0|(0|s)<=(0|x)||(u=u+x|0)>>>31|(0|s)<(0|u)))break e;if((0|w)==(0|(e=e+1|0)))break}for(e=0;;){if(x=_[n+(e<<2)>>2]<<2,(u=_[x+o>>2])&&((0|u)<0|(0|a)<(0|u)||(0|(x=_[p+x>>2]))<0|(0|a)<=(0|x)||(0|(u=u+x|0))<0|(0|a)<(0|u)))break e;if((0|w)==(0|(e=e+1|0)))break}}if(!(((e=0)|(i=_[i+136>>2]))<=0)){for(a=_[h+516>>2];;){if((0|(w=_[a+(e<<2)>>2]))<0|(0|l)<=(0|w))break e;if((0|i)==(0|(e=e+1|0)))break}for(u=_[h+524>>2],a=_[h+520>>2],e=0;;){if((h=_[(w=e<<2)+u>>2])&&((0|h)<0|(0|s)<(0|h)||(0|(w=_[a+w>>2]))<0|(0|s)<=(0|w)||(h=h+w|0)>>>31|(0|s)<(0|h)))break e;if((0|i)==(0|(e=e+1|0)))break}for(e=0;;){if(h=_[a+(e<<2)>>2]<<2,(s=_[h+o>>2])&&((0|s)<0|(0|b)<(0|s)||(0|(h=_[h+p>>2]))<0|(0|b)<=(0|h)||(0|(s=s+h|0))<0|(0|b)<(0|s)))break e;if((0|i)==(0|(e=e+1|0)))break}}}}}return D=r,1}return B(4,1846,0),D=r,0}_[h+52>>2]=s,_[h+48>>2]=5,B(4,1640,h+48|0)}else _[h+32>>2]=s,B(4,1554,h+32|0);return D=r,0}(e,i):(_[20+r>>2]=1621,_[16+r>>2]=2284,B(4,1294,16+r|0),0):(_[4+r>>2]=1444,_[r>>2]=2284,B(4,1294,r),0),D=48+r|0,0|e},i:function(e){_[1805]=0|e},j:function(e,i){var r;return i|=0,D=r=D-48|0,e=(e|=0)?(e+63&-64)!=(0|e)?(_[36+r>>2]=1522,_[32+r>>2]=2305,B(4,1294,32+r|0),0):(i+63&-64)==(0|i)&&i?function(e){var i,r,n,s,o,a,h,l=0,u=0,c=0,d=0,y=0,x=0,T=0,A=0;_[24+(D=s=D-32|0)>>2]=0,_[16+s>>2]=5,_[20+s>>2]=0,tT(16+(D=h=D-272|0)|0,2227,_[12+h>>2]=16+s|0),_[(D=i=D-16|0)>>2]=16+h|0,r=_[970],_[12+(D=n=D-16|0)>>2]=i,tx(r,1432,i,0,0),D=16+n|0,D=16+i|0,D=272+h|0;t:{if(ts(e))B(4,1932,0);else{if(!(6<=(c=g[e+4|0])>>>0)){if(1!=(0|!g[e+5|0])?(H(e+4|0,1),F(e- -64|0,4,160),tt(e,e+704|(f[e+5|0]=0)),tc(e)):tt(e,e+704|0),g[7224]||(_[1807]=6,f[7224]=1,_[1808]=7,_[1809]=8,_[1810]=9),u=_[e+704>>2],1<=(0|(c=_[u+16>>2]))){for(A=(d=_[e+912>>2])+(c<<2)|0,y=_[e+908>>2];;){T=_[e+1204>>2]+(_[y>>2]<<2)|0;e:if(!(((u=0)|(l=(c=_[d>>2])+-1|0))<1))i:for(;;){for(;;){if(_[(x=T+(u<<2)|0)>>2]<=-1){if(function(e,i,r){var n=0,s=0;r:if((0|e)!=(0|i)){if(!(e>>>0<i+r>>>0&&i>>>0<(s=e+r|0)>>>0))return U(e,i,r);if(n=3&(e^i),e>>>0<i>>>0){if(!n){if(3&e)for(;;){if(!r)break r;if(f[0|e]=g[0|i],i=i+1|0,r=r+-1|0,!(3&(e=e+1|0)))break}if(!(r>>>0<=3)){for(n=r;_[e>>2]=_[i>>2],i=i+4|0,e=e+4|0,3<(n=n+-4|0)>>>0;);r&=3}}if(r)for(;f[0|e]=g[0|i],e=e+1|0,i=i+1|0,r=r+-1|0;);}else{if(!n){if(3&s)for(;;){if(!r)break r;if(f[0|(n=(r=r+-1|0)+e|0)]=g[i+r|0],!(3&n))break}if(!(r>>>0<=3))for(;_[(r=r+-4|0)+e>>2]=_[i+r>>2],3<r>>>0;);}if(r)for(;f[(r=r+-1|0)+e|0]=g[i+r|0],r;);}}}(x,x+4|0,(-1^u)+c<<2),(0|u)<(0|(l=(c=l)+-1|0)))continue i;break e}if(!((0|(u=u+1|0))<(0|l)))break}break}if(u=d,0<(0|c)&&(c=_[T+(l<<2)>>2]<0?l:c),_[u>>2]=c,y=y+4|0,!((d=d+4|0)>>>0<A>>>0))break}u=_[e+704>>2]}if(1<=_[u>>2])for(l=0;_[_[e+712>>2]+(l<<2)>>2]=_[e+716>>2]+(l<<6),u=_[e+704>>2],(0|(l=l+1|0))<_[u>>2];);if(1<=_[u+4>>2])for(l=0;_[_[e+744>>2]+(l<<2)>>2]=_[e+748>>2]+(l<<6),u=_[e+704>>2],(0|(l=l+1|0))<_[u+4>>2];);if(1<=_[u+16>>2])for(l=0;_[(c=l<<2)+_[e+832>>2]>>2]=_[e+848>>2]+(l<<6),_[c+_[e+836>>2]>>2]=_[e+1196>>2]+(_[c+_[e+896>>2]>>2]<<2),_[c+_[e+840>>2]>>2]=_[e+1200>>2]+(_[c+_[e+900>>2]>>2]<<1),_[c+_[e+844>>2]>>2]=_[e+1204>>2]+(_[c+_[e+908>>2]>>2]<<2),u=_[e+704>>2],(0|(l=l+1|0))<_[u+16>>2];);if(1<=_[u+20>>2])for(l=0;_[_[e+916>>2]+(l<<2)>>2]=_[e+920>>2]+(l<<6),u=_[e+704>>2],(0|(l=l+1|0))<_[u+20>>2];);if(1<=_[u+80>>2])for(l=0;_[_[e+1240>>2]+(l<<2)>>2]=_[e+1244>>2]+(l<<6),u=_[e+704>>2],(0|(l=l+1|0))<_[u+80>>2];);if(1&f[_[e+708>>2]+20|0]||(0|(d=_[u+16>>2]))<1)break t;for(l=_[e+904>>2],T=_[e+900>>2],x=_[e+1200>>2],y=0;;){if(0<(0|(A=_[(c=y<<2)+l>>2]+-1|0)))for(o=x+(_[c+T>>2]<<1)|0,u=0;a=v[(c=o+(u<<1)|0)>>1],p[c>>1]=v[c+4>>1],p[c+4>>1]=a,(0|(u=u+3|0))<(0|A););if((0|d)==(0|(y=y+1|0)))break}for(c=_[e+892>>2],y=_[e+896>>2],T=_[e+1196>>2],l=0;;){if(1<=(0|(x=_[(u=l<<2)+c>>2])))for(x=(u=T+(_[u+y>>2]<<2)|0)+(x<<3)|0,u=u+4|0;b[u>>2]=E(1)-b[u>>2],(u=u+8|0)>>>0<x>>>0;);if((0|d)==(0|(l=l+1|0)))break}break t}_[4+s>>2]=c,_[s>>2]=5,B(4,2023,s)}e=0}return D=32+s|0,e}(e):(_[20+r>>2]=1621,_[16+r>>2]=2305,B(4,1294,16+r|0),0):(_[4+r>>2]=1444,_[r>>2]=2305,B(4,1294,r),0),D=48+r|0,0|e},k:function(e,i,r,n){var s;i|=0,r|=0,n|=0,D=s=D+-64|0,(e|=0)?i?r?n?(e=_[_[e>>2]+708>>2],_[i>>2]=_[e+12>>2],_[i+4>>2]=_[e+16>>2],_[r>>2]=_[e+4>>2],_[r+4>>2]=_[e+8>>2],_[n>>2]=_[e>>2]):(_[52+s>>2]=1995,_[48+s>>2]=2325,B(4,1294,48+s|0)):(_[36+s>>2]=1903,_[32+s>>2]=2325,B(4,1294,32+s|0)):(_[20+s>>2]=1819,_[16+s>>2]=2325,B(4,1294,16+s|0)):(_[4+s>>2]=1740,_[s>>2]=2325,B(4,1294,s)),D=64+s|0},l:tu,m:tl,n:function(e){var i;D=i=D-16|0,(e|=0)?ta(e):(_[4+i>>2]=1740,_[i>>2]=2387,B(4,1294,i)),D=16+i|0},o:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+540>>2]:(_[4+i>>2]=1740,_[i>>2]=2402,B(4,1294,i),-1),D=16+i|0,0|e},p:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+916>>2]:(_[4+i>>2]=1740,_[i>>2]=2423,B(4,1294,i),0),D=16+i|0,0|e},q:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+548>>2]:(_[4+i>>2]=1740,_[i>>2]=2442,B(4,1294,i),0),D=16+i|0,0|e},r:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+928>>2]:(_[4+i>>2]=1740,_[i>>2]=2463,B(4,1294,i),0),D=16+i|0,0|e},s:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+924>>2]:(_[4+i>>2]=1740,_[i>>2]=2492,B(4,1294,i),0),D=16+i|0,0|e},t:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+932>>2]:(_[4+i>>2]=1740,_[i>>2]=2521,B(4,1294,i),0),D=16+i|0,0|e},u:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+552>>2]:(_[4+i>>2]=1740,_[i>>2]=2550,B(4,1294,i),0),D=16+i|0,0|e},v:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+4>>2]:(_[4+i>>2]=1740,_[i>>2]=2572,B(4,1294,i),-1),D=16+i|0,0|e},w:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+712>>2]:(_[4+i>>2]=1740,_[i>>2]=2588,B(4,1294,i),0),D=16+i|0,0|e},x:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+52>>2]:(_[4+i>>2]=1740,_[i>>2]=2602,B(4,1294,i),0),D=16+i|0,0|e},y:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+740>>2]:(_[4+i>>2]=1740,_[i>>2]=2622,B(4,1294,i),0),D=16+i|0,0|e},z:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+332>>2]:(_[4+i>>2]=1740,_[i>>2]=2650,B(4,1294,i),-1),D=16+i|0,0|e},A:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+832>>2]:(_[4+i>>2]=1740,_[i>>2]=2670,B(4,1294,i),0),D=16+i|0,0|e},B:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+888>>2]:(_[4+i>>2]=1740,_[i>>2]=2688,B(4,1294,i),0),D=16+i|0,0|e},C:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+432>>2]:(_[4+i>>2]=1740,_[i>>2]=2716,B(4,1294,i),0),D=16+i|0,0|e},D:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+884>>2]:(_[4+i>>2]=1740,_[i>>2]=2743,B(4,1294,i),0),D=16+i|0,0|e},E:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+440>>2]:(_[4+i>>2]=1740,_[i>>2]=2772,B(4,1294,i),0),D=16+i|0,0|e},F:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+436>>2]:(_[4+i>>2]=1740,_[i>>2]=2797,B(4,1294,i),0),D=16+i|0,0|e},G:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+448>>2]:(_[4+i>>2]=1740,_[i>>2]=2824,B(4,1294,i),0),D=16+i|0,0|e},H:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+912>>2]:(_[4+i>>2]=1740,_[i>>2]=2848,B(4,1294,i),0),D=16+i|0,0|e},I:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+844>>2]:(_[4+i>>2]=1740,_[i>>2]=2873,B(4,1294,i),0),D=16+i|0,0|e},J:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+892>>2]:(_[4+i>>2]=1740,_[i>>2]=2893,B(4,1294,i),0),D=16+i|0,0|e},K:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+444>>2]:(_[4+i>>2]=1740,_[i>>2]=2920,B(4,1294,i),0),D=16+i|0,0|e},L:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+836>>2]:(_[4+i>>2]=1740,_[i>>2]=2950,B(4,1294,i),0),D=16+i|0,0|e},M:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+904>>2]:(_[4+i>>2]=1740,_[i>>2]=2974,B(4,1294,i),0),D=16+i|0,0|e},N:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+840>>2]:(_[4+i>>2]=1740,_[i>>2]=3e3,B(4,1294,i),0),D=16+i|0,0|e},O:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+452>>2]:(_[4+i>>2]=1740,_[i>>2]=3022,B(4,1294,i),0),D=16+i|0,0|e},P:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+456>>2]:(_[4+i>>2]=1740,_[i>>2]=3051,B(4,1294,i),0),D=16+i|0,0|e},Q:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[_[e>>2]+876>>2]:(_[4+i>>2]=1740,_[i>>2]=3078,B(4,1294,i),0),D=16+i|0,0|e},R:function(e){var i;D=i=D-16|0,(e|=0)?_[e+428>>2]=1:(_[4+i>>2]=1740,_[i>>2]=3110,B(4,1294,i)),D=16+i|0},S:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+640>>2]:(_[4+i>>2]=1740,_[i>>2]=3139,B(4,1294,i),0),D=16+i|0,0|e},T:function(e){var i;return D=i=D-16|0,e=(e|=0)?_[e+636>>2]:(_[4+i>>2]=1740,_[i>>2]=3164,B(4,1294,i),0),D=16+i|0,0|e},U:function(e){var i;return te(12+(D=i=D-16|0)|0,64,e|=0),D=16+i|0,_[12+i>>2]},V:function(e){var i,r,n=0;return D=r=D-16|0,!(e|=0)||te(12+r|0,16,i=tu(e))||(n=tl(e,_[12+r>>2],i))||(ti(_[12+r>>2]),n=0),D=16+r|0,0|n},W:function(e){return 0|tr(e|=0)},X:function(e){ti(e|=0)},Y:function(e){var i;te(12+(D=i=D-16|0)|0,64,e|=0),ti(_[12+i>>2]),D=16+i|0},Z:function(){return 0|D},_:function(e){return 0|(D=D-(0|e)&-16)},$:function(e){D=0|e},aa:function(e){var i,r;return 0|(e=0|(e|=0),(r=0|tR())<(e=r+(e|=0)|0)&&e<65536&&(e=new ArrayBuffer(A(e,65536)),(i=new u.Int8Array(e)).set(f),f=i,f=new u.Int8Array(e),p=new u.Int16Array(e),_=new u.Int32Array(e),g=new u.Uint8Array(e),v=new u.Uint16Array(e),y=new u.Uint32Array(e),b=new u.Float32Array(e),x=new u.Float64Array(e),c=e,d.buffer=e),r)},ba:function(e,i){r[e|=0](i|=0)}};function F(e,i,r){var n,s,o=0;if(r)for(;;){if(r=r+-1|0,e>>>0<(o=(n=e+i|0)-1|0)>>>0)for(;s=g[0|e],f[0|e]=g[0|o],f[0|o]=s,(e=e+1|0)>>>0<(o=o+-1|0)>>>0;);if(e=n,!r)break}}function B(e,i,n){var s;D=s=D-272|0,y[1804]>e>>>0||(e=_[1805])&&(tT(16+s|0,i,_[12+s>>2]=n),r[e](16+s|0)),D=272+s|0}function k(e,i,n){32&g[0|e]||function(e,i,n){var s,o=0,a=0,h=0;t:{if(!(o=_[n+16>>2])){if(s=g[n+74|0],f[n+74|0]=s+-1|s,8&(s=_[n>>2])?(_[n>>2]=32|s,1):(_[n+4>>2]=0,_[n+8>>2]=0,s=_[n+44>>2],_[n+28>>2]=s,_[n+20>>2]=s,_[n+16>>2]=s+_[n+48>>2],0))break t;o=_[n+16>>2]}if(o-(h=_[n+20>>2])>>>0<i>>>0)return r[_[n+36>>2]](n,e,i);e:if(!(f[n+75|0]<0)){for(o=i;;){if(!(a=o))break e;if(10==g[(o=a+-1|0)+e|0])break}if(r[_[n+36>>2]](n,e,a)>>>0<a>>>0)break t;i=i-a|0,e=e+a|0,h=_[n+20>>2]}U(h,e,i),_[n+20>>2]=_[n+20>>2]+i}}(i,n,e)}function N(e,i,r,n,s){var o,a;if(D=a=D-256|0,!(73728&s|(0|r)<=(0|n))){if(V(a,i,(o=(s=r-n|0)>>>0<256)?s:256),i=e,!o){for(r=r-n|0;k(e,a,256),255<(s=s+-256|0)>>>0;);s=255&r}k(i,a,s)}D=256+a|0}function U(e,i,r){var n,s=0;if(8192<=r>>>0)C(0|e,0|i,0|r);else{if(n=e+r|0,3&(e^i)){if(n>>>0<4)r=e;else if((s=n-4|0)>>>0<e>>>0)r=e;else for(r=e;f[0|r]=g[0|i],f[r+1|0]=g[i+1|0],f[r+2|0]=g[i+2|0],f[r+3|0]=g[i+3|0],i=i+4|0,(r=r+4|0)>>>0<=s>>>0;);}else{t:if((0|r)<1)r=e;else if(3&e)for(r=e;;){if(f[0|r]=g[0|i],i=i+1|0,n>>>0<=(r=r+1|0)>>>0)break t;if(!(3&r))break}else r=e;if(!((e=-4&n)>>>0<64||(s=e+-64|0)>>>0<r>>>0))for(;_[r>>2]=_[i>>2],_[r+4>>2]=_[i+4>>2],_[r+8>>2]=_[i+8>>2],_[r+12>>2]=_[i+12>>2],_[r+16>>2]=_[i+16>>2],_[r+20>>2]=_[i+20>>2],_[r+24>>2]=_[i+24>>2],_[r+28>>2]=_[i+28>>2],_[r+32>>2]=_[i+32>>2],_[r+36>>2]=_[i+36>>2],_[r+40>>2]=_[i+40>>2],_[r+44>>2]=_[i+44>>2],_[r+48>>2]=_[i+48>>2],_[r+52>>2]=_[i+52>>2],_[r+56>>2]=_[i+56>>2],_[r+60>>2]=_[i+60>>2],i=i- -64|0,(r=r- -64|0)>>>0<=s>>>0;);if(!(e>>>0<=r>>>0))for(;_[r>>2]=_[i>>2],i=i+4|0,(r=r+4|0)>>>0<e>>>0;);}if(r>>>0<n>>>0)for(;f[0|r]=g[0|i],i=i+1|0,(0|n)!=(0|(r=r+1|0)););}}function G(e){var i,r;return E((i=e*e)*i*(r=i*e)*(2718311493989822e-21*i-19839334836096632e-20)+(r*(.008333329385889463*i-.16666666641626524)+e))}function X(e){var i;return E(-.499999997251031*(e*=e)+1+.04166662332373906*(i=e*e)+e*i*(2439044879627741e-20*e-.001388676377460993))}function V(e,i,r){var n,s,o,a;if(r&&(f[(n=e+r|0)-1|0]=i,f[0|e]=i,!(r>>>0<3||(f[n-2|0]=i,f[e+1|0]=i,f[n-3|0]=i,f[e+2|0]=i,r>>>0<7)||(f[n-4|0]=i,f[e+3|0]=i,r>>>0<9)||(s=(n=0-e&3)+e|0,i=A(255&i,16843009),_[s>>2]=i,_[(n=(r=r-n&-4)+s|0)-4>>2]=i,r>>>0<9)||(_[8+s>>2]=i,_[4+s>>2]=i,_[n-8>>2]=i,_[n-12>>2]=i,r>>>0<25)||(_[24+s>>2]=i,_[20+s>>2]=i,_[16+s>>2]=i,_[12+s>>2]=i,_[n-16>>2]=i,_[n-20>>2]=i,_[n-24>>2]=i,_[n-28>>2]=i,(r=r-(a=4&s|24)|0)>>>0<32))))for(o=n=i,i=s+a|0;_[i+24>>2]=o,_[i+28>>2]=n,_[i+16>>2]=o,_[i+20>>2]=n,_[i+8>>2]=o,_[i+12>>2]=n,_[i>>2]=o,_[i+4>>2]=n,i=i+32|0,31<(r=r+-32|0)>>>0;);return e}function H(e,i){var r;if(e>>>0<(i=(e+i|0)-1|0)>>>0)for(;r=g[0|e],f[0|e]=g[0|i],f[0|i]=r,(e=e+1|0)>>>0<(i=i+-1|0)>>>0;);}function j(e){var i,r=tR();return(e=(i=_[2216])+e|0)>>>0<=r<<16>>>0||R(0|e)?(_[2216]=e,i):(_[2086]=48,-1)}function Y(e,i,r,n,s,o,a){var h,l,u,c,d,f,p,g,v,y,x=0,T=E(0),w=E(0),S=E(0);if(E(0),E(0),E(0),E(0),D=y=D-16|0,1<=(0|e))for(f=A(e,12)+i|0;;){if(1<=(0|(l=_[i+4>>2])))for(p=(e=_[i+8>>2])+A(l,48)|0,l=(h=_[i>>2]<<4)+a|0,u=(8|h)+a|0,h=(4|h)+a|0;(x=_[e+8>>2])&&((g=x+-1|0)>>>0<=1?(v=(_[e+4>>2]<<2)+r|0,T=b[(x=_[v+(_[e+12>>2]<<2)>>2]<<2)+o>>2],d=b[s+x>>2],w=b[n+x>>2],g-1?(S=w,w=b[e+20>>2],b[l>>2]=b[l>>2]+E(b[e+44>>2]*E(S*w)),b[h>>2]=b[h>>2]+E(E(d*w)*b[e+44>>2]),b[u>>2]=b[u>>2]+E(E(T*w)*b[e+44>>2])):(g=b[(x=_[(_[e+16>>2]<<2)+v>>2]<<2)+o>>2],v=b[s+x>>2],S=w,w=b[e+20>>2],c=b[e+24>>2],b[l>>2]=b[l>>2]+E(b[e+44>>2]*E(E(S*w)+E(b[n+x>>2]*c))),b[h>>2]=b[h>>2]+E(E(E(d*w)+E(v*c))*b[e+44>>2]),b[u>>2]=b[u>>2]+E(E(E(T*w)+E(g*c))*b[e+44>>2]))):(_[y>>2]=x,B(4,1024,y))),(e=e+48|0)>>>0<p>>>0;);if(T=b[(e=(_[i>>2]<<4)+a|0)>>2],b[e>>2]=T<E(0)?E(0):E(P(T,E(1))),T=b[e+4>>2],b[e+4>>2]=T<E(0)?E(0):E(P(T,E(1))),T=b[e+8>>2],b[e+8>>2]=T<E(0)?E(0):E(P(T,E(1))),!((i=i+12|0)>>>0<f>>>0))break}D=16+y|0}function z(e,i,r){var n,s,o=0;if(1==(0|i)&e>>>0<0|i>>>0<1)o=e;else for(;n=tM(o=tI(e,i,10),s=$,10),f[0|(r=r+-1|0)]=e-n|48,n=9==(0|i)&4294967295<e>>>0|9<i>>>0,e=o,i=s,n;);if(o)for(;f[0|(r=r+-1|0)]=o-A(e=(o>>>0)/10|0,10)|48,i=9<o>>>0,o=e,i;);return r}function W(e){return e+-48>>>0<10}function q(e){var i;return(i=tA(e,64))?i-e|0:64}function Z(e,i){var r,n=0;return 1024<=(0|i)?(e*=898846567431158e293,i=(0|(n=i+-1023|0))<1024?n:(e*=898846567431158e293,((0|i)<3069?i:3069)+-2046|0)):-1023<(0|i)||(e*=22250738585072014e-324,i=-1023<(0|(n=i+1022|0))?n:(e*=22250738585072014e-324,(-3066<(0|i)?i:-3066)+2044|0)),s[0]=0,r=i+1023<<20,s[1]=r,e*+a[0]}function Q(e,i){var r=0,n=i>>>0<=31?(r=_[e+4>>2],_[e>>2]):(r=_[e>>2],_[e+4>>2]=r,i=i+-32|(_[e>>2]=0),0);_[e>>2]=n<<i,_[e+4>>2]=r<<i|n>>>32-i}function J(e,i,n,s,o){var a,h=0,l=0,u=0;D=a=D-240|0,h=_[i>>2],_[232+a>>2]=h,i=_[i+4>>2],_[a>>2]=e,l=1;t:{e:{i:{if(((_[236+a>>2]=i)||1!=(0|h))&&(h=e-_[(n<<2)+o>>2]|0,!((0|r[5](h,e))<1))){for(u=!s;;){if(i=h,!(!(!u|(0|n)<2)&&(s=_[((n<<2)+o|0)-8>>2],-1<(0|r[5](h=e+-4|0,i))||-1<(0|r[5](h-s|0,i))))){if(_[(l<<2)+a>>2]=i,l=l+1|0,K(232+a|0,e=tS(232+a|0)),n=e+n|0,!_[236+a>>2]&&1==_[232+a>>2])break e;if(u=1,h=(e=i)-_[(n<<2)+o>>2]|(s=0),0<(0|r[5](h,_[a>>2])))continue;break i}break}i=e;break e}i=e}if(s)break t}tw(a,l),to(i,n,o)}D=240+a|0}function K(e,i){var r=0,n=i>>>0<=31?(r=_[e>>2],_[e+4>>2]):(r=_[e+4>>2],_[e+4>>2]=0,_[e>>2]=r,i=i+-32|0,0);_[e+4>>2]=n>>>i,_[e>>2]=n<<32-i|r>>>i}function tt(e,i){var r=g[e+4|0];_[i>>2]=_[e+64>>2]+e,_[i+4>>2]=_[e+68>>2]+e,_[i+8>>2]=_[e+72>>2]+e,_[i+12>>2]=_[e+76>>2]+e,_[i+16>>2]=_[e+80>>2]+e,_[i+20>>2]=_[e+84>>2]+e,_[i+24>>2]=_[e+88>>2]+e,_[i+28>>2]=_[e+92>>2]+e,_[i+32>>2]=_[e+96>>2]+e,_[i+36>>2]=_[e+100>>2]+e,_[i+40>>2]=_[e+104>>2]+e,_[i+44>>2]=_[e+108>>2]+e,_[i+48>>2]=_[e+112>>2]+e,_[i+52>>2]=_[e+116>>2]+e,_[i+56>>2]=_[e+120>>2]+e,_[i+60>>2]=_[e+124>>2]+e,_[i- -64>>2]=_[e+128>>2]+e,_[i+68>>2]=_[e+132>>2]+e,_[i+72>>2]=_[e+136>>2]+e,_[i+76>>2]=_[e+140>>2]+e,_[i+80>>2]=_[e+144>>2]+e,_[i+84>>2]=_[e+148>>2]+e,_[i+92>>2]=_[e+152>>2]+e,_[i+96>>2]=_[e+156>>2]+e,_[i+100>>2]=_[e+160>>2]+e,_[i+108>>2]=_[e+164>>2]+e,_[i+112>>2]=_[e+168>>2]+e,_[i+116>>2]=_[e+172>>2]+e,_[i+124>>2]=_[e+176>>2]+e,_[i+128>>2]=_[e+180>>2]+e,_[i+132>>2]=_[e+184>>2]+e,_[i+136>>2]=_[e+188>>2]+e,_[i+140>>2]=_[e+192>>2]+e,_[i+144>>2]=_[e+196>>2]+e,_[i+148>>2]=_[e+200>>2]+e,_[i+152>>2]=_[e+204>>2]+e,_[i+156>>2]=_[e+208>>2]+e,_[i+164>>2]=_[e+212>>2]+e,_[i+168>>2]=_[e+216>>2]+e,_[i+172>>2]=_[e+220>>2]+e,_[i+176>>2]=_[e+224>>2]+e,_[i+180>>2]=_[e+228>>2]+e,_[i+184>>2]=_[e+232>>2]+e,_[i+188>>2]=_[e+236>>2]+e,_[i+192>>2]=_[e+240>>2]+e,_[i+196>>2]=_[e+244>>2]+e,_[i+200>>2]=_[e+248>>2]+e,_[i+204>>2]=_[e+252>>2]+e,_[i+208>>2]=_[e+256>>2]+e,_[i+212>>2]=_[e+260>>2]+e,_[i+216>>2]=_[e+264>>2]+e,_[i+220>>2]=_[e+268>>2]+e,_[i+224>>2]=_[e+272>>2]+e,_[i+228>>2]=_[e+276>>2]+e,_[i+232>>2]=_[e+280>>2]+e,_[i+236>>2]=_[e+284>>2]+e,_[i+244>>2]=_[e+288>>2]+e,_[i+248>>2]=_[e+292>>2]+e,_[i+272>>2]=_[e+296>>2]+e,_[i+276>>2]=_[e+300>>2]+e,_[i+280>>2]=_[e+304>>2]+e,_[i+292>>2]=_[e+308>>2]+e,_[i+296>>2]=_[e+312>>2]+e,_[i+300>>2]=_[e+316>>2]+e,_[i+304>>2]=_[e+320>>2]+e,_[i+308>>2]=_[e+324>>2]+e,_[i+312>>2]=_[e+328>>2]+e,_[i+316>>2]=_[e+332>>2]+e,_[i+328>>2]=_[e+336>>2]+e,_[i+332>>2]=_[e+340>>2]+e,_[i+336>>2]=_[e+344>>2]+e,_[i+348>>2]=_[e+348>>2]+e,_[i+360>>2]=_[e+352>>2]+e,_[i+364>>2]=_[e+356>>2]+e,_[i+368>>2]=_[e+360>>2]+e,_[i+352>>2]=_[e+364>>2]+e,_[i+356>>2]=_[e+368>>2]+e,_[i+488>>2]=_[e+372>>2]+e,_[i+492>>2]=_[e+376>>2]+e,_[i+496>>2]=_[e+380>>2]+e,_[i+500>>2]=_[e+384>>2]+e,_[i+504>>2]=_[e+388>>2]+e,_[i+508>>2]=_[e+392>>2]+e,_[i+512>>2]=_[e+396>>2]+e,_[i+516>>2]=_[e+400>>2]+e,_[i+520>>2]=_[e+404>>2]+e,_[i+524>>2]=_[e+408>>2]+e,_[i+528>>2]=_[e+412>>2]+e,_[i+532>>2]=_[e+416>>2]+e,_[i+536>>2]=_[e+420>>2]+e,_[i+540>>2]=_[e+424>>2]+e,_[i+544>>2]=_[e+428>>2]+e,_[i+548>>2]=_[e+432>>2]+e,_[i+552>>2]=_[e+436>>2]+e,_[i+556>>2]=_[e+440>>2]+e,_[i+560>>2]=_[e+444>>2]+e,_[i+564>>2]=_[e+448>>2]+e,_[i+568>>2]=_[e+452>>2]+e,_[i+572>>2]=_[e+456>>2]+e,_[i+576>>2]=_[e+460>>2]+e,_[i+580>>2]=_[e+464>>2]+e,r>>>0<2||(_[i+104>>2]=_[e+468>>2]+e,r>>>0<4)||(_[i+260>>2]=_[e+472>>2]+e,_[i+264>>2]=_[e+476>>2]+e,_[i+268>>2]=_[e+480>>2]+e,_[i+88>>2]=_[e+484>>2]+e,_[i+120>>2]=_[e+488>>2]+e,_[i+160>>2]=_[e+492>>2]+e,_[i+584>>2]=_[e+496>>2]+e,_[i+588>>2]=_[e+500>>2]+e,_[i+592>>2]=_[e+504>>2]+e,_[i+596>>2]=_[e+508>>2]+e,_[i+600>>2]=_[e+512>>2]+e,_[i+604>>2]=_[e+516>>2]+e,_[i+240>>2]=_[e+520>>2]+e,_[i+252>>2]=_[e+524>>2]+e,_[i+256>>2]=_[e+528>>2]+e,_[i+372>>2]=_[e+532>>2]+e,_[i+376>>2]=_[e+536>>2]+e,_[i+380>>2]=_[e+540>>2]+e,_[i+384>>2]=_[e+544>>2]+e,_[i+388>>2]=_[e+548>>2]+e,_[i+392>>2]=_[e+552>>2]+e,_[i+396>>2]=_[e+556>>2]+e,_[i+400>>2]=_[e+560>>2]+e,_[i+416>>2]=_[e+564>>2]+e,_[i+420>>2]=_[e+568>>2]+e,_[i+424>>2]=_[e+572>>2]+e,_[i+440>>2]=_[e+576>>2]+e,_[i+444>>2]=_[e+580>>2]+e,_[i+448>>2]=_[e+584>>2]+e,_[i+464>>2]=_[e+588>>2]+e,_[i+468>>2]=_[e+592>>2]+e,_[i+472>>2]=_[e+596>>2]+e,_[i+476>>2]=_[e+600>>2]+e,_[i+480>>2]=_[e+604>>2]+e,_[i+484>>2]=_[e+608>>2]+e,4!=(0|r)&&(_[i+284>>2]=_[e+612>>2]+e,_[i+288>>2]=_[e+616>>2]+e,_[i+320>>2]=_[e+620>>2]+e,_[i+324>>2]=_[e+624>>2]+e,_[i+340>>2]=_[e+628>>2]+e,_[i+344>>2]=_[e+632>>2]+e,_[i+404>>2]=_[e+636>>2]+e,_[i+408>>2]=_[e+640>>2]+e,_[i+412>>2]=_[e+644>>2]+e,_[i+428>>2]=_[e+648>>2]+e,_[i+432>>2]=_[e+652>>2]+e,_[i+436>>2]=_[e+656>>2]+e,_[i+452>>2]=_[e+660>>2]+e,_[i+456>>2]=_[e+664>>2]+e,_[i+460>>2]=_[e+668>>2]+e))}function te(e,i,r){var n=0;t:{if(8==(0|i))i=tr(r);else{if(n=28,3&i|1!=(0|function(e){for(var i=0,r=0;r=i,e;)e&=e-1,i=i+1|0;return r}(i>>>2))||(n=48,-64-i>>>0<r>>>0))break t;i=function(e,i){var r,n,s=0,o=0,a=0;if((o=e>>>0>(s=16)?e:16)+-1&o)for(;s=(e=s)<<1,e>>>0<o>>>0;);else e=o;return -64-e>>>0<=i>>>0?(_[2086]=48,0):(s=tr(12+((o=i>>>0<11?16:i+11&-8)+e|0)|0))?(i=s+-8|0,s&e+-1?(a=(-8&(n=_[(r=s+-4|0)>>2]))-(s=(e=15<(s=((e+s|0)-1&0-e)-8|0)-i>>>0?s:e+s|0)-i|0)|0,3&n?(_[e+4>>2]=a|1&_[e+4>>2]|2,_[4+(a=e+a|0)>>2]=1|_[4+a>>2],_[r>>2]=s|1&_[r>>2]|2,_[e+4>>2]=1|_[e+4>>2],td(i,s)):(i=_[i>>2],_[e+4>>2]=a,_[e>>2]=i+s)):e=i,3&(i=_[e+4>>2])&&((s=-8&i)>>>0<=o+16>>>0||(_[e+4>>2]=o|1&i|2,_[4+(i=e+o|0)>>2]=3|(o=s-o|0),_[4+(s=e+s|0)>>2]=1|_[s+4>>2],td(i,o))),e+8|0):0}(16<i>>>0?i:16,r)}if(!i)return 1;_[e>>2]=i,n=0}return n}function ti(e){var i,r=0,n=0,s=0,o=0,a=0,h=0,l=0;t:if(e){i=(s=e+-8|0)+(e=-8&(n=_[e+-4>>2]))|0;e:if(!(1&n)){if(!(3&n)||(s=s-(n=_[s>>2])|0)>>>0<y[2091])break t;if(e=e+n|0,_[2092]!=(0|s)){if(n>>>0<=255)o=_[s+8>>2],n>>>=3,(0|(r=_[s+12>>2]))==(0|o)?(l=_[2087]&tC(n),_[2087]=l):(_[o+12>>2]=r,_[r+8>>2]=o);else{if(h=_[s+24>>2],(0|s)!=(0|(n=_[s+12>>2])))r=_[s+8>>2],_[r+12>>2]=n,_[n+8>>2]=r;else if(r=(r=_[(o=s+20|0)>>2])||_[(o=s+16|0)>>2]){for(;a=o,(r=_[(o=(n=r)+20|0)>>2])||(o=n+16|0,r=_[n+16>>2]););_[a>>2]=0}else n=0;if(h){o=_[s+28>>2];i:{if(_[(r=8652+(o<<2)|0)>>2]==(0|s)){if(_[r>>2]=n)break i;l=_[2088]&tC(o),_[2088]=l;break e}if(!(_[h+(_[h+16>>2]==(0|s)?16:20)>>2]=n))break e}_[n+24>>2]=h,(r=_[s+16>>2])&&(_[n+16>>2]=r,_[r+24>>2]=n),(r=_[s+20>>2])&&(_[n+20>>2]=r,_[r+24>>2]=n)}}}else if(!(3&~(n=_[4+i>>2])))return _[2089]=e,_[4+i>>2]=-2&n,_[s+4>>2]=1|e,_[e+s>>2]=e}if(!(i>>>0<=s>>>0)&&1&(n=_[4+i>>2])){e:{if(!(2&n)){if(_[2093]==(0|i)){if(_[2093]=s,e=_[2090]+e|0,_[2090]=e,_[s+4>>2]=1|e,_[2092]!=(0|s))break t;return _[2089]=0,_[2092]=0}if(_[2092]==(0|i))return _[2092]=s,e=_[2089]+e|0,_[2089]=e,_[s+4>>2]=1|e,_[e+s>>2]=e;e=(-8&n)+e|0;i:if(n>>>0<=255)n>>>=3,(0|(r=_[8+i>>2]))==(0|(o=_[12+i>>2]))?(l=_[2087]&tC(n),_[2087]=l):(_[r+12>>2]=o,_[o+8>>2]=r);else{if(h=_[24+i>>2],(0|i)!=(0|(n=_[12+i>>2])))r=_[8+i>>2],_[r+12>>2]=n,_[n+8>>2]=r;else if(r=(r=_[(o=20+i|0)>>2])||_[(o=16+i|0)>>2]){for(;a=o,(r=_[(o=(n=r)+20|0)>>2])||(o=n+16|0,r=_[n+16>>2]););_[a>>2]=0}else n=0;if(h){o=_[28+i>>2];r:{if(_[(r=8652+(o<<2)|0)>>2]==(0|i)){if(_[r>>2]=n)break r;l=_[2088]&tC(o),_[2088]=l;break i}if(!(_[h+(_[h+16>>2]==(0|i)?16:20)>>2]=n))break i}_[n+24>>2]=h,(r=_[16+i>>2])&&(_[n+16>>2]=r,_[r+24>>2]=n),(r=_[20+i>>2])&&(_[n+20>>2]=r,_[r+24>>2]=n)}}if(_[s+4>>2]=1|e,_[e+s>>2]=e,_[2092]!=(0|s))break e;return _[2089]=e}_[4+i>>2]=-2&n,_[s+4>>2]=1|e,_[e+s>>2]=e}if(e>>>0<=255)return n=8388+((e>>>=3)<<3)|0,e=(r=_[2087])&(e=1<<e)?_[n+8>>2]:(_[2087]=e|r,n),_[n+8>>2]=s,_[e+12>>2]=s,_[s+12>>2]=n,_[s+8>>2]=e;_[s+16>>2]=0,r=_[s+20>>2]=0,(o=e>>>8)&&(r=31,16777215<e>>>0||(r=28+((r=((r=(r=o<<(o=o+1048320>>>16&8))<<(h=r+520192>>>16&4))<<(a=r+245760>>>16&2)>>>15)-(a|o|h)|0)<<1|e>>>r+21&1)|0)),a=8652+((_[(n=s)+28>>2]=r)<<2)|0;e:if((o=_[2088])&(n=1<<r)){o=e<<(31==(0|r)?0:25-(r>>>1)|0),n=_[a>>2];i:{for(;;){if((-8&_[(r=n)+4>>2])==(0|e))break i;if(n=o>>>29,o<<=1,!(n=_[16+(a=r+(4&n)|0)>>2]))break}_[a+16>>2]=s,_[s+12>>2]=s,_[s+24>>2]=r,_[s+8>>2]=s;break e}e=_[r+8>>2],_[e+12>>2]=s,_[r+8>>2]=s,_[s+24>>2]=0,_[s+12>>2]=r,_[s+8>>2]=e}else _[2088]=n|o,_[a>>2]=s,_[s+12>>2]=s,_[s+24>>2]=a,_[s+8>>2]=s;if(e=_[2095]+-1|0,!(_[2095]=e)){for(s=8804;s=(e=_[s>>2])+8|0,e;);_[2095]=-1}}}}function tr(e){var i,r=0,n=0,s=0,o=0,a=0,h=0,l=0,u=0,c=0,d=0,f=0;D=i=D-16|0;t:{e:{i:{r:{n:{s:{o:{a:{h:{l:{u:{if(e>>>0<=244){if(3&(r=(a=_[2087])>>>(e=(h=e>>>0<11?16:e+11&-8)>>>3))){e=(r=_[8396+(o=(n=e+(1&~r)|0)<<3)>>2])+8|0,(0|(s=_[r+8>>2]))==(0|(o=o+8388|0))?(f=tC(n)&a,_[2087]=f):(_[s+12>>2]=o,_[o+8>>2]=s),_[r+4>>2]=3|(n<<=3),_[4+(r=r+n|0)>>2]=1|_[r+4>>2];break t}if(h>>>0<=(u=_[2089])>>>0)break u;if(r){r=_[8396+(s=(n=((n=(n=(r=(e=(0-(e=(0-(n=2<<e)|n)&r<<e)&e)-1|0)>>>12&16)|(r=(e>>>=r)>>>5&8))|(r=(e>>>=r)>>>2&4)|(r=(e>>>=r)>>>1&2))|(r=(e>>>=r)>>>1&1))+(e>>>r)|0)<<3)>>2],(0|(e=_[r+8>>2]))==(0|(s=s+8388|0))?(a=tC(n)&a,_[2087]=a):(_[e+12>>2]=s,_[s+8>>2]=e),e=r+8|0,_[r+4>>2]=3|h,_[4+(l=r+h|0)>>2]=1|(o=(n<<=3)-h|0),_[r+n>>2]=o,u&&(r=8388+((n=u>>>3)<<3)|0,s=_[2092],n=(n=1<<n)&a?_[r+8>>2]:(_[2087]=n|a,r),_[r+8>>2]=s,_[n+12>>2]=s,_[s+12>>2]=r,_[s+8>>2]=n),_[2092]=l,_[2089]=o;break t}if(!(d=_[2088]))break u;for(r=_[8652+(((n=(n=(r=(e=(d&0-d)-1|0)>>>12&16)|(r=(e>>>=r)>>>5&8))|(r=(e>>>=r)>>>2&4)|(r=(e>>>=r)>>>1&2))|(r=(e>>>=r)>>>1&1))+(e>>>r)<<2)>>2],s=(-8&_[r+4>>2])-h|0,n=r;e=(e=_[n+16>>2])||_[n+20>>2];)s=(n=(o=(-8&_[e+4>>2])-h|0)>>>0<s>>>0)?o:s,r=n?e:r,n=e;if(c=_[r+24>>2],(0|(o=_[r+12>>2]))!=(0|r)){e=_[r+8>>2],_[e+12>>2]=o,_[o+8>>2]=e;break e}if(!(e=_[(n=r+20|0)>>2])){if(!(e=_[r+16>>2]))break l;n=r+16|0}for(;l=n,(e=_[(n=(o=e)+20|0)>>2])||(n=o+16|0,e=_[o+16>>2]););_[l>>2]=0;break e}if(h=-1,!(4294967231<e>>>0)&&(h=-8&(r=e+11|0),u=_[2088])){n=0-h|0,a=0,(r>>>=8)&&(a=31,16777215<h>>>0||(a=28+((e=((a=(r<<=s=r+1048320>>>16&8)<<(e=r+520192>>>16&4))<<(r=a+245760>>>16&2)>>>15)-(r|e|s)|0)<<1|h>>>e+21&1)|0));c:{d:{if(s=_[8652+(a<<2)>>2])for(r=h<<(31==(0|a)?0:25-(a>>>1)|0),e=0;;){if(!(n>>>0<=(l=(-8&_[s+4>>2])-h|0)>>>0||(o=s,n=l))){n=0,e=s;break d}if(l=_[s+20>>2],s=_[16+((r>>>29&4)+s|0)>>2],e=l&&(0|l)!=(0|s)?l:e,r<<=!!(0|s),!s)break}else e=0;if(!(e|o)){if(!(e=(0-(e=2<<a)|e)&u))break u;e=_[8652+(((s=(s=(r=(e=(e&0-e)-1|0)>>>12&16)|(r=(e>>>=r)>>>5&8))|(r=(e>>>=r)>>>2&4)|(r=(e>>>=r)>>>1&2))|(r=(e>>>=r)>>>1&1))+(e>>>r)<<2)>>2]}if(!e)break c}for(;n=(r=(s=(-8&_[e+4>>2])-h|0)>>>0<n>>>0)?s:n,o=r?e:o,e=(r=_[e+16>>2])||_[e+20>>2];);}if(!(!o|n>>>0>=_[2089]-h>>>0)){if(l=_[o+24>>2],(0|o)!=(0|(r=_[o+12>>2]))){e=_[o+8>>2],_[e+12>>2]=r,_[r+8>>2]=e;break i}if(!(e=_[(s=o+20|0)>>2])){if(!(e=_[o+16>>2]))break h;s=o+16|0}for(;a=s,(e=_[(s=(r=e)+20|0)>>2])||(s=r+16|0,e=_[r+16>>2]););_[a>>2]=0;break i}}}if(h>>>0<=(r=_[2089])>>>0){e=_[2092],16<=(n=r-h|0)>>>0?(_[2089]=n,_[2092]=s=e+h|0,_[s+4>>2]=1|n,_[e+r>>2]=n,_[e+4>>2]=3|h):(_[2092]=0,_[2089]=0,_[e+4>>2]=3|r,_[4+(r=e+r|0)>>2]=1|_[r+4>>2]),e=e+8|0;break t}if(h>>>0<(s=_[2090])>>>0){_[2090]=r=s-h|0,e=_[2093],_[2093]=n=e+h|0,_[n+4>>2]=1|r,_[e+4>>2]=3|h,e=e+8|0;break t}if((n=(a=(n=o=h+47|(e=0))+(r=_[2205]?_[2207]:(_[2208]=-1,_[2209]=-1,_[2206]=4096,_[2207]=4096,_[2205]=12+i&-16^1431655768,_[2210]=0,_[2198]=0,4096))|0)&(l=0-r|0))>>>0<=h>>>0||(r=_[2197])&&(c=(u=_[2195])+n|0)>>>0<=u>>>0|r>>>0<c>>>0)break t;if(4&g[8792])break s;u:{c:{if(r=_[2093])for(e=8796;;){if((u=_[e>>2])+_[e+4>>2]>>>0>r>>>0&&u>>>0<=r>>>0)break c;if(!(e=_[e+8>>2]))break}if(-1==(0|(r=j(0)))||(a=n,(a=(s=(e=_[2206])+-1|0)&r?(n-r|0)+(r+s&0-e)|0:a)>>>0<=h>>>0|2147483646<a>>>0)||(e=_[2197])&&(l=(s=_[2195])+a|0)>>>0<=s>>>0|e>>>0<l>>>0)break o;if((0|r)!=(0|(e=j(a))))break u;break n}if(2147483646<(a=l&a-s)>>>0)break o;if((0|(r=j(a)))==(_[e>>2]+_[e+4>>2]|0))break a;e=r}if(!(h+48>>>0<=a>>>0|2147483646<a>>>0|-1==(0|(r=e)))){if(2147483646<(e=(e=_[2207])+(o-a|0)&0-e)>>>0)break n;if(-1!=(0|j(e))){a=e+a|0;break n}j(0-a|0);break o}if(-1!=(0|r))break n;break o}o=0;break e}r=0;break i}if(-1!=(0|r))break n}_[2198]=4|_[2198]}if(2147483646<n>>>0||(r=j(n),(e=j(0))>>>0<=r>>>0|-1==(0|r)|-1==(0|e))||(a=e-r|0)>>>0<=h+40>>>0)break r}e=_[2195]+a|0,(_[2195]=e)>>>0>y[2196]&&(_[2196]=e);n:{s:{o:{if(n=_[2093]){for(e=8796;;){if(((s=_[e>>2])+(o=_[e+4>>2])|0)==(0|r))break o;if(!(e=_[e+8>>2]))break}break s}for((e=_[2091])>>>0<=r>>>0&&e||(_[2091]=r),e=0,_[2200]=a,_[2199]=r,_[2095]=-1,_[2096]=_[2205],_[2202]=0;_[8396+(n=e<<3)>>2]=s=n+8388|0,_[n+8400>>2]=s,32!=(0|(e=e+1|0)););_[2090]=s=(e=a+-40|0)-(n=r+8&7?-8-r&7:0)|0,_[2093]=n=r+n|0,_[n+4>>2]=1|s,_[4+(e+r|0)>>2]=40,_[2094]=_[2209];break n}if(!(8&g[e+12|0]|r>>>0<=n>>>0|n>>>0<s>>>0)){_[e+4>>2]=o+a,_[2093]=r=(e=n+8&7?-8-n&7:0)+n|0,s=_[2090]+a|0,_[2090]=e=s-e|0,_[r+4>>2]=1|e,_[4+(n+s|0)>>2]=40,_[2094]=_[2209];break n}}r>>>0<(o=_[2091])>>>0&&(_[2091]=r,o=0),s=r+a|0,e=8796;s:{o:{a:{h:{l:{u:{for(;(0|s)!=_[e>>2];)if(!(e=_[e+8>>2]))break u;if(!(8&g[e+12|0]))break l}for(e=8796;;){if((s=_[e>>2])>>>0<=n>>>0&&n>>>0<(o=s+_[e+4>>2]|0)>>>0)break h;e=_[e+8>>2]}}if(_[e>>2]=r,_[e+4>>2]=_[e+4>>2]+a,_[4+(c=(r+8&7?-8-r&7:0)+r|0)>>2]=3|h,e=((r=s+(s+8&7?-8-s&7:0)|0)-c|0)-h|0,l=h+c|0,(0|r)==(0|n)){_[2093]=l,e=_[2090]+e|0,_[2090]=e,_[l+4>>2]=1|e;break o}if(_[2092]==(0|r)){_[2092]=l,e=_[2089]+e|0,_[2089]=e,_[l+4>>2]=1|e,_[e+l>>2]=e;break o}if(1==(3&(n=_[r+4>>2]))){d=-8&n;l:if(n>>>0<=255)o=n>>>3,n=_[r+8>>2],(0|(s=_[r+12>>2]))==(0|n)?(f=_[2087]&tC(o),_[2087]=f):(_[n+12>>2]=s,_[s+8>>2]=n);else{if(u=_[r+24>>2],(0|(a=_[r+12>>2]))!=(0|r))n=_[r+8>>2],_[n+12>>2]=a,_[a+8>>2]=n;else if(h=(h=_[(s=r+20|0)>>2])||_[(s=r+16|0)>>2]){for(;n=s,(h=_[(s=(a=h)+20|0)>>2])||(s=a+16|0,h=_[a+16>>2]););_[n>>2]=0}else a=0;if(u){n=_[r+28>>2];u:{if(_[(s=8652+(n<<2)|0)>>2]==(0|r)){if(_[s>>2]=a)break u;f=_[2088]&tC(n),_[2088]=f;break l}if(!(_[u+(_[u+16>>2]==(0|r)?16:20)>>2]=a))break l}_[a+24>>2]=u,(n=_[r+16>>2])&&(_[a+16>>2]=n,_[n+24>>2]=a),(n=_[r+20>>2])&&(_[a+20>>2]=n,_[n+24>>2]=a)}}r=r+d|0,e=e+d|0}if(_[r+4>>2]=-2&_[r+4>>2],_[l+4>>2]=1|e,(_[e+l>>2]=e)>>>0<=255){e=8388+((r=e>>>3)<<3)|0,r=(n=_[2087])&(r=1<<r)?_[e+8>>2]:(_[2087]=r|n,e),_[e+8>>2]=l,_[r+12>>2]=l,_[l+12>>2]=e,_[l+8>>2]=r;break o}if(r=0,(s=e>>>8)&&(r=31,16777215<e>>>0||(r=28+((r=((h=(s<<=o=s+1048320>>>16&8)<<(r=s+520192>>>16&4))<<(s=h+245760>>>16&2)>>>15)-(s|r|o)|0)<<1|e>>>r+21&1)|0)),_[(n=l)+28>>2]=r,_[l+16>>2]=0,n=8652+(r<<2)|(_[l+20>>2]=0),(s=_[2088])&(o=1<<r)){for(s=e<<(31==(0|r)?0:25-(r>>>1)|0),r=_[n>>2];;){if((-8&_[(n=r)+4>>2])==(0|e))break a;if(r=s>>>29,s<<=1,!(r=_[16+(o=(4&r)+n|0)>>2]))break}_[o+16>>2]=l}else _[2088]=s|o,_[n>>2]=l;_[l+24>>2]=n,_[l+12>>2]=l,_[l+8>>2]=l;break o}for(_[2090]=l=(e=a+-40|0)-(s=r+8&7?-8-r&7:0)|0,_[2093]=s=r+s|0,_[s+4>>2]=1|l,_[4+(e+r|0)>>2]=40,_[2094]=_[2209],_[(s=(e=(o+(o+-39&7?39-o&7:0)|0)-47|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=_[2202],_[s+16>>2]=_[2201],_[s+20>>2]=e,e=_[2200],_[s+8>>2]=_[2199],_[s+12>>2]=e,_[2201]=s+8,_[2200]=a,_[2199]=r,e=s+24|(_[2202]=0);_[e+4>>2]=7,r=e+8|0,e=e+4|0,r>>>0<o>>>0;);if((0|n)==(0|s))break n;if(_[s+4>>2]=-2&_[s+4>>2],_[n+4>>2]=1|(o=s-n|0),(_[s>>2]=o)>>>0<=255){e=8388+((r=o>>>3)<<3)|0,r=(s=_[2087])&(r=1<<r)?_[e+8>>2]:(_[2087]=r|s,e),_[e+8>>2]=n,_[r+12>>2]=n,_[n+12>>2]=e,_[n+8>>2]=r;break n}if(_[n+16>>2]=0,e=_[n+20>>2]=0,(s=o>>>8)&&(e=31,16777215<o>>>0||(e=28+((e=((l=(s<<=a=s+1048320>>>16&8)<<(e=s+520192>>>16&4))<<(s=l+245760>>>16&2)>>>15)-(s|e|a)|0)<<1|o>>>e+21&1)|0)),r=8652+((_[(r=n)+28>>2]=e)<<2)|0,(s=_[2088])&(a=1<<e)){for(e=o<<(31==(0|e)?0:25-(e>>>1)|0),r=_[r>>2];;){if((0|o)==(-8&_[(s=r)+4>>2]))break s;if(r=e>>>29,e<<=1,!(r=_[16+(a=s+(4&r)|0)>>2]))break}_[a+16>>2]=n,_[n+24>>2]=s}else _[2088]=s|a,_[r>>2]=n,_[n+24>>2]=r;_[n+12>>2]=n,_[n+8>>2]=n;break n}e=_[n+8>>2],_[e+12>>2]=l,_[n+8>>2]=l,_[l+24>>2]=0,_[l+12>>2]=n,_[l+8>>2]=e}e=c+8|0;break t}e=_[s+8>>2],_[e+12>>2]=n,_[s+8>>2]=n,_[n+24>>2]=0,_[n+12>>2]=s,_[n+8>>2]=e}if(!((e=_[2090])>>>0<=h>>>0)){_[2090]=r=e-h|0,e=_[2093],_[2093]=n=e+h|0,_[n+4>>2]=1|r,_[e+4>>2]=3|h,e=e+8|0;break t}}_[2086]=48,e=0;break t}i:if(l){e=_[o+28>>2];r:{if(_[(s=8652+(e<<2)|0)>>2]==(0|o)){if(_[s>>2]=r)break r;u=tC(e)&u,_[2088]=u;break i}if(!(_[l+(_[l+16>>2]==(0|o)?16:20)>>2]=r))break i}_[r+24>>2]=l,(e=_[o+16>>2])&&(_[r+16>>2]=e,_[e+24>>2]=r),(e=_[o+20>>2])&&(_[r+20>>2]=e,_[e+24>>2]=r)}i:if(n>>>0<=15)_[o+4>>2]=3|(e=n+h|0),_[4+(e=e+o|0)>>2]=1|_[e+4>>2];else if(_[o+4>>2]=3|h,_[4+(s=o+h|0)>>2]=1|n,(_[n+s>>2]=n)>>>0<=255)e=8388+((r=n>>>3)<<3)|0,r=(n=_[2087])&(r=1<<r)?_[e+8>>2]:(_[2087]=r|n,e),_[e+8>>2]=s,_[r+12>>2]=s,_[s+12>>2]=e,_[s+8>>2]=r;else{e=0,(h=n>>>8)&&(e=31,16777215<n>>>0||(e=28+((e=((l=(h<<=a=h+1048320>>>16&8)<<(e=h+520192>>>16&4))<<(h=l+245760>>>16&2)>>>15)-(h|e|a)|0)<<1|n>>>e+21&1)|0)),_[(r=s)+28>>2]=e,_[s+16>>2]=0,r=8652+(e<<2)|(_[s+20>>2]=0);r:{if((h=1<<e)&u){for(e=n<<(31==(0|e)?0:25-(e>>>1)|0),h=_[r>>2];;){if((-8&_[(r=h)+4>>2])==(0|n))break r;if(h=e>>>29,e<<=1,!(h=_[16+(a=(4&h)+r|0)>>2]))break}_[a+16>>2]=s}else _[2088]=h|u,_[r>>2]=s;_[s+24>>2]=r,_[s+12>>2]=s,_[s+8>>2]=s;break i}e=_[r+8>>2],_[e+12>>2]=s,_[r+8>>2]=s,_[s+24>>2]=0,_[s+12>>2]=r,_[s+8>>2]=e}e=o+8|0;break t}e:if(c){e=_[r+28>>2];i:{if(_[(n=8652+(e<<2)|0)>>2]==(0|r)){if(_[n>>2]=o)break i;f=tC(e)&d,_[2088]=f;break e}if(!(_[c+(_[c+16>>2]==(0|r)?16:20)>>2]=o))break e}_[o+24>>2]=c,(e=_[r+16>>2])&&(_[o+16>>2]=e,_[e+24>>2]=o),(e=_[r+20>>2])&&(_[o+20>>2]=e,_[e+24>>2]=o)}s>>>0<=15?(_[r+4>>2]=3|(e=s+h|0),_[4+(e=e+r|0)>>2]=1|_[e+4>>2]):(_[r+4>>2]=3|h,_[4+(h=r+h|0)>>2]=1|s,_[s+h>>2]=s,u&&(e=8388+((n=u>>>3)<<3)|0,o=_[2092],n=(n=1<<n)&a?_[e+8>>2]:(_[2087]=n|a,e),_[e+8>>2]=o,_[n+12>>2]=o,_[o+12>>2]=e,_[o+8>>2]=n),_[2092]=h,_[2089]=s),e=r+8|0}return D=16+i|0,e}function tn(e,i,n,s,o,a,h){var l,u,c,d=0,v=0,y=0,b=0,T=0,E=0,w=0,S=0,P=0,M=0,I=0,C=0;_[76+(D=c=D-80|0)>>2]=i,u=55+c|0,l=56+c|0,i=0;t:{e:{i:for(;;){(0|P)<0||(P=(2147483647-P|0)<(0|i)?(_[2086]=61,-1):i+P|0);r:{n:{s:{o:{a:{h:{l:{u:{c:{d:{f:{p:{_:{if(y=g[0|(i=b=_[76+c>>2])]){for(;;){m:{g:{v:if(d=255&y){if(37!=(0|d))break g;for(y=i;;){if(37!=g[i+1|0])break v;if(_[76+c>>2]=d=i+2|0,y=y+1|0,v=g[i+2|0],i=d,37!=(0|v))break}}else y=i;if(i=y-b|0,e&&k(e,b,i),i)continue i;M=-1,(T=!W(f[_[76+(d=c)>>2]+(y=1)|0]))|36!=g[(i=_[76+c>>2])+2|0]||(M=f[i+1|0]+-48|0,I=1,y=3),_[d+76>>2]=i=y+i|0;v:if(31<(v=(w=f[(y=0)|i])+-32|0)>>>0)d=i;else if(d=i,75913&(v=1<<v))for(;;){if(_[76+c>>2]=d=i+1|0,y|=v,31<(v=(w=f[i+1|0])+-32|0)>>>0)break v;if(i=d,!(75913&(v=1<<v)))break}if(42==(0|w)){if(T=c,W(f[d+1|0])&&36==g[(i=_[76+c>>2])+2|0])_[((f[i+1|0]<<2)+o|0)-192>>2]=10,S=_[((f[i+1|0]<<3)+s|0)-384>>2],I=1,i=i+3|0;else{if(I)break e;S=I=0,e&&(i=_[n>>2],_[n>>2]=i+4,S=_[i>>2]),i=_[76+c>>2]+1|0}_[T+76>>2]=i,-1<(0|S)||(S=0-S|0,y|=8192)}else{if((0|(S=tb(76+c|0)))<0)break e;i=_[76+c>>2]}if(v=-1,46==g[0|i]){if(42==g[i+1|0]){if(W(f[i+2|0])&&36==g[(i=_[76+c>>2])+3|0])_[((f[i+2|0]<<2)+o|0)-192>>2]=10,v=_[((f[i+2|0]<<3)+s|0)-384>>2],_[76+c>>2]=i=i+4|0;else{if(I)break e;v=e?(i=_[n>>2],_[n>>2]=i+4,_[i>>2]):0,i=_[76+c>>2]+2|0,_[76+c>>2]=i}}else _[76+c>>2]=i+1,v=tb(76+c|0),i=_[76+c>>2]}for(d=0;;){if(C=d,E=-1,57<f[0|i]+-65>>>0)break t;if(_[76+c>>2]=w=i+1|0,d=f[0|i],i=w,!((d=g[3295+(d+A(C,58)|0)|0])+-1>>>0<8))break}if(!d)break t;v:{y:{b:{if(19==(0|d)){if((0|M)<=-1)break b;break t}if((0|M)<0)break y;_[(M<<2)+o>>2]=d,d=_[4+(i=(M<<3)+s|0)>>2],_[64+c>>2]=_[i>>2],_[68+c>>2]=d}if(i=0,e)break v;continue i}if(!e)break r;ty(64+c|0,d,n,h),w=_[76+c>>2]}if(T=-65537&y,y=8192&y?T:y,M=3336,d=l,i=f[w+-1|(E=0)],(w=(i=C&&3==(15&i)?-33&i:i)+-88|0)>>>0<=32)break m;v:{y:{b:{x:{if(6<(T=i+-65|0)>>>0){if(83!=(0|i))break n;if(!v)break x;d=_[64+c>>2];break y}switch(T-1|0){case 1:break b;case 0:case 2:break n;default:break _}}N(e,32,S,i=0,y);break v}_[12+c>>2]=0,_[8+c>>2]=_[64+c>>2],_[64+c>>2]=8+c,v=-1,d=8+c|0}i=0;y:{for(;;){if(!(b=_[d>>2]))break y;if((T=(0|(b=tg(4+c|0,b)))<0)|v-i>>>0<b>>>0)break;if(d=d+4|0,!((i=i+b|0)>>>0<v>>>0))break y}if(E=-1,T)break t}if(N(e,32,S,i,y),i)for(v=0,d=_[64+c>>2];;){if(!(b=_[d>>2])||(0|i)<(0|(v=(b=tg(4+c|0,b))+v|0)))break v;if(k(e,4+c|0,b),d=d+4|0,!(v>>>0<i>>>0))break}else i=0}N(e,32,S,i,8192^y),i=(0|i)<(0|S)?S:i;continue i}_[76+c>>2]=d=i+1|0,y=g[i+1|0],i=d;continue}break}switch(w-1|0){case 28:break a;case 21:break h;case 23:break u;case 22:break c;case 11:case 16:break d;case 10:break f;case 26:break p;case 8:case 12:case 13:case 14:break _;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break n;default:break l}}if(E=P,e)break t;if(!I)break r;for(i=1;;){if(e=_[(i<<2)+o>>2]){if(ty((i<<3)+s|0,e,n,h),10!=(0|(i=i+(E=1)|0)))continue;break t}break}if(E=1,9<i>>>0||(E=-1,_[(i<<2)+o>>2]))break t;for(;!_[((i=i+1|0)<<2)+o>>2]&&10!=(0|i););E=i>>>0<10?-1:1;break t}i=0|r[a](e,x[64+c>>3],S,v,y,i);continue}d=(i=tA(b=(i=_[64+c>>2])||3346,v))||v+b|0,y=T,v=i?i-b|0:v;break n}f[55+c|0]=_[64+c>>2],v=1,b=u,y=T;break n}if(i=T=_[68+c>>2],b=_[64+c>>2],(0|i)<-1||(0|i)<=-1&&!(4294967295<b>>>0)){i=0-(i+(0<b>>>0)|0)|0,_[64+c>>2]=b=0-b|0,_[68+c>>2]=i,E=1,M=3336;break o}if(2048&y){E=1,M=3337;break o}M=(E=1&y)?3338:3336;break o}if(b=function(e,i,r){if(e|i)for(;f[0|(r=r+-1|0)]=7&e|48,(e=(7&i)<<29|e>>>3)|(i>>>=3););return r}(_[64+c>>2],_[68+c>>2],l),!(8&y))break s;v=(0|(i=l-b|0))<(0|v)?v:i+1|0;break s}v=8<v>>>0?v:8,y|=8,i=120}if(b=function(e,i,r,n){if(e|i)for(;f[0|(r=r+-1|0)]=g[3824+(15&e)|0]|n,(e=(15&i)<<28|e>>>4)|(i>>>=4););return r}(_[64+c>>2],_[68+c>>2],l,32&i),!(8&y)|!(_[64+c>>2]|_[68+c>>2]))break s;M=3336+(i>>>4)|0,E=2;break s}if(7<(d=255&C)>>>(i=0))continue;switch(d-1|0){default:case 0:case 5:_[_[64+c>>2]>>2]=P;continue;case 1:d=_[64+c>>2],_[d>>2]=P,_[d+4>>2]=P>>31;continue;case 2:p[_[64+c>>2]>>1]=P;continue;case 3:f[_[64+c>>2]]=P;continue;case 4:continue;case 6:}d=_[64+c>>2],_[d>>2]=P,_[d+4>>2]=P>>31;continue}b=_[64+c>>2],i=_[68+c>>2],M=3336}b=z(b,i,l)}y=-1<(0|v)?-65537&y:y,v=!!((T=i=_[68+c>>2])|(w=_[64+c>>2]))|v?(0|(i=!(T|w)+(l-b|0)|0))<(0|v)?v:i:(b=l,0)}N(e,32,i=(0|S)<(0|(d=(v=(0|v)<(0|(T=d-b|0))?T:v)+E|0))?d:S,d,y),k(e,M,E),N(e,48,i,d,65536^y),N(e,48,v,T,0),k(e,b,T),N(e,32,i,d,8192^y);continue}break}E=0;break t}E=-1}return D=80+c|0,E}function ts(e){var i,r=0,n=0,s=0,o=0;s=4,n=1439;t:if(r=g[0|e]){for(;!((0|(i=g[0|n]))!=(0|r)||!(s=s+-1|0)|!i);)if(n=n+1|0,r=g[e+1|0],e=e+1|0,!r)break t;o=r}return(255&o)-g[0|n]|0}function to(e,i,n){var s,o,a=0,h=0,l=0;_[(D=o=D-240|0)>>2]=e,h=1;t:if(!((0|i)<2))for(a=e;;){if(a=(s=a+-4|0)-_[((l=i+-2|0)<<2)+n>>2]|0,0<=(0|r[5](e,a))&&-1<(0|r[5](e,s))||(e=(h<<2)+o|0,0<=(0|r[5](a,s))?(_[e>>2]=a,l=i+-1|0):a=_[e>>2]=s,h=h+1|0,(0|l)<2))break t;e=_[o>>2],i=l}tw(o,h),D=240+o|0}function ta(e){var i,n,o,a,u=0;if(E(0),_[e+428>>2]&&(n=_[e+332>>2],U(_[e+460>>2],_[e+436>>2],i=n<<2),U(_[e+464>>2],_[e+440>>2],i),U(_[e+468>>2],_[e+448>>2],i),g[_[e>>2]+4|0]<4||(U(_[e+472>>2],_[e+452>>2],i=n<<4),U(_[e+476>>2],_[e+456>>2],i))),function(e){var i,r,n,s=0,o=E(0),a=E(0),h=0,l=E(0);if(E(0),E(0),1<=(0|(h=_[e>>2])))for(n=(s=_[e+4>>2])+A(h,52)|0,e=_[e+12>>2];o=b[e>>2],b[s+44>>2]!=(o=(i=_[s+16>>2])?(a=o,o=b[s+4>>2],l=b[s+12>>2],a=E(E(a-o)/l),r=E(M(a)),h=E(w(r))<E(2147483648)?~~r:-2147483648,E(o+E(l*E(a-E(0|h))))):(l=b[s+4>>2],a=b[s+8>>2],o<l?l:a<o?a:o))?(b[s+44>>2]=o,_[s+48>>2]=1):_[s+48>>2]=0,i||(b[e>>2]=o),e=e+4|0,(s=s+52|0)>>>0<n>>>0;);}(e+540|0),function(e){var i,r,n,s,o,a,h=0,l=0,u=E(0),c=0,d=E(0),f=(E(0),E(0),0),p=E(0),g=0,v=0,y=0;if(E(0),1<=(0|(c=_[e+540>>2])))for(o=(f=_[e+544>>2])+A(c,52)|0,a=_[e+644>>2];;){t:if(!(_[f>>2]||(0|(c=_[f+32>>2]))<1)){if(n=(e=_[f+28>>2])+A(c,28)|0,s=b[f+24>>2],r=b[f+20>>2],i=b[f+44>>2],a)for(;;){p=E(v=0);e:{i:{r:{if((0|(l=_[e>>2]))<1)h=c=0;else if(u=E((d=b[(g=_[e+4>>2])>>2])-r),1==(0|l))c=i<E(r+d)^1|u<i^1,h=0;else{if(i<u){c=1,h=0;break i}if(c=0,i<E(r+d))h=0;else{if(h=1,!(i<E(r+(u=b[g+4>>2]))))for(;;){if((0|l)==(0|(h=h+1|0)))break r;if(d=u,i<E(r+(u=b[g+(h<<2)>>2])))break}E(u-r)<i||(h=h+-1|0,(u=E(u-d))<s)||(p=E(E(i-d)/u))}}if(c)break i;if(g=l=1,_[e+16>>2])break e;break i}h=l+-1|0,c=1}g=(l=(d=b[e+12>>2])!=p)&(p==E(0)|d==E(0))|_[e+8>>2]!=(0|h),v=c}if(_[e+20>>2]=g,_[e+24>>2]=l,b[e+12>>2]=p,_[e+16>>2]=v,_[e+8>>2]=h,!((e=e+28|0)>>>0<n>>>0))break}else{if(!_[f+48>>2]){for(;;)if(_[e+20>>2]=0,!((e=e+28|(_[e+24>>2]=0))>>>0<n>>>0))break t}for(;;){p=E(v=0);e:{i:{r:{n:if(!(((l=0)|(h=_[(g=e)>>2]))<1)){if(u=E((d=b[(c=_[e+4>>2])>>2])-r),1!=(0|h)){if(!(i<u)){if(l=0,i<E(r+d))break n;l=1;s:if(!(i<E(r+(u=b[c+4>>2])))){for(h=h+-1|0;d=u,(0|h)!=(0|l);)if(i<E(r+(u=b[c+((l=l+1|0)<<2)>>2])))break s;c=1;break i}if(c=0,E(u-r)<i){h=l;break r}if(h=l+-1|0,(u=E(u-d))<s)break r;p=E(E(i-d)/u);break r}c=1,h=0;break i}l=i<E(r+d)^1|u<i^1}c=l,h=0}if(!c&&(y=l=1,_[e+16>>2]))break e}v=c,y=(l=(d=b[e+12>>2])!=p)&(p==E(0)|d==E(0))|_[e+8>>2]!=(0|h)}if(_[g+20>>2]=y,_[e+24>>2]=l,b[e+12>>2]=p,_[e+16>>2]=v,_[e+8>>2]=h,!((e=e+28|0)>>>0<n>>>0))break}}}if(!((f=f+52|0)>>>0<o>>>0))break}}(e),function(e){var i,r,n,s,o,a=0,h=E(0),l=0,u=0,c=E(0),d=0,f=E(0);if(E(0),!(g[_[e>>2]+4|0]<4||(0|(a=_[e+540>>2]))<1))for(s=(d=_[e+544>>2])+A(a,52)|0,o=_[e+644>>2];;){t:if(1==_[d>>2]&&!((0|(a=_[d+40>>2]))<1)){if(r=(e=_[d+36>>2])+A(a,28)|0,i=b[d+44>>2],o)for(;;){f=E(a=0);e:if(!((0|(u=_[e>>2]))<2||i<=(h=b[(l=_[e+4>>2])>>2]))){a=1;i:if(!(i<(c=b[l+4>>2]))){for(;h=c,(0|u)!=(0|(a=a+1|0));)if(i<(c=b[l+(a<<2)>>2]))break i;a=u+-1|0;break e}f=E(E(i-h)/E(c-h)),a=a+-1|0}if(h=b[e+16>>2],b[e+16>>2]=f,u=_[e+12>>2],_[e+12>>2]=a,_[e+24>>2]=l=h!=f,_[e+20>>2]=l&(f==E(0)|h==E(0))|(0|a)!=(0|u),!((e=e+28|0)>>>0<r>>>0))break}else{if(!_[d+48>>2]){for(;;)if(_[e+20>>2]=0,!((e=e+28|(_[e+24>>2]=0))>>>0<r>>>0))break t}for(;;){f=E(u=0);e:if(!((0|(n=_[e>>2]))<2||i<=(h=b[(l=_[e+4>>2])>>2]))){if(a=1,!(i<(c=b[l+4>>2])))for(u=n+-1|0;;){if(h=c,(0|a)==(0|u))break e;if(i<(c=b[l+((a=a+1|0)<<2)>>2]))break}f=E(E(i-h)/E(c-h)),u=a+-1|0}if(h=b[e+16>>2],b[e+16>>2]=f,a=_[e+12>>2],_[e+12>>2]=u,_[e+24>>2]=l=h!=f,_[e+20>>2]=l&(f==E(0)|h==E(0))|(0|a)!=(0|u),!((e=e+28|0)>>>0<r>>>0))break}}}if(!((d=d+52|0)>>>0<s>>>0))break}}(e),function(e){var i,r,n,s,o,a,h,l=0,u=0,c=0,d=0,f=0,p=0,g=0,v=E(0),y=0,x=0,T=0,w=0,S=0;if(1<=(0|(u=_[e+564>>2])))for(a=(f=_[e+568>>2])+A(u,36)|0,s=_[e+644>>2];;){t:{if(!(p=((c=d=u=0)|(r=_[f+4>>2]))<1))for(y=_[f>>2],e=w=0;;){if(l=_[y+(e<<2)>>2],_[l+16>>2]){l=1,S=0;break t}if(c=c||_[l+24>>2],u=u||_[l+20>>2],d=(b[l+12>>2]!=E(0))+d|0,(0|r)==(0|(e=e+1|0)))break}if(l=0,(w=s?1:c)|(S=s?1:u)&&(_[f+12>>2]=y=1<<d,31!=(0|d))){for(u=_[f+20>>2],o=_[f>>2],c=(e=_[f+16>>2])+(g=y<<2)|0,c=V(e,0,4+((-1^e)+((e=e+4|0)>>>0<c>>>0?c:e)|0)&-4),g=u+g|0,e=u;_[e>>2]=1065353216,(e=e+4|0)>>>0<g>>>0;);if(!p){if(p=0,g=l=1,d)for(;;){if(d=_[(p<<2)+o>>2],T=A(x=_[d+8>>2],l),(v=b[d+12>>2])!=E(e=0)){for(_[c>>2]=T+_[c>>2],b[u>>2]=E(E(1)-v)*b[u>>2],x=A(x+(e=1)|0,l);v=b[d+12>>2],h=_[(n=(i=e<<2)+c|0)>>2],_[n>>2]=h+((n=e&g)?x:T),b[(i=u+i|0)>>2]=(n?v:E(E(1)-v))*b[i>>2],(0|y)!=(0|(e=e+1|0)););g<<=1}else for(;_[(x=c+(e<<2)|0)>>2]=T+_[x>>2],(0|y)!=(0|(e=e+1|0)););if(l=A(_[d>>2],l),(0|r)==(0|(p=p+1|0)))break}else for(;;){if(d=_[(p<<2)+o>>2],g=A(_[d+8>>2],l),(v=b[d+12>>2])!=E(e=0))_[c>>2]=g+_[c>>2],b[u>>2]=E(E(1)-v)*b[u>>2];else for(;_[(T=c+(e<<2)|0)>>2]=g+_[T>>2],(0|y)!=(0|(e=e+1|0)););if(l=A(_[d>>2],l),(0|r)==(0|(p=p+1|0)))break}l=0}}}if(_[f+32>>2]=l,_[f+24>>2]=S,_[f+28>>2]=w,!((f=f+36|0)>>>0<a>>>0))break}}(e),function(e){var i,r,n,s,o=E(0),a=0,h=0,l=0,u=0,c=0,d=E(0),f=E(0),p=E(0),v=0,y=0,x=0;if(!(g[_[e>>2]+4|0]<4||(0|(a=_[e+588>>2]))<1))for(s=(l=_[e+592>>2])+A(a,48)|0,i=_[e+644>>2];;){if(e=_[l>>2],(y=i?1:_[e+20>>2])|(x=i?1:_[e+24>>2])){t:{e:{c=l,u=_[e+8>>2],a=_[e+12>>2],o=b[e+16>>2],e=(0|u)!=(0|a);i:{if(o!=E(0)){if(e=a+1|0,(0|a)==(0|u)){_[l+8>>2]=y=1,o=E(E(1)-o),x=1;break i}e=(0|e)==(0|u)?1:2}if(_[c+8>>2]=e,!x)break e;e=a}b[l+24>>2]=o,b[l+20>>2]=E(1)-o;break t}x=0,e=a}y?(_[l+12>>2]=e,_[l+16>>2]=e+1):y=0}else y=x=0;t:if((0|(r=_[l+36>>2]))<1)p=E(1);else{if(n=_[l+40>>2],e=0,p=E(1),!i)for(;;){e:{i:{if(a=_[(e<<2)+n>>2],h=_[a>>2]){if(!_[h+48>>2]){o=b[a+16>>2];break e}if((0|(u=_[a+12>>2]))<1){o=E(1),b[a+16>>2]=1;break e}if(v=_[a+8>>2],1!=(0|u)&&!((d=b[h+44>>2])<=(f=b[(c=_[a+4>>2])>>2])))break i;o=b[v>>2],b[a+16>>2]=o;break e}_[a+16>>2]=1065353216,o=E(1);break e}h=1;i:if(!(d<(o=b[c+4>>2]))){for(;f=o,(0|u)!=(0|(h=h+1|0));)if(d<(o=b[c+(h<<2)>>2]))break i;o=b[(v+(u<<2)|0)-4>>2],b[a+16>>2]=o;break e}c=a,o=E(E(d-f)/E(o-f)),o=E(E(o*b[(a=v+(h<<2)|0)>>2])+E(b[a+-4>>2]*E(E(1)-o))),b[c+16>>2]=o}if(p=p<o?p:o,(0|r)==(0|(e=e+1|0)))break t}for(;;){a=_[(e<<2)+n>>2],h=_[a>>2],o=E(1);e:if(h&&(v=_[a+12>>2],o=E(1),!((0|v)<1))&&(o=b[(u=_[a+8>>2])>>2],1!=(0|v))){i:{if((d=b[h+44>>2])<=(f=b[(c=_[a+4>>2])>>2])){o=b[u>>2];break e}if(h=1,!(d<(o=b[c+4>>2]))){for(;f=o,(0|v)!=(0|(h=h+1|0));)if(d<(o=b[c+(h<<2)>>2]))break i;o=b[(u+(v<<2)|0)-4>>2];break e}}o=E(E(d-f)/E(o-f)),o=E(E(o*b[(h=u+(h<<2)|0)>>2])+E(b[h+-4>>2]*E(E(1)-o)))}if(p=p<(b[a+16>>2]=o)?p:o,(0|r)==(0|(e=e+1|0)))break}}if(_[l+32>>2]=x,_[l+28>>2]=y,b[l+44>>2]=p,!((l=l+48|0)>>>0<s>>>0))break}}(e),1<=(0|(o=_[e+4>>2])))for(o=(u=_[e+52>>2])+(o<<2)|0;a=b[u>>2],b[u>>2]=a<E(0)?E(0):E(P(a,E(1))),(u=u+4|0)>>>0<o>>>0;);(function(e){var i,r,n,s=0,o=0;if(1<=(0|(o=_[e+4>>2])))for(n=(s=_[e+8>>2])+A(o,12)|0,e=i=_[e+40>>2];o=0,_[s+8>>2]&&(r=_[s+4>>2],(_[(r<<2)+i>>2]||-1==(0|r))&&(o=!_[_[s>>2]+32>>2])),_[e>>2]=o,e=e+4|0,(s=s+12|0)>>>0<n>>>0;);})(e),function(e){var i,r,n,s,o,a,h,l=0,u=0,c=0,d=0,f=0;if(1<=(0|(r=_[e+4>>2])))for(s=_[e+8>>2],n=_[e>>2],o=_[n+724>>2];;){if(i=_[A(d,12)+s>>2],(_[i+28>>2]||_[i+24>>2])&&(_[(l=d<<2)+_[e+28>>2]>>2]=_[i+12>>2],_[i+24>>2])&&!((0|(c=_[i+12>>2]))<1))for(c=(u=_[i+16>>2])+(c<<2)|0,a=_[l+o>>2],l=_[e+36>>2]+(f<<2)|0,h=_[n+976>>2];_[l>>2]=_[(_[u>>2]+a<<2)+h>>2],l=l+4|0,(u=u+4|0)>>>0<c>>>0;);if(_[i+28>>2]&&!((0|(l=_[i+12>>2]))<1))for(c=(u=_[i+20>>2])+(l<<2)|0,l=_[e+32>>2]+(f<<2)|0;_[l>>2]=_[u>>2],l=l+4|0,(u=u+4|0)>>>0<c>>>0;);if(f=_[i+8>>2]+f|0,(0|r)==(0|(d=d+1|0)))break}}(e),r[_[1808]](e+12|0,_[e+36>>2],_[e+44>>2],_[e+40>>2]),function(e){var i,r,n,s,o,a,h=0,l=0,u=0;if(1<=(0|(u=_[e+304>>2])))for(n=(h=_[e+308>>2])+(u<<5)|0,s=_[e+264>>2],o=_[e+144>>2],a=_[e+40>>2],u=r=_[e+312>>2];i=u,l=0,e=l=_[h+28>>2]&&(-1==(0|(e=_[h+4>>2]))||(l=0,_[(e<<2)+a>>2]))&&(-1==(0|(e=_[h+8>>2]))||(l=0,_[(e<<2)+r>>2]))?!_[_[h>>2]+32>>2]:l,_[i>>2]=e,(i=_[h+12>>2])>>>0<=1?i-1?_[(_[h+16>>2]<<2)+o>>2]=e:_[(_[h+16>>2]<<2)+s>>2]=e:B(4,1372,0),u=u+4|0,(h=h+32|0)>>>0<n>>>0;);}(e),function(e){var i,r,n,s,o,a,h,l,u,c=0,d=0,f=0,p=0,v=0,y=0,b=0,x=0,T=0,E=0,w=0,S=0,P=0,M=0;if(v=_[e>>2],1<=(0|(x=_[e+56>>2]))){for(T=_[e+60>>2],E=_[v+1052>>2],w=_[v+784>>2];;){if(c=_[T+A(y,24)>>2],(_[c+28>>2]||_[c+24>>2])&&(_[(d=y<<2)+_[e+80>>2]>>2]=_[c+12>>2],_[c+24>>2])&&!((0|(p=_[c+12>>2]))<1))for(S=(f=_[c+16>>2])+(p<<2)|0,P=_[d+w>>2],d=(p=b<<2)+_[e+92>>2]|0,p=p+_[e+88>>2]|0;M=P+_[f>>2]<<2,_[d>>2]=E+(_[M+_[v+984>>2]>>2]<<2),_[p>>2]=_[M+_[v+980>>2]>>2],p=p+4|0,d=d+4|0,(f=f+4|0)>>>0<S>>>0;);if(_[c+28>>2]&&!((0|(d=_[c+12>>2]))<1))for(p=(f=_[c+20>>2])+(d<<2)|0,d=_[e+84>>2]+(b<<2)|0;_[d>>2]=_[f>>2],d=d+4|0,(f=f+4|0)>>>0<p>>>0;);if(b=_[c+8>>2]+b|0,(0|x)==(0|(y=y+1|0)))break}v=_[e>>2]}if(!(g[v+4|0]<4||(0|(P=_[e+56>>2]))<1))for(M=_[v+792>>2],i=_[e+60>>2],f=b=0;;){if(y=_[A(f,24)+i>>2],_[y+24>>2]&&!((0|(c=_[y+12>>2]))<1))for(r=(d=_[y+16>>2])+(c<<2)|0,n=_[M+(f<<2)>>2],p=(c=b<<2)+_[e+96>>2]|0,x=c+_[e+100>>2]|0,T=c+_[e+104>>2]|0,E=c+_[e+108>>2]|0,w=c+_[e+112>>2]|0,S=c+_[e+116>>2]|0,s=_[v+1308>>2],o=_[v+1304>>2],a=_[v+1300>>2],h=_[v+1296>>2],l=_[v+1292>>2],u=_[v+1288>>2];c=_[d>>2]+n<<2,_[p>>2]=_[c+u>>2],_[x>>2]=_[c+l>>2],_[T>>2]=_[c+h>>2],_[E>>2]=_[c+a>>2],_[w>>2]=_[c+o>>2],_[S>>2]=_[c+s>>2],S=S+4|0,w=w+4|0,E=E+4|0,T=T+4|0,x=x+4|0,p=p+4|0,(d=d+4|0)>>>0<r>>>0;);if(b=_[y+8>>2]+b|0,(0|P)==(0|(f=f+1|0)))break}}(e),function(e){var i=0,r=0,n=0,s=0,o=0,a=0,h=0,l=0,u=0,c=0,d=0,f=0,p=0,v=0,y=0,b=0,x=0,T=0,E=0,w=0,S=0,P=_[e+168>>2],M=_[e>>2];if(1<=(0|(p=_[e+164>>2])))for(y=_[M+816>>2];;){if(n=_[A(h,12)+P>>2],(_[n+28>>2]||_[n+24>>2])&&(_[(l=h<<2)+_[e+188>>2]>>2]=_[n+12>>2],_[n+24>>2])){if(r=_[n+16>>2],v=_[l+y>>2],1<=(0|(i=_[n+12>>2])))for(b=r+(i<<2)|0,s=(i=a<<2)+_[e+200>>2]|0,u=i+_[e+204>>2]|0,c=i+_[e+208>>2]|0,d=i+_[e+212>>2]|0,f=i+_[e+196>>2]|0,x=_[M+996>>2],T=_[M+1012>>2],E=_[M+1008>>2],w=_[M+1004>>2],S=_[M+1e3>>2],i=r;o=v+_[i>>2]<<2,_[s>>2]=_[o+S>>2],_[u>>2]=_[o+w>>2],_[c>>2]=_[o+E>>2],_[d>>2]=_[o+T>>2],_[f>>2]=_[o+x>>2],f=f+4|0,d=d+4|0,c=c+4|0,u=u+4|0,s=s+4|0,(i=i+4|0)>>>0<b>>>0;);i=v+_[r>>2]<<2,_[l+_[e+288>>2]>>2]=_[i+_[M+1016>>2]>>2],_[l+_[e+292>>2]>>2]=_[i+_[M+1020>>2]>>2]}if(_[n+28>>2]&&!((0|(r=_[n+12>>2]))<1))for(r=(i=_[n+20>>2])+(r<<2)|0,s=_[e+192>>2]+(a<<2)|0;_[s>>2]=_[i>>2],s=s+4|0,(i=i+4|0)>>>0<r>>>0;);if(a=_[n+8>>2]+a|0,(0|p)==(0|(h=h+1|0)))break}if(!(g[M+4|0]<4||(0|(l=_[e+164>>2]))<1))for(v=_[M+824>>2],a=n=0;;){if(o=_[A(a,12)+P>>2],_[o+24>>2]&&!((0|(i=_[o+12>>2]))<1))for(p=(s=_[o+16>>2])+(i<<2)|0,y=_[v+(a<<2)>>2],u=(r=n<<2)+_[e+216>>2]|0,c=r+_[e+220>>2]|0,d=r+_[e+224>>2]|0,f=r+_[e+228>>2]|0,i=r+_[e+232>>2]|0,h=r+_[e+236>>2]|0,b=_[M+1308>>2],x=_[M+1304>>2],T=_[M+1300>>2],E=_[M+1296>>2],w=_[M+1292>>2],S=_[M+1288>>2];r=y+_[s>>2]<<2,_[u>>2]=_[r+S>>2],_[c>>2]=_[r+w>>2],_[d>>2]=_[r+E>>2],_[f>>2]=_[r+T>>2],_[i>>2]=_[r+x>>2],_[h>>2]=_[r+b>>2],h=h+4|0,i=i+4|0,f=f+4|0,d=d+4|0,c=c+4|0,u=u+4|0,(s=s+4|0)>>>0<p>>>0;);if(n=_[o+8>>2]+n|0,(0|l)==(0|(a=a+1|0)))break}}(e),function(e){var i,n=0,s=0,o=0,a=0,h=0,l=0,u=0,c=0;if(n=e- -64|0,r[_[1807]](n,_[e+88>>2],_[e+148>>2],_[e+144>>2]),r[_[1809]](n,_[e+92>>2],_[e+152>>2],_[_[e>>2]+796>>2],2,_[e+144>>2]),!(g[_[e>>2]+4|0]<4||(r[_[1807]](n,_[e+96>>2],_[e+120>>2],_[e+144>>2]),r[_[1807]](n,_[e+100>>2],_[e+124>>2],_[e+144>>2]),r[_[1807]](n,_[e+104>>2],_[e+128>>2],_[e+144>>2]),r[_[1807]](n,_[e+108>>2],_[e+132>>2],_[e+144>>2]),r[_[1807]](n,_[e+112>>2],_[e+136>>2],_[e+144>>2]),r[_[1807]](n,_[e+116>>2],_[e+140>>2],_[e+144>>2]),(0|(l=_[e+56>>2]))<1))){for(u=_[e+128>>2],c=_[e+124>>2],i=_[e+120>>2],s=_[e+156>>2],n=0;_[(o=a<<2)+s>>2]=_[(h=n<<2)+i>>2],_[s+(4|o)>>2]=_[h+c>>2],_[s+(8|o)>>2]=_[h+u>>2],a=a+4|0,(0|l)!=(0|(n=n+1|0)););for(s=_[e+160>>2],h=_[e+140>>2],u=_[e+136>>2],c=_[e+132>>2],n=e=0;_[(a=e<<2)+s>>2]=_[(o=n<<2)+c>>2],_[s+(4|a)>>2]=_[o+u>>2],_[s+(8|a)>>2]=_[o+h>>2],e=e+4|0,(0|l)!=(0|(n=n+1|0)););}}(e),function(e){var i,n=0,s=0,o=0,a=0,h=0,l=0,u=0,c=0;if(n=e+172|0,r[_[1807]](n,_[e+196>>2],_[e+268>>2],_[e+264>>2]),r[_[1807]](n,_[e+200>>2],_[e+284>>2],_[e+264>>2]),r[_[1807]](n,_[e+204>>2],_[e+276>>2],_[e+264>>2]),r[_[1807]](n,_[e+208>>2],_[e+280>>2],_[e+264>>2]),r[_[1807]](n,_[e+212>>2],_[e+272>>2],_[e+264>>2]),!(g[_[e>>2]+4|0]<4||(r[_[1807]](n,_[e+216>>2],_[e+240>>2],_[e+264>>2]),r[_[1807]](n,_[e+220>>2],_[e+244>>2],_[e+264>>2]),r[_[1807]](n,_[e+224>>2],_[e+248>>2],_[e+264>>2]),r[_[1807]](n,_[e+228>>2],_[e+252>>2],_[e+264>>2]),r[_[1807]](n,_[e+232>>2],_[e+256>>2],_[e+264>>2]),r[_[1807]](n,_[e+236>>2],_[e+260>>2],_[e+264>>2]),(0|(l=_[e+164>>2]))<1))){for(u=_[e+248>>2],c=_[e+244>>2],i=_[e+240>>2],s=_[e+296>>2],n=0;_[(o=a<<2)+s>>2]=_[(h=n<<2)+i>>2],_[s+(4|o)>>2]=_[h+c>>2],_[s+(8|o)>>2]=_[h+u>>2],a=a+4|0,(0|l)!=(0|(n=n+1|0)););for(s=_[e+300>>2],h=_[e+260>>2],u=_[e+256>>2],c=_[e+252>>2],n=e=0;_[(a=e<<2)+s>>2]=_[(o=n<<2)+c>>2],_[s+(4|a)>>2]=_[o+u>>2],_[s+(8|a)>>2]=_[o+h>>2],e=e+4|0,(0|l)!=(0|(n=n+1|0)););}}(e),function(e){var i,r,n,s=0,o=0,a=0;if(1<=(0|(o=_[e+332>>2])))for(i=(s=_[e+336>>2])+A(o,20)|0,r=_[e+312>>2],n=_[e+40>>2],e=_[e+424>>2];o=0,_[s+12>>2]&&(a=_[s+4>>2],_[(a<<2)+n>>2]||-1==(0|a))&&(a=_[s+8>>2],_[(a<<2)+r>>2]||-1==(0|a))&&(o=!_[_[s>>2]+32>>2]),_[e>>2]=o,e=e+4|0,(s=s+20|0)>>>0<i>>>0;);}(e),function(e){var i,r,n,s,o,a,h,l,u=0,c=0,d=0,f=0,p=0,v=0,y=0,b=0,x=0,T=0,E=0,w=0,S=0,P=0,M=0;if(f=_[e>>2],1<=(0|(T=_[e+332>>2]))){for(E=_[e+336>>2],w=_[f+1052>>2],S=_[f+856>>2];;){if(u=_[E+A(y,20)>>2],(_[u+28>>2]||_[u+24>>2])&&(_[(c=y<<2)+_[e+356>>2]>>2]=_[u+12>>2],_[u+24>>2])&&!((0|(p=_[u+12>>2]))<1))for(P=(d=_[u+16>>2])+(p<<2)|0,M=_[c+S>>2],c=(v=b<<2)+_[e+372>>2]|0,p=v+_[e+364>>2]|0,v=v+_[e+368>>2]|0;x=M+_[d>>2]<<2,_[c>>2]=w+(_[x+_[f+1040>>2]>>2]<<2),_[p>>2]=_[x+_[f+1032>>2]>>2],_[v>>2]=_[x+_[f+1036>>2]>>2],v=v+4|0,p=p+4|0,c=c+4|0,(d=d+4|0)>>>0<P>>>0;);if(_[u+28>>2]&&!((0|(c=_[u+12>>2]))<1))for(p=(d=_[u+20>>2])+(c<<2)|0,c=_[e+360>>2]+(b<<2)|0;_[c>>2]=_[d>>2],c=c+4|0,(d=d+4|0)>>>0<p>>>0;);if(b=_[u+8>>2]+b|0,(0|T)==(0|(y=y+1|0)))break}f=_[e>>2]}if(!(g[f+4|0]<4||(0|(S=_[e+332>>2]))<1))for(P=_[f+864>>2],M=_[e+336>>2],d=b=0;;){if(y=_[M+A(d,20)>>2],_[y+24>>2]&&!((0|(u=_[y+12>>2]))<1))for(i=(c=_[y+16>>2])+(u<<2)|0,r=_[P+(d<<2)>>2],p=(u=b<<2)+_[e+376>>2]|0,v=u+_[e+380>>2]|0,x=u+_[e+384>>2]|0,T=u+_[e+388>>2]|0,E=u+_[e+392>>2]|0,w=u+_[e+396>>2]|0,n=_[f+1308>>2],s=_[f+1304>>2],o=_[f+1300>>2],a=_[f+1296>>2],h=_[f+1292>>2],l=_[f+1288>>2];u=_[c>>2]+r<<2,_[p>>2]=_[u+l>>2],_[v>>2]=_[u+h>>2],_[x>>2]=_[u+a>>2],_[T>>2]=_[u+o>>2],_[E>>2]=_[u+s>>2],_[w>>2]=_[u+n>>2],w=w+4|0,E=E+4|0,T=T+4|0,x=x+4|0,v=v+4|0,p=p+4|0,(c=c+4|0)>>>0<i>>>0;);if(b=_[y+8>>2]+b|0,(0|S)==(0|(d=d+1|0)))break}}(e),function(e){var i,n=0,s=0,o=0,a=0,h=0,l=0,u=0,c=0;if(n=e+340|0,r[_[1807]](n,_[e+364>>2],_[e+448>>2],_[e+424>>2]),r[_[1808]](n,_[e+368>>2],_[e+440>>2],_[e+424>>2]),r[_[1809]](n,_[e+372>>2],_[e+444>>2],_[_[e>>2]+892>>2],2,_[e+424>>2]),!(g[_[e>>2]+4|0]<4||(r[_[1807]](n,_[e+376>>2],_[e+400>>2],_[e+424>>2]),r[_[1807]](n,_[e+380>>2],_[e+404>>2],_[e+424>>2]),r[_[1807]](n,_[e+384>>2],_[e+408>>2],_[e+424>>2]),r[_[1807]](n,_[e+388>>2],_[e+412>>2],_[e+424>>2]),r[_[1807]](n,_[e+392>>2],_[e+416>>2],_[e+424>>2]),r[_[1807]](n,_[e+396>>2],_[e+420>>2],_[e+424>>2]),(0|(l=_[e+332>>2]))<1))){for(u=_[e+408>>2],c=_[e+404>>2],i=_[e+400>>2],s=_[e+452>>2],n=0;_[(o=a<<2)+s>>2]=_[(h=n<<2)+i>>2],_[s+(4|o)>>2]=_[h+c>>2],_[s+(8|o)>>2]=_[h+u>>2],a=a+4|0,(0|l)!=(0|(n=n+1|0)););for(s=_[e+456>>2],h=_[e+420>>2],u=_[e+416>>2],c=_[e+412>>2],n=e=0;_[(a=e<<2)+s>>2]=_[(o=n<<2)+c>>2],_[s+(4|a)>>2]=_[o+u>>2],_[s+(8|a)>>2]=_[o+h>>2],e=e+4|0,(0|l)!=(0|(n=n+1|0)););}}(e),function(e){var i,r,n,s,o,a,h,l=0,u=0,c=0,d=0,f=0;if(1<=(0|(r=_[e+500>>2])))for(s=_[e+504>>2],n=_[e>>2],o=_[n+1252>>2];;){if(i=_[A(d,24)+s>>2],(_[i+28>>2]||_[i+24>>2])&&(_[(l=d<<2)+_[e+524>>2]>>2]=_[i+12>>2],_[i+24>>2])&&!((0|(c=_[i+12>>2]))<1))for(c=(u=_[i+16>>2])+(c<<2)|0,a=_[l+o>>2],l=_[e+532>>2]+(f<<2)|0,h=_[n+1284>>2];_[l>>2]=_[(_[u>>2]+a<<2)+h>>2],l=l+4|0,(u=u+4|0)>>>0<c>>>0;);if(_[i+28>>2]&&!((0|(l=_[i+12>>2]))<1))for(c=(u=_[i+20>>2])+(l<<2)|0,l=_[e+528>>2]+(f<<2)|0;_[l>>2]=_[u>>2],l=l+4|0,(u=u+4|0)>>>0<c>>>0;);if(f=_[i+8>>2]+f|0,(0|r)==(0|(d=d+1|0)))break}}(e),r[_[1807]](e+508|0,_[e+532>>2],_[e+536>>2],0),function(e){var i,r,n,s,o,a,h=E(0),l=0,u=0,c=0,d=0;if(E(0),D=i=D-16|0,!(g[(c=_[e>>2])+4|0]<5||(0|(d=_[e+596>>2]))<1))for(s=(u=_[e+600>>2])+A(d,12)|0,o=_[e+44>>2],d=_[c+976>>2];;){if(c=(_[u>>2]<<2)+o|0,h=E(_[c>>2]),1<=(0|(l=_[u+4>>2])))for(a=(e=_[u+8>>2])+A(l,48)|0;(l=_[e+8>>2])&&((r=l+-1|0)>>>0<=1?(n=b[d+((l=_[e+4>>2])+_[e+12>>2]<<2)>>2],h=E(r-1?h+E(b[e+44>>2]*E(n*b[e+20>>2])):h+E(b[e+44>>2]*E(E(n*b[e+20>>2])+E(b[d+(l+_[e+16>>2]<<2)>>2]*b[e+24>>2]))))):(_[i>>2]=l,B(4,1024,i))),(e=e+48|0)>>>0<a>>>0;);if(h=(h=E(h+E(.0010000000474974513)))<E(0)?E(0):E(P(h,E(1e3))),e=E(w(h))<E(2147483648)?~~h:-2147483648,_[c>>2]=e,!((u=u+12|0)>>>0<s>>>0))break}D=16+i|0}(e),function(e){var i,r,n,o,a,u,c,d,f,p,v,y,x=0,T=0,w=0,S=0,M=0,I=E(0);if(D=o=D-16|0,!(g[(x=_[e>>2])+4|0]<4||(th(e,_[e+604>>2],_[e+608>>2],_[x+984>>2],_[e+152>>2],_[x+796>>2]),g[(T=_[e>>2])+4|0]<5))){if(w=_[e+608>>2],d=_[T+992>>2],f=_[T+988>>2],1<=(0|(x=_[e+604>>2]))){for(p=A(x,12)+w|0,v=_[e+148>>2],a=_[T+980>>2];;){if(u=(_[w>>2]<<2)+v|0,M=_[u>>2],1<=(0|(S=_[w+4>>2])))for(y=(x=_[w+8>>2])+A(S,48)|0;(S=_[x+8>>2])&&((c=S+-1|0)>>>0<=1?(I=b[((S=_[x+4>>2])+_[x+12>>2]<<2)+a>>2],h(E(c-1?E(b[x+44>>2]*E(I*b[x+20>>2]))+(i=M,s[0]=i,l()):E(b[x+44>>2]*E(E(I*b[x+20>>2])+E(b[(S+_[x+16>>2]<<2)+a>>2]*b[x+24>>2])))+(r=M,s[0]=r,l()))),M=s[0]):(_[o>>2]=S,B(4,1024,o))),(x=x+48|0)>>>0<y>>>0;);if(n=M,s[0]=n,I=l(),b[u>>2]=I<E(0)?E(0):E(P(I,E(1))),!((w=w+12|0)>>>0<p>>>0))break}w=_[e+608>>2],x=_[e+604>>2]}Y(x,w,f,_[T+1288>>2],_[T+1292>>2],_[T+1296>>2],_[e+156>>2]),Y(_[e+604>>2],_[e+608>>2],d,_[T+1300>>2],_[T+1304>>2],_[T+1308>>2],_[e+160>>2])}D=16+o|0}(e),function(e){var i,r,n,o,a,u,c,d,f,p,v,y,x,T,w=0,S=0,M=0,I=0,C=0,R=E(0),O=0,$=0,L=0,F=0,k=0,N=0,U=0,G=0;if(D=T=D-80|0,!(g[(C=_[e>>2])+4|0]<5)){if(N=_[C+1028>>2],U=_[C+1024>>2],M=S=_[e+616>>2],!((0|(w=_[e+612>>2]))<1)){for($=A(w,12)+S|0,L=_[e+276>>2],O=_[C+1004>>2];;){if(F=L+(_[S>>2]<<2)|0,M=_[F>>2],1<=(0|(I=_[S+4>>2])))for(G=(w=_[S+8>>2])+A(I,48)|0;(I=_[w+8>>2])&&((k=I+-1|0)>>>0<=1?(R=b[O+((I=_[w+4>>2])+_[w+12>>2]<<2)>>2],h(E(k-1?E(b[w+44>>2]*E(R*b[w+20>>2]))+(i=M,s[0]=i,l()):E(b[w+44>>2]*E(E(R*b[w+20>>2])+E(b[O+(I+_[w+16>>2]<<2)>>2]*b[w+24>>2])))+(r=M,s[0]=r,l()))),M=s[0]):(_[64+T>>2]=I,B(4,1024,64+T|0))),(w=w+48|0)>>>0<G>>>0;);if(_[F>>2]=M,!((S=S+12|0)>>>0<$>>>0))break}if(M=S=_[e+616>>2],!((0|(w=_[e+612>>2]))<1)){for($=A(w,12)+S|0,L=_[e+280>>2],O=_[_[e>>2]+1008>>2];;){if(F=L+(_[S>>2]<<2)|0,M=_[F>>2],1<=(0|(I=_[S+4>>2])))for(G=(w=_[S+8>>2])+A(I,48)|0;(I=_[w+8>>2])&&((k=I+-1|0)>>>0<=1?(R=b[O+((I=_[w+4>>2])+_[w+12>>2]<<2)>>2],h(E(k-1?E(b[w+44>>2]*E(R*b[w+20>>2]))+(n=M,s[0]=n,l()):E(b[w+44>>2]*E(E(R*b[w+20>>2])+E(b[O+(I+_[w+16>>2]<<2)>>2]*b[w+24>>2])))+(o=M,s[0]=o,l()))),M=s[0]):(_[48+T>>2]=I,B(4,1024,48+T|0))),(w=w+48|0)>>>0<G>>>0;);if(_[F>>2]=M,!((S=S+12|0)>>>0<$>>>0))break}if(M=S=_[e+616>>2],!((0|(w=_[e+612>>2]))<1)){for($=A(w,12)+S|0,L=_[e+268>>2],O=_[_[e>>2]+996>>2];;){if(F=L+(_[S>>2]<<2)|0,M=_[F>>2],1<=(0|(I=_[S+4>>2])))for(G=(w=_[S+8>>2])+A(I,48)|0;(I=_[w+8>>2])&&((k=I+-1|0)>>>0<=1?(R=b[O+((I=_[w+4>>2])+_[w+12>>2]<<2)>>2],h(E(k-1?E(b[w+44>>2]*E(R*b[w+20>>2]))+(a=M,s[0]=a,l()):E(b[w+44>>2]*E(E(R*b[w+20>>2])+E(b[O+(I+_[w+16>>2]<<2)>>2]*b[w+24>>2])))+(u=M,s[0]=u,l()))),M=s[0]):(_[32+T>>2]=I,B(4,1024,32+T|0))),(w=w+48|0)>>>0<G>>>0;);if(c=M,s[0]=c,R=l(),b[F>>2]=R<E(0)?E(0):E(P(R,E(1))),!((S=S+12|0)>>>0<$>>>0))break}w=_[e+612>>2],M=_[e+616>>2]}}}if(Y(w,M,U,_[C+1288>>2],_[C+1292>>2],_[C+1296>>2],_[e+296>>2]),Y(_[e+612>>2],_[e+616>>2],N,_[C+1300>>2],_[C+1304>>2],_[C+1308>>2],_[e+300>>2]),!((0|(w=_[e+612>>2]))<1)){for(I=(S=_[e+616>>2])+A(w,12)|0,N=_[e+284>>2],C=_[_[e>>2]+1e3>>2];;){if(U=N+(_[S>>2]<<2)|0,M=_[U>>2],1<=(0|(O=_[S+4>>2])))for($=(w=_[S+8>>2])+A(O,48)|0;(O=_[w+8>>2])&&((L=O+-1|0)>>>0<=1?(R=b[C+((O=_[w+4>>2])+_[w+12>>2]<<2)>>2],h(E(L-1?E(b[w+44>>2]*E(R*b[w+20>>2]))+(d=M,s[0]=d,l()):E(b[w+44>>2]*E(E(R*b[w+20>>2])+E(b[C+(O+_[w+16>>2]<<2)>>2]*b[w+24>>2])))+(f=M,s[0]=f,l()))),M=s[0]):(_[16+T>>2]=O,B(4,1024,16+T|0))),(w=w+48|0)>>>0<$>>>0;);if(p=M,s[0]=p,R=l(),b[U>>2]=R<E(-3600)?E(-3600):E(P(R,E(3600))),!((S=S+12|0)>>>0<I>>>0))break}if(!((0|(w=_[e+612>>2]))<1))for(O=(S=_[e+616>>2])+A(w,12)|0,I=_[e+272>>2],e=_[_[e>>2]+1012>>2];;){if(N=I+(_[S>>2]<<2)|0,M=_[N>>2],1<=(0|(C=_[S+4>>2])))for(U=(w=_[S+8>>2])+A(C,48)|0;(C=_[w+8>>2])&&(($=C+-1|0)>>>0<=1?(R=b[e+((C=_[w+4>>2])+_[w+12>>2]<<2)>>2],h(E($-1?E(b[w+44>>2]*E(R*b[w+20>>2]))+(v=M,s[0]=v,l()):E(b[w+44>>2]*E(E(R*b[w+20>>2])+E(b[e+(C+_[w+16>>2]<<2)>>2]*b[w+24>>2])))+(y=M,s[0]=y,l()))),M=s[0]):(_[T>>2]=C,B(4,1024,T))),(w=w+48|0)>>>0<U>>>0;);if(x=M,s[0]=x,R=l(),b[N>>2]=R<E(9999999747378752e-20)?E(9999999747378752e-20):E(P(R,E(100))),!((S=S+12|0)>>>0<O>>>0))break}}}D=80+T|0}(e),function(e){var i,r,n,o,a,u,c,d,f=0,p=0,v=0,y=0,x=E(0),T=0,S=0,M=0,I=0,C=0,R=0;if(E(0),D=o=D-32|0,!(g[(v=_[e>>2])+4|0]<4||(th(e,_[e+620>>2],_[e+624>>2],_[v+1040>>2],_[e+444>>2],_[v+892>>2]),g[(T=_[e>>2])+4|0]<5))){if(c=_[T+1048>>2],d=_[T+1044>>2],v=y=_[e+624>>2],!((0|(f=_[e+620>>2]))<1)){for(C=A(f,12)+y|0,R=_[e+440>>2],S=_[T+1036>>2];;){if(v=R+(_[y>>2]<<2)|0,x=E(_[v>>2]),1<=(0|(p=_[y+4>>2])))for(M=(f=_[y+8>>2])+A(p,48)|0;(p=_[f+8>>2])&&((I=p+-1|0)>>>0<=1?(a=b[S+((p=_[f+4>>2])+_[f+12>>2]<<2)>>2],x=E(I-1?x+E(b[f+44>>2]*E(a*b[f+20>>2])):x+E(b[f+44>>2]*E(E(a*b[f+20>>2])+E(b[S+(p+_[f+16>>2]<<2)>>2]*b[f+24>>2]))))):(_[16+o>>2]=p,B(4,1024,16+o|0))),(f=f+48|0)>>>0<M>>>0;);if(x=(x=E(x+E(.0010000000474974513)))<E(0)?E(0):E(P(x,E(1e3))),f=E(w(x))<E(2147483648)?~~x:-2147483648,_[v>>2]=f,!((y=y+12|0)>>>0<C>>>0))break}if(v=y=_[e+624>>2],!((0|(f=_[e+620>>2]))<1)){for(C=A(f,12)+y|0,R=_[e+448>>2],S=_[_[e>>2]+1032>>2];;){if(M=R+(_[y>>2]<<2)|0,v=_[M>>2],1<=(0|(p=_[y+4>>2])))for(I=(f=_[y+8>>2])+A(p,48)|0;(p=_[f+8>>2])&&((u=p+-1|0)>>>0<=1?(x=b[S+((p=_[f+4>>2])+_[f+12>>2]<<2)>>2],h(E(u-1?E(b[f+44>>2]*E(x*b[f+20>>2]))+(i=v,s[0]=i,l()):E(b[f+44>>2]*E(E(x*b[f+20>>2])+E(b[S+(p+_[f+16>>2]<<2)>>2]*b[f+24>>2])))+(r=v,s[0]=r,l()))),v=s[0]):(_[o>>2]=p,B(4,1024,o))),(f=f+48|0)>>>0<I>>>0;);if(n=v,s[0]=n,x=l(),b[M>>2]=x<E(0)?E(0):E(P(x,E(1))),!((y=y+12|0)>>>0<C>>>0))break}f=_[e+620>>2],v=_[e+624>>2]}}Y(f,v,d,_[T+1288>>2],_[T+1292>>2],_[T+1296>>2],_[e+452>>2]),Y(_[e+620>>2],_[e+624>>2],c,_[T+1300>>2],_[T+1304>>2],_[T+1308>>2],_[e+456>>2])}D=32+o|0}(e),function(e){var i,r,n,o,a,u,c,d,f,p=0,v=0,y=0,x=0,T=E(0);if(D=o=D-16|0,!(g[(v=_[e>>2])+4|0]<5||(0|(x=_[e+628>>2]))<1))for(c=(y=_[e+632>>2])+A(x,12)|0,d=_[e+536>>2],x=_[v+1284>>2];;){if(a=(_[y>>2]<<2)+d|0,v=_[a>>2],1<=(0|(p=_[y+4>>2])))for(f=(e=_[y+8>>2])+A(p,48)|0;(p=_[e+8>>2])&&((u=p+-1|0)>>>0<=1?(T=b[x+((p=_[e+4>>2])+_[e+12>>2]<<2)>>2],h(E(u-1?E(b[e+44>>2]*E(T*b[e+20>>2]))+(i=v,s[0]=i,l()):E(b[e+44>>2]*E(E(T*b[e+20>>2])+E(b[x+(p+_[e+16>>2]<<2)>>2]*b[e+24>>2])))+(r=v,s[0]=r,l()))),v=s[0]):(_[o>>2]=p,B(4,1024,o))),(e=e+48|0)>>>0<f>>>0;);if(n=v,s[0]=n,T=l(),b[a>>2]=T<E(0)?E(0):E(P(T,E(1))),!((y=y+12|0)>>>0<c>>>0))break}D=16+o|0}(e),function(e){var i,r,n=0,s=0,o=0,a=E(0),h=0;if(1<=(0|(n=_[e+4>>2])))for(r=(s=_[e+8>>2])+A(n,12)|0,n=_[e+40>>2],o=_[e+52>>2],e=i=_[e+48>>2];_[n>>2]&&(a=b[o>>2],b[e>>2]=a,-1!=(0|(h=_[s+4>>2])))&&(b[e>>2]=a*b[(h<<2)+i>>2]),e=e+4|0,o=o+4|0,n=n+4|0,(s=s+12|0)>>>0<r>>>0;);}(e),function(e){var i,n=0,s=0,o=0;if(1<=(0|(i=_[e+304>>2])))for(n=_[e+308>>2],s=_[e+312>>2];_[s>>2]&&r[_[n+20>>2]](e,o),s=s+4|0,n=n+32|0,(0|i)!=(0|(o=o+1|0)););}(e),function(e){var i,n,s,o,a,h=0,l=0,u=(E(0),E(0),0),c=0,d=0,f=(E(0),0),p=0,v=0;if(1<=(0|(h=_[e+332>>2])))for(p=(l=_[e+336>>2])+A(h,20)|0,v=_[e+308>>2],f=_[e+316>>2],a=_[e+48>>2],h=_[e+448>>2],u=_[e+444>>2],d=_[e+424>>2];_[d>>2]&&(-1!=(0|(c=_[l+4>>2]))&&(b[h>>2]=b[(c<<2)+a>>2]*b[h>>2]),-1!=(0|(c=_[l+8>>2])))&&(b[h>>2]=b[f+(c<<2)>>2]*b[h>>2],o=_[u>>2],r[_[24+(v+(c<<5)|0)>>2]](e,c,o,o,_[l+16>>2])),u=u+4|0,h=h+4|0,d=d+4|0,(l=l+20|0)>>>0<p>>>0;);if(!(g[_[e>>2]+4|0]<4||(0|(h=_[e+332>>2]))<1))for(c=(u=_[e+336>>2])+A(h,20)|0,p=_[e+328>>2],v=_[e+324>>2],l=_[e+452>>2],h=_[e+456>>2],d=_[e+424>>2];_[d>>2]&&-1!=(0|(e=_[u+8>>2]))&&(e=(f=e<<4)+v|0,i=E(b[l>>2]*b[e>>2]),b[l>>2]=i,n=E(b[l+4>>2]*b[e+4>>2]),b[l+4>>2]=n,s=b[e+8>>2],_[l+12>>2]=1065353216,b[l+4>>2]=n<E(0)?E(0):E(P(n,E(1))),b[l>>2]=i<E(0)?E(0):E(P(i,E(1))),i=E(s*b[l+8>>2]),b[l+8>>2]=i<E(0)?E(0):E(P(i,E(1))),i=E(E((i=b[h>>2])+(n=b[(e=p+f|0)>>2]))-E(i*n)),b[h>>2]=i,n=E(E((n=b[h+4>>2])+(s=b[e+4>>2]))-E(n*s)),b[h+4>>2]=n,s=b[e+8>>2],_[h+12>>2]=1065353216,b[h+4>>2]=n<E(0)?E(0):E(P(n,E(1))),b[h>>2]=i<E(0)?E(0):E(P(i,E(1))),i=E(E(s+(i=b[h+8>>2]))-E(i*s)),b[h+8>>2]=i<E(0)?E(0):E(P(i,E(1)))),h=h+16|0,l=l+16|0,d=d+4|0,(u=u+20|0)>>>0<c>>>0;);}(e),function(e){var i,r,n,s,o,a,h,l,u,c,d,f,p,g,y,x,T,w,S,P,M=0;if(E(0),E(0),E(0),E(0),E(0),E(0),E(0),1<=(0|(l=_[e+500>>2])))for(S=_[e+536>>2],u=_[e+444>>2],P=_[e+504>>2];;){if(0<(0|(c=_[(e=A(M,24)+P|0)+12>>2])))for(n=b[(M<<2)+S>>2],d=_[e+20>>2],f=_[e+16>>2],p=_[(_[e+4>>2]<<2)+u>>2],g=_[(_[e+8>>2]<<2)+u>>2],e=0;y=b[((i=1|e)<<2)+f>>2],s=b[(x=(4|(r=v[(e<<1)+d>>1]<<3&262136))+p|0)>>2],o=b[(T=(4|(i=v[(i<<1)+d>>1]<<3&262136))+g|0)>>2],a=b[(r=r+p|0)>>2],w=b[(e<<2)+f>>2],h=b[(i=i+g|0)>>2],b[r>>2]=a+E(n*E(w*E(h-a))),b[x>>2]=s+E(n*E(w*E(o-s))),b[i>>2]=h+E(n*E(y*E(a-h))),b[T>>2]=o+E(n*E(y*E(s-o))),(0|(e=e+2|0))<(0|c););if(!((0|(M=M+1|0))<(0|l)))break}}(e),r[_[1810]](e),function(e){var i,r,n,s,o=0,a=0,h=0,l=0,u=0,c=0,d=0,f=0,p=0,g=0,v=0;if(!((0|(i=_[e+480>>2]))<1)){for(l=(r=_[e+484>>2])+A(i,28)|0,d=_[e+424>>2],f=_[e+40>>2],u=_[e+44>>2],v=_[e+440>>2],o=r;;){if(1<=(0|(c=_[o+4>>2])))for(g=o+20|0,p=_[o+12>>2],a=0;n=_[4+(h=p+(a<<4)|0)>>2]<<2,h=1==_[(s=h)>>2],_[s+12>>2]=_[(_[(h?f:d)+n>>2]?(h?u:v)+n:g)>>2],(0|(a=a+1|0))<(0|c););if(!((o=o+28|0)>>>0<l>>>0))break}if(!((0|i)<1))for(v=_[e+436>>2],f=0;;){if(!(_[(d=l=A(f,28)+r|0)+24>>2]<1)){for(h=_[e+488>>2],a=0;_[h+(a<<2)>>2]=-1,(0|(a=a+1|0))<(0|(o=_[d+24>>2])););if(!((0|o)<1))for(o=_[e+496>>2],a=0;_[o+(a<<2)>>2]=-1,(0|(a=a+1|0))<_[d+24>>2];);}if(!(_[l+4>>2]<1)){for(u=_[e+492>>2],a=0;_[u+(a<<2)>>2]=-1,(0|(a=a+1|0))<(0|(o=_[l+4>>2])););if(!((0|o)<1))for(c=_[l+12>>2],g=_[e+496>>2],a=0;p=_[12+(c+(a<<4)|0)>>2]-_[l+20>>2]<<2,o=-1==(0|(o=_[(h=p+g|0)>>2]))?p+_[e+488>>2]|0:u+(o<<2)|0,_[o>>2]=a,(0|(a=(_[h>>2]=a)+1|0))<_[l+4>>2];);}if(1<=(0|(o=_[d+24>>2])))for(u=_[l+8>>2],g=_[e+488>>2],c=0;;){if(-1!=(0|(a=_[g+(c<<2)>>2]))){for(p=_[e+492>>2],h=_[l+12>>2];u=(o=1==_[(o=h+(a<<4)|0)>>2]?(o=A(_[o+8>>2],28)+r|0,_[o+8>>2]=u,_[o>>2]):(_[v+(_[o+4>>2]<<2)>>2]=u,1))+u|0,(0|a)<(0|(o=_[p+(a<<2)>>2]))&&-1!=(0|(a=o)););o=_[d+24>>2]}if(!((0|(c=c+1|0))<(0|o)))break}if((0|i)==(0|(f=f+1|0)))break}}}(e),function(e){var i=0,r=0,n=0,s=0,o=0,a=E(0),h=0,l=0,u=_[e+332>>2];if(_[e+644>>2]){if(!(((_[e+428>>2]=0)|u)<1))for(;i=126,h=_[e+432>>2]+n|0,!_[(r=n<<2)+_[e+424>>2]>>2]|b[r+_[e+448>>2]>>2]==E(0)||(i=127),f[0|h]=i,(0|u)!=(0|(n=n+1|0)););}else if(_[e+428>>2]){if(i=g[_[e>>2]+4|0],!(((_[e+428>>2]=0)|u)<1)){if(4<=i>>>0)for(;a=b[(i=n<<2)+_[e+448>>2]>>2],s=_[i+_[e+424>>2]>>2],r=(0|(r=a!=E(0)&!!(0|s)))==(1&f[0|(h=_[e+432>>2]+n|0)])?r:2|r,r=a!=b[i+_[e+468>>2]>>2]?4|r:r,r=_[i+_[e+440>>2]>>2]==_[i+_[e+464>>2]>>2]?r:8|r,i=_[i+_[e+436>>2]>>2]==_[i+_[e+460>>2]>>2]?r:16|r,i=s?32|i:i,s=(r=l<<2)+_[e+452>>2]|0,o=r+_[e+472>>2]|0,(b[s>>2]!=b[o>>2]|b[s+4>>2]!=b[o+4>>2]|b[s+8>>2]!=b[o+8>>2]|b[s+12>>2]!=b[o+12>>2]||(s=r+_[e+456>>2]|0,r=r+_[e+476>>2]|0,b[s>>2]!=b[r>>2]|b[s+4>>2]!=b[r+4>>2]|b[s+8>>2]!=b[r+8>>2])||b[s+12>>2]!=b[r+12>>2])&&(i|=64),f[0|h]=i,l=l+4|0,(0|u)!=(0|(n=n+1|0)););else for(;a=b[(i=n<<2)+_[e+448>>2]>>2],s=_[i+_[e+424>>2]>>2],r=(0|(r=a!=E(0)&!!(0|s)))==(1&f[0|(o=_[e+432>>2]+n|0)])?r:2|r,r=a!=b[i+_[e+468>>2]>>2]?4|r:r,r=_[i+_[e+440>>2]>>2]==_[i+_[e+464>>2]>>2]?r:8|r,i=_[i+_[e+436>>2]>>2]==_[i+_[e+460>>2]>>2]?r:16|r,f[0|o]=s?32|i:i,(0|u)!=(0|(n=n+1|0)););}}else if(!((0|u)<1))for(;!_[(i=n<<2)+_[e+424>>2]>>2]|b[i+_[e+448>>2]>>2]==E(0)?f[0|(i=_[e+432>>2]+n|0)]=254&g[0|i]:f[0|(i=_[e+432>>2]+n|0)]=1|g[0|i],(0|u)!=(0|(n=n+1|0)););}(e),_[e+644>>2]=0}function th(e,i,r,n,s,o){var a,h,l,u,c,d,f,p=0,g=0,v=0,y=0;if(D=d=D-32|0,1<=(0|i))for(c=A(i,12)+r|0;;){if(!((0|(p=_[r+4>>2]))<1)){if(a=(i=_[r+8>>2])+A(p,48)|0,p=_[r>>2]<<2,1<=(0|(f=_[p+o>>2])))for(f<<=1,h=_[_[e>>2]+1052>>2],l=_[s+p>>2];;){t:if(p=_[i+8>>2]){e:{if((g=p+-1|0)>>>0<=1){if(p=(_[i+4>>2]<<2)+n|0,y=(_[p+(_[i+12>>2]<<2)>>2]<<2)+h|0,g-1)break e;for(v=(_[p+(_[i+16>>2]<<2)>>2]<<2)+h|0,p=0;b[(u=(g=p<<2)+l|0)>>2]=b[u>>2]+E(b[i+44>>2]*E(E(b[g+y>>2]*b[i+20>>2])+E(b[g+v>>2]*b[i+24>>2]))),(0|f)!=(0|(p=p+1|0)););break t}_[d>>2]=p,B(4,1024,d);break t}for(p=0;b[(v=(g=p<<2)+l|0)>>2]=b[v>>2]+E(b[i+44>>2]*E(b[g+y>>2]*b[i+20>>2])),(0|f)!=(0|(p=p+1|0)););}if(!((i=i+48|0)>>>0<a>>>0))break}else for(;3<=(p=_[i+8>>2])>>>0&&(_[16+d>>2]=p,B(4,1024,16+d|0)),(i=i+48|0)>>>0<a>>>0;);}if(!((r=r+12|0)>>>0<c>>>0))break}D=32+d|0}function tl(e,i,r){var n;i|=0,r|=0,D=n=D+-64|0;t:{if(e|=0){if(i){if((i+15&-16)!=(0|i))_[52+n>>2]=1522,_[48+n>>2]=2361,B(4,1294,48+n|0);else{if(i=function(e,i,r){var n,s=0,o=0,a=0,h=0,l=0,u=0,c=0,d=0,p=0,v=0,x=0,T=0,w=0,S=E(0),P=0,M=0,I=0,C=0,R=0;if(V(16+(D=n=D-576|0)|0,0,560),tv(e,16+n|0,12+n|0),(h=_[12+n>>2])>>>0<=r>>>0){if(s=(o=V(i,0,h))+_[16+n>>2]|0,_[s+8>>2]=o+_[20+n>>2],_[s+40>>2]=o+_[24+n>>2],_[s+44>>2]=o+_[28+n>>2],_[s+48>>2]=o+_[32+n>>2],_[s+52>>2]=o+_[36+n>>2],_[s+16>>2]=o+_[40+n>>2],_[s+24>>2]=o+_[44+n>>2],_[s+28>>2]=o+_[48+n>>2],_[s+32>>2]=o+_[52+n>>2],_[s+36>>2]=o+_[56+n>>2],i=_[e+704>>2],_[s+308>>2]=o+_[60+n>>2],_[s+312>>2]=o+_[64+n>>2],_[s+316>>2]=o+_[68+n>>2],_[s+320>>2]=o+_[72+n>>2],_[s+324>>2]=o+_[76+n>>2],_[s+328>>2]=o+_[80+n>>2],_[s+60>>2]=o+_[84+n>>2],_[s+144>>2]=o+_[88+n>>2],_[s+148>>2]=o+_[92+n>>2],r=o+_[96+n>>2]|0,_[s+152>>2]=r,!((0|(h=_[i+8>>2]))<1)&&(i=o+_[100+n>>2]|0,_[r>>2]=i,1!=(0|h)))for(r=1;i=(15+(_[_[e+796>>2]+(a<<2)>>2]<<3)&-16)+i|0,_[_[s+152>>2]+(r<<2)>>2]=i,(0|h)!=(0|(r=(a=r)+1|0)););if(_[s+156>>2]=o+_[104+n>>2],_[s+160>>2]=o+_[108+n>>2],_[s+68>>2]=o+_[112+n>>2],_[s+76>>2]=o+_[116+n>>2],_[s+80>>2]=o+_[120+n>>2],_[s+84>>2]=o+_[124+n>>2],_[s+88>>2]=o+_[128+n>>2],_[s+92>>2]=o+_[132+n>>2],_[s+96>>2]=o+_[136+n>>2],_[s+100>>2]=o+_[140+n>>2],_[s+104>>2]=o+_[144+n>>2],_[s+108>>2]=o+_[148+n>>2],_[s+112>>2]=o+_[152+n>>2],_[s+116>>2]=o+_[156+n>>2],_[s+120>>2]=o+_[160+n>>2],_[s+124>>2]=o+_[164+n>>2],_[s+128>>2]=o+_[168+n>>2],_[s+132>>2]=o+_[172+n>>2],_[s+136>>2]=o+_[176+n>>2],_[s+140>>2]=o+_[180+n>>2],_[s+168>>2]=o+_[184+n>>2],_[s+264>>2]=o+_[188+n>>2],_[s+268>>2]=o+_[192+n>>2],_[s+272>>2]=o+_[196+n>>2],_[s+276>>2]=o+_[200+n>>2],_[s+280>>2]=o+_[204+n>>2],_[s+284>>2]=o+_[208+n>>2],_[s+288>>2]=o+_[212+n>>2],_[s+292>>2]=o+_[216+n>>2],_[s+296>>2]=o+_[220+n>>2],_[s+300>>2]=o+_[224+n>>2],_[s+176>>2]=o+_[228+n>>2],_[s+184>>2]=o+_[232+n>>2],_[s+188>>2]=o+_[236+n>>2],_[s+192>>2]=o+_[240+n>>2],_[s+196>>2]=o+_[244+n>>2],_[s+200>>2]=o+_[248+n>>2],_[s+204>>2]=o+_[252+n>>2],_[s+208>>2]=o+_[256+n>>2],_[s+212>>2]=o+_[260+n>>2],_[s+216>>2]=o+_[264+n>>2],_[s+220>>2]=o+_[268+n>>2],_[s+224>>2]=o+_[272+n>>2],_[s+228>>2]=o+_[276+n>>2],_[s+232>>2]=o+_[280+n>>2],_[s+236>>2]=o+_[284+n>>2],_[s+240>>2]=o+_[288+n>>2],_[s+244>>2]=o+_[292+n>>2],_[s+248>>2]=o+_[296+n>>2],_[s+252>>2]=o+_[300+n>>2],_[s+256>>2]=o+_[304+n>>2],_[s+260>>2]=o+_[308+n>>2],i=_[e+704>>2],_[s+336>>2]=o+_[312+n>>2],_[s+424>>2]=o+_[316+n>>2],_[s+432>>2]=o+_[320+n>>2],_[s+436>>2]=o+_[324+n>>2],_[s+440>>2]=o+_[328+n>>2],r=o+_[332+n>>2]|0,_[s+444>>2]=r,!((0|(h=_[i+16>>2]))<1)&&(a=o+_[336+n>>2]|0,_[r>>2]=a,(r=1)!=(0|h)))for(i=0;a=(15+(_[_[e+892>>2]+(i<<2)>>2]<<3)&-16)+a|0,_[_[s+444>>2]+(r<<2)>>2]=a,(0|h)!=(0|(r=(i=r)+1|0)););if(_[s+448>>2]=o+_[340+n>>2],_[s+452>>2]=o+_[344+n>>2],_[s+456>>2]=o+_[348+n>>2],_[s+460>>2]=o+_[352+n>>2],_[s+464>>2]=o+_[356+n>>2],_[s+468>>2]=o+_[360+n>>2],_[s+472>>2]=o+_[364+n>>2],_[s+476>>2]=o+_[368+n>>2],_[s+344>>2]=o+_[372+n>>2],_[s+352>>2]=o+_[376+n>>2],_[s+356>>2]=o+_[380+n>>2],_[s+360>>2]=o+_[384+n>>2],_[s+364>>2]=o+_[388+n>>2],_[s+368>>2]=o+_[392+n>>2],_[s+372>>2]=o+_[396+n>>2],_[s+376>>2]=o+_[400+n>>2],_[s+380>>2]=o+_[404+n>>2],_[s+384>>2]=o+_[408+n>>2],_[s+388>>2]=o+_[412+n>>2],_[s+392>>2]=o+_[416+n>>2],_[s+396>>2]=o+_[420+n>>2],_[s+400>>2]=o+_[424+n>>2],_[s+404>>2]=o+_[428+n>>2],_[s+408>>2]=o+_[432+n>>2],_[s+412>>2]=o+_[436+n>>2],_[s+416>>2]=o+_[440+n>>2],_[s+420>>2]=o+_[444+n>>2],i=_[448+n>>2],r=_[452+n>>2],_[s+552>>2]=o+_[456+n>>2],_[s+548>>2]=r+o,_[s+544>>2]=i+o,_[s+560>>2]=o+_[460+n>>2],i=_[e+704>>2],c=o+_[464+n>>2]|0,_[s+568>>2]=c,1<=(0|(u=_[i+48>>2])))for(a=o+_[468+n>>2]|0,i=o+_[472+n>>2]|0,l=o+_[476+n>>2]|0,d=_[e+1072>>2],r=0;_[(h=c+A(r,36)|0)+20>>2]=l,_[h+16>>2]=i,_[h>>2]=a,a=((h=_[d+(r<<2)>>2])<<2)+a|0,l=(h=1<<h<<2)+l|0,i=i+h|0,(0|u)!=(0|(r=r+1|0)););if(i=_[e+704>>2],h=o+_[516+n>>2]|0,_[s+484>>2]=h,1<=(0|(i=_[i+72>>2])))for(a=o+_[520+n>>2]|0,l=_[e+1212>>2],r=0;_[12+(h+A(r,28)|0)>>2]=a,a=(_[l+(r<<2)>>2]<<4)+a|0,(0|i)!=(0|(r=r+1|0)););_[s+488>>2]=o+_[524+n>>2],_[s+492>>2]=o+_[528+n>>2],_[s+496>>2]=o+_[532+n>>2],_[s+504>>2]=o+_[536+n>>2],_[s+536>>2]=o+_[540+n>>2],_[s+512>>2]=o+_[544+n>>2],_[s+520>>2]=o+_[548+n>>2],_[s+524>>2]=o+_[552+n>>2],_[s+528>>2]=o+_[556+n>>2],_[s+532>>2]=o+_[560+n>>2];e:{if(4<=(u=g[e+4|0])>>>0){if(_[s+576>>2]=o+_[480+n>>2],_[s+584>>2]=o+_[484+n>>2],i=_[e+704>>2],r=_[492+n>>2],h=o+_[488+n>>2]|0,_[s+592>>2]=h,1<=(0|(i=_[i+104>>2])))for(a=r+o|0,l=_[e+1104>>2],r=0;_[40+(h+A(r,48)|0)>>2]=a,a=(_[l+(r<<2)>>2]<<2)+a|0,(0|i)!=(0|(r=r+1|0)););_[s+608>>2]=o+_[500+n>>2],_[s+624>>2]=o+_[508+n>>2]}else{if(i=_[572+n>>2],r=_[568+n>>2],_[s+636>>2]=o+_[564+n>>2],_[s+640>>2]=r+o,_[_[e+704>>2]+20>>2]<1)break e;for(h=i+o|0,c=0;;){i:{if((0|(a=_[(i=c<<2)+_[e+952>>2]>>2]))<=0)i=i+_[s+636>>2]|0;else{for(l=a+(r=_[i+_[e+948>>2]>>2])|0,d=_[e+1060>>2],a=0;a=_[d+(r<<2)>>2]+a|0,(0|(r=r+1|0))<(0|l););if(i=i+_[s+636>>2]|0,r=h,a)break i}r=a=0}if(_[i>>2]=r,h=(a<<2)+h|0,!((0|(c=c+1|0))<_[_[e+704>>2]+20>>2]))break}}u>>>0<5||(_[s+600>>2]=o+_[496+n>>2],_[s+616>>2]=o+_[504+n>>2],_[s+632>>2]=o+_[512+n>>2])}_[s+644>>2]=1,_[s>>2]=e,_[s+648>>2]=1&f[_[e+708>>2]+20|0],o=_[e+704>>2],c=_[o+20>>2];e:if(!((0|(_[s+540>>2]=c))<1)){if(i=c+-1|0,d=_[e+952>>2],p=_[e+940>>2],v=_[e+932>>2],x=_[e+936>>2],T=_[e+924>>2],w=_[e+928>>2],P=_[s+552>>2],I=_[s+544>>2],u>>>0<4){for(;;)if(r=I+A(i,52)|0,a=(h=i<<2)+w|(_[r>>2]=0),_[r+4>>2]=_[a>>2],_[r+8>>2]=_[(l=h+T|0)>>2],b[r+12>>2]=b[l>>2]-b[a>>2],_[r+16>>2]=_[h+x>>2],_[r+44>>2]=_[(a=h+v|0)>>2],S=tf(E(_[h+p>>2])),b[r+20>>2]=S,b[r+24>>2]=S*E(1.5),M=_[h+d>>2],l=0,l=(_[r+32>>2]=M)?_[s+560>>2]+A(_[h+_[e+948>>2]>>2],28)|0:l,_[r+48>>2]=1,_[r+28>>2]=l,_[h+P>>2]=_[a>>2],r=0<(0|i),i=i+-1|0,!r)break e}for(M=_[e+960>>2],R=_[e+944>>2];_[(r=I+A(i,52)|0)>>2]=_[(a=i<<2)+R>>2],_[r+4>>2]=_[(h=a+w|0)>>2],_[r+8>>2]=_[(l=a+T|0)>>2],b[r+12>>2]=b[l>>2]-b[h>>2],_[r+16>>2]=_[a+x>>2],_[r+44>>2]=_[(C=a+v|0)>>2],S=tf(E(_[a+p>>2])),b[r+20>>2]=S,b[r+24>>2]=S*E(1.5),l=_[a+d>>2],_[r+32>>2]=l,_[r+28>>2]=l?_[s+560>>2]+A(_[a+_[e+948>>2]>>2],28)|0:0,h=_[a+M>>2],h=(_[r+40>>2]=h)?_[s+584>>2]+A(_[a+_[e+956>>2]>>2],28)|0:0,_[r+48>>2]=1,_[r+36>>2]=h,_[a+P>>2]=_[C>>2],r=0<(0|i),i=i+-1|0,r;);}if(4<=u>>>0?(_[s+548>>2]=_[e+944>>2],h=e):(V(_[s+548>>2],0,c<<2),h=_[s>>2],o=_[h+704>>2]),a=_[o+52>>2],1<=(0|(_[s+556>>2]=a)))for(r=_[h+1056>>2],l=_[h+1192>>2],c=_[h+1060>>2],u=_[s+560>>2];_[(i=u+A(a=a+-1|0,28)|0)>>2]=_[(d=a<<2)+c>>2],d=_[r+d>>2],_[i+24>>2]=1,_[i+16>>2]=0,_[i+20>>2]=1,_[i+8>>2]=0,_[i+12>>2]=0,_[i+4>>2]=l+(d<<2),0<(0|a););if(a=_[o+48>>2],1<=(0|(_[s+564>>2]=a))){for(;;){if(i=_[s+568>>2]+A(a=a+-1|0,36)|0,l=_[(o=a<<2)+_[h+1072>>2]>>2],1<=(0|(_[i+4>>2]=l)))for(r=0;_[_[i>>2]+(r<<2)>>2]=_[s+560>>2]+A(_[_[h+1064>>2]+(_[o+_[h+1068>>2]>>2]+r<<2)>>2],28),(0|l)!=(0|(r=r+1|0)););if(_[i+24>>2]=1,_[i+28>>2]=1,_[i+8>>2]=1<<l,!(0<(0|a)))break}h=_[s>>2],o=_[h+704>>2]}if(i=_[o>>2],(0|(_[s+4>>2]=i))<1)r=0;else{for(d=_[h+732>>2],p=_[h+736>>2],v=_[h+740>>2],l=_[h+720>>2],x=_[s+52>>2],c=_[s+568>>2],T=_[s+8>>2],a=i;_[(u=T+A(a=a+-1|0,12)|0)>>2]=c+A(_[(r=a<<2)+l>>2],36),_[u+4>>2]=_[r+v>>2],_[u+8>>2]=_[r+p>>2],b[r+x>>2]=_[r+d>>2]?E(1):E(0),0<(0|a););for(u=_[s+16>>2],r=0;a=_[8+(c+A(_[(d=(i=i+-1|0)<<2)+l>>2],36)|0)>>2],r=r+(_[u+d>>2]=a)|0,0<(0|i););i=_[s+4>>2]}if(_[s+12>>2]=i,_[s+20>>2]=r,i=_[o+4>>2],1<=(0|(_[s+304>>2]=i))){for(;r=_[s+308>>2]+((i=i+-1|0)<<5)|0,_[r>>2]=_[s+568>>2]+A(_[(a=i<<2)+_[h+752>>2]>>2],36),_[r+4>>2]=_[a+_[h+764>>2]>>2],_[r+8>>2]=_[a+_[h+768>>2]>>2],l=_[a+_[h+772>>2]>>2],_[r+12>>2]=l,o=_[a+_[h+776>>2]>>2],_[r+16>>2]=o,_[r+28>>2]=_[a+_[h+760>>2]>>2],l>>>0<=1?l-1?(_[20+(_[s+60>>2]+A(o,24)|0)>>2]=i,_[r+24>>2]=1,_[r+20>>2]=2):(_[8+(_[s+168>>2]+A(o,12)|0)>>2]=i,_[r+24>>2]=3,_[r+20>>2]=4):B(4,1179,0),0<(0|i););h=_[s>>2],o=_[h+704>>2]}a=_[o+8>>2];e:if(!((0|(_[s+56>>2]=a))<1)){if(r=a+-1|0,c=_[h+796>>2],u=_[h+804>>2],d=_[h+800>>2],p=_[h+780>>2],v=_[s+568>>2],x=_[s+60>>2],g[h+4|0]<2){for(;;)if(_[(i=x+A(r,24)|0)>>2]=v+A(_[(l=r<<2)+p>>2],36),_[i+4>>2]=_[l+d>>2],_[i+8>>2]=_[l+u>>2],l=_[l+c>>2],_[i+12>>2]=0,_[i+16>>2]=l,i=0<(0|r),r=r+-1|0,!i)break e}for(T=_[h+808>>2];_[(i=x+A(r,24)|0)>>2]=v+A(_[(l=r<<2)+p>>2],36),_[i+4>>2]=_[l+d>>2],_[i+8>>2]=_[l+u>>2],_[i+16>>2]=_[l+c>>2],_[i+12>>2]=_[l+T>>2],i=0<(0|r),r=r+-1|0,i;);}if(r=_[o+12>>2],1<=(0|(_[s+164>>2]=r)))for(l=_[h+828>>2],c=_[h+812>>2],u=_[s+568>>2],d=_[s+168>>2],i=r;_[(p=d+A(i=i+-1|0,12)|0)>>2]=u+A(_[(v=i<<2)+c>>2],36),_[p+4>>2]=_[l+v>>2],0<(0|i););if(((i=0)|a)<1)l=0;else{for(c=_[s+68>>2],u=_[s+60>>2],l=0;r=_[_[u+A(a=a+-1|0,24)>>2]+8>>2],l=(_[c+(a<<2)>>2]=r)+l|0,0<(0|a););r=_[s+164>>2],a=_[s+56>>2]}if(_[s+64>>2]=a,_[s+72>>2]=l,a=s,1<=(0|r)){for(c=_[s+176>>2],u=_[s+168>>2];l=_[_[u+A(r=r+-1|0,12)>>2]+8>>2],i=i+(_[c+(r<<2)>>2]=l)|0,0<(0|r););r=_[s+164>>2]}if(_[a+172>>2]=r,_[s+180>>2]=i,l=_[o+16>>2],1<=(0|(_[s+332>>2]=l))){for(d=_[h+872>>2],p=_[h+892>>2],v=_[h+880>>2],x=_[h+876>>2],c=_[h+852>>2],u=_[s+568>>2],T=_[s+336>>2],i=l;_[(r=T+A(i=i+-1|0,20)|0)>>2]=u+A(_[(a=i<<2)+c>>2],36),_[r+4>>2]=_[a+x>>2],_[r+8>>2]=_[a+v>>2],_[r+16>>2]=_[a+p>>2],_[r+12>>2]=_[a+d>>2],0<(0|i););for(a=_[s+344>>2],r=0;i=_[8+(u+A(_[(d=(l=l+-1|0)<<2)+c>>2],36)|0)>>2],r=(_[a+d>>2]=i)+r|0,0<(0|l););if(_[s+348>>2]=r,l=_[s+332>>2],!((0|(_[s+340>>2]=l))<1))for(r=l<<2,a=_[s+456>>2],c=_[s+452>>2];_[(u=(i=r+-4|0)<<2)+c>>2]=1065353216,_[(d=(r<<=2)-4|0)+c>>2]=1065353216,_[(p=(r=r+-12|0)+c|0)>>2]=1065353216,_[p+4>>2]=1065353216,_[a+u>>2]=0,_[a+d>>2]=1065353216,_[(r=r+a|0)>>2]=0,_[r+4>>2]=0,r=i,0<(0|(l=l+-1|0)););}else _[s+340>>2]=l,_[s+348>>2]=0;if(l=_[o+72>>2],1<=(0|(_[s+480>>2]=l)))for(d=_[h+1208>>2],p=_[h+1224>>2],v=_[h+1220>>2],x=_[h+1216>>2],T=_[h+1212>>2],w=_[s+484>>2],a=0;;){if(i=w+A(a,28)|0,c=_[(r=a<<2)+T>>2],_[i+4>>2]=c,_[i>>2]=_[r+x>>2],u=_[r+v>>2],_[i+16>>2]=u,P=_[r+p>>2],_[i+20>>2]=P,_[i+8>>2]=0,_[i+24>>2]=1+(u-P|0),1<=(0|c))for(P=_[r+d>>2],I=_[i+12>>2],M=_[h+1236>>2],R=_[h+1228>>2],C=_[h+1232>>2],r=0;_[4+(i=I+(r<<4)|0)>>2]=_[(u=r+P<<2)+C>>2],_[i>>2]=_[u+R>>2],u=_[u+M>>2],_[i+12>>2]=0,_[i+8>>2]=u,(0|c)!=(0|(r=r+1|0)););if((0|l)==(0|(a=a+1|0)))break}if(r=_[o+80>>2],(0|(_[s+500>>2]=r))<1)a=0;else{for(u=_[h+1280>>2],d=_[h+1268>>2],p=_[h+1276>>2],v=_[h+1272>>2],x=_[h+1264>>2],T=_[h+1260>>2],l=_[h+1248>>2],c=_[s+568>>2],w=_[s+504>>2];_[(i=w+A(r=r+-1|0,24)|0)>>2]=c+A(_[(a=r<<2)+l>>2],36),_[i+4>>2]=_[a+T>>2],_[i+8>>2]=_[a+x>>2],_[i+12>>2]=_[a+v>>2],a=_[a+d>>2],_[i+20>>2]=u+(a<<1),_[i+16>>2]=p+(a<<2),0<(0|r););if((0|(r=_[s+500>>2]))<1)a=0;else{for(u=_[s+512>>2],a=0;i=_[8+(c+A(_[(d=(r=r+-1|0)<<2)+l>>2],36)|0)>>2],a=(_[u+d>>2]=i)+a|0,0<(0|r););r=_[s+500>>2]}}_[s+508>>2]=r,_[s+516>>2]=a;e:if(4<=g[e+4|0]){if(!((l=g[h+4|0])>>>0<4)){if(r=_[o+120>>2],1<=(0|(_[s+572>>2]=r))){for(u=_[h+1172>>2],d=_[s+576>>2];l=(0|(o=_[(i=(r=r+-1|0)<<2)+u>>2]))<0?o=c=a=0:(a=(l=_[i+_[h+1176>>2]>>2]<<2)+_[h+1188>>2]|0,c=_[i+_[h+1180>>2]>>2],o=_[s+544>>2]+A(o,52)|0,l+_[h+1184>>2]|0),_[(i=d+A(r,20)|0)+12>>2]=c,_[i+8>>2]=a,_[i+4>>2]=l,_[i>>2]=o,0<(0|r););if((l=g[(h=_[s>>2])+4|0])>>>0<4)break e}if(o=_[h+704>>2],a=_[o+100>>2],1<=(0|(_[s+580>>2]=a)))for(c=_[h+1084>>2],u=_[h+1076>>2],d=_[h+1192>>2],p=_[h+1080>>2],v=_[s+584>>2];_[(i=v+A(a=a+-1|0,28)|0)>>2]=_[(r=a<<2)+p>>2],_[i+4>>2]=d+(_[r+u>>2]<<2),r=_[r+c>>2],_[i+20>>2]=1,_[i+24>>2]=1,_[i+12>>2]=0,_[i+16>>2]=0,_[i+8>>2]=r,0<(0|a););if(a=_[o+104>>2],1<=(0|(_[s+588>>2]=a))){for(;;){if(i=_[s+592>>2]+A(a=a+-1|0,48)|0,_[i>>2]=_[s+584>>2]+A(_[(l=a<<2)+_[h+1088>>2]>>2],28),r=_[l+_[h+1092>>2]>>2],_[i+28>>2]=1,_[i+32>>2]=1,_[i+8>>2]=0,_[i+4>>2]=r,o=_[l+_[h+1104>>2]>>2],1<=(0|(_[i+36>>2]=o)))for(r=0;_[_[i+40>>2]+(r<<2)>>2]=_[s+576>>2]+A(_[_[h+1168>>2]+(_[l+_[h+1100>>2]>>2]+r<<2)>>2],20),(0|o)!=(0|(r=r+1|0)););if(!(1<=(0|a)))break}l=g[(h=_[s>>2])+4|0]}if(!(l>>>0<4)){if(l=_[e+704>>2],r=_[l+108>>2],1<=(0|(_[s+604>>2]=r)))for(o=_[e+1124>>2],c=_[e+1128>>2],u=_[e+1120>>2],d=_[s+592>>2],p=_[s+608>>2];_[(i=p+A(r=r+-1|0,12)|0)>>2]=_[(a=r<<2)+u>>2],_[i+4>>2]=_[a+c>>2],_[i+8>>2]=d+A(_[o+a>>2],48),0<(0|r););if(r=_[l+112>>2],1<=(0|(_[s+620>>2]=r)))for(l=_[e+1148>>2],o=_[e+1152>>2],c=_[e+1144>>2],u=_[s+592>>2],d=_[s+624>>2];_[(i=d+A(r=r+-1|0,12)|0)>>2]=_[(a=r<<2)+c>>2],_[i+4>>2]=_[o+a>>2],_[i+8>>2]=u+A(_[a+l>>2],48),0<(0|r););if(a=_[h+1192>>2],i=_[_[h+704>>2]+20>>2],_[s+640>>2]=_[h+972>>2],l=_[h+964>>2],_[s+636>>2]=l,!((0|i)<(r=1))&&(_[l>>2]=a+(_[_[h+968>>2]>>2]<<2),1!=(0|i)))for(;_[(l=r<<2)+_[s+636>>2]>>2]=a+(_[l+_[h+968>>2]>>2]<<2),(0|i)!=(0|(r=r+1|0)););}}}else if(!(_[o+20>>2]<1))for(o=0;;){if(a=_[(c=o<<2)+_[s+636>>2]>>2],1<=((i=0)|(r=_[c+_[h+952>>2]>>2])))for(p=r+(u=_[c+_[h+948>>2]>>2])|0,v=_[h+1060>>2],x=_[h+1056>>2];;){if(1<=(0|(d=_[(r=u<<2)+v>>2])))for(T=d+(l=_[r+x>>2])|0,w=_[h+1192>>2];;){d=a+(i<<2)|0,S=b[w+(l<<2)>>2],r=a;i:{if(0<(0|i))for(;;){if(b[r>>2]==S)break i;if(!((r=r+4|0)>>>0<d>>>0))break}b[d>>2]=S,i=i+1|0}if(!((0|(l=l+1|0))<(0|T)))break}if(!((0|(u=u+1|0))<(0|p)))break}if(function(e,i){var r,n,s=0,o=0,a=0;_[8+(D=r=D-208|0)>>2]=1,_[12+r>>2]=0;i:if(n=i<<2){for(_[16+r>>2]=4,a=i=_[20+r>>2]=4,s=2;i=(a+4|0)+(o=i)|0,_[(16+r|0)+(s<<2)>>2]=i,s=s+1|0,a=o,i>>>0<n>>>0;);if((o=(e+n|0)-4|0)>>>0<=e>>>0)i=s=1;else for(i=s=1;i=3&~s?(y[(16+r|0)+((a=i+-1|0)<<2)>>2]>=o-e>>>0?J(e,8+r|0,i,0,16+r|0):to(e,i,16+r|0),1==(0|i)?(Q(8+r|0,1),0):(Q(8+r|0,a),1)):(to(e,i,16+r|0),K(8+r|0,2),i+2|0),s=1|_[8+r>>2],_[8+r>>2]=s,(e=e+4|0)>>>0<o>>>0;);for(J(e,8+r|0,i,0,16+r|0);;){r:{n:{s:{if(!(1!=(0|i)|1!=(0|s))){if(_[12+r>>2])break s;break i}if(1<(0|i))break n}K(8+r|0,o=tS(8+r|0)),s=_[8+r>>2],i=i+o|0;break r}Q(8+r|0,2),_[8+r>>2]=7^_[8+r>>2],K(8+r|0,1),J((a=e+-4|0)-_[(16+r|0)+((o=i+-2|0)<<2)>>2]|0,8+r|0,i+-1|0,1,16+r|0),Q(8+r|0,1),s=1|_[8+r>>2],_[8+r>>2]=s,J(a,8+r|0,o,1,16+r|0),i=o}e=e+-4|0}}D=208+r|0}(a,i),_[c+_[s+640>>2]>>2]=i,!((0|(o=o+1|0))<_[_[h+704>>2]+20>>2]))break}if(!(g[e+4|0]<5|g[_[s>>2]+4|0]<4)){if(i=_[e+704>>2],r=_[i+128>>2],1<=(0|(_[s+596>>2]=r)))for(l=_[e+1112>>2],o=_[e+1116>>2],c=_[e+1108>>2],u=_[s+592>>2],d=_[s+600>>2];_[(h=d+A(r=r+-1|0,12)|0)>>2]=_[(a=r<<2)+c>>2],_[h+4>>2]=_[o+a>>2],_[h+8>>2]=u+A(_[a+l>>2],48),0<(0|r););if(r=_[i+132>>2],1<=(0|(_[s+612>>2]=r)))for(l=_[e+1136>>2],o=_[e+1140>>2],c=_[e+1132>>2],u=_[s+592>>2],d=_[s+616>>2];_[(h=d+A(r=r+-1|0,12)|0)>>2]=_[(a=r<<2)+c>>2],_[h+4>>2]=_[o+a>>2],_[h+8>>2]=u+A(_[a+l>>2],48),0<(0|r););if(r=_[i+136>>2],!((0|(_[s+628>>2]=r))<1))for(h=_[e+1160>>2],a=_[e+1164>>2],l=_[e+1156>>2],o=_[s+592>>2],c=_[s+632>>2];_[(e=c+A(r=r+-1|0,12)|0)>>2]=_[(i=r<<2)+l>>2],_[e+4>>2]=_[i+a>>2],_[e+8>>2]=o+A(_[i+h>>2],48),0<(0|r););}ta(s)}return D=576+n|0,s}(e,i,r))break t;_[36+n>>2]=2209,_[32+n>>2]=2361,B(4,1294,32+n|0)}}else _[20+n>>2]=1444,_[16+n>>2]=2361,B(4,1294,16+n|0)}else _[4+n>>2]=2132,_[n>>2]=2361,B(4,1294,n);i=0}return D=64+n|0,0|i}function tu(e){var i,r,n;return D=i=D-16|0,e=(e|=0)?(r=e,V(16+(D=n=D-576|0)|0,0,560),tv(r,16+n|0,12+n|0),D=576+n|0,_[12+n>>2]):(_[4+i>>2]=2132,_[i>>2]=2343,B(4,1294,i),0),D=16+i|0,0|e}function tc(e){var i=g[e+4|0];F(_[e+704>>2],4,64),H(_[e+708>>2],4),H(_[e+708>>2]+4|0,4),H(_[e+708>>2]+8|0,4),H(_[e+708>>2]+12|0,4),H(_[e+708>>2]+16|0,4),H(_[e+708>>2]+20|0,1),F(_[e+720>>2],4,_[_[e+704>>2]>>2]),F(_[e+724>>2],4,_[_[e+704>>2]>>2]),F(_[e+728>>2],4,_[_[e+704>>2]>>2]),F(_[e+732>>2],4,_[_[e+704>>2]>>2]),F(_[e+736>>2],4,_[_[e+704>>2]>>2]),F(_[e+740>>2],4,_[_[e+704>>2]>>2]),F(_[e+752>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+756>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+760>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+764>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+768>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+772>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+776>>2],4,_[_[e+704>>2]+4>>2]),F(_[e+780>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+784>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+788>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+796>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+800>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+804>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+812>>2],4,_[_[e+704>>2]+12>>2]),F(_[e+816>>2],4,_[_[e+704>>2]+12>>2]),F(_[e+820>>2],4,_[_[e+704>>2]+12>>2]),F(_[e+828>>2],4,_[_[e+704>>2]+12>>2]),F(_[e+852>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+856>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+860>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+868>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+872>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+876>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+880>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+884>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+888>>2],1,_[_[e+704>>2]+16>>2]),F(_[e+892>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+896>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+900>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+904>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+908>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+912>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+924>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+928>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+932>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+936>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+940>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+948>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+952>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+976>>2],4,_[_[e+704>>2]+24>>2]),F(_[e+980>>2],4,_[_[e+704>>2]+28>>2]),F(_[e+984>>2],4,_[_[e+704>>2]+28>>2]),F(_[e+996>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1e3>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1004>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1008>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1012>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1016>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1020>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1032>>2],4,_[_[e+704>>2]+36>>2]),F(_[e+1036>>2],4,_[_[e+704>>2]+36>>2]),F(_[e+1040>>2],4,_[_[e+704>>2]+36>>2]),F(_[e+1052>>2],4,_[_[e+704>>2]+40>>2]),F(_[e+1064>>2],4,_[_[e+704>>2]+44>>2]),F(_[e+1068>>2],4,_[_[e+704>>2]+48>>2]),F(_[e+1072>>2],4,_[_[e+704>>2]+48>>2]),F(_[e+1056>>2],4,_[_[e+704>>2]+52>>2]),F(_[e+1060>>2],4,_[_[e+704>>2]+52>>2]),F(_[e+1192>>2],4,_[_[e+704>>2]+56>>2]),F(_[e+1196>>2],4,_[_[e+704>>2]+60>>2]),F(_[e+1200>>2],2,_[_[e+704>>2]+64>>2]),F(_[e+1204>>2],4,_[_[e+704>>2]+68>>2]),F(_[e+1208>>2],4,_[_[e+704>>2]+72>>2]),F(_[e+1212>>2],4,_[_[e+704>>2]+72>>2]),F(_[e+1216>>2],4,_[_[e+704>>2]+72>>2]),F(_[e+1220>>2],4,_[_[e+704>>2]+72>>2]),F(_[e+1224>>2],4,_[_[e+704>>2]+72>>2]),F(_[e+1228>>2],4,_[_[e+704>>2]+76>>2]),F(_[e+1232>>2],4,_[_[e+704>>2]+76>>2]),F(_[e+1236>>2],4,_[_[e+704>>2]+76>>2]),F(_[e+1248>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1252>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1256>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1260>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1264>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1268>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1272>>2],4,_[_[e+704>>2]+80>>2]),F(_[e+1276>>2],4,_[_[e+704>>2]+84>>2]),F(_[e+1280>>2],2,_[_[e+704>>2]+84>>2]),F(_[e+1284>>2],4,_[_[e+704>>2]+88>>2]),i>>>0<2||(F(_[e+808>>2],4,_[_[e+704>>2]+8>>2]),i>>>0<4)||(F(_[e+968>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+972>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+792>>2],4,_[_[e+704>>2]+8>>2]),F(_[e+824>>2],4,_[_[e+704>>2]+12>>2]),F(_[e+864>>2],4,_[_[e+704>>2]+16>>2]),F(_[e+1288>>2],4,_[_[e+704>>2]+92>>2]),F(_[e+1292>>2],4,_[_[e+704>>2]+92>>2]),F(_[e+1296>>2],4,_[_[e+704>>2]+92>>2]),F(_[e+1300>>2],4,_[_[e+704>>2]+96>>2]),F(_[e+1304>>2],4,_[_[e+704>>2]+96>>2]),F(_[e+1308>>2],4,_[_[e+704>>2]+96>>2]),F(_[e+944>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+956>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+960>>2],4,_[_[e+704>>2]+20>>2]),F(_[e+1076>>2],4,_[_[e+704>>2]+100>>2]),F(_[e+1080>>2],4,_[_[e+704>>2]+100>>2]),F(_[e+1084>>2],4,_[_[e+704>>2]+100>>2]),F(_[e+1088>>2],4,_[_[e+704>>2]+104>>2]),F(_[e+1092>>2],4,_[_[e+704>>2]+104>>2]),F(_[e+1096>>2],4,_[_[e+704>>2]+104>>2]),F(_[e+1100>>2],4,_[_[e+704>>2]+104>>2]),F(_[e+1104>>2],4,_[_[e+704>>2]+104>>2]),F(_[e+1120>>2],4,_[_[e+704>>2]+108>>2]),F(_[e+1124>>2],4,_[_[e+704>>2]+108>>2]),F(_[e+1128>>2],4,_[_[e+704>>2]+108>>2]),F(_[e+1144>>2],4,_[_[e+704>>2]+112>>2]),F(_[e+1148>>2],4,_[_[e+704>>2]+112>>2]),F(_[e+1152>>2],4,_[_[e+704>>2]+112>>2]),F(_[e+1168>>2],4,_[_[e+704>>2]+116>>2]),F(_[e+1172>>2],4,_[_[e+704>>2]+120>>2]),F(_[e+1176>>2],4,_[_[e+704>>2]+120>>2]),F(_[e+1180>>2],4,_[_[e+704>>2]+120>>2]),F(_[e+1184>>2],4,_[_[e+704>>2]+124>>2]),F(_[e+1188>>2],4,_[_[e+704>>2]+124>>2]),4!=(0|i)&&(F(_[e+988>>2],4,_[_[e+704>>2]+28>>2]),F(_[e+992>>2],4,_[_[e+704>>2]+28>>2]),F(_[e+1024>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1028>>2],4,_[_[e+704>>2]+32>>2]),F(_[e+1044>>2],4,_[_[e+704>>2]+36>>2]),F(_[e+1048>>2],4,_[_[e+704>>2]+36>>2]),F(_[e+1108>>2],4,_[_[e+704>>2]+128>>2]),F(_[e+1112>>2],4,_[_[e+704>>2]+128>>2]),F(_[e+1116>>2],4,_[_[e+704>>2]+128>>2]),F(_[e+1132>>2],4,_[_[e+704>>2]+132>>2]),F(_[e+1136>>2],4,_[_[e+704>>2]+132>>2]),F(_[e+1140>>2],4,_[_[e+704>>2]+132>>2]),F(_[e+1156>>2],4,_[_[e+704>>2]+136>>2]),F(_[e+1160>>2],4,_[_[e+704>>2]+136>>2]),F(_[e+1164>>2],4,_[_[e+704>>2]+136>>2])))}function td(e,i){var r=0,n=0,s=0,o=0,a=0,h=0,l=e+i|0;t:{e:if(!(1&(r=_[e+4>>2]))){if(!(3&r))break t;if(i=(r=_[e>>2])+i|0,(0|(e=e-r|0))!=_[2092]){if(r>>>0<=255)s=r>>>3,r=_[e+8>>2],(0|(n=_[e+12>>2]))==(0|r)?(h=_[2087]&tC(s),_[2087]=h):(_[r+12>>2]=n,_[n+8>>2]=r);else{if(a=_[e+24>>2],(0|(r=_[e+12>>2]))!=(0|e))n=_[e+8>>2],_[n+12>>2]=r,_[r+8>>2]=n;else if(s=(s=_[(n=e+20|0)>>2])||_[(n=e+16|0)>>2]){for(;o=n,(s=_[(n=(r=s)+20|0)>>2])||(n=r+16|0,s=_[r+16>>2]););_[o>>2]=0}else r=0;if(a){n=_[e+28>>2];i:{if(_[(s=8652+(n<<2)|0)>>2]==(0|e)){if(_[s>>2]=r)break i;h=_[2088]&tC(n),_[2088]=h;break e}if(!(_[a+(_[a+16>>2]==(0|e)?16:20)>>2]=r))break e}_[r+24>>2]=a,(n=_[e+16>>2])&&(_[r+16>>2]=n,_[n+24>>2]=r),(n=_[e+20>>2])&&(_[r+20>>2]=n,_[n+24>>2]=r)}}}else if(!(3&~(r=_[4+l>>2])))return _[2089]=i,_[4+l>>2]=-2&r,_[e+4>>2]=1|i,_[l>>2]=i}e:{if(!(2&(r=_[4+l>>2]))){if(_[2093]==(0|l)){if(_[2093]=e,i=_[2090]+i|0,_[2090]=i,_[e+4>>2]=1|i,_[2092]!=(0|e))break t;return _[2089]=0,_[2092]=0}if(_[2092]==(0|l))return _[2092]=e,i=_[2089]+i|0,_[2089]=i,_[e+4>>2]=1|i,_[e+i>>2]=i;i=(-8&r)+i|0;i:if(r>>>0<=255)s=r>>>3,r=_[8+l>>2],(0|(n=_[12+l>>2]))==(0|r)?(h=_[2087]&tC(s),_[2087]=h):(_[r+12>>2]=n,_[n+8>>2]=r);else{if(a=_[24+l>>2],(0|l)!=(0|(r=_[12+l>>2])))n=_[8+l>>2],_[n+12>>2]=r,_[r+8>>2]=n;else if(s=(s=_[(n=20+l|0)>>2])||_[(n=16+l|0)>>2]){for(;o=n,(s=_[(n=(r=s)+20|0)>>2])||(n=r+16|0,s=_[r+16>>2]););_[o>>2]=0}else r=0;if(a){n=_[28+l>>2];r:{if(_[(s=8652+(n<<2)|0)>>2]==(0|l)){if(_[s>>2]=r)break r;h=_[2088]&tC(n),_[2088]=h;break i}if(!(_[a+(_[a+16>>2]==(0|l)?16:20)>>2]=r))break i}_[r+24>>2]=a,(n=_[16+l>>2])&&(_[r+16>>2]=n,_[n+24>>2]=r),(n=_[20+l>>2])&&(_[r+20>>2]=n,_[n+24>>2]=r)}}if(_[e+4>>2]=1|i,_[e+i>>2]=i,_[2092]!=(0|e))break e;return _[2089]=i}_[4+l>>2]=-2&r,_[e+4>>2]=1|i,_[e+i>>2]=i}if(i>>>0<=255)return i=8388+((r=i>>>3)<<3)|0,r=(n=_[2087])&(r=1<<r)?_[i+8>>2]:(_[2087]=r|n,i),_[i+8>>2]=e,_[r+12>>2]=e,_[e+12>>2]=i,_[e+8>>2]=r;_[e+16>>2]=0,r=_[e+20>>2]=0,(s=i>>>8)&&(r=31,16777215<i>>>0||(r=28+((r=((l=(s<<=o=s+1048320>>>16&8)<<(r=s+520192>>>16&4))<<(s=245760+l>>>16&2)>>>15)-(s|r|o)|0)<<1|i>>>r+21&1)|0)),s=8652+((_[(n=e)+28>>2]=r)<<2)|0;e:{if((n=_[2088])&(o=1<<r)){for(n=i<<(31==(0|r)?0:25-(r>>>1)|0),r=_[s>>2];;){if((-8&_[(s=r)+4>>2])==(0|i))break e;if(r=n>>>29,n<<=1,!(r=_[16+(o=s+(4&r)|0)>>2]))break}_[o+16>>2]=e}else _[2088]=n|o,_[s>>2]=e;return _[e+24>>2]=s,_[e+12>>2]=e,_[e+8>>2]=e}i=_[s+8>>2],_[i+12>>2]=e,_[s+8>>2]=e,_[e+24>>2]=0,_[e+12>>2]=s,_[e+8>>2]=i}}function tf(e){var i,r,n,o,a,u,c,d,f,p,_,g,v,y,x,T,A,w,S,P,M=E(0),C=(E(0),0),R=0,O=(E(0),E(0),E(0),E(0),0);E(0),E(0);t:{e:{if(h(e),R=2147483647&(C=s[0])){if(!(R>>>0<2139095041))return E(E(.10000000149011612)+e);if(1065353216==(0|R))return E(-1<(0|C)?.10000000149011612:10);if(2139095040==(0|R))return E(-1<(0|C)?0:-e);if(1073741824==(0|C))return E(.010000000707805157);if(1056964608==(0|C))return E(.3162277638912201);if(1291845633<=R>>>0)return E((0|C)<0?I:0);if(v=b[1701],P=E(E(1.600000023841858)-v),y=E(E(1)/E(v+E(1.600000023841858))),i=-4096&(h(S=E(P*y)),s[0]),s[0]=i,x=E((M=l())*M),A=b[1705],v=E(y*E(E(P-E((T=M)*E(3.099609375)))-E(M*E(E(1.600000023841858)-E(E(3.099609375)-v))))),y=E(E(S+M)*v),M=E(S*S),P=E(y+E(E(M*M)*E(E(M*E(E(M*E(E(M*E(E(M*E(E(M*E(.20697501301765442))+E(.23066075146198273)))+E(.2727281153202057)))+E(.3333333432674408)))+E(.4285714328289032)))+E(.6000000238418579)))),r=-4096&(h(E(E(x+E(3))+P)),s[0]),s[0]=r,y=E(T*(M=l())),S=E(E(v*M)+E(S*E(P-E(E(M+E(-3))-x)))),n=-4096&(h(E(y+S)),s[0]),s[0]=n,v=E((M=l())*E(.9619140625)),x=E(b[1703]+E(E(E(S-E(M-y))*E(.9617967009544373))+E(M*E(-.00011736857413779944)))),o=-4096&(h(E(E(A+E(v+x))+E(-4))),s[0]),s[0]=o,S=l(),a=-4096&C,s[0]=a,M=E(S*(P=l())),e=E(E(E(x-E(E(E(S-E(-4))-A)-v))*e)+E(E(e-P)*S)),h(S=E(M+e)),1124073473<=(0|(C=s[0])))break e;i:{if((R=1124073472)==(0|C)){if(E(e+E(4299566569443414e-23))>E(S-M))break e}else{if(R=2147483647&C,!(e<=E(S-M)^1|-1021968384!=(0|C))|1125515265<=R>>>0)break t;if(R>>>0<1056964609)break i}O=(8388607&(R=(8388608>>>(R>>>23)-126)+C|0)|8388608)>>>150-(w=R>>>23&255),O=(0|C)<0?0-O|0:O,M=E(M-(u=R&-8388608>>w-127,s[0]=u,l())),h(E(e+M)),C=s[0]}c=-32768&C,s[0]=c,v=E((S=l())*E(.693145751953125)),S=E(E(S*E(14286065379565116e-22))+E(E(e-E(S-M))*E(.6931471824645996))),e=E(v+S),M=E(e*e),M=E(e-E(M*E(E(M*E(E(M*E(E(M*E(E(M*E(4138136944220605e-23))+E(-.0000016533901998627698)))+E(661375597701408e-19)))+E(-.0027777778450399637)))+E(.1666666716337204)))),T=E(E(e*M)/E(M+E(-2))),M=E(S-E(e-v)),e=(0|(C=0|(h(e=E(E(e-E(T-E(M+E(e*M))))+E(1))),s[0]+(O<<23))))<=8388607?(d=e,p=0,128<=(0|(f=O))?(d=E(d*E(17014118346046923e22)),f=(0|(p=f+-127|0))<128?p:(d=E(d*E(17014118346046923e22)),((0|f)<381?f:381)+-254|0)):-127<(0|f)||(d=E(d*E(11754943508222875e-54)),f=-127<(0|(p=f+126|0))?p:(d=E(d*E(11754943508222875e-54)),(-378<(0|f)?f:-378)+252|0)),E(d*(_=1065353216+(f<<23)|0,s[0]=_,l()))):(g=C,s[0]=g,l()),e=E(E(1)*e)}else e=E(1);return e}return E(I)}return E(0)}function tp(e,i){var r,n,o,a=0,l=0,u=E(0);if(h(i),!((o=2147483647&(n=s[0]))>>>0<=2139095040&&(h(e),(a=2147483647&(l=s[0]))>>>0<2139095041)))return E(e+i);if(1065353216==(0|n))return t_(e);n=(r=n>>>30&2)|l>>>31;t:{e:{i:{r:{if(!a){switch(n-2|0){case 0:break r;case 1:break;default:break i}return E(-3.1415927410125732)}if(2139095040!=(0|o)){if(!o|!(a>>>0<=218103808+o>>>0&&2139095040!=(0|a)))break t;if(e=u=a+218103808>>>0<o>>>0&&(u=E(0),r)?u:t_(E(w(E(e/i)))),n>>>0<=2){switch(n-1|0){case 0:return E(-e);case 1:break;default:break i}return E(E(3.1415927410125732)-E(e+E(8742277657347586e-23)))}return E(E(e+E(8742277657347586e-23))+E(-3.1415927410125732))}if(2139095040==(0|a))break e;return b[6784+(n<<2)>>2]}e=E(3.1415927410125732)}return e}return b[6768+(n<<2)>>2]}return E((0|l)<0?-1.5707963705062866:1.5707963705062866)}function t_(e){E(0);var i,r,n,o,a,l=0;E(0),E(0),h(e);t:{if(1283457024<=(o=2147483647&(a=s[0]))>>>0){if(2139095040<o>>>0)break t;return E((0|a)<0?-1.570796251296997:1.570796251296997)}e:{if(o>>>0<=1054867455){if(l=-1,964689920<=o>>>0)break e;break t}e=E(w(e)),l=o>>>0<=1066926079?o>>>0<=1060110335?(e=E(E(E(e+e)+E(-1))/E(e+E(2))),0):(e=E(E(e+E(-1))/E(e+E(1))),1):o>>>0<=1075576831?(e=E(E(e+E(-1.5))/E(E(e*E(1.5))+E(1))),2):(e=E(E(-1)/e),3)}if(o=l,r=E(e*e),i=E(r*r),n=E(i*E(E(i*E(-.106480173766613))+E(-.19999158382415771))),i=E(r*E(E(i*E(E(i*E(.06168760731816292))+E(.14253635704517365)))+E(.333333283662796))),(0|o)<=-1)return E(e-E(e*E(n+i)));e=E(b[6736+(o<<=2)>>2]-E(E(E(e*E(n+i))-b[6752+o>>2])-e)),e=(0|a)<0?E(-e):e}return e}function tm(e,i){var r,n,o,a,u=0,c=0;return D=o=D-16|0,h(e),(u=2147483647&(a=s[0]))>>>0<=1305022426?(x[i>>3]=(n=+e)+-1.5707963109016418*(c=.6366197723675814*n+6755399441055744-6755399441055744)+-.000000015893254773528196*c,u=2147483648>w(c)?~~c:-2147483648):2139095040<=u>>>0?(x[i>>3]=E(e-e),u=0):(n=u,x[8+o>>3]=(r=n-((u=(u>>>23)-150|0)<<23)|0,s[0]=r,l()),u=function(e,i,r){var n,s,o,a,h,l,u=0,c=0,d=0,f=0,p=0,g=0,v=0,y=0,b=0,T=0,E=0;if(D=n=D-560|0,v=(c=r)+A(o=0<(0|(r=(r+-3|0)/24|0))?r:0,-24)|0,0<=(0|(s=_[972])))for(c=s+1|0,r=o;x[(320+n|0)+(d<<3)>>3]=(0|r)<0?0:+_[3904+(r<<2)>>2],r=r+1|0,(0|c)!=(0|(d=d+1|0)););for(p=v+-24|0,c=0;;){for(u=r=0;u+=x[(r<<3)+e>>3]*x[(320+n|0)+(c-r<<3)>>3],1!=(0|(r=r+1|0)););if(x[(c<<3)+n>>3]=u,r=(0|c)<(0|s),c=c+1|0,!r)break}l=23-p|0,a=24-p|0,c=s;t:{for(;;){if(u=x[(c<<3)+n>>3],!(b=((r=0)|(d=c))<1))for(;g=(480+n|0)+(r<<2)|0,y=u,f=2147483648>w(u*=5960464477539063e-23)?~~u:-2147483648,f=2147483648>w(y+=-16777216*(u=0|f))?~~y:-2147483648,_[g>>2]=f,u=x[((d=d+-1|0)<<3)+n>>3]+u,(0|c)!=(0|(r=r+1|0)););u=Z(u,p),u=(u+=-8*M(.125*u))-(0|(g=2147483648>w(u)?~~u:-2147483648));e:{i:{r:{if(E=(0|p)<1){if(p)break r;f=_[476+((c<<2)+n|0)>>2]>>23}else f=_[476+(d=(c<<2)+n|0)>>2],T=d,d=f-((r=f>>a)<<a)|0,g=r+g|0,f=(_[T+476>>2]=d)>>l;if((0|f)<1)break e;break i}if(f=2,!(.5<=u)){f=0;break e}}if(d=r=0,!b)for(;;){b=_[(h=(480+n|0)+(r<<2)|0)>>2],T=16777215;i:{r:{if(!d){if(!b)break r;T=16777216,d=1}_[h>>2]=T-b;break i}d=0}if((0|c)==(0|(r=r+1|0)))break}E||1<(r=p+-1|0)>>>0||(_[476+(r=(c<<2)+n|0)>>2]=r-1?8388607&_[r+476>>2]:4194303&_[r+476>>2]),g=g+1|0,2==(0|f)&&(u=1-u,f=2,d)&&(u-=Z(1,p))}if(0!=u)break;if(!(((d=0)|(r=c))<=(0|s))){for(;d=_[(480+n|0)+((r=r+-1|0)<<2)>>2]|d,(0|s)<(0|r););if(d){for(v=p;v=v+-24|0,!_[(480+n|0)+((c=c+-1|0)<<2)>>2];);break t}}for(r=1;r=(d=r)+1|0,!_[(480+n|0)+(s-d<<2)>>2];);for(d=c+d|0;;){for(c=g=c+1|0,x[(320+n|0)+(g<<3)>>3]=_[3904+(o+c<<2)>>2],u=r=0;u+=x[(r<<3)+e>>3]*x[(320+n|0)+(g-r<<3)>>3],1!=(0|(r=r+1|0)););if(x[(c<<3)+n>>3]=u,!((0|c)<(0|d)))break}c=d}16777216<=(u=Z(u,0-p|0))?(e=(480+n|0)+(c<<2)|0,y=u,r=2147483648>w(u*=5960464477539063e-23)?~~u:-2147483648,d=2147483648>w(u=y+-16777216*(0|r))?~~u:-2147483648,_[e>>2]=d,c=c+1|0):(r=2147483648>w(u)?~~u:-2147483648,v=p),_[(480+n|0)+(c<<2)>>2]=r}if(u=Z(1,v),!((0|c)<=-1)){for(r=c;x[(r<<3)+n>>3]=u*+_[(480+n|0)+(r<<2)>>2],u*=5960464477539063e-23,e=0<(0|r),r=r+-1|0,e;);if(!((0|c)<=-1))for(r=c;;){for(p=c-(e=r)|0,r=u=0;u+=x[6672+(r<<3)>>3]*x[(e+r<<3)+n>>3],!((0|s)<=(0|r))&&(v=r>>>0<p>>>0,r=r+1|0,v););if(x[(160+n|0)+(p<<3)>>3]=u,r=e+-1|0,!(0<(0|e)))break}}if(0<=(c|(u=0)))for(;u+=x[(160+n|0)+(c<<3)>>3],e=0<(0|c),c=c+-1|0,e;);return x[i>>3]=f?-u:u,D=560+n|0,7&g}(8+o|0,o,u),c=x[o>>3],(0|a)<=-1?(x[i>>3]=-c,u=0-u|0):x[i>>3]=c),D=16+o|0,u}function tg(e,i){return e?function(e,i){t:{if(e){if(i>>>0<=127)break t;if(_[_[1789]>>2]){if(i>>>0<=2047)return f[e+1|0]=63&i|128,f[0|e]=i>>>6|192,2;if(!(57344!=(-8192&i)&&55296<=i>>>0))return f[e+2|0]=63&i|128,f[0|e]=i>>>12|224,f[e+1|0]=i>>>6&63|128,3;if(i+-65536>>>0<=1048575)return f[e+3|0]=63&i|128,f[0|e]=i>>>18|240,f[e+2|0]=i>>>6&63|128,f[e+1|0]=i>>>12&63|128,4}else if(57216==(-128&i))break t;_[2086]=25,e=-1}else e=1;return e}return f[0|e]=i,1}(e,i):0}function tv(e,i,r){var n,s,o=0,a=0,h=0,l=0,u=0,c=0,d=0,f=0,p=0,v=g[e+4|0];if(_[i>>2]=652,a=_[e+704>>2],1<=(0|(l=_[a>>2]))){for(u=_[e+720>>2],d=_[e+1072>>2];h=(1<<_[d+(_[u+(o<<2)>>2]<<2)>>2])+h|0,(0|l)!=(0|(o=o+1|0)););o=h<<2}if(_[i+4>>2]=A(l,12),_[i+8>>2]=_[a>>2]<<2,_[i+12>>2]=_[a>>2]<<2,_[i+16>>2]=_[a>>2]<<2,_[i+20>>2]=_[a>>2]<<2,h=_[a>>2],_[i+28>>2]=o,_[i+24>>2]=h<<2,h=_[a>>2],_[i+40>>2]=o,_[i+36>>2]=o,_[i+32>>2]=h<<2,_[i+44>>2]=_[a+4>>2]<<5,_[i+48>>2]=_[a+4>>2]<<2,_[i+52>>2]=_[a+4>>2]<<2,_[i+56>>2]=_[a+4>>2]<<2,_[i+60>>2]=_[a+4>>2]<<4,_[i+64>>2]=_[a+4>>2]<<4,1<=((o=0)|(l=_[a+8>>2]))){for(u=_[e+780>>2],d=_[e+1072>>2],p=_[e+796>>2],h=0;c=(15+(_[(f=o<<2)+p>>2]<<3)&-16)+c|0,h=(1<<_[d+(_[u+f>>2]<<2)>>2])+h|0,(0|l)!=(0|(o=o+1|0)););o=h<<2}if(_[i+68>>2]=A(l,24),_[i+72>>2]=_[a+8>>2]<<2,_[i+76>>2]=_[a+8>>2]<<2,h=_[a+8>>2],_[i+84>>2]=c,_[i+80>>2]=h<<2,_[i+88>>2]=_[a+8>>2]<<4,_[i+92>>2]=_[a+8>>2]<<4,h=_[a+8>>2],_[i+100>>2]=o,_[i+96>>2]=h<<2,h=_[a+8>>2],_[i+140>>2]=o,_[i+136>>2]=o,_[i+132>>2]=o,_[i+128>>2]=o,_[i+124>>2]=o,_[i+120>>2]=o,_[i+116>>2]=o,_[i+112>>2]=o,_[i+108>>2]=o,_[i+104>>2]=h<<2,_[i+144>>2]=_[a+8>>2]<<2,_[i+148>>2]=_[a+8>>2]<<2,_[i+152>>2]=_[a+8>>2]<<2,_[i+156>>2]=_[a+8>>2]<<2,_[i+160>>2]=_[a+8>>2]<<2,_[i+164>>2]=_[a+8>>2]<<2,1<=((o=c=0)|(l=_[a+12>>2]))){for(u=_[e+812>>2],d=_[e+1072>>2],h=0;h=(1<<_[d+(_[u+(o<<2)>>2]<<2)>>2])+h|0,(0|l)!=(0|(o=o+1|0)););o=h<<2}if(_[i+168>>2]=A(l,12),_[i+172>>2]=_[a+12>>2]<<2,_[i+176>>2]=_[a+12>>2]<<2,_[i+180>>2]=_[a+12>>2]<<2,_[i+184>>2]=_[a+12>>2]<<2,_[i+188>>2]=_[a+12>>2]<<2,_[i+192>>2]=_[a+12>>2]<<2,_[i+196>>2]=_[a+12>>2]<<2,_[i+200>>2]=_[a+12>>2]<<2,_[i+204>>2]=_[a+12>>2]<<4,_[i+208>>2]=_[a+12>>2]<<4,h=_[a+12>>2],_[i+216>>2]=o,_[i+212>>2]=h<<2,h=_[a+12>>2],_[i+268>>2]=o,_[i+264>>2]=o,_[i+260>>2]=o,_[i+256>>2]=o,_[i+252>>2]=o,_[i+248>>2]=o,_[i+244>>2]=o,_[i+240>>2]=o,_[i+236>>2]=o,_[i+232>>2]=o,_[i+228>>2]=o,_[i+224>>2]=o,_[i+220>>2]=h<<2,_[i+272>>2]=_[a+12>>2]<<2,_[i+276>>2]=_[a+12>>2]<<2,_[i+280>>2]=_[a+12>>2]<<2,_[i+284>>2]=_[a+12>>2]<<2,_[i+288>>2]=_[a+12>>2]<<2,_[i+292>>2]=_[a+12>>2]<<2,1<=((o=0)|(h=_[a+16>>2]))){for(u=_[e+852>>2],d=_[e+1072>>2],p=_[e+892>>2],l=0;c=(15+(_[(f=o<<2)+p>>2]<<3)&-16)+c|0,l=(1<<_[d+(_[u+f>>2]<<2)>>2])+l|0,(0|h)!=(0|(o=o+1|0)););o=l<<2}if(_[i+296>>2]=A(h,20),_[i+300>>2]=_[a+16>>2]<<2,_[i+304>>2]=_[a+16>>2],_[i+308>>2]=_[a+16>>2]<<2,_[i+312>>2]=_[a+16>>2]<<2,h=_[a+16>>2],_[i+320>>2]=c,_[i+316>>2]=h<<2,_[i+324>>2]=_[a+16>>2]<<2,_[i+328>>2]=_[a+16>>2]<<4,_[i+332>>2]=_[a+16>>2]<<4,_[i+336>>2]=_[a+16>>2]<<2,_[i+340>>2]=_[a+16>>2]<<2,_[i+344>>2]=_[a+16>>2]<<2,_[i+348>>2]=_[a+16>>2]<<4,_[i+352>>2]=_[a+16>>2]<<4,h=_[a+16>>2],_[i+360>>2]=o,_[i+356>>2]=h<<2,h=_[a+16>>2],_[i+404>>2]=o,_[i+400>>2]=o,_[i+396>>2]=o,_[i+392>>2]=o,_[i+388>>2]=o,_[i+384>>2]=o,_[i+380>>2]=o,_[i+376>>2]=o,_[i+372>>2]=o,_[i+368>>2]=o,_[i+364>>2]=h<<2,_[i+408>>2]=_[a+16>>2]<<2,_[i+412>>2]=_[a+16>>2]<<2,_[i+416>>2]=_[a+16>>2]<<2,_[i+420>>2]=_[a+16>>2]<<2,_[i+424>>2]=_[a+16>>2]<<2,_[i+428>>2]=_[a+16>>2]<<2,u=_[e+704>>2],_[i+432>>2]=A(_[u+20>>2],52),_[i+436>>2]=v>>>(o=l=0)<=3?_[u+20>>2]<<2:0,_[i+440>>2]=_[u+20>>2]<<2,_[i+444>>2]=A(_[u+52>>2],28),1<=(0|(a=_[u+48>>2]))){for(h=_[e+1072>>2],c=0;c=(d=_[h+(o<<2)>>2])+c|0,l=(1<<d)+l|0,(0|a)!=(0|(o=o+1|0)););o=l<<2,l=c<<2}if(_[i+460>>2]=o,_[i+456>>2]=o,_[i+452>>2]=l,_[i+448>>2]=A(a,36),_[i+500>>2]=A(_[u+72>>2],28),1<=((c=o=h=0)|(d=_[u+72>>2]))){for(p=_[e+1224>>2],f=_[e+1220>>2],s=_[e+1212>>2],l=0;l=(0|(n=_[(a=c<<2)+f>>2]-_[a+p>>2]|0))<(0|l)?l:1+n|0,o=(0|o)<(0|(a=_[a+s>>2]))?a:o,(0|d)!=(0|(c=c+1|0)););c=o<<2,o=l<<2}if(a=_[u+76>>2],_[i+516>>2]=o,_[i+512>>2]=c,_[i+508>>2]=o,_[i+504>>2]=a<<4,1<=(0|(a=_[u+80>>2]))){for(h=_[e+1248>>2],c=_[e+1072>>2],l=o=0;l=(1<<_[c+(_[h+(o<<2)>>2]<<2)>>2])+l|0,(0|a)!=(0|(o=o+1|0)););h=l<<2}if(_[i+520>>2]=A(a,24),_[i+524>>2]=_[u+80>>2]<<2,a=_[u+80>>2],_[i+532>>2]=h,_[i+528>>2]=a<<2,a=_[u+80>>2],_[i+544>>2]=h,_[i+540>>2]=h,_[i+536>>2]=a<<2,a=i,4<=v>>>0){if(_[i+464>>2]=A(_[u+120>>2],20),_[i+468>>2]=A(_[u+100>>2],28),h=i,1<=((o=c=0)|(d=_[u+104>>2]))){for(e=_[e+1104>>2],l=0;l=_[e+(o<<2)>>2]+l|0,(0|d)!=(0|(o=o+1|0)););e=l<<2}else e=0;_[h+476>>2]=e,_[i+472>>2]=A(d,48),_[i+484>>2]=A(_[u+108>>2],12),e=_[u+112>>2],_[i+552>>2]=0,_[i+492>>2]=A(e,12),e=0}else{if((0|(c=_[u+20>>2]))<1)l=0;else for(d=_[e+1060>>2],p=_[e+952>>2],e=_[e+948>>2],h=l=0;;){if(1<=(0|(f=_[(o=h<<2)+p>>2])))for(f=(o=d+(_[e+o>>2]<<2)|0)+(f<<2)|0;l=_[o>>2]+l|0,(o=o+4|0)>>>0<f>>>0;);if((0|c)==(0|(h=h+1|0)))break}_[i+552>>2]=c<<2,c=_[u+20>>2]<<2,e=l<<2}for(_[a+556>>2]=e,_[i+548>>2]=c,4<v>>>0&&(_[i+480>>2]=A(_[u+128>>2],12),_[i+488>>2]=A(_[u+132>>2],12),_[i+496>>2]=A(_[u+136>>2],12)),o=l=0;o=((a=_[(e=(l<<2)+i|0)>>2])+15&-16)+(_[e>>2]=o)|0,140!=(0|(l=l+1|0)););_[r>>2]=o}function ty(e,i,n,s){t:{if(!(20<i>>>0||9<(i=i+-9|0)>>>0)){switch(i-1|0){default:return i=_[n>>2],_[n>>2]=i+4,_[e>>2]=_[i>>2];case 0:return i=_[n>>2],_[n>>2]=i+4,i=_[i>>2],_[e>>2]=i,_[e+4>>2]=i>>31;case 1:return i=_[n>>2],_[n>>2]=i+4,_[e>>2]=_[i>>2],_[e+4>>2]=0;case 3:return i=_[n>>2],_[n>>2]=i+4,i=p[i>>1],_[e>>2]=i,_[e+4>>2]=i>>31;case 4:return i=_[n>>2],_[n>>2]=i+4,_[e>>2]=v[i>>1],_[e+4>>2]=0;case 5:return i=_[n>>2],_[n>>2]=i+4,i=f[0|i],_[e>>2]=i,_[e+4>>2]=i>>31;case 6:return i=_[n>>2],_[n>>2]=i+4,_[e>>2]=g[0|i],_[e+4>>2]=0;case 2:case 7:break t;case 8:}r[s](e,n)}return}i=_[n>>2]+7&-8,_[n>>2]=i+8,n=_[i+4>>2],_[e>>2]=_[i>>2],_[e+4>>2]=n}function tb(e){var i,r,n=0;if(W(f[_[e>>2]]))for(;r=f[0|(i=_[e>>2])],_[e>>2]=i+1,n=(A(n,10)+r|0)-48|0,W(f[i+1|0]););return n}function tx(e,i,n,s,o){var a,h;_[204+(D=h=D-208|0)>>2]=n,V(160+h|(n=0),0,40),_[200+h>>2]=_[204+h>>2],(0|tn(0,i,200+h|0,80+h|0,160+h|0,s,o))<0||(n=0<=_[e+76>>2]?1:n,n=_[e>>2],f[e+74|0]<=0&&(_[e>>2]=-33&n),a=32&n,_[e+48>>2]?tn(e,i,200+h|0,80+h|0,160+h|0,s,o):(_[e+48>>2]=80,_[e+16>>2]=80+h,_[e+28>>2]=h,_[e+20>>2]=h,n=_[e+44>>2],tn(e,i,200+(_[e+44>>2]=h)|0,80+h|0,160+h|0,s,o),n&&(r[_[e+36>>2]](e,0,0),_[e+48>>2]=0,_[e+44>>2]=n,_[e+28>>2]=0,_[e+16>>2]=0,_[e+20>>2]=0)),_[e>>2]=_[e>>2]|a),D=208+h|0}function tT(e,i,r){var n,s;U(8+(D=s=D-160|0)|0,3192,144),_[52+s>>2]=e,_[28+s>>2]=e,_[56+s>>2]=n=(n=-2-e|0)>>>0<256?n:256,_[36+s>>2]=e=e+n|0,_[24+s>>2]=e,tx(8+s|0,i,r,11,12),n&&(f[(e=_[28+s>>2])-((0|e)==_[24+s>>2])|0]=0),D=160+s|0}function tA(e,i){var r,n,s=0;s=!!(0|i);t:{e:{i:{r:if(!(!i|!(3&e)))for(;;){if(!g[0|e])break i;if(e=e+1|0,s=!!(0|(i=i+-1|0)),!i)break r;if(!(3&e))break}if(!s)break e}if(!g[0|e])break t;i:{if(4<=i>>>0){for(s=(s=i+-4|0)-(r=-4&s)|0,r=4+(e+r|0)|0;;){if((-1^(n=_[e>>2]))&n+-16843009&-2139062144)break i;if(e=e+4|0,!(3<(i=i+-4|0)>>>0))break}i=s,e=r}if(!i)break e}for(;;){if(!g[0|e])break t;if(e=e+1|0,!(i=i+-1|0))break}}return 0}return e}function tE(e){var i,r=0;if(!e)return 32;if(!(1&e))for(;r=r+1|0,i=2&e,e>>>=1,!i;);return r}function tw(e,i){var r,n,s,o,a=0,h=0;h=4,D=o=D-256|0;t:if(!((0|i)<2))for(a=_[(s=(i<<2)+e|0)>>2]=o;;){for(U(a,_[e>>2],r=h>>>0<256?h:256),a=0;U(_[(n=(a<<2)+e|0)>>2],_[((a=a+1|0)<<2)+e>>2],r),_[n>>2]=_[n>>2]+r,(0|i)!=(0|a););if(!(h=h-r|0))break t;a=_[s>>2]}D=256+o|0}function tS(e){return tE(_[e>>2]+-1|0)||((e=tE(_[e+4>>2]))?e+32|0:0)}function tP(e,i){i|=0,s[0]=e|=0,s[1]=i}function tM(e,i,r){var n,s,o,a,h,l;return n=e,l=A(o=r>>>16,a=n>>>16),n=(65535&(a=((s=A(h=65535&r,n&=65535))>>>16)+A(a,h)|0))+A(n,o)|0,$=((l+A(i,r)|0)+(a>>>16)|0)+(n>>>16)|0,65535&s|n<<16}function tI(e,i,r){return function(e,i,r){var n,s,o=0,a=0,h=0,l=0,u=0,c=0,d=0;t:{e:{i:{r:{n:{if(!(a=i))return tP((i=e)-A(e=(e>>>0)/(r>>>0)|0,r)|0,0),$=0,e;if(o=r){if(!((l=o+-1|0)&o))break n;u=0-(l=(S(o)+33|0)-S(a)|0)|0;break i}if(!e)return tP(0,a-A(e=(a>>>0)/0|0,0)|0),$=0,e;if((o=32-S(a)|0)>>>0<31)break r;break e}if(tP(e&l,0),1==(0|o))break t;return r=31&(o=o?31-S(o+-1^o)|0:32),e=32<=(63&o)>>>0?(a=0,i>>>r):(a=i>>>r,((1<<r)-1&i)<<32-r|e>>>r),$=a,e}l=o+1|0,u=63-o|0}if(o=i,h=31&(a=63&l),h=32<=a>>>0?(a=0,o>>>h):(a=o>>>h,((1<<h)-1&o)<<32-h|e>>>h),o=31&(u&=63),32<=u>>>0?(i=e<<o,e=0):(i=(1<<o)-1&e>>>32-o|i<<o,e<<=o),l)for((u=r+(o=-1)|0)>>>0<4294967295&&(o=0);h=(s=c=h<<1|i>>>31)-(n=r&(c=o-((a=a<<1|h>>>31)+(u>>>0<c>>>0)|0)>>31))|0,a=a-(s>>>0<n>>>0)|0,i=i<<1|e>>>31,e=d|e<<1,d=c&=1,l=l+-1|0;);return tP(h,a),$=i<<1|e>>>31,c|e<<1}tP(e,i),i=e=0}return $=i,e}(e,i,r)}function tC(e){var i;return(-1>>>(i=31&e)&-2)<<i|(-1<<(e=0-e&31)&-2)>>>e}function tR(){return c.byteLength/65536|0}}(te,b,E)}}n=null,i.wasmBinary&&(y=i.wasmBinary);var v={},y=[];"object"!=A(v)&&_("no native wasm support detected");var b,E=new function(){var e=Array(16);return e.grow=function(){17<=e.length&&j("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),e.push(null)},e.set=function(i,r){e[i]=r},e.get=function(i){return e[i]},e},w=!1;function S(e,i){e||j("Assertion failed: "+i)}var P,M,I,C,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,i,r){var n=i+r;for(r=i;e[r]&&!(n<=r);)++r;if(16<r-i&&e.subarray&&R)return R.decode(e.subarray(i,r));for(n="";i<r;){var s,o,a=e[i++];128&a?(s=63&e[i++],192==(224&a)?n+=String.fromCharCode((31&a)<<6|s):(o=63&e[i++],(a=224==(240&a)?(15&a)<<12|s<<6|o:(7&a)<<18|s<<12|o<<6|63&e[i++])<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a)))):n+=String.fromCharCode(a)}return n}function D(e,i){return e?O(I,e,i):""}function $(e){return 0<e%65536&&(e+=65536-e%65536),e}function L(e){P=e,i.HEAP8=M=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=C=new Int32Array(e),i.HEAPU8=I=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var F=i.TOTAL_MEMORY||16777216;function B(e){for(;0<e.length;){var r,n=e.shift();"function"==typeof n?n():"number"==typeof(r=n.ea)?void 0===n.da?i.dynCall_v(r):i.dynCall_vi(r,n.da):r(void 0===n.da?null:n.da)}}(P=(b=i.wasmMemory||new function(){return{buffer:new ArrayBuffer(F/65536*65536),grow:function(e){return to(e)}}}).buffer).byteLength,L(P),C[2216]=5251936;var k,N=[],U=[],G=[],X=[],V=(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,i){var r=65535&e,n=65535&i;return r*n+((e>>>16)*n+r*(i>>>16)<<16)|0}),Math.fround||(k=new Float32Array(1),Math.fround=function(e){return k[0]=e,k[0]}),Math.clz32||(Math.clz32=function(e){var i=32,r=e>>16;return r&&(i-=16,e=r),(r=e>>8)&&(i-=8,e=r),(r=e>>4)&&(i-=4,e=r),(r=e>>2)&&(i-=2,e=r),e>>1?i-2:i-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),0),H=null;function j(e){throw i.onAbort&&i.onAbort(e),p(e),_(e),w=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}i.preloadedImages={},i.preloadedAudios={};var Y="data:application/octet-stream;base64,";function z(e){return String.prototype.startsWith?e.startsWith(Y):0===e.indexOf(Y)}var W="_em_module.wasm";function q(){try{if(y)return new Uint8Array(y);var e=K(W);if(e)return e;if(h)return h(W);throw"both async and sync fetching of the wasm failed"}catch(e){j(e)}}z(W)||(d=W,W=i.locateFile?i.locateFile(d,f):f+d),U.push({ea:function(){ti()}});var Z=[null,[],[]];function Q(e){for(var i=[],r=0;r<e.length;r++){var n=e[r];255<n&&(n&=255),i.push(String.fromCharCode(n))}return i.join("")}var J="function"==typeof atob?atob:function(e){var i="",r=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),h=(n=n<<2|s>>4,s=(15&s)<<4|o>>2,(3&o)<<6|a);while(i+=String.fromCharCode(n),64!==o&&(i+=String.fromCharCode(s)),64!==a&&(i+=String.fromCharCode(h)),r<e.length);return i};function K(e){if(z(e)){if(e=e.slice(Y.length),"boolean"==typeof c&&c){try{var i=T.from(e,"base64")}catch(r){i=new T(e,"base64")}var r=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}else try{var n=J(e),s=new Uint8Array(n.length);for(i=0;i<n.length;++i)s[i]=n.charCodeAt(i);r=s}catch(e){throw Error("Converting base64 string to bytes failed.")}return r}}var tt,te={a:function(e,i,r){I.set(I.subarray(i,i+r),e)},b:function(e){if(2147418112<e)return!1;for(var i=Math.max(M.length,16777216);i<e;)i=i<=536870912?$(2*i):Math.min($((3*i+2147483648)/4),2147418112);t:{try{b.grow(i-P.byteLength+65535>>16),L(b.buffer);var r=1;break t}catch(e){}r=void 0}return!!r},c:function(e,i,r,n){try{for(var s=0,o=0;o<r;o++){for(var a=C[i+8*o>>2],h=C[i+(8*o+4)>>2],l=0;l<h;l++){var u=I[a+l],c=Z[e];0===u||10===u?((1===e?p:_)(O(c,0)),c.length=0):c.push(u)}s+=h}return C[n>>2]=s,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.fa||j(e),e.ga}},memory:b,table:E},ti=(f=function(){function e(e){i.asm=e.exports,V--,i.monitorRunDependencies&&i.monitorRunDependencies(V),0==V&&H&&(e=H,H=null,e())}function r(i){e(i.instance)}function n(e){(!y&&(l||u)&&"function"==typeof fetch?fetch(W,{credentials:"same-origin"}).then(function(e){if(e.ok)return e.arrayBuffer();throw"failed to load wasm binary file at '"+W+"'"}).catch(q):new Promise(function(e){e(q())})).then(function(){return{then:function(e){e({instance:new g})}}}).then(e,function(e){_("failed to asynchronously prepare wasm: "+e),j(e)})}var s={env:te,wasi_unstable:te};if(V++,i.monitorRunDependencies&&i.monitorRunDependencies(V),i.instantiateWasm)try{return i.instantiateWasm(s,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}return y||"function"!=typeof v.instantiateStreaming||z(W)||"function"!=typeof fetch?n(r):fetch(W,{credentials:"same-origin"}).then(function(e){return v.instantiateStreaming(e,s).then(r,function(e){_("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),n(r)})}),{}}(),i.asm=f,i.___wasm_call_ctors=function(){return i.asm.d.apply(null,arguments)}),tr=(i._csmGetVersion=function(){return i.asm.e.apply(null,arguments)},i._csmGetLatestMocVersion=function(){return i.asm.f.apply(null,arguments)},i._csmGetMocVersion=function(){return i.asm.g.apply(null,arguments)},i._csmHasMocConsistency=function(){return i.asm.h.apply(null,arguments)},i._csmSetLogFunction=function(){return i.asm.i.apply(null,arguments)},i._csmReviveMocInPlace=function(){return i.asm.j.apply(null,arguments)},i._csmReadCanvasInfo=function(){return i.asm.k.apply(null,arguments)},i._csmGetSizeofModel=function(){return i.asm.l.apply(null,arguments)},i._csmInitializeModelInPlace=function(){return i.asm.m.apply(null,arguments)},i._csmUpdateModel=function(){return i.asm.n.apply(null,arguments)},i._csmGetParameterCount=function(){return i.asm.o.apply(null,arguments)},i._csmGetParameterIds=function(){return i.asm.p.apply(null,arguments)},i._csmGetParameterTypes=function(){return i.asm.q.apply(null,arguments)},i._csmGetParameterMinimumValues=function(){return i.asm.r.apply(null,arguments)},i._csmGetParameterMaximumValues=function(){return i.asm.s.apply(null,arguments)},i._csmGetParameterDefaultValues=function(){return i.asm.t.apply(null,arguments)},i._csmGetParameterValues=function(){return i.asm.u.apply(null,arguments)},i._csmGetPartCount=function(){return i.asm.v.apply(null,arguments)},i._csmGetPartIds=function(){return i.asm.w.apply(null,arguments)},i._csmGetPartOpacities=function(){return i.asm.x.apply(null,arguments)},i._csmGetPartParentPartIndices=function(){return i.asm.y.apply(null,arguments)},i._csmGetDrawableCount=function(){return i.asm.z.apply(null,arguments)},i._csmGetDrawableIds=function(){return i.asm.A.apply(null,arguments)},i._csmGetDrawableConstantFlags=function(){return i.asm.B.apply(null,arguments)},i._csmGetDrawableDynamicFlags=function(){return i.asm.C.apply(null,arguments)},i._csmGetDrawableTextureIndices=function(){return i.asm.D.apply(null,arguments)},i._csmGetDrawableDrawOrders=function(){return i.asm.E.apply(null,arguments)},i._csmGetDrawableRenderOrders=function(){return i.asm.F.apply(null,arguments)},i._csmGetDrawableOpacities=function(){return i.asm.G.apply(null,arguments)},i._csmGetDrawableMaskCounts=function(){return i.asm.H.apply(null,arguments)},i._csmGetDrawableMasks=function(){return i.asm.I.apply(null,arguments)},i._csmGetDrawableVertexCounts=function(){return i.asm.J.apply(null,arguments)},i._csmGetDrawableVertexPositions=function(){return i.asm.K.apply(null,arguments)},i._csmGetDrawableVertexUvs=function(){return i.asm.L.apply(null,arguments)},i._csmGetDrawableIndexCounts=function(){return i.asm.M.apply(null,arguments)},i._csmGetDrawableIndices=function(){return i.asm.N.apply(null,arguments)},i._csmGetDrawableMultiplyColors=function(){return i.asm.O.apply(null,arguments)},i._csmGetDrawableScreenColors=function(){return i.asm.P.apply(null,arguments)},i._csmGetDrawableParentPartIndices=function(){return i.asm.Q.apply(null,arguments)},i._csmResetDrawableDynamicFlags=function(){return i.asm.R.apply(null,arguments)},i._csmGetParameterKeyCounts=function(){return i.asm.S.apply(null,arguments)},i._csmGetParameterKeyValues=function(){return i.asm.T.apply(null,arguments)},i._csmMallocMoc=function(){return i.asm.U.apply(null,arguments)},i._csmMallocModelAndInitialize=function(){return i.asm.V.apply(null,arguments)},i._csmMalloc=function(){return i.asm.W.apply(null,arguments)},i._csmFree=function(){return i.asm.X.apply(null,arguments)},i._csmInitializeAmountOfMemory=function(){return i.asm.Y.apply(null,arguments)},i.stackSave=function(){return i.asm.Z.apply(null,arguments)}),tn=i.stackAlloc=function(){return i.asm._.apply(null,arguments)},ts=i.stackRestore=function(){return i.asm.$.apply(null,arguments)},to=i.__growWasmMemory=function(){return i.asm.aa.apply(null,arguments)};function ta(){function e(){if(!tt&&(tt=!0,!w)){if(B(U),B(G),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();X.unshift(e)}B(X)}}if(!(0<V)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)!function(){var e=i.preRun.shift();N.unshift(e)}();B(N),0<V||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.dynCall_vi=function(){return i.asm.ba.apply(null,arguments)},i.asm=f,i.ccall=function(e,r,n,s){var o,a,h,l={string:function(e){var i=0;if(null!=e&&0!==e){var r=1+(e.length<<2),n=i=tn(r),s=I;if(0<r){r=n+r-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if((a=55296<=a&&a<=57343?65536+((1023&a)<<10)|1023&e.charCodeAt(++o):a)<=127){if(r<=n)break;s[n++]=a}else{if(a<=2047){if(r<=n+1)break;s[n++]=192|a>>6}else{if(a<=65535){if(r<=n+2)break;s[n++]=224|a>>12}else{if(r<=n+3)break;s[n++]=240|a>>18,s[n++]=128|a>>12&63}s[n++]=128|a>>6&63}s[n++]=128|63&a}}s[n]=0}}return i},array:function(e){var i=tn(e.length);return M.set(e,i),i}},u=(S(a=i["_"+(o=e)],"Cannot call unknown function "+o+", make sure it is exported"),a),c=[];if(e=0,s)for(var d=0;d<s.length;d++){var f=l[n[d]];f?(0===e&&(e=tr()),c[d]=f(s[d])):c[d]=s[d]}return h=n=u.apply(null,c),n="string"===r?D(h):"boolean"===r?!!h:h,0!==e&&ts(e),n},i.UTF8ToString=D,i.addFunction=function(e,i){var r=E.length;try{E.grow(1)}catch(e){if(!e instanceof RangeError)throw e;throw"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{E.set(r,e)}catch(n){if(!n instanceof TypeError)throw n;S(void 0!==i,"Missing signature argument to addFunction"),E.set(r,e)}return r},i.then=function(e){var r;return tt?e(i):(r=i.onRuntimeInitialized,i.onRuntimeInitialized=function(){r&&r(),e(i)}),i},H=function e(){tt||ta(),tt||(H=e)},i.run=ta,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return ta(),e},"object"==("undefined"==typeof exports?"undefined":A(exports))&&"object"==("undefined"==typeof module?"undefined":A(module))?module.exports=tZ:"function"==typeof define&&define.amd?define([],function(){return tZ}):"object"==("undefined"==typeof exports?"undefined":A(exports))&&(exports._em_module=tZ),tQ=tZ(),window.Live2DCubismCore=eg,function(){var e=!0;function i(){e||(this._$MT=null,this._$5S=null,this._$NP=0,i._$42++,this._$5S=new X(this))}function r(i){if(!e){this.clipContextList=[],this.glcontext=i.gl,this.dp_webgl=i,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new A,ta.glContext.length>ta.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new $,this.tmpMatrix2=new $,this.tmpMatrixForMask=new $,this.tmpMatrixForDraw=new $,this.CHANNEL_COLORS=[];var r=new M;(r=new M).r=0,r.g=0,r.b=0,r.a=1,this.CHANNEL_COLORS.push(r),(r=new M).r=1,r.g=0,r.b=0,r.a=0,this.CHANNEL_COLORS.push(r),(r=new M).r=0,r.g=1,r.b=0,r.a=0,this.CHANNEL_COLORS.push(r),(r=new M).r=0,r.g=0,r.b=1,r.a=0,this.CHANNEL_COLORS.push(r);for(var n=0;n<this.CHANNEL_COLORS.length;n++)this.dp_webgl.setChannelFlagAsColor(n,this.CHANNEL_COLORS[n])}}function n(e,i,r){this.clipIDList=[],this.clipIDList=r,this.clippingMaskDrawIndexList=[];for(var n=0;n<r.length;n++)this.clippingMaskDrawIndexList.push(i.getDrawDataIndex(r[n]));this.clippedDrawContextList=[],this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new A,this.allClippedDrawRect=new A,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=e}function s(e,i){this._$gP=e,this.drawDataIndex=i}function o(){e||(this.color=null)}function a(){e||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}function h(){}function l(){this._$r=null,this._$0S=null}function u(){e||(this.x=null,this.y=null,this.width=null,this.height=null)}function c(i){e||ti.prototype.constructor.call(this,i)}function d(i){e||ti.prototype.constructor.call(this,i)}function f(){e||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,f._$42++)}function p(){e||(this.p1=new _,this.p2=new _,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=[],this._$qP=[],this.setup(.3,.5,.1))}function _(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}function g(e,i,r){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=e,this.scale=i,this._$V0=r}function v(e,i,r,n){g.prototype.constructor.call(this,i,r,n),this._$tL=null,this._$tL=e}function y(e,i,r){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=e,this.scale=i,this._$V0=r}function b(e,i,r,n){y.prototype.constructor.call(this,i,r,n),this._$YP=null,this._$YP=e}function x(){e||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}i._$0s=1,i._$4s=2,i._$42=0,i._$62=function(e,r){try{if(r instanceof ArrayBuffer&&(r=new DataView(r)),!(r instanceof DataView))throw new tl("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var n,s=new tx(r),o=s._$ST(),a=s._$ST(),l=s._$ST();if(109!=o||111!=a||99!=l)throw new tl("_$gi _$C _$li , _$Q0 _$P0.");if(n=s._$ST(),s._$gr(n),n>G._$T7)throw e._$NP|=i._$4s,new tl("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+G._$T7+" < _$f0 : "+n+" )@_$SS#loadModel()\n");var u=s._$nP();if(n>=G._$s7){var c=s._$9T(),d=s._$9T();if(-30584!=c||-30584!=d)throw e._$NP|=i._$0s,new tl("_$gi _$C _$li , _$0 _$6 _$Ui.")}e._$KS(u);var f=e.getModelContext();f.setDrawParam(e.getDrawParam()),f.init()}catch(e){h._$Rb(e)}},i.prototype._$KS=function(e){this._$MT=e},i.prototype.getModelImpl=function(){return null==this._$MT&&(this._$MT=new f,this._$MT._$zP()),this._$MT},i.prototype.getCanvasWidth=function(){return null==this._$MT?0:this._$MT.getCanvasWidth()},i.prototype.getCanvasHeight=function(){return null==this._$MT?0:this._$MT.getCanvasHeight()},i.prototype.getParamFloat=function(e){return"number"!=typeof e&&(e=this._$5S.getParamIndex(d.getID(e))),this._$5S.getParamFloat(e)},i.prototype.setParamFloat=function(e,i,r){"number"!=typeof e&&(e=this._$5S.getParamIndex(d.getID(e))),arguments.length<3&&(r=1),this._$5S.setParamFloat(e,this._$5S.getParamFloat(e)*(1-r)+i*r)},i.prototype.addToParamFloat=function(e,i,r){"number"!=typeof e&&(e=this._$5S.getParamIndex(d.getID(e))),arguments.length<3&&(r=1),this._$5S.setParamFloat(e,this._$5S.getParamFloat(e)+i*r)},i.prototype.multParamFloat=function(e,i,r){"number"!=typeof e&&(e=this._$5S.getParamIndex(d.getID(e))),arguments.length<3&&(r=1),this._$5S.setParamFloat(e,this._$5S.getParamFloat(e)*(1+(i-1)*r))},i.prototype.getParamIndex=function(e){return this._$5S.getParamIndex(d.getID(e))},i.prototype.loadParam=function(){this._$5S.loadParam()},i.prototype.saveParam=function(){this._$5S.saveParam()},i.prototype.init=function(){this._$5S.init()},i.prototype.update=function(){this._$5S.update()},i.prototype._$Rs=function(){return h._$li("_$60 _$PT _$Rs()"),-1},i.prototype._$Ds=function(e){h._$li("_$60 _$PT _$SS#_$Ds() \n")},i.prototype._$K2=function(){},i.prototype.draw=function(){},i.prototype.getModelContext=function(){return this._$5S},i.prototype._$s2=function(){return this._$NP},i.prototype._$P7=function(e,i,r,n){var s=-1,o=0;if(0!=r){if(1==e.length){f=e[0];var a=0!=this.getParamFloat(f),h=(p=i[0],this.getPartsOpacity(p)),l=r/n;a?(h+=l)>1&&(h=1):(h-=l)<0&&(h=0),this.setPartsOpacity(p,h)}else{for(d=0;d<e.length;d++)if(f=e[d],_=0!=this.getParamFloat(f)){if(s>=0)break;s=d,p=i[d],(o=this.getPartsOpacity(p)+r/n)>1&&(o=1)}for(s<0&&(console.log("No _$wi _$q0/ _$U default[%s]",e[0]),s=0,o=1,this.loadParam(),this.setParamFloat(e[s],o),this.saveParam()),d=0;d<e.length;d++)if(p=i[d],s==d)this.setPartsOpacity(p,o);else{var u,c=this.getPartsOpacity(p);(1-(u=o<.5?-.5*o/.5+1:(1-o)*.5/.5))*(1-o)>.15&&(u=1-.15/(1-o)),c>u&&(c=u),this.setPartsOpacity(p,c)}}}else for(var d=0;d<e.length;d++){var f=e[d],p=i[d],_=0!=this.getParamFloat(f);this.setPartsOpacity(p,_?1:0)}},i.prototype.setPartsOpacity=function(e,i){"number"!=typeof e&&(e=this._$5S.getPartsDataIndex(c.getID(e))),this._$5S.setPartsOpacity(e,i)},i.prototype.getPartsDataIndex=function(e){return e instanceof c||(e=c.getID(e)),this._$5S.getPartsDataIndex(e)},i.prototype.getPartsOpacity=function(e){return"number"!=typeof e&&(e=this._$5S.getPartsDataIndex(c.getID(e))),e<0?0:this._$5S.getPartsOpacity(e)},i.prototype.getDrawParam=function(){},i.prototype.getDrawDataIndex=function(e){return this._$5S.getDrawDataIndex(L.getID(e))},i.prototype.getDrawData=function(e){return this._$5S.getDrawData(e)},i.prototype.getTransformedPoints=function(e){var i=this._$5S._$C2(e);return i instanceof tc?i.getTransformedPoints():null},i.prototype.getIndexArray=function(e){if(e<0||e>=this._$5S._$aS.length)return null;var i=this._$5S._$aS[e];return null!=i&&i.getType()==z._$wb&&i instanceof tu?i.getIndexArray():null},r.CHANNEL_COUNT=4,r.RENDER_TEXTURE_USE_MIPMAP=!1,r.NOT_USED_FRAME=-100,r.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var e=this.CHANNEL_COLORS.length-1;e>=0;--e)this.CHANNEL_COLORS.splice(e,1);this.CHANNEL_COLORS=[]}this.releaseShader()},r.prototype.releaseShader=function(){for(var e=ta.frameBuffers.length,i=0;i<e;i++)this.gl.deleteFramebuffer(ta.frameBuffers[i].framebuffer);ta.frameBuffers=[],ta.glContext=[]},r.prototype.init=function(e,i,r){for(var s=0;s<i.length;s++){var o=i[s].getClipIDList();if(null!=o){var a=this.findSameClip(o);null==a&&(a=new n(this,e,o),this.clipContextList.push(a));var h=i[s].getDrawDataID(),l=e.getDrawDataIndex(h);a.addClippedDrawData(h,l),r[s].clipBufPre_clipContext=a}}},r.prototype.getMaskRenderTexture=function(){var e;return e=this.dp_webgl.createFramebuffer(),ta.frameBuffers[this.dp_webgl.glno]=e,this.dp_webgl.glno},r.prototype.setupClip=function(e,i){for(var r=0,n=0;n<this.clipContextList.length;n++){var s=this.clipContextList[n];this.calcClippedDrawTotalBounds(e,s),s.isUsing&&r++}if(r>0){var o=i.gl.getParameter(i.gl.FRAMEBUFFER_BINDING),a=[,,,,];for(a[0]=0,a[1]=0,a[2]=i.gl.canvas.width,a[3]=i.gl.canvas.height,i.gl.viewport(0,0,ta.clippingMaskBufferSize,ta.clippingMaskBufferSize),this.setupLayoutBounds(r),i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,ta.frameBuffers[this.curFrameNo].framebuffer),i.gl.clearColor(0,0,0,0),i.gl.clear(i.gl.COLOR_BUFFER_BIT),n=0;n<this.clipContextList.length;n++){var h=(s=this.clipContextList[n]).allClippedDrawRect;s.layoutChannelNo;var l=s.layoutBounds;this.tmpBoundsOnModel._$jL(h),this.tmpBoundsOnModel.expand(.05*h.width,.05*h.height);var u=l.width/this.tmpBoundsOnModel.width,c=l.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(l.x,l.y,0),this.tmpMatrix2.scale(u,c,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(l.x,l.y,0),this.tmpMatrix2.scale(u,c,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var d=this.tmpMatrixForMask.getArray(),f=0;f<16;f++)s.matrixForMask[f]=d[f];var p=this.tmpMatrixForDraw.getArray();for(f=0;f<16;f++)s.matrixForDraw[f]=p[f];for(var _=s.clippingMaskDrawIndexList.length,g=0;g<_;g++){var v=s.clippingMaskDrawIndexList[g],y=e.getDrawData(v),b=e._$C2(v);i.setClipBufPre_clipContextForMask(s),y.draw(i,e,b)}}i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,o),i.setClipBufPre_clipContextForMask(null),i.gl.viewport(a[0],a[1],a[2],a[3])}},r.prototype.getColorBuffer=function(){return this.colorBuffer},r.prototype.findSameClip=function(e){for(var i=0;i<this.clipContextList.length;i++){var r=this.clipContextList[i],n=r.clipIDList.length;if(n==e.length){for(var s=0,o=0;o<n;o++)for(var a=r.clipIDList[o],h=0;h<n;h++)if(e[h]==a){s++;break}if(s==n)return r}}return null},r.prototype.calcClippedDrawTotalBounds=function(e,i){for(var r=e._$Ri.getModelImpl().getCanvasWidth(),n=e._$Ri.getModelImpl().getCanvasHeight(),s=r>n?r:n,o=s,a=s,h=0,l=0,u=i.clippedDrawContextList.length,c=0;c<u;c++){var d=i.clippedDrawContextList[c].drawDataIndex,f=e._$C2(d);if(f._$yo()){for(var p=f.getTransformedPoints(),_=p.length,g=[],v=[],y=0,b=U._$i2;b<_;b+=U._$No)g[y]=p[b],v[y]=p[b+1],y++;var x=Math.min.apply(null,g),T=Math.min.apply(null,v),A=Math.max.apply(null,g),E=Math.max.apply(null,v);x<o&&(o=x),T<a&&(a=T),A>h&&(h=A),E>l&&(l=E)}}if(o==s)i.allClippedDrawRect.x=0,i.allClippedDrawRect.y=0,i.allClippedDrawRect.width=0,i.allClippedDrawRect.height=0,i.isUsing=!1;else{var w=h-o,S=l-a;i.allClippedDrawRect.x=o,i.allClippedDrawRect.y=a,i.allClippedDrawRect.width=w,i.allClippedDrawRect.height=S,i.isUsing=!0}},r.prototype.setupLayoutBounds=function(e){var i=e/r.CHANNEL_COUNT,n=e%r.CHANNEL_COUNT;i=~~i,n=~~n;for(var s=0,o=0;o<r.CHANNEL_COUNT;o++){var a,l,u=i+(o<n?1:0);if(0==u);else if(1==u)(l=this.clipContextList[s++]).layoutChannelNo=o,l.layoutBounds.x=0,l.layoutBounds.y=0,l.layoutBounds.width=1,l.layoutBounds.height=1;else if(2==u)for(var c=0;c<u;c++){var d=0;a=~~(a=c%2),(l=this.clipContextList[s++]).layoutChannelNo=o,l.layoutBounds.x=.5*a,l.layoutBounds.y=0,l.layoutBounds.width=.5,l.layoutBounds.height=1}else if(u<=4)for(c=0;c<u;c++)a=~~(a=c%2),d=~~(d=c/2),(l=this.clipContextList[s++]).layoutChannelNo=o,l.layoutBounds.x=.5*a,l.layoutBounds.y=.5*d,l.layoutBounds.width=.5,l.layoutBounds.height=.5;else if(u<=9)for(c=0;c<u;c++)a=~~(a=c%3),d=~~(d=c/3),(l=this.clipContextList[s++]).layoutChannelNo=o,l.layoutBounds.x=a/3,l.layoutBounds.y=d/3,l.layoutBounds.width=1/3,l.layoutBounds.height=1/3;else h._$li("_$6 _$0P mask count : %d",u)}},n.prototype.addClippedDrawData=function(e,i){var r=new s(e,i);this.clippedDrawContextList.push(r)},a._$JT=function(e,i,r){var n=e/i,s=r/i,o=1-(1-s)*(1-s),a=1-(1-s)*(1-s),h=1/3*(1-s)*o+(2/3*s+1/3*(1-s))*(1-o),l=(s+2/3*(1-s))*a+(1/3*s+2/3*(1-s))*(1-a);if(n<=0)return 0;if(n>=1)return 1;var u=n*n;return n*u*(1-3*l+3*h-0)+(3*l-6*h+0)*u+(3*h-0)*n+0},a.prototype._$a0=function(){},a.prototype.setFadeIn=function(e){this._$dP=e},a.prototype.setFadeOut=function(e){this._$eo=e},a.prototype._$pT=function(e){this._$V0=e},a.prototype.getFadeOut=function(){return this._$eo},a.prototype._$4T=function(){return this._$eo},a.prototype._$mT=function(){return this._$V0},a.prototype.getDurationMSec=function(){return -1},a.prototype.getLoopDurationMSec=function(){return -1},a.prototype.updateParam=function(e,i){if(i._$AT&&!i._$9L){var r=C.getUserTimeMSec();if(i._$z2<0){i._$z2=r,i._$bs=r;var n=this.getDurationMSec();i._$Do<0&&(i._$Do=n<=0?-1:i._$z2+n)}var s=this._$V0;0<=(s=s*(0==this._$dP?1:th._$r2((r-i._$bs)/this._$dP))*(0==this._$eo||i._$Do<0?1:th._$r2((i._$Do-r)/this._$eo)))&&s<=1||console.log("### assert!! ### "),this.updateParamExe(e,r,s,i),i._$Do>0&&i._$Do<r&&(i._$9L=!0)}},a.prototype.updateParamExe=function(e,i,r,n){},h._$8s=0,h._$fT={},h.start=function(e){var i=h._$fT[e];null==i&&((i=new l)._$r=e,h._$fT[e]=i),i._$0S=C.getSystemTimeMSec()},h.dump=function(e){var i=h._$fT[e];if(null!=i){var r=C.getSystemTimeMSec()-i._$0S;return console.log(e+" : "+r+"ms"),r}return -1},h.end=function(e){var i=h._$fT[e];return null!=i?C.getSystemTimeMSec()-i._$0S:-1},h._$li=function(e,i){console.log("_$li : "+e+"\n",i)},h._$Ji=function(e,i){console.log(e,i)},h._$dL=function(e,i){console.log(e,i),console.log("\n")},h._$KL=function(e,i){for(var r=0;r<i;r++)r%16==0&&r>0?console.log("\n"):r%8==0&&r>0&&console.log("  "),console.log("%02X ",255&e[r]);console.log("\n")},h._$nr=function(e,i,r){console.log("%s\n",e);for(var n=i.length,s=0;s<n;++s)console.log("%5d",i[s]),console.log("%s\n",r),console.log(",");console.log("\n")},h._$Rb=function(e){console.log("dump exception : "+e),console.log("stack :: "+e.stack)},u.prototype._$8P=function(){return .5*(this.x+this.x+this.width)},u.prototype._$6P=function(){return .5*(this.y+this.y+this.height)},u.prototype._$EL=function(){return this.x+this.width},u.prototype._$5T=function(){return this.y+this.height},u.prototype._$jL=function(e,i,r,n){this.x=e,this.y=i,this.width=r,this.height=n},u.prototype._$jL=function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},c.prototype=new ti,c._$tP={},c._$27=function(){c._$tP.clear()},c.getID=function(e){var i=c._$tP[e];return null==i&&(i=new c(e),c._$tP[e]=i),i},c.prototype._$3s=function(){return new c},d.prototype=new ti,d._$tP={},d._$27=function(){d._$tP.clear()},d.getID=function(e){var i=d._$tP[e];return null==i&&(i=new d(e),d._$tP[e]=i),i},d.prototype._$3s=function(){return new d},f._$42=0,f.prototype._$zP=function(){null==this._$vo&&(this._$vo=new tr),null==this._$F2&&(this._$F2=[])},f.prototype.getCanvasWidth=function(){return this._$ao},f.prototype.getCanvasHeight=function(){return this._$1S},f.prototype._$F0=function(e){this._$vo=e._$nP(),this._$F2=e._$nP(),this._$ao=e._$6L(),this._$1S=e._$6L()},f.prototype._$6S=function(e){this._$F2.push(e)},f.prototype._$Xr=function(){return this._$F2},f.prototype._$E2=function(){return this._$vo},p.prototype.setup=function(e,i,r){this._$ks=this._$Yb(),this.p2._$xT(),3==arguments.length&&(this._$Fo=e,this._$L2=i,this.p1._$p=r,this.p2._$p=r,this.p2.y=e,this.setup())},p.prototype.getPhysicsPoint1=function(){return this.p1},p.prototype.getPhysicsPoint2=function(){return this.p2},p.prototype._$qr=function(){return this._$Db},p.prototype._$pr=function(e){this._$Db=e},p.prototype._$5r=function(){return this._$M2},p.prototype._$Cs=function(){return this._$9b},p.prototype._$Yb=function(){return -180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},p.prototype.addSrcParam=function(e,i,r,n){var s=new v(e,i,r,n);this._$lL.push(s)},p.prototype.addTargetParam=function(e,i,r,n){var s=new b(e,i,r,n);this._$qP.push(s)},p.prototype.update=function(e,i){if(0==this._$iP)return this._$iP=this._$iT=i,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var r=(i-this._$iT)/1e3;if(0!=r){for(var n=this._$lL.length-1;n>=0;--n)this._$lL[n]._$oP(e,this);this._$oo(e,r),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/r,this._$ks=this._$M2}for(n=this._$qP.length-1;n>=0;--n)this._$qP[n]._$YS(e,this);this._$iT=i},p.prototype._$oo=function(e,i){i<.033&&(i=.033);var r=1/i;this.p1.vx=(this.p1.x-this.p1._$s0)*r,this.p1.vy=(this.p1.y-this.p1._$70)*r,this.p1.ax=(this.p1.vx-this.p1._$7L)*r,this.p1.ay=(this.p1.vy-this.p1._$HL)*r,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var n=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),s=Math.cos(n),o=Math.sin(n),a=9.8*this.p2._$p*Math.cos(n-this._$Db*tA._$bS),h=-this.p1.fx*o*o,l=-this.p1.fy*o*s,u=-this.p2.vx*this._$L2,c=-this.p2.vy*this._$L2;this.p2.fx=a*o+h+u,this.p2.fy=a*s+l+c,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*i,this.p2.vy+=this.p2.ay*i,this.p2.x+=this.p2.vx*i,this.p2.y+=this.p2.vy*i;var d=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/d,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/d,this.p2.vx=(this.p2.x-this.p2._$s0)*r,this.p2.vy=(this.p2.y-this.p2._$70)*r,this.p2._$xT()},_.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy},g.prototype._$oP=function(e,i){},v.prototype=new g,v.prototype._$oP=function(e,i){var r=this.scale*e.getParamFloat(this._$wL),n=i.getPhysicsPoint1();switch(this._$tL){default:case p.Src.SRC_TO_X:n.x=n.x+(r-n.x)*this._$V0;break;case p.Src.SRC_TO_Y:n.y=n.y+(r-n.y)*this._$V0;break;case p.Src.SRC_TO_G_ANGLE:var s=i._$qr();s+=(r-s)*this._$V0,i._$pr(s)}},y.prototype._$YS=function(e,i){},b.prototype=new y,b.prototype._$YS=function(e,i){switch(this._$YP){default:case p.Target.TARGET_FROM_ANGLE:e.setParamFloat(this._$wL,this.scale*i._$5r(),this._$V0);break;case p.Target.TARGET_FROM_ANGLE_V:e.setParamFloat(this._$wL,this.scale*i._$Cs(),this._$V0)}},p.Src=function(){},p.Src.SRC_TO_X="SRC_TO_X",p.Src.SRC_TO_Y="SRC_TO_Y",p.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",p.Target=function(){},p.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",p.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V",x.prototype.init=function(e){this._$fL=e._$fL,this._$gL=e._$gL,this._$B0=e._$B0,this._$z0=e._$z0,this._$qT=e._$qT,this.reflectX=e.reflectX,this.reflectY=e.reflectY},x.prototype._$F0=function(e){this._$fL=e._$_T(),this._$gL=e._$_T(),this._$B0=e._$_T(),this._$z0=e._$_T(),this._$qT=e._$_T(),e.getFormatVersion()>=G.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=e._$po(),this.reflectY=e._$po())},x.prototype._$e=function(){};var T=function(){};function A(){e||(this.x=null,this.y=null,this.width=null,this.height=null)}function E(){}function w(){e||(this.x=null,this.y=null)}function S(){e||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=[])}function P(){e||(this._$Eb=P._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=P.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=[])}function M(){e||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=ta.L2D_COLOR_BLEND_MODE_MULT)}function I(){e||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}function C(){}function R(){e||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=R._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}function O(){}function D(){e||(this._$Ob=null)}function $(){this.m=new Float32Array(16),this.identity()}function L(i){e||ti.prototype.constructor.call(this,i)}function F(){e||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}function B(){e||(a.prototype.constructor.call(this),this.motions=[],this._$7r=null,this._$7r=B._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}function k(){this._$P=new Float32Array(100),this.size=0}function N(){this._$4P=null,this._$I0=null,this._$RP=null}function U(){}function G(){}function X(i){e||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=Array(X._$is),this._$_2=new Float32Array(X._$is),this._$vr=new Float32Array(X._$is),this._$Rr=new Float32Array(X._$is),this._$Or=new Float32Array(X._$is),this._$fs=new Float32Array(X._$is),this._$Js=Array(X._$is),this._$3S=[],this._$aS=[],this._$Bo=null,this._$F2=[],this._$db=[],this._$8b=[],this._$Hr=[],this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(U._$Qb),this._$ZP=new Float32Array(2*U._$1r),this._$Ri=i,this._$b0=X._$HP++,this.clipManager=null,this.dp_webgl=null)}function V(){}function H(){e||(P.prototype.constructor.call(this),this._$sb=new Int32Array(H._$As),this._$U2=[],this.transform=null,this.gl=null,null==H._$NT&&(H._$NT=H._$9r(256),H._$vS=H._$9r(256),H._$no=H._$vb(256)))}function j(){e||(I.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}function Y(e){to.prototype.constructor.call(this,e),this._$8r=I._$ur,this._$Yr=null,this._$Wr=null}function z(){e||(S.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}function W(){e||(this._$NL=null,this._$3S=null,this._$aS=null,W._$42++)}function q(){e||(i.prototype.constructor.call(this),this._$zo=new H)}function Z(){e||(a.prototype.constructor.call(this),this.motions=[],this._$o2=null,this._$7r=Z._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}function Q(e,i){return String.fromCharCode(e.getUint8(i))}function k(){this._$P=new Float32Array(100),this.size=0}function N(){this._$4P=null,this._$I0=null,this._$RP=null}function J(){e||(I.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}function K(e){to.prototype.constructor.call(this,e),this._$8r=I._$ur,this._$Cr=null,this._$hr=null}function tt(){e||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,tt._$42++)}function te(e){this._$VS=null,this._$e0=null,this._$e0=e}function ti(i){e||(this.id=i)}function tr(){e||(this._$4S=null)}function tn(e,i){this.canvas=e,this.context=i,this.viewport=[0,0,e.width,e.height],this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}function ts(){e||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}function to(i){e||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=i,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}function ta(){}function th(){}function tl(i){e||(this._$ib=i)}function tu(){e||(z.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=tu._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=tu._$42++)}function tc(e){tE.prototype.constructor.call(this,e),this._$8r=z._$ur,this._$Cr=null,this._$hr=null}function td(){e||(this.x=null,this.y=null)}function tf(r){e||(i.prototype.constructor.call(this),this.drawParamWebGL=new tv(r),this.drawParamWebGL.setGL(ta.getGL(r)))}function tp(){e||(this.motions=null,this._$eb=!1,this.motions=[])}function t_(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=t_._$Gs++}function tm(){this.m=[1,0,0,0,1,0,0,0,1]}function tg(i){e||ti.prototype.constructor.call(this,i)}function tv(i){e||(P.prototype.constructor.call(this),this.textures=[],this.transform=null,this.gl=null,this.glno=i,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}function ty(e,i,r){return null==i&&(i=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,r,e.DYNAMIC_DRAW),i}function tb(e,i,r){return null==i&&(i=e.createBuffer()),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.DYNAMIC_DRAW),i}function tx(i){e||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=[],this._$T=i,this._$F=0)}T._$ni=function(e,i,r,n,s,o,a,h,l){var u=a*o-h*s;if(0==u)return null;var c,d=((e-r)*o-(i-n)*s)/u;return isNaN(c=0!=s?(e-r-d*a)/s:(i-n-d*h)/o)&&(isNaN(c=(e-r-d*a)/s)&&(c=(i-n-d*h)/o),isNaN(c)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+s),console.log("v1x != 0 ? "+(0!=s)))),null==l?[c,d]:(l[0]=c,l[1]=d,l)},A.prototype._$8P=function(){return this.x+.5*this.width},A.prototype._$6P=function(){return this.y+.5*this.height},A.prototype._$EL=function(){return this.x+this.width},A.prototype._$5T=function(){return this.y+this.height},A.prototype._$jL=function(e,i,r,n){this.x=e,this.y=i,this.width=r,this.height=n},A.prototype._$jL=function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},A.prototype.contains=function(e,i){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},A.prototype.expand=function(e,i){this.x-=e,this.y-=i,this.width+=2*e,this.height+=2*i},E._$Z2=function(e,i,r,n){var s=i._$Q2(e,r),o=e._$vs(),a=e._$Tr();if(i._$zr(o,a,s),s<=0)return n[o[0]];if(1==s)return(h=n[o[0]])+((l=n[o[1]])-h)*(x=a[0])|0;if(2==s){var h=n[o[0]],l=n[o[1]],u=n[o[2]],c=n[o[3]];return(E=h+(l-h)*(x=a[0])|0)+((u+(c-u)*x|0)-E)*(T=a[1])|0}if(3==s){var d=n[o[0]],f=n[o[1]],p=n[o[2]],_=n[o[3]],g=n[o[4]],v=n[o[5]],y=n[o[6]],b=n[o[7]];return(E=(h=d+(f-d)*(x=a[0])|0)+((l=p+(_-p)*x|0)-h)*(T=a[1])|0)+(((u=g+(v-g)*x|0)+((c=y+(b-y)*x|0)-u)*T|0)-E)*(A=a[2])|0}if(4==s){var x,T,A,E,w=n[o[0]],S=n[o[1]],P=n[o[2]],M=n[o[3]],I=n[o[4]],C=n[o[5]],R=n[o[6]],O=n[o[7]],D=n[o[8]],$=n[o[9]],L=n[o[10]],F=n[o[11]],B=n[o[12]],k=n[o[13]],N=n[o[14]],U=n[o[15]];return(E=(h=(d=w+(S-w)*(x=a[0])|0)+((f=P+(M-P)*x|0)-d)*(T=a[1])|0)+((l=(p=I+(C-I)*x|0)+((_=R+(O-R)*x|0)-p)*T|0)-h)*(A=a[2])|0)+(((u=(g=D+($-D)*x|0)+((v=L+(F-L)*x|0)-g)*T|0)+((c=(y=B+(k-B)*x|0)+((b=N+(U-N)*x|0)-y)*T|0)-u)*A|0)-E)*a[3]|0}for(var G=1<<s,X=new Float32Array(G),V=0;V<G;V++){for(var H=V,j=1,Y=0;Y<s;Y++)j*=H%2==0?1-a[Y]:a[Y],H/=2;X[V]=j}for(var z=new Float32Array(G),W=0;W<G;W++)z[W]=n[o[W]];var q=0;for(W=0;W<G;W++)q+=X[W]*z[W];return q+.5|0},E._$br=function(e,i,r,n){var s=i._$Q2(e,r),o=e._$vs(),a=e._$Tr();if(i._$zr(o,a,s),s<=0)return n[o[0]];if(1==s)return(h=n[o[0]])+((l=n[o[1]])-h)*(d=a[0]);if(2==s){var h=n[o[0]],l=n[o[1]],u=n[o[2]],c=n[o[3]],d=a[0];return(1-(T=a[1]))*(h+(l-h)*d)+T*(u+(c-u)*d)}if(3==s){var f=n[o[0]],p=n[o[1]],_=n[o[2]],g=n[o[3]],v=n[o[4]],y=n[o[5]],b=n[o[6]],x=n[o[7]],T=(d=a[0],a[1]);return(1-(N=a[2]))*((1-T)*(f+(p-f)*d)+T*(_+(g-_)*d))+N*((1-T)*(v+(y-v)*d)+T*(b+(x-b)*d))}if(4==s){var A=n[o[0]],E=n[o[1]],w=n[o[2]],S=n[o[3]],P=n[o[4]],M=n[o[5]],I=n[o[6]],C=n[o[7]],R=n[o[8]],O=n[o[9]],D=n[o[10]],$=n[o[11]],L=n[o[12]],F=n[o[13]],B=n[o[14]],k=n[o[15]],N=(d=a[0],T=a[1],a[2]),U=a[3];return(1-U)*((1-N)*((1-T)*(A+(E-A)*d)+T*(w+(S-w)*d))+N*((1-T)*(P+(M-P)*d)+T*(I+(C-I)*d)))+U*((1-N)*((1-T)*(R+(O-R)*d)+T*(D+($-D)*d))+N*((1-T)*(L+(F-L)*d)+T*(B+(k-B)*d)))}for(var G=1<<s,X=new Float32Array(G),V=0;V<G;V++){for(var H=V,j=1,Y=0;Y<s;Y++)j*=H%2==0?1-a[Y]:a[Y],H/=2;X[V]=j}for(var z=new Float32Array(G),W=0;W<G;W++)z[W]=n[o[W]];var q=0;for(W=0;W<G;W++)q+=X[W]*z[W];return q},E._$Vr=function(e,i,r,n,s,o,a,h){var l=i._$Q2(e,r),u=e._$vs(),c=e._$Tr();i._$zr(u,c,l);var d=2*n,f=a;if(l<=0){var p=s[u[0]];if(2==h&&0==a)C._$jT(p,0,o,0,d);else for(var _=0;_<d;)o[f]=p[_++],o[f+1]=p[_++],f+=h}else if(1==l){p=s[u[0]];var g=s[u[1]],v=1-(x=c[0]);for(_=0;_<d;)o[f]=p[_]*v+g[_]*x,++_,o[f+1]=p[_]*v+g[_]*x,++_,f+=h}else if(2==l){p=s[u[0]],g=s[u[1]];var y=s[u[2]],b=s[u[3]],x=c[0],T=(H=1-(L=c[1]))*(v=1-x),A=H*x,E=L*v,w=L*x;for(_=0;_<d;)o[f]=T*p[_]+A*g[_]+E*y[_]+w*b[_],++_,o[f+1]=T*p[_]+A*g[_]+E*y[_]+w*b[_],++_,f+=h}else if(3==l){var S=s[u[0]],P=s[u[1]],M=s[u[2]],I=s[u[3]],R=s[u[4]],O=s[u[5]],D=s[u[6]],$=s[u[7]],L=(x=c[0],c[1]),F=(j=1-(th=c[2]))*(H=1-L)*(v=1-x),B=j*H*x,k=j*L*v,N=j*L*x,U=th*H*v,G=th*H*x,X=th*L*v,V=th*L*x;for(_=0;_<d;)o[f]=F*S[_]+B*P[_]+k*M[_]+N*I[_]+U*R[_]+G*O[_]+X*D[_]+V*$[_],++_,o[f+1]=F*S[_]+B*P[_]+k*M[_]+N*I[_]+U*R[_]+G*O[_]+X*D[_]+V*$[_],++_,f+=h}else if(4==l){var H,j,Y=s[u[0]],z=s[u[1]],W=s[u[2]],q=s[u[3]],Z=s[u[4]],Q=s[u[5]],J=s[u[6]],K=s[u[7]],tt=s[u[8]],te=s[u[9]],ti=s[u[10]],tr=s[u[11]],tn=s[u[12]],ts=s[u[13]],to=s[u[14]],ta=s[u[15]],th=(x=c[0],L=c[1],c[2]),tl=c[3],tu=1-tl,tc=tu*(j=1-th)*(H=1-L)*(v=1-x),td=tu*j*H*x,tf=tu*j*L*v,tp=tu*j*L*x,t_=tu*th*H*v,tm=tu*th*H*x,tg=tu*th*L*v,tv=tu*th*L*x,ty=tl*j*H*v,tb=tl*j*H*x,tx=tl*j*L*v,tT=tl*j*L*x,tA=tl*th*H*v,tE=tl*th*H*x,tw=tl*th*L*v,tS=tl*th*L*x;for(_=0;_<d;)o[f]=tc*Y[_]+td*z[_]+tf*W[_]+tp*q[_]+t_*Z[_]+tm*Q[_]+tg*J[_]+tv*K[_]+ty*tt[_]+tb*te[_]+tx*ti[_]+tT*tr[_]+tA*tn[_]+tE*ts[_]+tw*to[_]+tS*ta[_],++_,o[f+1]=tc*Y[_]+td*z[_]+tf*W[_]+tp*q[_]+t_*Z[_]+tm*Q[_]+tg*J[_]+tv*K[_]+ty*tt[_]+tb*te[_]+tx*ti[_]+tT*tr[_]+tA*tn[_]+tE*ts[_]+tw*to[_]+tS*ta[_],++_,f+=h}else{for(var tP=1<<l,tM=new Float32Array(tP),tI=0;tI<tP;tI++){for(var tC=tI,tR=1,tO=0;tO<l;tO++)tR*=tC%2==0?1-c[tO]:c[tO],tC/=2;tM[tI]=tR}for(var tD=new Float32Array(tP),t$=0;t$<tP;t$++)tD[t$]=s[u[t$]];for(_=0;_<d;){var tL=0,tF=0,tB=_+1;for(t$=0;t$<tP;t$++)tL+=tM[t$]*tD[t$][_],tF+=tM[t$]*tD[t$][tB];_+=2,o[f]=tL,o[f+1]=tF,f+=h}}},w.prototype._$HT=function(e,i){this.x=e,this.y=i},w.prototype._$HT=function(e){this.x=e.x,this.y=e.y},S._$ur=-2,S._$ES=500,S._$wb=2,S._$8S=3,S._$52=S._$ES,S._$R2=S._$ES,S._$or=function(){return S._$52},S._$Pr=function(){return S._$R2},S.prototype.convertClipIDForV2_11=function(e){var i=[];return null==e||0==e.length?null:/,/.test(e)?i=e.id.split(","):(i.push(e.id),i)},S.prototype._$F0=function(e){this._$gP=e._$nP(),this._$dr=e._$nP(),this._$GS=e._$nP(),this._$qb=e._$6L(),this._$Lb=e._$cS(),this._$mS=e._$Tb(),e.getFormatVersion()>=G._$T7?(this.clipID=e._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},S.prototype.getClipIDList=function(){return this.clipIDList},S.prototype.init=function(e){},S.prototype._$Nr=function(e,i){if(i._$IS[0]=!1,i._$Us=E._$Z2(e,this._$GS,i._$IS,this._$Lb),ta._$Zs);else if(i._$IS[0])return;i._$7s=E._$br(e,this._$GS,i._$IS,this._$mS)},S.prototype._$2b=function(e,i){},S.prototype.getDrawDataID=function(){return this._$gP},S.prototype._$j2=function(e){this._$gP=e},S.prototype.getOpacity=function(e,i){return i._$7s},S.prototype._$zS=function(e,i){return i._$Us},S.prototype._$MS=function(e){for(var i=e.length-1;i>=0;--i){var r=e[i];r<S._$52?S._$52=r:r>S._$R2&&(S._$R2=r)}},S.prototype.getTargetBaseDataID=function(){return this._$dr},S.prototype._$gs=function(e){this._$dr=e},S.prototype._$32=function(){return null!=this._$dr&&this._$dr!=tg._$2o()},S.prototype.preDraw=function(e,i,r){},S.prototype.draw=function(e,i,r){},S.prototype.getType=function(){},S.prototype._$B2=function(e,i,r){},P._$ps=32,P.CLIPPING_PROCESS_NONE=0,P.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,P.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,P.CLIPPING_PROCESS_DRAW=3,P.CLIPPING_PROCESS_CLEAR_ALPHA=4,P.prototype.setChannelFlagAsColor=function(e,i){this.CHANNEL_COLORS[e]=i},P.prototype.getChannelFlagAsColor=function(e){return this.CHANNEL_COLORS[e]},P.prototype._$ZT=function(){},P.prototype._$Uo=function(e,i,r,n,s,o,a){},P.prototype._$Rs=function(){return -1},P.prototype._$Ds=function(e){},P.prototype.setBaseColor=function(e,i,r,n){e<0?e=0:e>1&&(e=1),i<0?i=0:i>1&&(i=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),this._$lT=e,this._$C0=i,this._$tT=r,this._$WL=n},P.prototype._$WP=function(e){this.culling=e},P.prototype.setMatrix=function(e){for(var i=0;i<16;i++)this.matrix4x4[i]=e[i]},P.prototype._$IT=function(){return this.matrix4x4},P.prototype.setPremultipliedAlpha=function(e){this.premultipliedAlpha=e},P.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},P.prototype.setAnisotropy=function(e){this.anisotropy=e},P.prototype.getAnisotropy=function(){return this.anisotropy},P.prototype.getClippingProcess=function(){return this.clippingProcess},P.prototype.setClippingProcess=function(e){this.clippingProcess=e},P.prototype.setClipBufPre_clipContextForMask=function(e){this.clipBufPre_clipContextMask=e},P.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},P.prototype.setClipBufPre_clipContextForDraw=function(e){this.clipBufPre_clipContextDraw=e},P.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw},I._$ur=-2,I._$c2=1,I._$_b=2,I.prototype._$F0=function(e){this._$kP=e._$nP(),this._$dr=e._$nP()},I.prototype.readV2_opacity=function(e){e.getFormatVersion()>=G.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=e._$Tb())},I.prototype.init=function(e){},I.prototype._$Nr=function(e,i){},I.prototype.interpolateOpacity=function(e,i,r,n){null==this._$mS?r.setInterpolatedOpacity(1):r.setInterpolatedOpacity(E._$br(e,i,n,this._$mS))},I.prototype._$2b=function(e,i){},I.prototype._$nb=function(e,i,r,n,s,o,a){},I.prototype.getType=function(){},I.prototype._$gs=function(e){this._$dr=e},I.prototype._$a2=function(e){this._$kP=e},I.prototype.getTargetBaseDataID=function(){return this._$dr},I.prototype.getBaseDataID=function(){return this._$kP},I.prototype._$32=function(){return null!=this._$dr&&this._$dr!=tg._$2o()},C._$W2=0,C._$CS=C._$W2,C._$Mo=function(){return!0},C._$XP=function(e){try{for(var i=getTimeMSec();getTimeMSec()-i<e;);}catch(e){e._$Rb()}},C.getUserTimeMSec=function(){return C._$CS==C._$W2?C.getSystemTimeMSec():C._$CS},C.setUserTimeMSec=function(e){C._$CS=e},C.updateUserTimeMSec=function(){return C._$CS=C.getSystemTimeMSec()},C.getTimeMSec=function(){return(new Date).getTime()},C.getSystemTimeMSec=function(){return(new Date).getTime()},C._$Q=function(e){},C._$jT=function(e,i,r,n,s){for(var o=0;o<s;o++)r[n+o]=e[i+o]},R._$ds=-2,R.prototype._$F0=function(e){this._$wL=e._$nP(),this._$VP=e._$6L(),this._$GP=e._$nP()},R.prototype.getParamIndex=function(e){return this._$2r!=e&&(this._$8o=R._$ds),this._$8o},R.prototype._$Pb=function(e,i){this._$8o=e,this._$2r=i},R.prototype.getParamID=function(){return this._$wL},R.prototype._$yP=function(e){this._$wL=e},R.prototype._$N2=function(){return this._$VP},R.prototype._$d2=function(){return this._$GP},R.prototype._$t2=function(e,i){this._$VP=e,this._$GP=i},R.prototype._$Lr=function(){return this._$O2},R.prototype._$wr=function(e){this._$O2=e},R.prototype._$SL=function(){return this._$ri},R.prototype._$AL=function(e){this._$ri=e},O.startsWith=function(e,i,r){var n=i+r.length;if(n>=e.length)return!1;for(var s=i;s<n;s++)if(O.getChar(e,s)!=r.charAt(s-i))return!1;return!0},O.getChar=function(e,i){return String.fromCharCode(e.getUint8(i))},O.createString=function(e,i,r){for(var n=new ArrayBuffer(2*r),s=new Uint16Array(n),o=0;o<r;o++)s[o]=e.getUint8(i+o);return String.fromCharCode.apply(null,s)},O._$LS=function(e,i,r,n){e instanceof ArrayBuffer&&(e=new DataView(e));var s=r,o=!1,a=!1,h=0,l=O.getChar(e,s);"-"==l&&(o=!0,s++);for(var u=!1;s<i;s++){switch(l=O.getChar(e,s)){case"0":h*=10;break;case"1":h=10*h+1;break;case"2":h=10*h+2;break;case"3":h=10*h+3;break;case"4":h=10*h+4;break;case"5":h=10*h+5;break;case"6":h=10*h+6;break;case"7":h=10*h+7;break;case"8":h=10*h+8;break;case"9":h=10*h+9;break;case".":a=!0,s++,u=!0;break;default:u=!0}if(u)break}if(a)for(var c=.1,d=!1;s<i;s++){switch(l=O.getChar(e,s)){case"0":break;case"1":h+=1*c;break;case"2":h+=2*c;break;case"3":h+=3*c;break;case"4":h+=4*c;break;case"5":h+=5*c;break;case"6":h+=6*c;break;case"7":h+=7*c;break;case"8":h+=8*c;break;case"9":h+=9*c;break;default:d=!0}if(c*=.1,d)break}return o&&(h=-h),n[0]=s,h},D.prototype._$zP=function(){this._$Ob=[]},D.prototype._$F0=function(e){this._$Ob=e._$nP()},D.prototype._$Ur=function(e){if(e._$WS())return!0;for(var i=e._$v2(),r=this._$Ob.length-1;r>=0;--r){var n=this._$Ob[r].getParamIndex(i);if(n==R._$ds&&(n=e.getParamIndex(this._$Ob[r].getParamID())),e._$Xb(n))return!0}return!1},D.prototype._$Q2=function(e,i){for(var r,n,s=this._$Ob.length,o=e._$v2(),a=0,h=0;h<s;h++){var l=this._$Ob[h];if((r=l.getParamIndex(o))==R._$ds&&(r=e.getParamIndex(l.getParamID()),l._$Pb(r,o)),r<0)throw new Exception("err 23242 : "+l.getParamID());var u=r<0?0:e.getParamFloat(r);n=l._$N2();var c,d,f=l._$d2(),p=-1,_=0;if(n<1);else if(1==n)(c=f[0])-U._$J<u&&u<c+U._$J?(p=0,_=0):(p=0,i[0]=!0);else if(u<(c=f[0])-U._$J)p=0,i[0]=!0;else if(u<c+U._$J)p=0;else{for(var g=!1,v=1;v<n;++v){if(u<(d=f[v])+U._$J){d-U._$J<u?p=v:(p=v-1,_=(u-c)/(d-c),a++),g=!0;break}c=d}g||(p=n-1,_=0,i[0]=!0)}l._$wr(p),l._$AL(_)}return a},D.prototype._$zr=function(e,i,r){var n=1<<r;n+1>U._$Qb&&console.log("err 23245\n");for(var s=this._$Ob.length,o=1,a=1,h=0,l=0;l<n;++l)e[l]=0;for(var u=0;u<s;++u){var c=this._$Ob[u];if(0==c._$SL()){if((d=c._$Lr()*o)<0&&ta._$3T)throw new Exception("err 23246");for(l=0;l<n;++l)e[l]+=d}else{var d=o*c._$Lr(),f=o*(c._$Lr()+1);for(l=0;l<n;++l)e[l]+=(l/a|0)%2==0?d:f;i[h++]=c._$SL(),a*=2}o*=c._$N2()}e[n]=65535,i[h]=-1},D.prototype._$h2=function(e,i,r){for(var n=new Float32Array(i),s=0;s<i;++s)n[s]=r[s];var o=new R;o._$yP(e),o._$t2(i,n),this._$Ob.push(o)},D.prototype._$J2=function(e){for(var i=e,r=this._$Ob.length,n=0;n<r;++n){var s=this._$Ob[n],o=s._$N2(),a=i%s._$N2(),h=s._$d2()[a];console.log("%s[%d]=%7.2f / ",s.getParamID(),a,h),i/=o}console.log("\n")},D.prototype.getParamCount=function(){return this._$Ob.length},D.prototype._$zs=function(){return this._$Ob},$.prototype.identity=function(){for(var e=0;e<16;e++)this.m[e]=e%5==0?1:0},$.prototype.getArray=function(){return this.m},$.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},$.prototype.setMatrix=function(e){if(null!=e&&16==e.length)for(var i=0;i<16;i++)this.m[i]=e[i]},$.prototype.mult=function(e,i,r){return null==i?null:(this==i?this.mult_safe(this.m,e.m,i.m,r):this.mult_fast(this.m,e.m,i.m,r),i)},$.prototype.mult_safe=function(e,i,r,n){if(e==r){var s=Array(16);this.mult_fast(e,i,s,n);for(var o=15;o>=0;--o)r[o]=s[o]}else this.mult_fast(e,i,r,n)},$.prototype.mult_fast=function(e,i,r,n){n?(r[0]=e[0]*i[0]+e[4]*i[1]+e[8]*i[2],r[4]=e[0]*i[4]+e[4]*i[5]+e[8]*i[6],r[8]=e[0]*i[8]+e[4]*i[9]+e[8]*i[10],r[12]=e[0]*i[12]+e[4]*i[13]+e[8]*i[14]+e[12],r[1]=e[1]*i[0]+e[5]*i[1]+e[9]*i[2],r[5]=e[1]*i[4]+e[5]*i[5]+e[9]*i[6],r[9]=e[1]*i[8]+e[5]*i[9]+e[9]*i[10],r[13]=e[1]*i[12]+e[5]*i[13]+e[9]*i[14]+e[13],r[2]=e[2]*i[0]+e[6]*i[1]+e[10]*i[2],r[6]=e[2]*i[4]+e[6]*i[5]+e[10]*i[6],r[10]=e[2]*i[8]+e[6]*i[9]+e[10]*i[10],r[14]=e[2]*i[12]+e[6]*i[13]+e[10]*i[14]+e[14],r[3]=r[7]=r[11]=0,r[15]=1):(r[0]=e[0]*i[0]+e[4]*i[1]+e[8]*i[2]+e[12]*i[3],r[4]=e[0]*i[4]+e[4]*i[5]+e[8]*i[6]+e[12]*i[7],r[8]=e[0]*i[8]+e[4]*i[9]+e[8]*i[10]+e[12]*i[11],r[12]=e[0]*i[12]+e[4]*i[13]+e[8]*i[14]+e[12]*i[15],r[1]=e[1]*i[0]+e[5]*i[1]+e[9]*i[2]+e[13]*i[3],r[5]=e[1]*i[4]+e[5]*i[5]+e[9]*i[6]+e[13]*i[7],r[9]=e[1]*i[8]+e[5]*i[9]+e[9]*i[10]+e[13]*i[11],r[13]=e[1]*i[12]+e[5]*i[13]+e[9]*i[14]+e[13]*i[15],r[2]=e[2]*i[0]+e[6]*i[1]+e[10]*i[2]+e[14]*i[3],r[6]=e[2]*i[4]+e[6]*i[5]+e[10]*i[6]+e[14]*i[7],r[10]=e[2]*i[8]+e[6]*i[9]+e[10]*i[10]+e[14]*i[11],r[14]=e[2]*i[12]+e[6]*i[13]+e[10]*i[14]+e[14]*i[15],r[3]=e[3]*i[0]+e[7]*i[1]+e[11]*i[2]+e[15]*i[3],r[7]=e[3]*i[4]+e[7]*i[5]+e[11]*i[6]+e[15]*i[7],r[11]=e[3]*i[8]+e[7]*i[9]+e[11]*i[10]+e[15]*i[11],r[15]=e[3]*i[12]+e[7]*i[13]+e[11]*i[14]+e[15]*i[15])},$.prototype.translate=function(e,i,r){this.m[12]=this.m[0]*e+this.m[4]*i+this.m[8]*r+this.m[12],this.m[13]=this.m[1]*e+this.m[5]*i+this.m[9]*r+this.m[13],this.m[14]=this.m[2]*e+this.m[6]*i+this.m[10]*r+this.m[14],this.m[15]=this.m[3]*e+this.m[7]*i+this.m[11]*r+this.m[15]},$.prototype.scale=function(e,i,r){this.m[0]*=e,this.m[4]*=i,this.m[8]*=r,this.m[1]*=e,this.m[5]*=i,this.m[9]*=r,this.m[2]*=e,this.m[6]*=i,this.m[10]*=r,this.m[3]*=e,this.m[7]*=i,this.m[11]*=r},$.prototype.rotateX=function(e){var i=tA.fcos(e),r=tA._$9(e),n=this.m[4];this.m[4]=n*i+this.m[8]*r,this.m[8]=-(n*r)+this.m[8]*i,n=this.m[5],this.m[5]=n*i+this.m[9]*r,this.m[9]=-(n*r)+this.m[9]*i,n=this.m[6],this.m[6]=n*i+this.m[10]*r,this.m[10]=-(n*r)+this.m[10]*i,n=this.m[7],this.m[7]=n*i+this.m[11]*r,this.m[11]=-(n*r)+this.m[11]*i},$.prototype.rotateY=function(e){var i=tA.fcos(e),r=tA._$9(e),n=this.m[0];this.m[0]=n*i+-(this.m[8]*r),this.m[8]=n*r+this.m[8]*i,n=this.m[1],this.m[1]=n*i+-(this.m[9]*r),this.m[9]=n*r+this.m[9]*i,n=m[2],this.m[2]=n*i+-(this.m[10]*r),this.m[10]=n*r+this.m[10]*i,n=m[3],this.m[3]=n*i+-(this.m[11]*r),this.m[11]=n*r+this.m[11]*i},$.prototype.rotateZ=function(e){var i=tA.fcos(e),r=tA._$9(e),n=this.m[0];this.m[0]=n*i+this.m[4]*r,this.m[4]=-(n*r)+this.m[4]*i,n=this.m[1],this.m[1]=n*i+this.m[5]*r,this.m[5]=-(n*r)+this.m[5]*i,n=this.m[2],this.m[2]=n*i+this.m[6]*r,this.m[6]=-(n*r)+this.m[6]*i,n=this.m[3],this.m[3]=n*i+this.m[7]*r,this.m[7]=-(n*r)+this.m[7]*i},L.prototype=new ti,L._$tP={},L._$27=function(){L._$tP.clear()},L.getID=function(e){var i=L._$tP[e];return null==i&&(i=new L(e),L._$tP[e]=i),i},L.prototype._$3s=function(){return new L},F._$kS=-1,F._$pS=0,F._$hb=1,F.STATE_IDENTITY=0,F._$gb=1,F._$fo=2,F._$go=4,F.prototype.transform=function(e,i,r){var n,s,o,a,h,l,u=0,c=0;switch(this._$hi){default:return;case F._$go|F._$fo|F._$gb:for(n=this._$7,s=this._$H,o=this._$k,a=this._$f,h=this._$g,l=this._$w;--r>=0;){var d=e[u++],f=e[u++];i[c++]=n*d+s*f+o,i[c++]=a*d+h*f+l}return;case F._$go|F._$fo:for(n=this._$7,s=this._$H,a=this._$f,h=this._$g;--r>=0;)d=e[u++],f=e[u++],i[c++]=n*d+s*f,i[c++]=a*d+h*f;return;case F._$go|F._$gb:for(s=this._$H,o=this._$k,a=this._$f,l=this._$w;--r>=0;)d=e[u++],i[c++]=s*e[u++]+o,i[c++]=a*d+l;return;case F._$go:for(s=this._$H,a=this._$f;--r>=0;)d=e[u++],i[c++]=s*e[u++],i[c++]=a*d;return;case F._$fo|F._$gb:for(n=this._$7,o=this._$k,h=this._$g,l=this._$w;--r>=0;)i[c++]=n*e[u++]+o,i[c++]=h*e[u++]+l;return;case F._$fo:for(n=this._$7,h=this._$g;--r>=0;)i[c++]=n*e[u++],i[c++]=h*e[u++];return;case F._$gb:for(o=this._$k,l=this._$w;--r>=0;)i[c++]=e[u++]+o,i[c++]=e[u++]+l;return;case F.STATE_IDENTITY:return void(e==i&&u==c||C._$jT(e,u,i,c,2*r))}},F.prototype.update=function(){0==this._$H&&0==this._$f?1==this._$7&&1==this._$g?0==this._$k&&0==this._$w?(this._$hi=F.STATE_IDENTITY,this._$Z=F._$pS):(this._$hi=F._$gb,this._$Z=F._$hb):(0==this._$k&&0==this._$w?this._$hi=F._$fo:this._$hi=F._$fo|F._$gb,this._$Z=F._$kS):(0==this._$7&&0==this._$g?0==this._$k&&0==this._$w?this._$hi=F._$go:this._$hi=F._$go|F._$gb:0==this._$k&&0==this._$w?this._$hi=F._$go|F._$fo:this._$hi=F._$go|F._$fo|F._$gb,this._$Z=F._$kS)},F.prototype._$RT=function(e){this._$IT(e);var i=e[0],r=e[2],n=e[1],s=e[3],o=Math.sqrt(i*i+n*n),a=i*s-r*n;0==o?ta._$so&&console.log("affine._$RT() / rt==0"):(e[0]=o,e[1]=a/o,e[2]=(n*s+i*r)/a,e[3]=Math.atan2(n,i))},F.prototype._$ho=function(e,i,r,n){var s=new Float32Array(6),o=new Float32Array(6);e._$RT(s),i._$RT(o);var a=new Float32Array(6);a[0]=s[0]+(o[0]-s[0])*r,a[1]=s[1]+(o[1]-s[1])*r,a[2]=s[2]+(o[2]-s[2])*r,a[3]=s[3]+(o[3]-s[3])*r,a[4]=s[4]+(o[4]-s[4])*r,a[5]=s[5]+(o[5]-s[5])*r,n._$CT(a)},F.prototype._$CT=function(e){var i=Math.cos(e[3]),r=Math.sin(e[3]);this._$7=e[0]*i,this._$f=e[0]*r,this._$H=e[1]*(e[2]*i-r),this._$g=e[1]*(e[2]*r+i),this._$k=e[4],this._$w=e[5],this.update()},F.prototype._$IT=function(e){e[0]=this._$7,e[1]=this._$f,e[2]=this._$H,e[3]=this._$g,e[4]=this._$k,e[5]=this._$w},B.prototype=new a,B._$cs="VISIBLE:",B._$ar="LAYOUT:",B._$Co=0,B._$D2=[],B._$1T=1,B.loadMotion=function(e){var i=new B,r=[0],n=e.length;i._$yT=0;for(var s=0;s<n;++s){var o=255&e[s];if("\n"!=o&&"\r"!=o){if("#"!=o){if("$"!=o){if("a"<=o&&o<="z"||"A"<=o&&o<="Z"||"_"==o){for(u=s,c=-1;s<n&&"\r"!=(o=255&e[s])&&"\n"!=o;++s)if("="==o){c=s;break}if(c>=0){var a=new N;O.startsWith(e,u,B._$cs)?(a._$RP=N._$hs,a._$4P=new String(e,u,c-u)):O.startsWith(e,u,B._$ar)?(a._$4P=new String(e,u+7,c-u-7),O.startsWith(e,u+7,"ANCHOR_X")?a._$RP=N._$xs:O.startsWith(e,u+7,"ANCHOR_Y")?a._$RP=N._$us:O.startsWith(e,u+7,"SCALE_X")?a._$RP=N._$qs:O.startsWith(e,u+7,"SCALE_Y")?a._$RP=N._$Ys:O.startsWith(e,u+7,"X")?a._$RP=N._$ws:O.startsWith(e,u+7,"Y")&&(a._$RP=N._$Ns)):(a._$RP=N._$Fr,a._$4P=new String(e,u,c-u)),i.motions.push(a);var h=0;for(B._$D2.clear(),s=c+1;s<n&&"\r"!=(o=255&e[s])&&"\n"!=o;++s)if(","!=o&&" "!=o&&"	"!=o&&(f=O._$LS(e,n,s,r),r[0]>0)){B._$D2.push(f),h++;var l=r[0];if(l<s){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}s=l}a._$I0=B._$D2._$BL(),h>i._$yT&&(i._$yT=h)}}}else{for(var u=s,c=-1;s<n&&"\r"!=(o=255&e[s])&&"\n"!=o;++s)if("="==o){c=s;break}var d=!1;if(c>=0){for(c==u+4&&"f"==e[u+1]&&"p"==e[u+2]&&"s"==e[u+3]&&(d=!0),s=c+1;s<n&&"\r"!=(o=255&e[s])&&"\n"!=o;++s)if(","!=o&&" "!=o&&"	"!=o){var f=O._$LS(e,n,s,r);r[0]>0&&d&&5<f&&f<121&&(i._$D0=f),s=r[0]}}for(;s<n&&"\n"!=e[s]&&"\r"!=e[s];++s);}}else for(;s<n&&"\n"!=e[s]&&"\r"!=e[s];++s);}}return i._$AS=1e3*i._$yT/i._$D0|0,i},B.prototype.getDurationMSec=function(){return this._$AS},B.prototype.dump=function(){for(var e=0;e<this.motions.length;e++){var i=this.motions[e];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var r=0;r<i._$I0.length&&r<10;r++)console.log("%5.2f ,",i._$I0[r]);console.log("\n")}},B.prototype.updateParamExe=function(e,i,r,n){for(var s=(i-n._$z2)*this._$D0/1e3,o=0|s,a=s-o,h=0;h<this.motions.length;h++){var l=this.motions[h],u=l._$I0.length,c=l._$4P;if(l._$RP==N._$hs){var d=l._$I0[o>=u?u-1:o];e.setParamFloat(c,d)}else if(N._$ws<=l._$RP&&l._$RP<=N._$Ys);else{var f=e.getParamFloat(c),p=l._$I0[o>=u?u-1:o],_=f+(p+(l._$I0[o+1>=u?u-1:o+1]-p)*a-f)*r;e.setParamFloat(c,_)}}o>=this._$yT&&(this._$E?(n._$z2=i,this.loopFadeIn&&(n._$bs=i)):n._$9L=!0)},B.prototype._$r0=function(){return this._$E},B.prototype._$aL=function(e){this._$E=e},B.prototype.isLoopFadeIn=function(){return this.loopFadeIn},B.prototype.setLoopFadeIn=function(e){this.loopFadeIn=e},k.prototype.clear=function(){this.size=0},k.prototype.add=function(e){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);C._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=e},k.prototype._$BL=function(){var e=new Float32Array(this.size);return C._$jT(this._$P,0,e,0,this.size),e},N._$Fr=0,N._$hs=1,N._$ws=100,N._$Ns=101,N._$xs=102,N._$us=103,N._$qs=104,N._$Ys=105,U._$Ms=1,U._$Qs=2,U._$i2=0,U._$No=2,U._$do=U._$Ms,U._$Ls=!0,U._$1r=5,U._$Qb=65,U._$J=1e-4,U._$FT=.001,U._$Ss=3,G._$o7=6,G._$S7=7,G._$s7=8,G._$77=9,G.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,G.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,G._$T7=G.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,G._$Is=-2004318072,G._$h0=0,G._$4L=23,G._$7P=33,G._$uT=function(e){console.log("_$bo :: _$6 _$mo _$E0 : %d\n",e)},G._$9o=function(e){if(e<40||e<50||e<60)return G._$uT(e),null;if(e<100)switch(e){case 65:return new J;case 66:return new D;case 67:return new R;case 68:return new j;case 69:return new x;case 70:return new tu}else if(e<150)switch(e){case 131:return new ts;case 133:return new tt;case 136:return new f;case 137:return new tr;case 142:return new W}return G._$uT(e),null},X._$HP=0,X._$_0=!0,X._$V2=-1,X._$W0=-1,X._$jr=!1,X._$ZS=!0,X._$tr=-1e6,X._$lr=1e6,X._$is=32,X._$e=!1,X.prototype.getDrawDataIndex=function(e){for(var i=this._$aS.length-1;i>=0;--i)if(null!=this._$aS[i]&&this._$aS[i].getDrawDataID()==e)return i;return -1},X.prototype.getDrawData=function(e){if(e instanceof L){if(null==this._$Bo){this._$Bo={};for(var i=this._$aS.length,r=0;r<i;r++){var n=this._$aS[r],s=n.getDrawDataID();null!=s&&(this._$Bo[s]=n)}}return this._$Bo[id]}return e<this._$aS.length?this._$aS[e]:null},X.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),null!=this._$Bo&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},X.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var e=this._$Ri.getModelImpl(),i=e._$Xr(),n=i.length,s=[],o=[],a=0;a<n;++a){var h=i[a];this._$F2.push(h),this._$Hr.push(h.init(this));for(var l=h.getBaseData(),u=l.length,c=0;c<u;++c)s.push(l[c]);for(c=0;c<u;++c){var d=l[c].init(this);d._$l2(a),o.push(d)}var f=h.getDrawData(),p=f.length;for(c=0;c<p;++c){var _=f[c],g=_.init(this);g._$IP=a,this._$aS.push(_),this._$8b.push(g)}}for(var v=s.length,y=tg._$2o();;){var b=!1;for(a=0;a<v;++a){var x=s[a];if(null!=x){var T=x.getTargetBaseDataID();(null==T||T==y||this.getBaseDataIndex(T)>=0)&&(this._$3S.push(x),this._$db.push(o[a]),s[a]=null,b=!0)}}if(!b)break}var A=e._$E2();if(null!=A){var E=A._$1s();if(null!=E){var w=E.length;for(a=0;a<w;++a){var S=E[a];null!=S&&this._$02(S.getParamID(),S.getDefaultValue(),S.getMinValue(),S.getMaxValue())}}}this.clipManager=new r(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},X.prototype.update=function(){X._$e&&h.start("_$zL");for(var e=this._$_2.length,i=0;i<e;i++)this._$_2[i]!=this._$vr[i]&&(this._$Js[i]=X._$ZS,this._$vr[i]=this._$_2[i]);var r=this._$3S.length,n=this._$aS.length,s=z._$or(),o=z._$Pr()-s+1;for((null==this._$Ws||this._$Ws.length<o)&&(this._$Ws=new Int16Array(o),this._$Vs=new Int16Array(o)),i=0;i<o;i++)this._$Ws[i]=X._$V2,this._$Vs[i]=X._$V2;for((null==this._$Er||this._$Er.length<n)&&(this._$Er=new Int16Array(n)),i=0;i<n;i++)this._$Er[i]=X._$W0;X._$e&&h.dump("_$zL"),X._$e&&h.start("_$UL");for(var a=null,l=0;l<r;++l){var u=this._$3S[l],c=this._$db[l];try{u._$Nr(this,c),u._$2b(this,c)}catch(e){null==a&&(a=e)}}null!=a&&X._$_0&&h._$Rb(a),X._$e&&h.dump("_$UL"),X._$e&&h.start("_$DL");for(var d=null,f=0;f<n;++f){var p=this._$aS[f],_=this._$8b[f];try{if(p._$Nr(this,_),_._$u2())continue;p._$2b(this,_);var g,v=Math.floor(p._$zS(this,_)-s);try{g=this._$Vs[v]}catch(e){console.log("_$li :: %s / %s 				@@_$fS\n",e.toString(),p.getDrawDataID().toString()),v=Math.floor(p._$zS(this,_)-s);continue}g==X._$V2?this._$Ws[v]=f:this._$Er[g]=f,this._$Vs[v]=f}catch(e){null==d&&(d=e,ta._$sT(ta._$H7))}}for(null!=d&&X._$_0&&h._$Rb(d),X._$e&&h.dump("_$DL"),X._$e&&h.start("_$eL"),i=this._$Js.length-1;i>=0;i--)this._$Js[i]=X._$jr;return this._$QT=!1,X._$e&&h.dump("_$eL"),!1},X.prototype.preDraw=function(e){null!=this.clipManager&&(e._$ZT(),this.clipManager.setupClip(this,e))},X.prototype.draw=function(e){if(null!=this._$Ws){var i=this._$Ws.length;e._$ZT();for(var r=0;r<i;++r){var n=this._$Ws[r];if(n!=X._$V2)for(;;){var s=this._$aS[n],o=this._$8b[n];if(o._$yo()){var a=o._$IP,l=this._$Hr[a];o._$VS=l.getPartsOpacity(),s.draw(e,this,o)}var u=this._$Er[n];if(u<=n||u==X._$W0)break;n=u}}}else h._$li("call _$Ri.update() before _$Ri.draw() ")},X.prototype.getParamIndex=function(e){for(var i=this._$pb.length-1;i>=0;--i)if(this._$pb[i]==e)return i;return this._$02(e,0,X._$tr,X._$lr)},X.prototype._$BS=function(e){return this.getBaseDataIndex(e)},X.prototype.getBaseDataIndex=function(e){for(var i=this._$3S.length-1;i>=0;--i)if(null!=this._$3S[i]&&this._$3S[i].getBaseDataID()==e)return i;return -1},X.prototype._$UT=function(e,i){var r=new Float32Array(i);return C._$jT(e,0,r,0,e.length),r},X.prototype._$02=function(e,i,r,n){if(this._$qo>=this._$pb.length){var s=this._$pb.length,o=Array(2*s);C._$jT(this._$pb,0,o,0,s),this._$pb=o,this._$_2=this._$UT(this._$_2,2*s),this._$vr=this._$UT(this._$vr,2*s),this._$Rr=this._$UT(this._$Rr,2*s),this._$Or=this._$UT(this._$Or,2*s);var a=[];C._$jT(this._$Js,0,a,0,s),this._$Js=a}return this._$pb[this._$qo]=e,this._$_2[this._$qo]=i,this._$vr[this._$qo]=i,this._$Rr[this._$qo]=r,this._$Or[this._$qo]=n,this._$Js[this._$qo]=X._$ZS,this._$qo++},X.prototype._$Zo=function(e,i){this._$3S[e]=i},X.prototype.setParamFloat=function(e,i){i<this._$Rr[e]&&(i=this._$Rr[e]),i>this._$Or[e]&&(i=this._$Or[e]),this._$_2[e]=i},X.prototype.loadParam=function(){var e=this._$_2.length;e>this._$fs.length&&(e=this._$fs.length),C._$jT(this._$fs,0,this._$_2,0,e)},X.prototype.saveParam=function(){var e=this._$_2.length;e>this._$fs.length&&(this._$fs=new Float32Array(e)),C._$jT(this._$_2,0,this._$fs,0,e)},X.prototype._$v2=function(){return this._$co},X.prototype._$WS=function(){return this._$QT},X.prototype._$Xb=function(e){return this._$Js[e]==X._$ZS},X.prototype._$vs=function(){return this._$Es},X.prototype._$Tr=function(){return this._$ZP},X.prototype.getBaseData=function(e){return this._$3S[e]},X.prototype.getParamFloat=function(e){return this._$_2[e]},X.prototype.getParamMax=function(e){return this._$Or[e]},X.prototype.getParamMin=function(e){return this._$Rr[e]},X.prototype.setPartsOpacity=function(e,i){this._$Hr[e].setPartsOpacity(i)},X.prototype.getPartsOpacity=function(e){return this._$Hr[e].getPartsOpacity()},X.prototype.getPartsDataIndex=function(e){for(var i=this._$F2.length-1;i>=0;--i)if(null!=this._$F2[i]&&this._$F2[i]._$p2()==e)return i;return -1},X.prototype._$q2=function(e){return this._$db[e]},X.prototype._$C2=function(e){return this._$8b[e]},X.prototype._$Bb=function(e){return this._$Hr[e]},X.prototype._$5s=function(e,i){for(var r=this._$Ws.length,n=e,s=0;s<r;++s){var o=this._$Ws[s];if(o!=X._$V2)for(;;){var a=this._$8b[o];a._$yo()&&(a._$GT()._$B2(this,a,n),n+=i);var h=this._$Er[o];if(h<=o||h==X._$W0)break;o=h}}},X.prototype.setDrawParam=function(e){this.dp_webgl=e},X.prototype.getDrawParam=function(){return this.dp_webgl},V._$0T=function(e){return V._$0T(new _$5(e))},V._$0T=function(e){if(!e.exists())throw new _$ls(e._$3b());for(var i,r=e.length(),n=new Int8Array(r),s=new _$Xs(new _$kb(e),8192),o=0;(i=s.read(n,o,r-o))>0;)o+=i;return n},V._$C=function(e){var i=null,r=null;try{i=e instanceof Array?e:new _$Xs(e,8192),r=new _$js;for(var n,s=new Int8Array(1e3);(n=i.read(s))>0;)r.write(s,0,n);return r._$TS()}finally{null!=e&&e.close(),null!=r&&(r.flush(),r.close())}},H.prototype=new P,H._$As=32,H._$Gr=!1,H._$NT=null,H._$vS=null,H._$no=null,H._$9r=function(e){return new Float32Array(e)},H._$vb=function(e){return new Int16Array(e)},H._$cr=function(e,i){return null==e||e._$yL()<i.length?(e=H._$9r(2*i.length)).put(i):(e.clear(),e.put(i)),e._$oT(0),e},H._$mb=function(e,i){return null==e||e._$yL()<i.length?(e=H._$vb(2*i.length)).put(i):(e.clear(),e.put(i)),e._$oT(0),e},H._$Hs=function(){return H._$Gr},H._$as=function(e){H._$Gr=e},H.prototype.setGL=function(e){this.gl=e},H.prototype.setTransform=function(e){this.transform=e},H.prototype._$ZT=function(){},H.prototype._$Uo=function(e,i,r,n,s,o,a,h){if(!(o<.01)){var l=this._$U2[e],u=o>.9?ta.EXPAND_W:0;this.gl.drawElements(l,r,n,s,o,u,this.transform,h)}},H.prototype._$Rs=function(){throw Error("_$Rs")},H.prototype._$Ds=function(e){throw Error("_$Ds")},H.prototype._$K2=function(){for(var e=0;e<this._$sb.length;e++)0!=this._$sb[e]&&(this.gl._$Sr(1,this._$sb,e),this._$sb[e]=0)},H.prototype.setTexture=function(e,i){this._$sb.length<e+1&&this._$nS(e),this._$sb[e]=i},H.prototype.setTexture=function(e,i){this._$sb.length<e+1&&this._$nS(e),this._$U2[e]=i},H.prototype._$nS=function(e){var i=Math.max(2*this._$sb.length,e+1+10),r=new Int32Array(i);C._$jT(this._$sb,0,r,0,this._$sb.length),this._$sb=r;var n=[];C._$jT(this._$U2,0,n,0,this._$U2.length),this._$U2=n},j.prototype=new I,j._$Xo=new Float32Array(2),j._$io=new Float32Array(2),j._$0o=new Float32Array(2),j._$Lo=new Float32Array(2),j._$To=new Float32Array(2),j._$Po=new Float32Array(2),j._$gT=[],j.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP(),this._$Y0=[]},j.prototype.getType=function(){return I._$c2},j.prototype._$F0=function(e){I.prototype._$F0.call(this,e),this._$GS=e._$nP(),this._$Y0=e._$nP(),I.prototype.readV2_opacity.call(this,e)},j.prototype.init=function(e){var i=new Y(this);return i._$Yr=new x,this._$32()&&(i._$Wr=new x),i},j.prototype._$Nr=function(e,i){if(this!=i._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(e)){var r=j._$gT;r[0]=!1;var n=this._$GS._$Q2(e,r);i._$Ib(r[0]),this.interpolateOpacity(e,this._$GS,i,r);var s=e._$vs(),o=e._$Tr();if(this._$GS._$zr(s,o,n),n<=0){var a=this._$Y0[s[0]];i._$Yr.init(a)}else if(1==n){a=this._$Y0[s[0]];var h=this._$Y0[s[1]],l=o[0];i._$Yr._$fL=a._$fL+(h._$fL-a._$fL)*l,i._$Yr._$gL=a._$gL+(h._$gL-a._$gL)*l,i._$Yr._$B0=a._$B0+(h._$B0-a._$B0)*l,i._$Yr._$z0=a._$z0+(h._$z0-a._$z0)*l,i._$Yr._$qT=a._$qT+(h._$qT-a._$qT)*l}else if(2==n){a=this._$Y0[s[0]],h=this._$Y0[s[1]];var u=this._$Y0[s[2]],c=this._$Y0[s[3]],d=(l=o[0],o[1]),f=a._$fL+(h._$fL-a._$fL)*l,p=u._$fL+(c._$fL-u._$fL)*l;i._$Yr._$fL=f+(p-f)*d,f=a._$gL+(h._$gL-a._$gL)*l,p=u._$gL+(c._$gL-u._$gL)*l,i._$Yr._$gL=f+(p-f)*d,f=a._$B0+(h._$B0-a._$B0)*l,p=u._$B0+(c._$B0-u._$B0)*l,i._$Yr._$B0=f+(p-f)*d,f=a._$z0+(h._$z0-a._$z0)*l,p=u._$z0+(c._$z0-u._$z0)*l,i._$Yr._$z0=f+(p-f)*d,f=a._$qT+(h._$qT-a._$qT)*l,p=u._$qT+(c._$qT-u._$qT)*l,i._$Yr._$qT=f+(p-f)*d}else if(3==n){var _=this._$Y0[s[0]],g=this._$Y0[s[1]],v=this._$Y0[s[2]],y=this._$Y0[s[3]],b=this._$Y0[s[4]],x=this._$Y0[s[5]],T=this._$Y0[s[6]],A=this._$Y0[s[7]],E=(l=o[0],d=o[1],o[2]),w=(f=_._$fL+(g._$fL-_._$fL)*l,p=v._$fL+(y._$fL-v._$fL)*l,b._$fL+(x._$fL-b._$fL)*l),S=T._$fL+(A._$fL-T._$fL)*l;i._$Yr._$fL=(1-E)*(f+(p-f)*d)+E*(w+(S-w)*d),f=_._$gL+(g._$gL-_._$gL)*l,p=v._$gL+(y._$gL-v._$gL)*l,w=b._$gL+(x._$gL-b._$gL)*l,S=T._$gL+(A._$gL-T._$gL)*l,i._$Yr._$gL=(1-E)*(f+(p-f)*d)+E*(w+(S-w)*d),f=_._$B0+(g._$B0-_._$B0)*l,p=v._$B0+(y._$B0-v._$B0)*l,w=b._$B0+(x._$B0-b._$B0)*l,S=T._$B0+(A._$B0-T._$B0)*l,i._$Yr._$B0=(1-E)*(f+(p-f)*d)+E*(w+(S-w)*d),f=_._$z0+(g._$z0-_._$z0)*l,p=v._$z0+(y._$z0-v._$z0)*l,w=b._$z0+(x._$z0-b._$z0)*l,S=T._$z0+(A._$z0-T._$z0)*l,i._$Yr._$z0=(1-E)*(f+(p-f)*d)+E*(w+(S-w)*d),f=_._$qT+(g._$qT-_._$qT)*l,p=v._$qT+(y._$qT-v._$qT)*l,w=b._$qT+(x._$qT-b._$qT)*l,S=T._$qT+(A._$qT-T._$qT)*l,i._$Yr._$qT=(1-E)*(f+(p-f)*d)+E*(w+(S-w)*d)}else if(4==n){var P=this._$Y0[s[0]],M=this._$Y0[s[1]],I=this._$Y0[s[2]],C=this._$Y0[s[3]],R=this._$Y0[s[4]],O=this._$Y0[s[5]],D=this._$Y0[s[6]],$=this._$Y0[s[7]],L=this._$Y0[s[8]],F=this._$Y0[s[9]],B=this._$Y0[s[10]],k=this._$Y0[s[11]],N=this._$Y0[s[12]],U=this._$Y0[s[13]],G=this._$Y0[s[14]],X=this._$Y0[s[15]],V=(l=o[0],d=o[1],E=o[2],o[3]),H=(f=P._$fL+(M._$fL-P._$fL)*l,p=I._$fL+(C._$fL-I._$fL)*l,w=R._$fL+(O._$fL-R._$fL)*l,S=D._$fL+($._$fL-D._$fL)*l,L._$fL+(F._$fL-L._$fL)*l),Y=B._$fL+(k._$fL-B._$fL)*l,z=N._$fL+(U._$fL-N._$fL)*l,W=G._$fL+(X._$fL-G._$fL)*l;i._$Yr._$fL=(1-V)*((1-E)*(f+(p-f)*d)+E*(w+(S-w)*d))+V*((1-E)*(H+(Y-H)*d)+E*(z+(W-z)*d)),f=P._$gL+(M._$gL-P._$gL)*l,p=I._$gL+(C._$gL-I._$gL)*l,w=R._$gL+(O._$gL-R._$gL)*l,S=D._$gL+($._$gL-D._$gL)*l,H=L._$gL+(F._$gL-L._$gL)*l,Y=B._$gL+(k._$gL-B._$gL)*l,z=N._$gL+(U._$gL-N._$gL)*l,W=G._$gL+(X._$gL-G._$gL)*l,i._$Yr._$gL=(1-V)*((1-E)*(f+(p-f)*d)+E*(w+(S-w)*d))+V*((1-E)*(H+(Y-H)*d)+E*(z+(W-z)*d)),f=P._$B0+(M._$B0-P._$B0)*l,p=I._$B0+(C._$B0-I._$B0)*l,w=R._$B0+(O._$B0-R._$B0)*l,S=D._$B0+($._$B0-D._$B0)*l,H=L._$B0+(F._$B0-L._$B0)*l,Y=B._$B0+(k._$B0-B._$B0)*l,z=N._$B0+(U._$B0-N._$B0)*l,W=G._$B0+(X._$B0-G._$B0)*l,i._$Yr._$B0=(1-V)*((1-E)*(f+(p-f)*d)+E*(w+(S-w)*d))+V*((1-E)*(H+(Y-H)*d)+E*(z+(W-z)*d)),f=P._$z0+(M._$z0-P._$z0)*l,p=I._$z0+(C._$z0-I._$z0)*l,w=R._$z0+(O._$z0-R._$z0)*l,S=D._$z0+($._$z0-D._$z0)*l,H=L._$z0+(F._$z0-L._$z0)*l,Y=B._$z0+(k._$z0-B._$z0)*l,z=N._$z0+(U._$z0-N._$z0)*l,W=G._$z0+(X._$z0-G._$z0)*l,i._$Yr._$z0=(1-V)*((1-E)*(f+(p-f)*d)+E*(w+(S-w)*d))+V*((1-E)*(H+(Y-H)*d)+E*(z+(W-z)*d)),f=P._$qT+(M._$qT-P._$qT)*l,p=I._$qT+(C._$qT-I._$qT)*l,w=R._$qT+(O._$qT-R._$qT)*l,S=D._$qT+($._$qT-D._$qT)*l,H=L._$qT+(F._$qT-L._$qT)*l,Y=B._$qT+(k._$qT-B._$qT)*l,z=N._$qT+(U._$qT-N._$qT)*l,W=G._$qT+(X._$qT-G._$qT)*l,i._$Yr._$qT=(1-V)*((1-E)*(f+(p-f)*d)+E*(w+(S-w)*d))+V*((1-E)*(H+(Y-H)*d)+E*(z+(W-z)*d))}else{for(var q=0|Math.pow(2,n),Z=new Float32Array(q),Q=0;Q<q;Q++){for(var J=Q,K=1,tt=0;tt<n;tt++)K*=J%2==0?1-o[tt]:o[tt],J/=2;Z[Q]=K}for(var te=[],ti=0;ti<q;ti++)te[ti]=this._$Y0[s[ti]];var tr=0,tn=0,ts=0,to=0,ta=0;for(ti=0;ti<q;ti++)tr+=Z[ti]*te[ti]._$fL,tn+=Z[ti]*te[ti]._$gL,ts+=Z[ti]*te[ti]._$B0,to+=Z[ti]*te[ti]._$z0,ta+=Z[ti]*te[ti]._$qT;i._$Yr._$fL=tr,i._$Yr._$gL=tn,i._$Yr._$B0=ts,i._$Yr._$z0=to,i._$Yr._$qT=ta}a=this._$Y0[s[0]],i._$Yr.reflectX=a.reflectX,i._$Yr.reflectY=a.reflectY}},j.prototype._$2b=function(e,i){if(this!=i._$GT()&&console.log("### assert!! ### "),i._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(i._$8r==I._$ur&&(i._$8r=e.getBaseDataIndex(r)),i._$8r<0)ta._$so&&h._$li("_$L _$0P _$G :: %s",r),i._$hS(!1);else{var n=e.getBaseData(i._$8r);if(null!=n){var s=e._$q2(i._$8r),o=j._$Xo;o[0]=i._$Yr._$fL,o[1]=i._$Yr._$gL;var a=j._$io;a[0]=0,a[1]=-.1,s._$GT().getType()==I._$c2?a[1]=-10:a[1]=-.1;var l=j._$0o;this._$Jr(e,n,s,o,a,l);var u=tA._$92(a,l);n._$nb(e,s,o,o,1,0,2),i._$Wr._$fL=o[0],i._$Wr._$gL=o[1],i._$Wr._$B0=i._$Yr._$B0,i._$Wr._$z0=i._$Yr._$z0,i._$Wr._$qT=i._$Yr._$qT-u*tA._$NS;var c=s.getTotalScale();i.setTotalScale_notForClient(c*i._$Wr._$B0);var d=s.getTotalOpacity();i.setTotalOpacity(d*i.getInterpolatedOpacity()),i._$Wr.reflectX=i._$Yr.reflectX,i._$Wr.reflectY=i._$Yr.reflectY,i._$hS(s._$yo())}else i._$hS(!1)}}else i.setTotalScale_notForClient(i._$Yr._$B0),i.setTotalOpacity(i.getInterpolatedOpacity())},j.prototype._$nb=function(e,i,r,n,s,o,a){this!=i._$GT()&&console.log("### assert!! ### ");for(var h,l,u=null!=i._$Wr?i._$Wr:i._$Yr,c=Math.sin(tA._$bS*u._$qT),d=Math.cos(tA._$bS*u._$qT),f=i.getTotalScale(),p=u.reflectX?-1:1,_=u.reflectY?-1:1,g=d*f*p,v=-c*f*_,y=c*f*p,b=d*f*_,x=u._$fL,T=u._$gL,A=s*a,E=o;E<A;E+=a)h=r[E],l=r[E+1],n[E]=g*h+v*l+x,n[E+1]=y*h+b*l+T},j.prototype._$Jr=function(e,i,r,n,s,o){i!=r._$GT()&&console.log("### assert!! ### ");var a=j._$Lo;j._$Lo[0]=n[0],j._$Lo[1]=n[1],i._$nb(e,r,a,a,1,0,2);for(var h=j._$To,l=j._$Po,u=1,c=0;c<10;c++){if(l[0]=n[0]+u*s[0],l[1]=n[1]+u*s[1],i._$nb(e,r,l,h,1,0,2),h[0]-=a[0],h[1]-=a[1],0!=h[0]||0!=h[1])return o[0]=h[0],void(o[1]=h[1]);if(l[0]=n[0]-u*s[0],l[1]=n[1]-u*s[1],i._$nb(e,r,l,h,1,0,2),h[0]-=a[0],h[1]-=a[1],0!=h[0]||0!=h[1])return h[0]=-h[0],h[0]=-h[0],o[0]=h[0],void(o[1]=h[1]);u*=.1}ta._$so&&console.log("_$L0 to transform _$SP\n")},Y.prototype=new to,z.prototype=new S,z._$ur=-2,z._$ES=500,z._$wb=2,z._$8S=3,z._$os=4,z._$52=z._$ES,z._$R2=z._$ES,z._$Sb=function(e){for(var i=e.length-1;i>=0;--i){var r=e[i];r<z._$52?z._$52=r:r>z._$R2&&(z._$R2=r)}},z._$or=function(){return z._$52},z._$Pr=function(){return z._$R2},z.prototype._$F0=function(e){this._$gP=e._$nP(),this._$dr=e._$nP(),this._$GS=e._$nP(),this._$qb=e._$6L(),this._$Lb=e._$cS(),this._$mS=e._$Tb(),e.getFormatVersion()>=G._$T7?(this.clipID=e._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,z._$Sb(this._$Lb)},z.prototype.getClipIDList=function(){return this.clipIDList},z.prototype._$Nr=function(e,i){if(i._$IS[0]=!1,i._$Us=E._$Z2(e,this._$GS,i._$IS,this._$Lb),ta._$Zs);else if(i._$IS[0])return;i._$7s=E._$br(e,this._$GS,i._$IS,this._$mS)},z.prototype._$2b=function(e){},z.prototype.getDrawDataID=function(){return this._$gP},z.prototype._$j2=function(e){this._$gP=e},z.prototype.getOpacity=function(e,i){return i._$7s},z.prototype._$zS=function(e,i){return i._$Us},z.prototype.getTargetBaseDataID=function(){return this._$dr},z.prototype._$gs=function(e){this._$dr=e},z.prototype._$32=function(){return null!=this._$dr&&this._$dr!=tg._$2o()},z.prototype.getType=function(){},W._$42=0,W.prototype._$1b=function(){return this._$3S},W.prototype.getDrawDataList=function(){return this._$aS},W.prototype._$F0=function(e){this._$NL=e._$nP(),this._$aS=e._$nP(),this._$3S=e._$nP()},W.prototype._$kr=function(e){e._$Zo(this._$3S),e._$xo(this._$aS),this._$3S=null,this._$aS=null},q.prototype=new i,q.loadModel=function(e){var r=new q;return i._$62(r,e),r},q.loadModel=function(e){var r=new q;return i._$62(r,e),r},q._$to=function(){return new q},q._$er=function(e){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==i.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var r=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],n=q.loadModel(i._$3b()),s=0;s<r.length;s++){var o=new _$5(r[s]);if(0==o.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+o._$PL());n.setTexture(s,_$nL._$_o(e,o._$3b()))}return n},q.prototype.setGL=function(e){this._$zo.setGL(e)},q.prototype.setTransform=function(e){this._$zo.setTransform(e)},q.prototype.draw=function(){this._$5S.draw(this._$zo)},q.prototype._$K2=function(){this._$zo._$K2()},q.prototype.setTexture=function(e,i){null==this._$zo&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(e,i)},q.prototype.setTexture=function(e,i){null==this._$zo&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(e,i)},q.prototype._$Rs=function(){return this._$zo._$Rs()},q.prototype._$Ds=function(e){this._$zo._$Ds(e)},q.prototype.getDrawParam=function(){return this._$zo},Z.prototype=new a,Z._$cs="VISIBLE:",Z._$ar="LAYOUT:",Z.MTN_PREFIX_FADEIN="FADEIN:",Z.MTN_PREFIX_FADEOUT="FADEOUT:",Z._$Co=0,Z._$1T=1,Z.loadMotion=function(e){var i=V._$C(e);return Z.loadMotion(i)},Z.loadMotion=function(e){e instanceof ArrayBuffer&&(e=new DataView(e));var i=new Z,r=[0],n=e.byteLength;i._$yT=0;for(var s=0;s<n;++s){var o=Q(e,s),a=o.charCodeAt(0);if("\n"!=o&&"\r"!=o){if("#"!=o){if("$"!=o){if(97<=a&&a<=122||65<=a&&a<=90||"_"==o){for(d=s,f=-1;s<n&&"\r"!=(o=Q(e,s))&&"\n"!=o;++s)if("="==o){f=s;break}if(f>=0){var h=new N;O.startsWith(e,d,Z._$cs)?(h._$RP=N._$hs,h._$4P=O.createString(e,d,f-d)):O.startsWith(e,d,Z._$ar)?(h._$4P=O.createString(e,d+7,f-d-7),O.startsWith(e,d+7,"ANCHOR_X")?h._$RP=N._$xs:O.startsWith(e,d+7,"ANCHOR_Y")?h._$RP=N._$us:O.startsWith(e,d+7,"SCALE_X")?h._$RP=N._$qs:O.startsWith(e,d+7,"SCALE_Y")?h._$RP=N._$Ys:O.startsWith(e,d+7,"X")?h._$RP=N._$ws:O.startsWith(e,d+7,"Y")&&(h._$RP=N._$Ns)):(h._$RP=N._$Fr,h._$4P=O.createString(e,d,f-d)),i.motions.push(h);var l=0,u=[];for(s=f+1;s<n&&"\r"!=(o=Q(e,s))&&"\n"!=o;++s)if(","!=o&&" "!=o&&"	"!=o&&(_=O._$LS(e,n,s,r),r[0]>0)){u.push(_),l++;var c=r[0];if(c<s){console.log("_$n0 _$hi . @Live2DMotion loadMotion()\n");break}s=c-1}h._$I0=new Float32Array(u),l>i._$yT&&(i._$yT=l)}}}else{for(var d=s,f=-1;s<n&&"\r"!=(o=Q(e,s))&&"\n"!=o;++s)if("="==o){f=s;break}var p=!1;if(f>=0){for(f==d+4&&"f"==Q(e,d+1)&&"p"==Q(e,d+2)&&"s"==Q(e,d+3)&&(p=!0),s=f+1;s<n&&"\r"!=(o=Q(e,s))&&"\n"!=o;++s)if(","!=o&&" "!=o&&"	"!=o){var _=O._$LS(e,n,s,r);r[0]>0&&p&&5<_&&_<121&&(i._$D0=_),s=r[0]}}for(;s<n&&"\n"!=Q(e,s)&&"\r"!=Q(e,s);++s);}}else for(;s<n&&"\n"!=Q(e,s)&&"\r"!=Q(e,s);++s);}}return i._$rr=1e3*i._$yT/i._$D0|0,i},Z.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},Z.prototype.getLoopDurationMSec=function(){return this._$rr},Z.prototype.dump=function(){for(var e=0;e<this.motions.length;e++){var i=this.motions[e];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var r=0;r<i._$I0.length&&r<10;r++)console.log("%5.2f ,",i._$I0[r]);console.log("\n")}},Z.prototype.updateParamExe=function(e,i,r,n){for(var s=(i-n._$z2)*this._$D0/1e3,o=0|s,a=s-o,h=0;h<this.motions.length;h++){var l=this.motions[h],u=l._$I0.length,c=l._$4P;if(l._$RP==N._$hs){var d=l._$I0[o>=u?u-1:o];e.setParamFloat(c,d)}else if(N._$ws<=l._$RP&&l._$RP<=N._$Ys);else{var f=e.getParamIndex(c),p=e.getModelContext(),_=.4*(p.getParamMax(f)-p.getParamMin(f)),g=p.getParamFloat(f),v=l._$I0[o>=u?u-1:o],y=l._$I0[o+1>=u?u-1:o+1],b=g+((v<y&&y-v>_||v>y&&v-y>_?v:v+(y-v)*a)-g)*r;e.setParamFloat(c,b)}}o>=this._$yT&&(this._$E?(n._$z2=i,this.loopFadeIn&&(n._$bs=i)):n._$9L=!0),this._$eP=r},Z.prototype._$r0=function(){return this._$E},Z.prototype._$aL=function(e){this._$E=e},Z.prototype._$S0=function(){return this._$D0},Z.prototype._$U0=function(e){this._$D0=e},Z.prototype.isLoopFadeIn=function(){return this.loopFadeIn},Z.prototype.setLoopFadeIn=function(e){this.loopFadeIn=e},k.prototype.clear=function(){this.size=0},k.prototype.add=function(e){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);C._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=e},k.prototype._$BL=function(){var e=new Float32Array(this.size);return C._$jT(this._$P,0,e,0,this.size),e},N._$Fr=0,N._$hs=1,N._$ws=100,N._$Ns=101,N._$xs=102,N._$us=103,N._$qs=104,N._$Ys=105,J.prototype=new I,J._$gT=[],J.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},J.prototype._$F0=function(e){I.prototype._$F0.call(this,e),this._$A=e._$6L(),this._$o=e._$6L(),this._$GS=e._$nP(),this._$Eo=e._$nP(),I.prototype.readV2_opacity.call(this,e)},J.prototype.init=function(e){var i=new K(this),r=(this._$o+1)*(this._$A+1);return null!=i._$Cr&&(i._$Cr=null),i._$Cr=new Float32Array(2*r),null!=i._$hr&&(i._$hr=null),this._$32()?i._$hr=new Float32Array(2*r):i._$hr=null,i},J.prototype._$Nr=function(e,i){if(this._$GS._$Ur(e)){var r=this._$VT(),n=J._$gT;n[0]=!1,E._$Vr(e,this._$GS,n,r,this._$Eo,i._$Cr,0,2),i._$Ib(n[0]),this.interpolateOpacity(e,this._$GS,i,n)}},J.prototype._$2b=function(e,i){if(i._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(i._$8r==I._$ur&&(i._$8r=e.getBaseDataIndex(r)),i._$8r<0)ta._$so&&h._$li("_$L _$0P _$G :: %s",r),i._$hS(!1);else{var n=e.getBaseData(i._$8r),s=e._$q2(i._$8r);if(null!=n&&s._$yo()){var o=s.getTotalScale();i.setTotalScale_notForClient(o);var a=s.getTotalOpacity();i.setTotalOpacity(a*i.getInterpolatedOpacity()),n._$nb(e,s,i._$Cr,i._$hr,this._$VT(),0,2),i._$hS(!0)}else i._$hS(!1)}}else i.setTotalOpacity(i.getInterpolatedOpacity())},J.prototype._$nb=function(e,i,r,n,s,o,a){var h=null!=i._$hr?i._$hr:i._$Cr;J.transformPoints_sdk2(r,n,s,o,a,h,this._$o,this._$A)},J.transformPoints_sdk2=function(e,i,r,n,s,o,a,h){for(var l,u,c,d=r*s,f=0,p=0,_=0,g=0,v=0,y=0,b=!1,x=n;x<d;x+=s)if(E=e[x],A=(w=e[x+1])*h,(T=E*a)<0||A<0||a<=T||h<=A){var T,A,E,w,S,P,M=a+1;if(!b){b=!0,f=.25*(o[2*(0+0*M)]+o[2*(a+0*M)]+o[2*(0+h*M)]+o[2*(a+h*M)]),p=.25*(o[2*(0+0*M)+1]+o[2*(a+0*M)+1]+o[2*(0+h*M)+1]+o[2*(a+h*M)+1]);var I=o[2*(a+h*M)]-o[2*(0+0*M)],C=o[2*(a+h*M)+1]-o[2*(0+0*M)+1],R=o[2*(a+0*M)]-o[2*(0+h*M)],O=o[2*(a+0*M)+1]-o[2*(0+h*M)+1];f-=.5*((_=.5*(I+R))+(v=.5*(I-R))),p-=.5*((g=.5*(C+O))+(y=.5*(C-O)))}if(-2<E&&E<3&&-2<w&&w<3){if(E<=0){if(w<=0){var D=o[2*(0+0*M)],$=o[2*(0+0*M)+1],L=f-2*_,F=p-2*g,B=f-2*v,k=p-2*y,N=f-2*_-2*v,U=p-2*g-2*y;(G=.5*(E- -2))+(X=.5*(w- -2))<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X))}else if(w>=1)B=o[2*(0+h*M)],k=o[2*(0+h*M)+1],N=f-2*_+1*v,U=p-2*g+1*y,D=f+3*v,$=p+3*y,L=f-2*_+3*v,F=p-2*g+3*y,(G=.5*(E- -2))+(X=.5*(w-1))<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X));else{(S=0|A)==h&&(S=h-1);var G=.5*(E- -2),X=A-S,V=S/h,H=(S+1)/h;B=o[2*(0+S*M)],k=o[2*(0+S*M)+1],D=o[2*(0+(S+1)*M)],$=o[2*(0+(S+1)*M)+1],N=f-2*_+V*v,U=p-2*g+V*y,L=f-2*_+H*v,F=p-2*g+H*y,G+X<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X))}}else if(1<=E)w<=0?(L=o[2*(a+0*M)],F=o[2*(a+0*M)+1],D=f+3*_,$=p+3*g,N=f+1*_-2*v,U=p+1*g-2*y,B=f+3*_-2*v,k=p+3*g-2*y,(G=.5*(E-1))+(X=.5*(w- -2))<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X))):w>=1?(N=o[2*(a+h*M)],U=o[2*(a+h*M)+1],B=f+3*_+1*v,k=p+3*g+1*y,L=f+1*_+3*v,F=p+1*g+3*y,D=f+3*_+3*v,$=p+3*g+3*y,(G=.5*(E-1))+(X=.5*(w-1))<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X))):((S=0|A)==h&&(S=h-1),G=.5*(E-1),X=A-S,V=S/h,H=(S+1)/h,N=o[2*(a+S*M)],U=o[2*(a+S*M)+1],L=o[2*(a+(S+1)*M)],F=o[2*(a+(S+1)*M)+1],B=f+3*_+V*v,k=p+3*g+V*y,D=f+3*_+H*v,$=p+3*g+H*y,G+X<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X)));else if(w<=0){(P=0|T)==a&&(P=a-1),G=T-P,X=.5*(w- -2);var j=P/a,Y=(P+1)/a;L=o[2*(P+0*M)],F=o[2*(P+0*M)+1],D=o[2*(P+1+0*M)],$=o[2*(P+1+0*M)+1],N=f+j*_-2*v,U=p+j*g-2*y,B=f+Y*_-2*v,k=p+Y*g-2*y,G+X<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X))}else w>=1?((P=0|T)==a&&(P=a-1),G=T-P,X=.5*(w-1),j=P/a,Y=(P+1)/a,N=o[2*(P+h*M)],U=o[2*(P+h*M)+1],B=o[2*(P+1+h*M)],k=o[2*(P+1+h*M)+1],L=f+j*_+3*v,F=p+j*g+3*y,D=f+Y*_+3*v,$=p+Y*g+3*y,G+X<=1?(i[x]=N+(B-N)*G+(L-N)*X,i[x+1]=U+(k-U)*G+(F-U)*X):(i[x]=D+(L-D)*(1-G)+(B-D)*(1-X),i[x+1]=$+(F-$)*(1-G)+(k-$)*(1-X))):System.err.printf("_$li calc : %.4f , %.4f					@@BDBoxGrid\n",E,w)}else i[x]=f+E*_+w*v,i[x+1]=p+E*g+w*y}else l=2*((0|T)+(0|A)*(a+1)),(u=T-(0|T))+(c=A-(0|A))<1?(i[x]=o[l]*(1-u-c)+o[l+2]*u+o[l+2*(a+1)]*c,i[x+1]=o[l+1]*(1-u-c)+o[l+3]*u+o[l+2*(a+1)+1]*c):(i[x]=o[l+2*(a+1)+2]*(u-1+c)+o[l+2*(a+1)]*(1-u)+o[l+2]*(1-c),i[x+1]=o[l+2*(a+1)+3]*(u-1+c)+o[l+2*(a+1)+1]*(1-u)+o[l+3]*(1-c))},J.prototype.transformPoints_sdk1=function(e,i,r,n,s,o,a){for(var h,l,u,c,d,f,p,_=this._$o,g=this._$A,v=s*a,y=null!=i._$hr?i._$hr:i._$Cr,b=o;b<v;b+=a)ta._$ts?((h=r[b])<0?h=0:h>1&&(h=1),(l=r[b+1])<0?l=0:l>1&&(l=1),(u=0|(h*=_))>_-1&&(u=_-1),(c=0|(l*=g))>g-1&&(c=g-1),f=h-u,p=l-c,d=2*(u+c*(_+1))):(f=(h=r[b]*_)-(0|h),p=(l=r[b+1]*g)-(0|l),d=2*((0|h)+(0|l)*(_+1))),f+p<1?(n[b]=y[d]*(1-f-p)+y[d+2]*f+y[d+2*(_+1)]*p,n[b+1]=y[d+1]*(1-f-p)+y[d+3]*f+y[d+2*(_+1)+1]*p):(n[b]=y[d+2*(_+1)+2]*(f-1+p)+y[d+2*(_+1)]*(1-f)+y[d+2]*(1-p),n[b+1]=y[d+2*(_+1)+3]*(f-1+p)+y[d+2*(_+1)+1]*(1-f)+y[d+3]*(1-p))},J.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},J.prototype.getType=function(){return I._$_b},K.prototype=new to,tt._$42=0,tt.prototype._$zP=function(){this._$3S=[],this._$aS=[]},tt.prototype._$F0=function(e){this._$g0=e._$8L(),this.visible=e._$8L(),this._$NL=e._$nP(),this._$3S=e._$nP(),this._$aS=e._$nP()},tt.prototype.init=function(e){var i=new te(this);return i.setPartsOpacity(this.isVisible()?1:0),i},tt.prototype._$6o=function(e){if(null==this._$3S)throw Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(e)},tt.prototype._$3o=function(e){if(null==this._$aS)throw Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(e)},tt.prototype._$Zo=function(e){this._$3S=e},tt.prototype._$xo=function(e){this._$aS=e},tt.prototype.isVisible=function(){return this.visible},tt.prototype._$uL=function(){return this._$g0},tt.prototype._$KP=function(e){this.visible=e},tt.prototype._$ET=function(e){this._$g0=e},tt.prototype.getBaseData=function(){return this._$3S},tt.prototype.getDrawData=function(){return this._$aS},tt.prototype._$p2=function(){return this._$NL},tt.prototype._$ob=function(e){this._$NL=e},tt.prototype.getPartsID=function(){return this._$NL},tt.prototype._$MP=function(e){this._$NL=e},te.prototype=new function(){},te.prototype.getPartsOpacity=function(){return this._$VS},te.prototype.setPartsOpacity=function(e){this._$VS=e},ti._$L7=function(){d._$27(),tg._$27(),L._$27(),c._$27()},ti.prototype.toString=function(){return this.id},tr.prototype._$1s=function(){return this._$4S},tr.prototype._$zP=function(){this._$4S=[]},tr.prototype._$F0=function(e){this._$4S=e._$nP()},tr.prototype._$Ks=function(e){this._$4S.push(e)},tn.tr=new tm,tn._$50=new tm,tn._$Ti=[0,0],tn._$Pi=[0,0],tn._$B=[0,0],tn.prototype._$lP=function(e,i,r,n){this.viewport=[e,i,r,n]},tn.prototype._$bL=function(){this.context.save();var e=this.viewport;null!=e&&(this.context.beginPath(),this.context._$Li(e[0],e[1],e[2],e[3]),this.context.clip())},tn.prototype._$ei=function(){this.context.restore()},tn.prototype.drawElements=function(e,i,r,n,s,o,a,l){try{s!=this._$Qo&&(this._$Qo=s,this.context.globalAlpha=s);for(var u=i.length,c=e.width,d=e.height,f=this.context,p=this._$xP,_=this._$uP,g=this._$6r,v=this._$3r,y=tn.tr,b=tn._$Ti,x=tn._$Pi,A=tn._$B,E=0;E<u;E+=3){f.save();var w=i[E],S=i[E+1],P=i[E+2],M=p+g*r[2*w],I=_+v*r[2*w+1],C=p+g*r[2*S],R=_+v*r[2*S+1],O=p+g*r[2*P],D=_+v*r[2*P+1];a&&(a._$PS(M,I,A),M=A[0],I=A[1],a._$PS(C,R,A),C=A[0],R=A[1],a._$PS(O,D,A),O=A[0],D=A[1]);var $=c*n[2*w],L=d-d*n[2*w+1],F=c*n[2*S],B=d-d*n[2*S+1],k=c*n[2*P],N=d-d*n[2*P+1],U=Math.atan2(B-L,F-$),G=Math.atan2(R-I,C-M),X=C-M,V=R-I,H=Math.sqrt(X*X+V*V),j=F-$,Y=B-L,z=H/Math.sqrt(j*j+Y*Y);T._$ni(k,N,$,L,F-$,B-L,-(B-L),F-$,b),T._$ni(O,D,M,I,C-M,R-I,-(R-I),C-M,x);var W=(x[0]-b[0])/b[1],q=Math.min($,F,k),Z=Math.max($,F,k),Q=Math.min(L,B,N),J=Math.max(L,B,N),K=Math.floor(q),tt=Math.floor(Q),te=Math.ceil(Z),ti=Math.ceil(J);if(y.identity(),y.translate(M,I),y.rotate(G),y.scale(1,x[1]/b[1]),y.shear(W,0),y.scale(z,z),y.rotate(-U),y.translate(-$,-L),y.setContext(f),o||(o=1.2),ta.IGNORE_EXPAND&&(o=0),ta.USE_CACHED_POLYGON_IMAGE){var tr=l._$e0;if(tr.gl_cacheImage=tr.gl_cacheImage||{},!tr.gl_cacheImage[E]){var ts=tn.createCanvas(te-K,ti-tt);ta.DEBUG_DATA.LDGL_CANVAS_MB=ta.DEBUG_DATA.LDGL_CANVAS_MB||0,ta.DEBUG_DATA.LDGL_CANVAS_MB+=(te-K)*(ti-tt)*4;var to=ts.getContext("2d");to.translate(-K,-tt),tn.clip(to,y,o,H,$,L,F,B,k,N,M,I,C,R,O,D),to.drawImage(e,0,0),tr.gl_cacheImage[E]={cacheCanvas:ts,cacheContext:to}}f.drawImage(tr.gl_cacheImage[E].cacheCanvas,K,tt)}else ta.IGNORE_CLIP||tn.clip(f,y,o,H,$,L,F,B,k,N,M,I,C,R,O,D),ta.USE_ADJUST_TRANSLATION&&(q=0,Z=c,Q=0,J=d),f.drawImage(e,q,Q,Z-q,J-Q,q,Q,Z-q,J-Q);f.restore()}}catch(e){h._$Rb(e)}},tn.clip=function(e,i,r,n,s,o,a,h,l,u,c,d,f,p,_,g){r>.02?tn.expandClip(e,i,r,n,c,d,f,p,_,g):tn.clipWithTransform(e,null,s,o,a,h,l,u)},tn.expandClip=function(e,i,r,n,s,o,a,h,l,u){var c=a-s,d=h-o,f=l-s,p=u-o,_=c*p-d*f>0?r:-r,g=-d,v=l-a,y=u-h,b=-y,x=Math.sqrt(v*v+y*y),T=-p,A=Math.sqrt(f*f+p*p),E=tn._$50;return null!=i._$P2(E)&&(tn.clipWithTransform(e,E,s-_*g/n,o-_*c/n,a-_*g/n,h-_*c/n,a-_*b/x,h-_*v/x,l-_*b/x,u-_*v/x,l+_*T/A,u+_*f/A,s+_*T/A,o+_*f/A),!0)},tn.clipWithTransform=function(e,i,r,n,s,o,a,l){if(arguments.length<7)h._$li("err : @LDGL.clip()");else if(arguments[1]instanceof tm){var u=tn._$B,c=arguments;if(e.beginPath(),i){i._$PS(c[2],c[3],u),e.moveTo(u[0],u[1]);for(var d=4;d<c.length;d+=2)i._$PS(c[d],c[d+1],u),e.lineTo(u[0],u[1])}else for(e.moveTo(c[2],c[3]),d=4;d<c.length;d+=2)e.lineTo(c[d],c[d+1]);e.clip()}else h._$li("err : a[0] is _$6 LDTransform @LDGL.clip()")},tn.createCanvas=function(e,i){var r=document.createElement("canvas");return r.setAttribute("width",e),r.setAttribute("height",i),r||h._$li("err : "+r),r},tn.dumpValues=function(){for(var e="",i=0;i<arguments.length;i++)e+="["+i+"]= "+arguments[i].toFixed(3)+" , ";console.log(e)},ts.prototype._$F0=function(e){this._$TT=e._$_T(),this._$LT=e._$_T(),this._$FS=e._$_T(),this._$wL=e._$nP()},ts.prototype.getMinValue=function(){return this._$TT},ts.prototype.getMaxValue=function(){return this._$LT},ts.prototype.getDefaultValue=function(){return this._$FS},ts.prototype.getParamID=function(){return this._$wL},to.prototype._$yo=function(){return this._$AT&&!this._$JS},to.prototype._$hS=function(e){this._$AT=e},to.prototype._$GT=function(){return this._$e0},to.prototype._$l2=function(e){this._$IP=e},to.prototype.getPartsIndex=function(){return this._$IP},to.prototype._$x2=function(){return this._$JS},to.prototype._$Ib=function(e){this._$JS=e},to.prototype.getTotalScale=function(){return this.totalScale},to.prototype.setTotalScale_notForClient=function(e){this.totalScale=e},to.prototype.getInterpolatedOpacity=function(){return this._$7s},to.prototype.setInterpolatedOpacity=function(e){this._$7s=e},to.prototype.getTotalOpacity=function(e){return this.totalOpacity},to.prototype.setTotalOpacity=function(e){this.totalOpacity=e},ta._$2s="2.1.00_1",ta._$Kr=201001e3,ta._$sP=!0,ta._$so=!0,ta._$cb=!1,ta._$3T=!0,ta._$Ts=!0,ta._$fb=!0,ta._$ts=!0,ta.L2D_DEFORMER_EXTEND=!0,ta._$Wb=!1,ta._$yr=!1,ta._$Zs=!1,ta.L2D_NO_ERROR=0,ta._$i7=1e3,ta._$9s=1001,ta._$es=1100,ta._$r7=2e3,ta._$07=2001,ta._$b7=2002,ta._$H7=4e3,ta.L2D_COLOR_BLEND_MODE_MULT=0,ta.L2D_COLOR_BLEND_MODE_ADD=1,ta.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,ta._$6b=!0,ta._$cT=0,ta.clippingMaskBufferSize=256,ta.glContext=[],ta.frameBuffers=[],ta.fTexture=[],ta.IGNORE_CLIP=!1,ta.IGNORE_EXPAND=!1,ta.EXPAND_W=2,ta.USE_ADJUST_TRANSLATION=!0,ta.USE_CANVAS_TRANSFORM=!0,ta.USE_CACHED_POLYGON_IMAGE=!1,ta.DEBUG_DATA={},ta.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},ta.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ta.PROFILE_IOS_DEFAULT=ta.PROFILE_IOS_QUALITY,ta.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ta.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},ta.initProfile=function(){tw.isIOS()?ta.setupProfile(ta.PROFILE_IOS_DEFAULT):tw.isAndroid()?ta.setupProfile(ta.PROFILE_ANDROID):ta.setupProfile(ta.PROFILE_DESKTOP)},ta.setupProfile=function(e,i){if("number"==typeof e)switch(e){case 9901:e=ta.PROFILE_IOS_SPEED;break;case 9902:e=ta.PROFILE_IOS_QUALITY;break;case 9903:e=ta.PROFILE_IOS_DEFAULT;break;case 9904:e=ta.PROFILE_ANDROID;break;case 9905:e=ta.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+e)}for(var r in arguments.length<2&&(i=!0),i&&console.log("profile : "+e.PROFILE_NAME),e)ta[r]=e[r],i&&console.log("  ["+r+"] = "+e[r])},ta.init=function(){ta._$6b&&(console.log("Live2D %s",ta._$2s),ta._$6b=!1,ta.initProfile())},ta.getVersionStr=function(){return ta._$2s},ta.getVersionNo=function(){return ta._$Kr},ta._$sT=function(e){ta._$cT=e},ta.getError=function(){var e=ta._$cT;return ta._$cT=0,e},ta.dispose=function(){ta.glContext=[],ta.frameBuffers=[],ta.fTexture=[]},ta.setGL=function(e,i){ta.glContext[i||0]=e},ta.getGL=function(e){return ta.glContext[e]},ta.setClippingMaskBufferSize=function(e){ta.clippingMaskBufferSize=e},ta.getClippingMaskBufferSize=function(){return ta.clippingMaskBufferSize},ta.deleteBuffer=function(e){ta.getGL(e).deleteFramebuffer(ta.frameBuffers[e].framebuffer),delete ta.frameBuffers[e],delete ta.glContext[e]},th._$r2=function(e){return e<0?0:e>1?1:.5-.5*Math.cos(e*tA.PI_F)},tl._$fr=-1,tl.prototype.toString=function(){return this._$ib},tu.prototype=new z,tu._$42=0,tu._$Os=30,tu._$ms=0,tu._$ns=1,tu._$_s=2,tu._$gT=[],tu.prototype._$_S=function(e){this._$LP=e},tu.prototype.getTextureNo=function(){return this._$LP},tu.prototype._$ZL=function(){return this._$Qi},tu.prototype._$H2=function(){return this._$JP},tu.prototype.getNumPoints=function(){return this._$d0},tu.prototype.getType=function(){return z._$wb},tu.prototype._$B2=function(e,i,r){var n=null!=i._$hr?i._$hr:i._$Cr;switch(U._$do){default:case U._$Ms:throw Error("_$L _$ro ");case U._$Qs:for(var s=this._$d0-1;s>=0;--s)n[s*U._$No+4]=r}},tu.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},tu.prototype._$F0=function(e){z.prototype._$F0.call(this,e),this._$LP=e._$6L(),this._$d0=e._$6L(),this._$Yo=e._$6L();var i=e._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var r=3*this._$Yo-1;r>=0;--r)this._$BP[r]=i[r];if(this._$Eo=e._$nP(),this._$Qi=e._$nP(),e.getFormatVersion()>=G._$s7){if(this._$JP=e._$6L(),0!=this._$JP){if(1&this._$JP){var n=e._$6L();null==this._$5P&&(this._$5P={}),this._$5P._$Hb=parseInt(n)}0!=(this._$JP&tu._$Os)?this._$6s=(this._$JP&tu._$Os)>>1:this._$6s=tu._$ms,32&this._$JP&&(this.culling=!1)}}else this._$JP=0},tu.prototype.init=function(e){var i=new tc(this),r=this._$d0*U._$No,n=this._$32();switch(null!=i._$Cr&&(i._$Cr=null),i._$Cr=new Float32Array(r),null!=i._$hr&&(i._$hr=null),i._$hr=n?new Float32Array(r):null,U._$do){default:case U._$Ms:if(U._$Ls)for(var s=this._$d0-1;s>=0;--s){var o=s<<1;this._$Qi[o+1]=1-this._$Qi[o+1]}break;case U._$Qs:for(s=this._$d0-1;s>=0;--s){o=s<<1;var a=s*U._$No,h=this._$Qi[o],l=this._$Qi[o+1];i._$Cr[a]=h,i._$Cr[a+1]=l,i._$Cr[a+4]=0,n&&(i._$hr[a]=h,i._$hr[a+1]=l,i._$hr[a+4]=0)}}return i},tu.prototype._$Nr=function(e,i){if(this!=i._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(e)&&(z.prototype._$Nr.call(this,e,i),!i._$IS[0])){var r=tu._$gT;r[0]=!1,E._$Vr(e,this._$GS,r,this._$d0,this._$Eo,i._$Cr,U._$i2,U._$No)}},tu.prototype._$2b=function(e,i){try{this!=i._$GT()&&console.log("### assert!! ### ");var r=!1;if(i._$IS[0]&&(r=!0),!r&&(z.prototype._$2b.call(this,e),this._$32())){var n=this.getTargetBaseDataID();if(i._$8r==z._$ur&&(i._$8r=e.getBaseDataIndex(n)),i._$8r<0)ta._$so&&h._$li("_$L _$0P _$G :: %s",n);else{var s=e.getBaseData(i._$8r),o=e._$q2(i._$8r);null==s||o._$x2()?i._$AT=!1:(s._$nb(e,o,i._$Cr,i._$hr,this._$d0,U._$i2,U._$No),i._$AT=!0),i.baseOpacity=o.getTotalOpacity()}}}catch(e){throw e}},tu.prototype.draw=function(e,i,r){if(this!=r._$GT()&&console.log("### assert!! ### "),!r._$IS[0]){var n=this._$LP;n<0&&(n=1);var s=this.getOpacity(i,r)*r._$VS*r.baseOpacity,o=null!=r._$hr?r._$hr:r._$Cr;e.setClipBufPre_clipContextForDraw(r.clipBufPre_clipContext),e._$WP(this.culling),e._$Uo(n,3*this._$Yo,this._$BP,o,this._$Qi,s,this._$6s,r)}},tu.prototype.dump=function(){console.log("  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \n",this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var e=0;e<this._$BP.length;e++)console.log("%5d ,",this._$BP[e]);for(console.log("\n  _$5i _$30"),e=0;e<this._$Eo.length;e++){console.log("\n    _$30[%d] = ",e);for(var i=this._$Eo[e],r=0;r<i.length;r++)console.log("%6.2f, ",i[r])}console.log("\n")},tu.prototype._$72=function(e){return null==this._$5P?null:this._$5P[e]},tu.prototype.getIndexArray=function(){return this._$BP},tc.prototype=new tE,tc.prototype.getTransformedPoints=function(){return null!=this._$hr?this._$hr:this._$Cr},td.prototype._$HT=function(e){this.x=e.x,this.y=e.y},td.prototype._$HT=function(e,i){this.x=e,this.y=i},tf.prototype=new i,tf.loadModel=function(e){var r=new tf;return i._$62(r,e),r},tf.loadModel=function(e,r){var n=new tf(r||0);return i._$62(n,e),n},tf._$to=function(){return new tf},tf._$er=function(e){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(0==i.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var r=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],n=tf.loadModel(i._$3b()),s=0;s<r.length;s++){var o=new _$5(r[s]);if(0==o.exists())throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+o._$PL());n.setTexture(s,_$nL._$_o(e,o._$3b()))}return n},tf.prototype.setGL=function(e){ta.setGL(e)},tf.prototype.setTransform=function(e){this.drawParamWebGL.setTransform(e)},tf.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},tf.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},tf.prototype._$K2=function(){this.drawParamWebGL._$K2()},tf.prototype.setTexture=function(e,i){null==this.drawParamWebGL&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(e,i)},tf.prototype.setTexture=function(e,i){null==this.drawParamWebGL&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(e,i)},tf.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},tf.prototype._$Ds=function(e){this.drawParamWebGL._$Ds(e)},tf.prototype.getDrawParam=function(){return this.drawParamWebGL},tf.prototype.setMatrix=function(e){this.drawParamWebGL.setMatrix(e)},tf.prototype.setPremultipliedAlpha=function(e){this.drawParamWebGL.setPremultipliedAlpha(e)},tf.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},tf.prototype.setAnisotropy=function(e){this.drawParamWebGL.setAnisotropy(e)},tf.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()},tp.prototype._$tb=function(){return this.motions},tp.prototype.startMotion=function(e,i){for(var r=null,n=this.motions.length,s=0;s<n;++s)null!=(r=this.motions[s])&&(r._$qS(r._$w0.getFadeOut()),this._$eb&&h._$Ji("MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)\n",n,r._$sr));if(null==e)return -1;(r=new t_)._$w0=e,this.motions.push(r);var o=r._$sr;return this._$eb&&h._$Ji("MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)\n",n,o),o},tp.prototype.updateParam=function(e){try{for(var i=!1,r=0;r<this.motions.length;r++){var n=this.motions[r];if(null!=n){var s=n._$w0;null!=s?(s.updateParam(e,n),i=!0,n.isFinished()&&(this._$eb&&h._$Ji("MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)\n",this.motions.length-1,n._$sr),this.motions.splice(r,1),r--)):(this.motions=this.motions.splice(r,1),r--)}else this.motions.splice(r,1),r--}return i}catch(e){return h._$li(e),!0}},tp.prototype.isFinished=function(e){if(arguments.length>=1){for(var i,r=0;r<this.motions.length;r++)if(null!=(i=this.motions[r])&&i._$sr==e&&!i.isFinished())return!1;return!0}for(r=0;r<this.motions.length;r++)if(null!=(i=this.motions[r])){if(null!=i._$w0){if(!i.isFinished())return!1}else this.motions.splice(r,1),r--}else this.motions.splice(r,1),r--;return!0},tp.prototype.stopAllMotions=function(){for(var e=0;e<this.motions.length;e++){var i=this.motions[e];null!=i&&i._$w0,this.motions.splice(e,1),e--}},tp.prototype._$Zr=function(e){this._$eb=e},tp.prototype._$e=function(){console.log("-- _$R --\n");for(var e=0;e<this.motions.length;e++){var i=this.motions[e]._$w0;console.log("MotionQueueEnt[%d] :: %s\n",this.motions.length,i.toString())}},t_._$Gs=0,t_.prototype.isFinished=function(){return this._$9L},t_.prototype._$qS=function(e){var i=C.getUserTimeMSec()+e;(this._$Do<0||i<this._$Do)&&(this._$Do=i)},t_.prototype._$Bs=function(){return this._$sr},tm.prototype.setContext=function(e){var i=this.m;e.transform(i[0],i[1],i[3],i[4],i[6],i[7])},tm.prototype.toString=function(){for(var e="LDTransform { ",i=0;i<9;i++)e+=this.m[i].toFixed(2)+" ,";return e+" }"},tm.prototype.identity=function(){var e=this.m;e[0]=e[4]=e[8]=1,e[1]=e[2]=e[3]=e[5]=e[6]=e[7]=0},tm.prototype._$PS=function(e,i,r){null==r&&(r=[0,0]);var n=this.m;return r[0]=n[0]*e+n[3]*i+n[6],r[1]=n[1]*e+n[4]*i+n[7],r},tm.prototype._$P2=function(e){e||(e=new tm);var i=this.m,r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],h=i[5],l=i[6],u=i[7],c=i[8],d=r*a*c+n*h*l+s*o*u-r*h*u-s*a*l-n*o*c;if(0==d)return null;var f=1/d;return e.m[0]=f*(a*c-u*h),e.m[1]=f*(u*s-n*c),e.m[2]=f*(n*h-a*s),e.m[3]=f*(l*h-o*c),e.m[4]=f*(r*c-l*s),e.m[5]=f*(o*s-r*h),e.m[6]=f*(o*u-l*a),e.m[7]=f*(l*n-r*u),e.m[8]=f*(r*a-o*n),e},tm.prototype.transform=function(e,i,r){null==r&&(r=[0,0]);var n=this.m;return r[0]=n[0]*e+n[3]*i+n[6],r[1]=n[1]*e+n[4]*i+n[7],r},tm.prototype.translate=function(e,i){var r=this.m;r[6]=r[0]*e+r[3]*i+r[6],r[7]=r[1]*e+r[4]*i+r[7],r[8]=r[2]*e+r[5]*i+r[8]},tm.prototype.scale=function(e,i){var r=this.m;r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i},tm.prototype.shear=function(e,i){var r=this.m,n=r[0]+r[3]*i,s=r[1]+r[4]*i,o=r[2]+r[5]*i;r[3]=r[0]*e+r[3],r[4]=r[1]*e+r[4],r[5]=r[2]*e+r[5],r[0]=n,r[1]=s,r[2]=o},tm.prototype.rotate=function(e){var i=this.m,r=Math.cos(e),n=Math.sin(e),s=i[0]*r+i[3]*n,o=i[1]*r+i[4]*n,a=i[2]*r+i[5]*n;i[3]=-i[0]*n+i[3]*r,i[4]=-i[1]*n+i[4]*r,i[5]=-i[2]*n+i[5]*r,i[0]=s,i[1]=o,i[2]=a},tm.prototype.concatenate=function(e){var i=this.m,r=e.m,n=i[0]*r[0]+i[3]*r[1]+i[6]*r[2],s=i[1]*r[0]+i[4]*r[1]+i[7]*r[2],o=i[2]*r[0]+i[5]*r[1]+i[8]*r[2],a=i[0]*r[3]+i[3]*r[4]+i[6]*r[5],h=i[1]*r[3]+i[4]*r[4]+i[7]*r[5],l=i[2]*r[3]+i[5]*r[4]+i[8]*r[5],u=i[0]*r[6]+i[3]*r[7]+i[6]*r[8],c=i[1]*r[6]+i[4]*r[7]+i[7]*r[8],d=i[2]*r[6]+i[5]*r[7]+i[8]*r[8];m[0]=n,m[1]=s,m[2]=o,m[3]=a,m[4]=h,m[5]=l,m[6]=u,m[7]=c,m[8]=d},tg.prototype=new ti,tg._$eT=null,tg._$tP={},tg._$2o=function(){return null==tg._$eT&&(tg._$eT=tg.getID("DST_BASE")),tg._$eT},tg._$27=function(){tg._$tP.clear(),tg._$eT=null},tg.getID=function(e){var i=tg._$tP[e];return null==i&&(i=new tg(e),tg._$tP[e]=i),i},tg.prototype._$3s=function(){return new tg},tv.prototype=new P,tv._$9r=function(e){return new Float32Array(e)},tv._$vb=function(e){return new Int16Array(e)},tv._$cr=function(e,i){return null==e||e._$yL()<i.length?(e=tv._$9r(2*i.length)).put(i):(e.clear(),e.put(i)),e._$oT(0),e},tv._$mb=function(e,i){return null==e||e._$yL()<i.length?(e=tv._$vb(2*i.length)).put(i):(e.clear(),e.put(i)),e._$oT(0),e},tv._$Hs=function(){return this._$Gr},tv._$as=function(e){this._$Gr=e},tv.prototype.getGL=function(){return this.gl},tv.prototype.setGL=function(e){this.gl=e},tv.prototype.setTransform=function(e){this.transform=e},tv.prototype._$ZT=function(){var e=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=e.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.DEPTH_TEST),e.frontFace(e.CW),e.enable(e.BLEND),e.colorMask(1,1,1,1),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},tv.prototype._$Uo=function(e,i,r,n,s,o,a,h){if(!(o<.01&&null==this.clipBufPre_clipContextMask)){o>.9&&ta.EXPAND_W;var l=this.gl;if(null==this.gl)throw Error("gl is null");var u,c,d,f,p=1*this._$C0*o,_=1*this._$tT*o,g=1*this._$WL*o,v=this._$lT*o;if(null!=this.clipBufPre_clipContextMask){l.frontFace(l.CCW),l.useProgram(this.shaderProgram),this._$vS=ty(l,this._$vS,n),this._$no=tb(l,this._$no,r),l.enableVertexAttribArray(this.a_position_Loc),l.vertexAttribPointer(this.a_position_Loc,2,l.FLOAT,!1,0,0),this._$NT=ty(l,this._$NT,s),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this.textures[e]),l.uniform1i(this.s_texture0_Loc,1),l.enableVertexAttribArray(this.a_texCoord_Loc),l.vertexAttribPointer(this.a_texCoord_Loc,2,l.FLOAT,!1,0,0),l.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var y=this.getClipBufPre_clipContextMask().layoutChannelNo,b=this.getChannelFlagAsColor(y);l.uniform4f(this.u_channelFlag,b.r,b.g,b.b,b.a);var x=this.getClipBufPre_clipContextMask().layoutBounds;l.uniform4f(this.u_baseColor_Loc,2*x.x-1,2*x.y-1,2*x._$EL()-1,2*x._$5T()-1),l.uniform1i(this.u_maskFlag_Loc,!0)}else null!=this.getClipBufPre_clipContextDraw()?(l.useProgram(this.shaderProgramOff),this._$vS=ty(l,this._$vS,n),this._$no=tb(l,this._$no,r),l.enableVertexAttribArray(this.a_position_Loc_Off),l.vertexAttribPointer(this.a_position_Loc_Off,2,l.FLOAT,!1,0,0),this._$NT=ty(l,this._$NT,s),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this.textures[e]),l.uniform1i(this.s_texture0_Loc_Off,1),l.enableVertexAttribArray(this.a_texCoord_Loc_Off),l.vertexAttribPointer(this.a_texCoord_Loc_Off,2,l.FLOAT,!1,0,0),l.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),l.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),l.activeTexture(l.TEXTURE2),l.bindTexture(l.TEXTURE_2D,ta.fTexture[this.glno]),l.uniform1i(this.s_texture1_Loc_Off,2),y=this.getClipBufPre_clipContextDraw().layoutChannelNo,b=this.getChannelFlagAsColor(y),l.uniform4f(this.u_channelFlag_Loc_Off,b.r,b.g,b.b,b.a),l.uniform4f(this.u_baseColor_Loc_Off,p,_,g,v)):(l.useProgram(this.shaderProgram),this._$vS=ty(l,this._$vS,n),this._$no=tb(l,this._$no,r),l.enableVertexAttribArray(this.a_position_Loc),l.vertexAttribPointer(this.a_position_Loc,2,l.FLOAT,!1,0,0),this._$NT=ty(l,this._$NT,s),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this.textures[e]),l.uniform1i(this.s_texture0_Loc,1),l.enableVertexAttribArray(this.a_texCoord_Loc),l.vertexAttribPointer(this.a_texCoord_Loc,2,l.FLOAT,!1,0,0),l.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),l.uniform4f(this.u_baseColor_Loc,p,_,g,v),l.uniform1i(this.u_maskFlag_Loc,!1));if(this.culling?this.gl.enable(l.CULL_FACE):this.gl.disable(l.CULL_FACE),this.gl.enable(l.BLEND),null!=this.clipBufPre_clipContextMask)u=l.ONE,c=l.ONE_MINUS_SRC_ALPHA,d=l.ONE,f=l.ONE_MINUS_SRC_ALPHA;else switch(a){case tu._$ms:u=l.ONE,c=l.ONE_MINUS_SRC_ALPHA,d=l.ONE,f=l.ONE_MINUS_SRC_ALPHA;break;case tu._$ns:u=l.ONE,c=l.ONE,d=l.ZERO,f=l.ONE;break;case tu._$_s:u=l.DST_COLOR,c=l.ONE_MINUS_SRC_ALPHA,d=l.ZERO,f=l.ONE}l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(u,c,d,f),this.anisotropyExt&&l.texParameteri(l.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var T=r.length;l.drawElements(l.TRIANGLES,T,l.UNSIGNED_SHORT,0),l.bindTexture(l.TEXTURE_2D,null)}},tv.prototype._$Rs=function(){throw Error("_$Rs")},tv.prototype._$Ds=function(e){throw Error("_$Ds")},tv.prototype._$K2=function(){for(var e=0;e<this.textures.length;e++)0!=this.textures[e]&&(this.gl._$K2(1,this.textures,e),this.textures[e]=null)},tv.prototype.setTexture=function(e,i){this.textures[e]=i},tv.prototype.initShader=function(){var e=this.gl;this.loadShaders2(),this.a_position_Loc=e.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=e.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=e.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=e.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=e.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=e.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=e.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=e.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=e.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=e.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=e.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=e.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=e.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=e.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=e.getUniformLocation(this.shaderProgramOff,"u_baseColor")},tv.prototype.disposeShader=function(){var e=this.gl;this.shaderProgram&&(e.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(e.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},tv.prototype.compileShader=function(e,i){var r=this.gl,n=r.createShader(e);if(null==n)return h._$Ji("_$L0 to create shader"),null;if(r.shaderSource(n,i),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){var s=r.getShaderInfoLog(n);return h._$Ji("_$L0 to compile shader : "+s),r.deleteShader(n),null}return n},tv.prototype.loadShaders2=function(){var e=this.gl;if(this.shaderProgram=e.createProgram(),!this.shaderProgram||(this.shaderProgramOff=e.createProgram(),!this.shaderProgramOff))return!1;if(this.vertShader=this.compileShader(e.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}"),!this.vertShader)return h._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(e.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}"),!this.vertShaderOff)return h._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(e.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}"),!this.fragShader)return h._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(e.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}"),!this.fragShaderOff)return h._$Ji("OffFragment shader compile _$li!"),!1;if(e.attachShader(this.shaderProgram,this.vertShader),e.attachShader(this.shaderProgram,this.fragShader),e.attachShader(this.shaderProgramOff,this.vertShaderOff),e.attachShader(this.shaderProgramOff,this.fragShaderOff),e.linkProgram(this.shaderProgram),e.linkProgram(this.shaderProgramOff),!e.getProgramParameter(this.shaderProgram,e.LINK_STATUS)){var i=e.getProgramInfoLog(this.shaderProgram);return h._$Ji("_$L0 to link program: "+i),this.vertShader&&(e.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(e.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(e.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(e.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(e.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(e.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},tv.prototype.createFramebuffer=function(){var e=this.gl,i=ta.clippingMaskBufferSize,r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r);var n=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,n),e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n);var s=e.createTexture();return e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),ta.fTexture[this.glno]=s,{framebuffer:r,renderbuffer:n,texture:ta.fTexture[this.glno]}},tx.prototype._$fP=function(){var e,i,r,n=this._$ST();if(128&n){if(128&(e=this._$ST())){if(128&(i=this._$ST())){if(128&(r=this._$ST()))throw new tl("_$L _$0P  _");return(127&n)<<21|(127&e)<<14|(127&i)<<7|255&r}return(127&n)<<14|(127&e)<<7|255&i}return(127&n)<<7|127&e}return 255&n},tx.prototype.getFormatVersion=function(){return this._$S2},tx.prototype._$gr=function(e){this._$S2=e},tx.prototype._$3L=function(){return this._$fP()},tx.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},tx.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},tx.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},tx.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},tx.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},tx.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new tl("_$L _$q read long")},tx.prototype._$po=function(){return this._$zT(),0!=this._$T.getInt8(this._$F++)};var tT=!0;function tA(){}function tE(i){e||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=i)}function tw(){}tx.prototype._$bT=function(){this._$zT();var e=this._$3L(),i=null;if(tT)try{var r=new ArrayBuffer(2*e);i=new Uint16Array(r);for(var n=0;n<e;++n)i[n]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,i)}catch(e){tT=!1}try{var s=[];if(null==i)for(n=0;n<e;++n)s[n]=this._$T.getUint8(this._$F++);else for(n=0;n<e;++n)s[n]=i[n];return String.fromCharCode.apply(null,s)}catch(e){console.log("read utf8 / _$rT _$L0 !! : "+e)}},tx.prototype._$cS=function(){this._$zT();for(var e=this._$3L(),i=new Int32Array(e),r=0;r<e;r++)i[r]=this._$T.getInt32(this._$F),this._$F+=4;return i},tx.prototype._$Tb=function(){this._$zT();for(var e=this._$3L(),i=new Float32Array(e),r=0;r<e;r++)i[r]=this._$T.getFloat32(this._$F),this._$F+=4;return i},tx.prototype._$5b=function(){this._$zT();for(var e=this._$3L(),i=new Float64Array(e),r=0;r<e;r++)i[r]=this._$T.getFloat64(this._$F),this._$F+=8;return i},tx.prototype._$nP=function(){return this._$Jb(-1)},tx.prototype._$Jb=function(e){if(this._$zT(),e<0&&(e=this._$3L()),e==G._$7P){var i=this._$6L();if(0<=i&&i<this._$Ko.length)return this._$Ko[i];throw new tl("_$sL _$4i @_$m0")}var r=this._$4b(e);return this._$Ko.push(r),r},tx.prototype._$4b=function(e){if(0==e)return null;if(50==e){var i=this._$bT();return L.getID(i)}if(51==e)return i=this._$bT(),tg.getID(i);if(134==e)return i=this._$bT(),c.getID(i);if(60==e)return i=this._$bT(),d.getID(i);if(e>=48){var r=G._$9o(e);return null!=r?(r._$F0(this),r):null}switch(e){case 1:return this._$bT();case 10:return this._$6L(),new o;case 11:return new A(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new A(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new w(this._$mP(),this._$mP());case 14:return new w(this._$_T(),this._$_T());case 15:for(var n=this._$3L(),s=Array(n),a=0;a<n;a++)s[a]=this._$nP();return s;case 17:return new F(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());case 21:return new u(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new td(this._$6L(),this._$6L());case 23:throw Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new tl("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+e);default:throw new tl("_$6 _$q : _$nP() NO _$i : "+e)}},tx.prototype._$8L=function(){return 0==this._$hL?this._$v0=this._$ST():8==this._$hL&&(this._$v0=this._$ST(),this._$hL=0),1==(this._$v0>>7-this._$hL++&1)},tx.prototype._$zT=function(){0!=this._$hL&&(this._$hL=0)},tA._$2S=Math.PI/180,tA._$bS=Math.PI/180,tA._$wS=180/Math.PI,tA._$NS=180/Math.PI,tA.PI_F=Math.PI,tA._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],tA._$92=function(e,i){var r=Math.atan2(e[1],e[0]),n=Math.atan2(i[1],i[0]);return tA._$tS(r,n)},tA._$tS=function(e,i){for(var r=e-i;r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r},tA._$9=function(e){return Math.sin(e)},tA.fcos=function(e){return Math.cos(e)},tE.prototype._$u2=function(){return this._$IS[0]},tE.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},tE.prototype._$GT=function(){return this._$e0},tw._$W2=0,tw.SYSTEM_INFO=null,tw.USER_AGENT=navigator.userAgent,tw.isIPhone=function(){return tw.SYSTEM_INFO||tw.setup(),tw.SYSTEM_INFO._isIPhone},tw.isIOS=function(){return tw.SYSTEM_INFO||tw.setup(),tw.SYSTEM_INFO._isIPhone||tw.SYSTEM_INFO._isIPad},tw.isAndroid=function(){return tw.SYSTEM_INFO||tw.setup(),tw.SYSTEM_INFO._isAndroid},tw.getOSVersion=function(){return tw.SYSTEM_INFO||tw.setup(),tw.SYSTEM_INFO.version},tw.getOS=function(){return tw.SYSTEM_INFO||tw.setup(),tw.SYSTEM_INFO._isIPhone||tw.SYSTEM_INFO._isIPad?"iOS":tw.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},tw.setup=function(){var e,i=tw.USER_AGENT;function r(e,i){for(var r=e.substring(i).split(/[ _,;\.]/),n=0,s=0;s<=2&&!isNaN(r[s]);s++){var o=parseInt(r[s]);if(o<0||o>999){h._$li("err : "+o+" @UtHtml5.setup()"),n=0;break}n+=o*Math.pow(1e3,2-s)}return n}var n=tw.SYSTEM_INFO={userAgent:i};if((e=i.indexOf("iPhone OS "))>=0)n.os="iPhone",n._isIPhone=!0,n.version=r(i,e+10);else if((e=i.indexOf("iPad"))>=0){if((e=i.indexOf("CPU OS"))<0)return void h._$li(" err : "+i+" @UtHtml5.setup()");n.os="iPad",n._isIPad=!0,n.version=r(i,e+7)}else(e=i.indexOf("Android"))>=0?(n.os="Android",n._isAndroid=!0,n.version=r(i,e+8)):(n.os="-",n.version=-1)},window.UtSystem=C,window.UtDebug=h,window.LDTransform=tm,window.LDGL=tn,window.Live2D=ta,window.Live2DModelWebGL=tf,window.Live2DModelJS=q,window.Live2DMotion=Z,window.MotionQueueManager=tp,window.PhysicsHair=p,window.AMotion=a,window.PartsDataID=c,window.DrawDataID=L,window.BaseDataID=tg,window.ParamID=d,ta.init(),e=!1}(),(tJ=ev||(ev={}))[tJ.WEBGL_LEGACY=0]="WEBGL_LEGACY",tJ[tJ.WEBGL=1]="WEBGL",tJ[tJ.WEBGL2=2]="WEBGL2",(tK=ey||(ey={}))[tK.UNKNOWN=0]="UNKNOWN",tK[tK.WEBGL=1]="WEBGL",tK[tK.CANVAS=2]="CANVAS",(t0=eb||(eb={}))[t0.COLOR=16384]="COLOR",t0[t0.DEPTH=256]="DEPTH",t0[t0.STENCIL=1024]="STENCIL",(t2=ex||(ex={}))[t2.NORMAL=0]="NORMAL",t2[t2.ADD=1]="ADD",t2[t2.MULTIPLY=2]="MULTIPLY",t2[t2.SCREEN=3]="SCREEN",t2[t2.OVERLAY=4]="OVERLAY",t2[t2.DARKEN=5]="DARKEN",t2[t2.LIGHTEN=6]="LIGHTEN",t2[t2.COLOR_DODGE=7]="COLOR_DODGE",t2[t2.COLOR_BURN=8]="COLOR_BURN",t2[t2.HARD_LIGHT=9]="HARD_LIGHT",t2[t2.SOFT_LIGHT=10]="SOFT_LIGHT",t2[t2.DIFFERENCE=11]="DIFFERENCE",t2[t2.EXCLUSION=12]="EXCLUSION",t2[t2.HUE=13]="HUE",t2[t2.SATURATION=14]="SATURATION",t2[t2.COLOR=15]="COLOR",t2[t2.LUMINOSITY=16]="LUMINOSITY",t2[t2.NORMAL_NPM=17]="NORMAL_NPM",t2[t2.ADD_NPM=18]="ADD_NPM",t2[t2.SCREEN_NPM=19]="SCREEN_NPM",t2[t2.NONE=20]="NONE",t2[t2.SRC_OVER=0]="SRC_OVER",t2[t2.SRC_IN=21]="SRC_IN",t2[t2.SRC_OUT=22]="SRC_OUT",t2[t2.SRC_ATOP=23]="SRC_ATOP",t2[t2.DST_OVER=24]="DST_OVER",t2[t2.DST_IN=25]="DST_IN",t2[t2.DST_OUT=26]="DST_OUT",t2[t2.DST_ATOP=27]="DST_ATOP",t2[t2.ERASE=26]="ERASE",t2[t2.SUBTRACT=28]="SUBTRACT",t2[t2.XOR=29]="XOR",(t1=eT||(eT={}))[t1.POINTS=0]="POINTS",t1[t1.LINES=1]="LINES",t1[t1.LINE_LOOP=2]="LINE_LOOP",t1[t1.LINE_STRIP=3]="LINE_STRIP",t1[t1.TRIANGLES=4]="TRIANGLES",t1[t1.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t1[t1.TRIANGLE_FAN=6]="TRIANGLE_FAN",(t4=eA||(eA={}))[t4.RGBA=6408]="RGBA",t4[t4.RGB=6407]="RGB",t4[t4.RG=33319]="RG",t4[t4.RED=6403]="RED",t4[t4.RGBA_INTEGER=36249]="RGBA_INTEGER",t4[t4.RGB_INTEGER=36248]="RGB_INTEGER",t4[t4.RG_INTEGER=33320]="RG_INTEGER",t4[t4.RED_INTEGER=36244]="RED_INTEGER",t4[t4.ALPHA=6406]="ALPHA",t4[t4.LUMINANCE=6409]="LUMINANCE",t4[t4.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t4[t4.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t4[t4.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(t3=eE||(eE={}))[t3.TEXTURE_2D=3553]="TEXTURE_2D",t3[t3.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t3[t3.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t3[t3.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t3[t3.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t3[t3.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t3[t3.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t3[t3.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t3[t3.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(t6=ew||(ew={}))[t6.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t6[t6.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t6[t6.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t6[t6.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t6[t6.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t6[t6.UNSIGNED_INT=5125]="UNSIGNED_INT",t6[t6.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t6[t6.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t6[t6.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t6[t6.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t6[t6.BYTE=5120]="BYTE",t6[t6.SHORT=5122]="SHORT",t6[t6.INT=5124]="INT",t6[t6.FLOAT=5126]="FLOAT",t6[t6.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t6[t6.HALF_FLOAT=36193]="HALF_FLOAT",(t8=eS||(eS={}))[t8.FLOAT=0]="FLOAT",t8[t8.INT=1]="INT",t8[t8.UINT=2]="UINT",(t5=eP||(eP={}))[t5.NEAREST=0]="NEAREST",t5[t5.LINEAR=1]="LINEAR",(t7=eM||(eM={}))[t7.CLAMP=33071]="CLAMP",t7[t7.REPEAT=10497]="REPEAT",t7[t7.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(t9=eI||(eI={}))[t9.OFF=0]="OFF",t9[t9.POW2=1]="POW2",t9[t9.ON=2]="ON",t9[t9.ON_MANUAL=3]="ON_MANUAL",(et=eC||(eC={}))[et.NPM=0]="NPM",et[et.UNPACK=1]="UNPACK",et[et.PMA=2]="PMA",et[et.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",et[et.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",et[et.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",et[et.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(ee=eR||(eR={}))[ee.NO=0]="NO",ee[ee.YES=1]="YES",ee[ee.AUTO=2]="AUTO",ee[ee.BLEND=0]="BLEND",ee[ee.CLEAR=1]="CLEAR",ee[ee.BLIT=2]="BLIT",(ei=eO||(eO={}))[ei.AUTO=0]="AUTO",ei[ei.MANUAL=1]="MANUAL",(er=eD||(eD={})).LOW="lowp",er.MEDIUM="mediump",er.HIGH="highp",(en=e$||(e$={}))[en.NONE=0]="NONE",en[en.SCISSOR=1]="SCISSOR",en[en.STENCIL=2]="STENCIL",en[en.SPRITE=3]="SPRITE",en[en.COLOR=4]="COLOR",(es=eL||(eL={}))[es.RED=1]="RED",es[es.GREEN=2]="GREEN",es[es.BLUE=4]="BLUE",es[es.ALPHA=8]="ALPHA",(eo=eF||(eF={}))[eo.NONE=0]="NONE",eo[eo.LOW=2]="LOW",eo[eo.MEDIUM=4]="MEDIUM",eo[eo.HIGH=8]="HIGH",(ea=eB||(eB={}))[ea.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ea[ea.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ea[ea.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var E=/iPhone/i,w=/iPod/i,S=/iPad/i,P=/\biOS-universal(?:.+)Mac\b/i,M=/\bAndroid(?:.+)Mobile\b/i,I=/Android/i,C=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,R=/Silk/i,O=/Windows Phone/i,D=/\bWindows(?:.+)ARM\b/i,$=/BlackBerry/i,L=/BB10/i,F=/Opera Mini/i,B=/\b(CriOS|Chrome)(?:.+)Mobile/i,k=/Mobile(?:.+)Firefox\b/i,N=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream},U=(el={userAgent:"",platform:"",maxTouchPoints:0},(eh=globalThis.navigator)||"undefined"==typeof navigator?"string"==typeof eh?el.userAgent=eh:eh&&eh.userAgent&&(el={userAgent:eh.userAgent,platform:eh.platform,maxTouchPoints:eh.maxTouchPoints||0}):el={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0},void 0!==(ec=(eu=el.userAgent).split("[FBAN"))[1]&&(eu=ec[0]),void 0!==(ec=eu.split("Twitter"))[1]&&(eu=ec[0]),(ep={apple:{phone:(ed=eu,ef=function(e){return e.test(ed)})(E)&&!ef(O),ipod:ef(w),tablet:!ef(E)&&(ef(S)||N(el))&&!ef(O),universal:ef(P),device:(ef(E)||ef(w)||ef(S)||ef(P)||N(el))&&!ef(O)},amazon:{phone:ef(C),tablet:!ef(C)&&ef(R),device:ef(C)||ef(R)},android:{phone:!ef(O)&&ef(C)||!ef(O)&&ef(M),tablet:!ef(O)&&!ef(C)&&!ef(M)&&(ef(R)||ef(I)),device:!ef(O)&&(ef(C)||ef(R)||ef(M)||ef(I))||ef(/\bokhttp\b/i)},windows:{phone:ef(O),tablet:ef(D),device:ef(O)||ef(D)},other:{blackberry:ef($),blackberry10:ef(L),opera:ef(F),firefox:ef(k),chrome:ef(B),device:ef($)||ef(L)||ef(F)||ef(k)||ef(B)},any:!1,phone:!1,tablet:!1}).any=ep.apple.device||ep.android.device||ep.windows.device||ep.other.device,ep.phone=ep.apple.phone||ep.android.phone||ep.windows.phone,ep.tablet=ep.apple.tablet||ep.android.tablet||ep.windows.tablet,ep),G={ADAPTER:{createCanvas:function(e,i){var r=document.createElement("canvas");return r.width=e,r.height=i,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return null!==(e=document.baseURI)&&void 0!==e?e:window.location.href},fetch:function(e,i){return fetch(e,i)}},MIPMAP_TEXTURES:eI.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:eF.NONE,SPRITE_MAX_TEXTURES:(em=!0,(U.tablet||U.phone)&&(U.apple.device&&(e_=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&11>parseInt(e_[1],10)&&(em=!1),U.android.device&&(e_=navigator.userAgent.match(/Android\s([0-9.]*)/))&&7>parseInt(e_[1],10)&&(em=!1)),em?32:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:eO.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:eM.CLAMP,SCALE_MODE:eP.LINEAR,PRECISION_VERTEX:eD.HIGH,PRECISION_FRAGMENT:U.apple.device?eD.HIGH:eD.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!U.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};function X(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V={exports:{}};!function(e){var i=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,i,r){this.fn=e,this.context=i,this.once=r||!1}function o(e,i,n,o,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var h=new s(n,o||e,a),l=r?r+i:i;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],h]:e._events[l].push(h):(e._events[l]=h,e._eventsCount++),e}function a(e,i){0==--e._eventsCount?e._events=new n:delete e._events[i]}function h(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),h.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)i.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},h.prototype.listeners=function(e){var i=r?r+e:e,n=this._events[i];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=Array(o);s<o;s++)a[s]=n[s].fn;return a},h.prototype.listenerCount=function(e){var i=r?r+e:e,n=this._events[i];return n?n.fn?1:n.length:0},h.prototype.emit=function(e,i,n,s,o,a){var h=r?r+e:e;if(!this._events[h])return!1;var l,u,c=this._events[h],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,i),!0;case 3:return c.fn.call(c.context,i,n),!0;case 4:return c.fn.call(c.context,i,n,s),!0;case 5:return c.fn.call(c.context,i,n,s,o),!0;case 6:return c.fn.call(c.context,i,n,s,o,a),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,i);break;case 3:c[u].fn.call(c[u].context,i,n);break;case 4:c[u].fn.call(c[u].context,i,n,s);break;default:if(!l)for(f=1,l=Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},h.prototype.on=function(e,i,r){return o(this,e,i,r,!1)},h.prototype.once=function(e,i,r){return o(this,e,i,r,!0)},h.prototype.removeListener=function(e,i,n,s){var o=r?r+e:e;if(!this._events[o])return this;if(!i)return a(this,o),this;var h=this._events[o];if(h.fn)h.fn!==i||s&&!h.once||n&&h.context!==n||a(this,o);else{for(var l=0,u=[],c=h.length;l<c;l++)(h[l].fn!==i||s&&!h[l].once||n&&h[l].context!==n)&&u.push(h[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},h.prototype.removeAllListeners=function(e){var i;return e?(i=r?r+e:e,this._events[i]&&a(this,i)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,e.exports=h}(V);var H=X(V.exports),j={exports:{}};function Y(e,i,r){r=r||2;var n,s,o,a,h,l,u,c=i&&i.length,d=c?i[0]*r:e.length,f=z(e,0,d,r,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(e,i,r,n){var s,o,a,h=[];for(s=0,o=i.length;s<o;s++)(a=z(e,i[s]*n,s<o-1?i[s+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),h.push(function(e){var i=e,r=e;do(i.x<r.x||i.x===r.x&&i.y<r.y)&&(r=i),i=i.next;while(i!==e);return r}(a));for(h.sort(q),s=0;s<h.length;s++)r=function(e,i){var r=function(e,i){var r,n,s,o=i,a=e.x,h=e.y,l=-1/0;do{if(h<=o.y&&h>=o.next.y&&o.next.y!==o.y){var u=o.x+(h-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(u<=a&&u>l&&(l=u,s=o.x<o.next.x?o:o.next,u===a))return s}o=o.next}while(o!==i);if(!s)return null;var c,d=s,f=s.x,p=s.y,_=1/0;o=s;do a>=o.x&&o.x>=f&&a!==o.x&&Q(h<p?a:l,h,f,p,h<p?l:a,h,o.x,o.y)&&(c=Math.abs(h-o.y)/(a-o.x),tr(o,e)&&(c<_||c===_&&(o.x>s.x||o.x===s.x&&(r=s,n=o,0>J(r.prev,r,n.prev)&&0>J(n.next,r,r.next))))&&(s=o,_=c)),o=o.next;while(o!==d);return s}(e,i);if(!r)return i;var n=tn(r,e);return W(n,n.next),W(r,r.next)}(h[s],r);return r}(e,i,f,r)),e.length>80*r){n=o=e[0],s=a=e[1];for(var _=r;_<d;_+=r)(h=e[_])<n&&(n=h),(l=e[_+1])<s&&(s=l),h>o&&(o=h),l>a&&(a=l);u=0!==(u=Math.max(o-n,a-s))?32767/u:0}return function e(i,r,n,s,o,a,h){if(i){!h&&a&&function(e,i,r,n){var s=e;do 0===s.z&&(s.z=Z(s.x,s.y,i,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var i,r,n,s,o,a,h,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,h=0,i=0;i<u&&(h++,n=n.nextZ);i++);for(l=u;h>0||l>0&&n;)0!==h&&(0===l||!n||r.z<=n.z)?(s=r,r=r.nextZ,h--):(s=n,n=n.nextZ,l--),o?o.nextZ=s:e=s,s.prevZ=o,o=s;r=n}o.nextZ=null,u*=2}while(a>1)}(s)}(i,s,o,a);for(var l,u,c=i;i.prev!==i.next;)if(l=i.prev,u=i.next,a?function(e,i,r,n){var s=e.prev,o=e.next;if(J(s,e,o)>=0)return!1;for(var a=s.x,h=e.x,l=o.x,u=s.y,c=e.y,d=o.y,f=a<h?a<l?a:l:h<l?h:l,p=u<c?u<d?u:d:c<d?c:d,_=a>h?a>l?a:l:h>l?h:l,g=u>c?u>d?u:d:c>d?c:d,v=Z(f,p,i,r,n),y=Z(_,g,i,r,n),b=e.prevZ,x=e.nextZ;b&&b.z>=v&&x&&x.z<=y;){if(b.x>=f&&b.x<=_&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&Q(a,u,h,c,l,d,b.x,b.y)&&J(b.prev,b,b.next)>=0||(b=b.prevZ,x.x>=f&&x.x<=_&&x.y>=p&&x.y<=g&&x!==s&&x!==o&&Q(a,u,h,c,l,d,x.x,x.y)&&J(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=f&&b.x<=_&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&Q(a,u,h,c,l,d,b.x,b.y)&&J(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=_&&x.y>=p&&x.y<=g&&x!==s&&x!==o&&Q(a,u,h,c,l,d,x.x,x.y)&&J(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}(i,s,o,a):function(e){var i=e.prev,r=e.next;if(J(i,e,r)>=0)return!1;for(var n=i.x,s=e.x,o=r.x,a=i.y,h=e.y,l=r.y,u=n<s?n<o?n:o:s<o?s:o,c=a<h?a<l?a:l:h<l?h:l,d=n>s?n>o?n:o:s>o?s:o,f=a>h?a>l?a:l:h>l?h:l,p=r.next;p!==i;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&Q(n,a,s,h,o,l,p.x,p.y)&&J(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}(i))r.push(l.i/n|0),r.push(i.i/n|0),r.push(u.i/n|0),to(i),i=u.next,c=u.next;else if((i=u)===c){h?1===h?e(i=function(e,i,r){var n=e;do{var s=n.prev,o=n.next.next;!K(s,o)&&tt(s,n,n.next,o)&&tr(s,o)&&tr(o,s)&&(i.push(s.i/r|0),i.push(n.i/r|0),i.push(o.i/r|0),to(n),to(n.next),n=e=o),n=n.next}while(n!==e);return W(n)}(W(i),r,n),r,n,s,o,a,2):2===h&&function(i,r,n,s,o,a){var h=i;do{for(var l,u,c=h.next.next;c!==h.prev;){if(h.i!==c.i&&(l=h,u=c,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,i){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==i.i&&r.next.i!==i.i&&tt(r,r.next,e,i))return!0;r=r.next}while(r!==e);return!1}(l,u)&&(tr(l,u)&&tr(u,l)&&function(e,i){var r=e,n=!1,s=(e.x+i.x)/2,o=(e.y+i.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&s<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}(l,u)&&(J(l.prev,l,u.prev)||J(l,u.prev,u))||K(l,u)&&J(l.prev,l,l.next)>0&&J(u.prev,u,u.next)>0))){var d=tn(h,c);return h=W(h,h.next),d=W(d,d.next),e(h,r,n,s,o,a,0),void e(d,r,n,s,o,a,0)}c=c.next}h=h.next}while(h!==i)}(i,r,n,s,o,a):e(W(i),r,n,s,o,a,1);break}}}(f,p,r,n,s,u,0),p}function z(e,i,r,n,s){var o,a;if(s===th(e,i,r,n)>0)for(o=i;o<r;o+=n)a=ts(o,e[o],e[o+1],a);else for(o=r-n;o>=i;o-=n)a=ts(o,e[o],e[o+1],a);return a&&K(a,a.next)&&(to(a),a=a.next),a}function W(e,i){if(!e)return e;i||(i=e);var r,n=e;do if(r=!1,n.steiner||!K(n,n.next)&&0!==J(n.prev,n,n.next))n=n.next;else{if(to(n),(n=i=n.prev)===n.next)break;r=!0}while(r||n!==i);return i}function q(e,i){return e.x-i.x}function Z(e,i,r,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-n)*s|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Q(e,i,r,n,s,o,a,h){return(s-a)*(i-h)>=(e-a)*(o-h)&&(e-a)*(n-h)>=(r-a)*(i-h)&&(r-a)*(o-h)>=(s-a)*(n-h)}function J(e,i,r){return(i.y-e.y)*(r.x-i.x)-(i.x-e.x)*(r.y-i.y)}function K(e,i){return e.x===i.x&&e.y===i.y}function tt(e,i,r,n){var s=ti(J(e,i,r)),o=ti(J(e,i,n)),a=ti(J(r,n,e)),h=ti(J(r,n,i));return s!==o&&a!==h||!(0!==s||!te(e,r,i))||!(0!==o||!te(e,n,i))||!(0!==a||!te(r,e,n))||!(0!==h||!te(r,i,n))}function te(e,i,r){return i.x<=Math.max(e.x,r.x)&&i.x>=Math.min(e.x,r.x)&&i.y<=Math.max(e.y,r.y)&&i.y>=Math.min(e.y,r.y)}function ti(e){return e>0?1:e<0?-1:0}function tr(e,i){return 0>J(e.prev,e,e.next)?J(e,i,e.next)>=0&&J(e,e.prev,i)>=0:0>J(e,i,e.prev)||0>J(e,e.next,i)}function tn(e,i){var r=new ta(e.i,e.x,e.y),n=new ta(i.i,i.x,i.y),s=e.next,o=i.prev;return e.next=i,i.prev=e,r.next=s,s.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function ts(e,i,r,n){var s=new ta(e,i,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function to(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ta(e,i,r){this.i=e,this.x=i,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function th(e,i,r,n){for(var s=0,o=i,a=r-n;o<r;o+=n)s+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return s}j.exports=Y,j.exports.default=Y,Y.deviation=function(e,i,r,n){var s=i&&i.length,o=s?i[0]*r:e.length,a=Math.abs(th(e,0,o,r));if(s)for(var h=0,l=i.length;h<l;h++){var u=i[h]*r,c=h<l-1?i[h+1]*r:e.length;a-=Math.abs(th(e,u,c,r))}var d=0;for(h=0;h<n.length;h+=3){var f=n[h]*r,p=n[h+1]*r,_=n[h+2]*r;d+=Math.abs((e[f]-e[_])*(e[p+1]-e[f+1])-(e[f]-e[p])*(e[_+1]-e[f+1]))}return 0===a&&0===d?0:Math.abs((d-a)/a)},Y.flatten=function(e){for(var i=e[0][0].length,r={vertices:[],holes:[],dimensions:i},n=0,s=0;s<e.length;s++){for(var o=0;o<e[s].length;o++)for(var a=0;a<i;a++)r.vertices.push(e[s][o][a]);s>0&&(n+=e[s-1].length,r.holes.push(n))}return r};var tl=X(j.exports),tu=/[^\x20-\x7E]/,tc=/[\x2E\u3002\uFF0E\uFF61]/g,td={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},tf=Math.floor,tp=String.fromCharCode;function t_(e){throw RangeError(td[e])}function tm(e,i){return e+22+75*(e<26)-((0!=i)<<5)}function tg(e){return null===e}function tv(e){return"string"==typeof e}function ty(e){return"object"==typeof e&&null!==e}var tb=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function tx(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function tT(e,i){if(e.map)return e.map(i);for(var r=[],n=0;n<e.length;n++)r.push(i(e[n],n));return r}var tA=Object.keys||function(e){var i=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&i.push(r);return i};function tE(e,i,r,n){i=i||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(i);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var h=e.length;a>0&&h>a&&(h=a);for(var l=0;l<h;++l){var u,c,d,f,p=e[l].replace(o,"%20"),_=p.indexOf(r);_>=0?(u=p.substr(0,_),c=p.substr(_+1)):(u=p,c=""),d=decodeURIComponent(u),f=decodeURIComponent(c),Object.prototype.hasOwnProperty.call(s,d)?tb(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s}function tw(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var tS=/^([a-z0-9.+-]+:)/i,tP=/:[0-9]*$/,tM=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,tI=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","	"])),tC=["%","/","?",";","#"].concat(tI),tR=["/","?","#"],tO=/^[+a-z0-9A-Z_-]{0,63}$/,tD=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,t$={javascript:!0,"javascript:":!0},tL={javascript:!0,"javascript:":!0},tF={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function tB(e,i,r){if(e&&ty(e)&&e instanceof tw)return e;var n=new tw;return n.parse(e,i,r),n}function tk(e,i,r,n){if(!tv(i))throw TypeError("Parameter 'url' must be a string, not "+typeof i);var s=i.indexOf("?"),o=-1!==s&&s<i.indexOf("#")?"?":"#",a=i.split(o);a[0]=a[0].replace(/\\/g,"/");var h=i=a.join(o);if(h=h.trim(),!n&&1===i.split("#").length){var l=tM.exec(h);if(l)return e.path=h,e.href=h,e.pathname=l[1],l[2]?(e.search=l[2],e.query=r?tE(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var u,c,d,f,p=tS.exec(h);if(p){var _=(p=p[0]).toLowerCase();e.protocol=_,h=h.substr(p.length)}if(n||p||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===h.substr(0,2);!g||p&&tL[p]||(h=h.substr(2),e.slashes=!0)}if(!tL[p]&&(g||p&&!tF[p])){var v,y,b,x,T,A=-1;for(u=0;u<tR.length;u++)-1!==(c=h.indexOf(tR[u]))&&(-1===A||c<A)&&(A=c);for(-1!==(T=-1===A?h.lastIndexOf("@"):h.lastIndexOf("@",A))&&(x=h.slice(0,T),h=h.slice(T+1),e.auth=decodeURIComponent(x)),A=-1,u=0;u<tC.length;u++)-1!==(c=h.indexOf(tC[u]))&&(-1===A||c<A)&&(A=c);-1===A&&(A=h.length),e.host=h.slice(0,A),h=h.slice(A),tU(e),e.hostname=e.hostname||"";var E="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!E){var w=e.hostname.split(/\./);for(u=0,d=w.length;u<d;u++){var S=w[u];if(S&&!S.match(tO)){for(var P="",M=0,I=S.length;M<I;M++)S.charCodeAt(M)>127?P+="x":P+=S[M];if(!P.match(tO)){var C=w.slice(0,u),R=w.slice(u+1),O=S.match(tD);O&&(C.push(O[1]),R.unshift(O[2])),R.length&&(h="/"+R.join(".")+h),e.hostname=C.join(".");break}}}}e.hostname.length>255?e.hostname="":e.hostname=e.hostname.toLowerCase(),E||(e.hostname=(y=(v=e.hostname).split("@"),b="",y.length>1&&(b=y[0]+"@",v=y[1]),b+(function(e,i){for(var r=e.length,n=[];r--;)n[r]=i(e[r]);return n})((v=v.replace(tc,".")).split("."),function(e){return tu.test(e)?"xn--"+function(e){var i,r,n,s,o,a,h,l,u,c,d,f,p,_,g,v=[];for(f=(e=function(e){for(var i,r,n=[],s=0,o=e.length;s<o;)(i=e.charCodeAt(s++))>=55296&&i<=56319&&s<o?56320==(64512&(r=e.charCodeAt(s++)))?n.push(((1023&i)<<10)+(1023&r)+65536):(n.push(i),s--):n.push(i);return n}(e)).length,i=128,r=0,o=72,a=0;a<f;++a)(d=e[a])<128&&v.push(tp(d));for(n=s=v.length,s&&v.push("-");n<f;){for(h=2147483647,a=0;a<f;++a)(d=e[a])>=i&&d<h&&(h=d);for(h-i>tf((2147483647-r)/(p=n+1))&&t_("overflow"),r+=(h-i)*p,i=h,a=0;a<f;++a)if((d=e[a])<i&&++r>2147483647&&t_("overflow"),d==i){for(l=r,u=36;!(l<(c=u<=o?1:u>=o+26?26:u-o));u+=36)g=l-c,_=36-c,v.push(tp(tm(c+g%_,0))),l=tf(g/_);v.push(tp(tm(l,0))),o=function(e,i,r){var n=0;for(e=r?tf(e/700):e>>1,e+=tf(e/i);e>455;n+=36)e=tf(e/35);return tf(n+36*e/(e+38))}(r,p,n==s),r=0,++n}++r,++i}return v.join("")}(e):e}).join("."))),f=e.port?":"+e.port:"";var D=e.hostname||"";e.host=D+f,e.href+=e.host,E&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!t$[_])for(u=0,d=tI.length;u<d;u++){var $=tI[u];if(-1!==h.indexOf($)){var L=encodeURIComponent($);L===$&&(L=escape($)),h=h.split($).join(L)}}var F=h.indexOf("#");-1!==F&&(e.hash=h.substr(F),h=h.slice(0,F));var B=h.indexOf("?");if(-1!==B?(e.search=h.substr(B),e.query=h.substr(B+1),r&&(e.query=tE(e.query)),h=h.slice(0,B)):r&&(e.search="",e.query={}),h&&(e.pathname=h),tF[_]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){f=e.pathname||"";var k=e.search||"";e.path=f+k}return e.href=tN(e),e}function tN(e){var i=e.auth||"";i&&(i=(i=encodeURIComponent(i)).replace(/%3A/i,":")+"@");var r,n,s,o,a=e.protocol||"",h=e.pathname||"",l=e.hash||"",u=!1,c="";e.host?u=i+e.host:e.hostname&&(u=i+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(u+=":"+e.port)),e.query&&ty(e.query)&&Object.keys(e.query).length&&(r=e.query,n=n||"&",s=s||"=",null===r&&(r=void 0),c="object"==typeof r?tT(tA(r),function(e){var i=encodeURIComponent(tx(e))+s;return tb(r[e])?tT(r[e],function(e){return i+encodeURIComponent(tx(e))}).join(n):i+encodeURIComponent(tx(r[e]))}).join(n):o?encodeURIComponent(tx(o))+s+encodeURIComponent(tx(r)):"");var d=e.search||c&&"?"+c||"";return a&&":"!==a.substr(-1)&&(a+=":"),e.slashes||(!a||tF[a])&&!1!==u?(u="//"+(u||""),h&&"/"!==h.charAt(0)&&(h="/"+h)):u||(u=""),l&&"#"!==l.charAt(0)&&(l="#"+l),d&&"?"!==d.charAt(0)&&(d="?"+d),a+u+(h=h.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(d=d.replace("#","%23"))+l}function tU(e){var i=e.host,r=tP.exec(i);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),i=i.substr(0,i.length-r.length)),i&&(e.hostname=i)}/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */tw.prototype.parse=function(e,i,r){return tk(this,e,i,r)},tw.prototype.format=function(){return tN(this)},tw.prototype.resolve=function(e){return this.resolveObject(tB(e,!1,!0)).format()},tw.prototype.resolveObject=function(e){if(tv(e)){var i=new tw;i.parse(e,!1,!0),e=i}for(var r,n=new tw,s=Object.keys(this),o=0;o<s.length;o++){var a=s[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(n[u]=e[u])}return tF[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!tF[e.protocol]){for(var c=Object.keys(e),d=0;d<c.length;d++){var f=c[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||tL[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",_=n.search||"";n.path=p+_}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g,v=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||v||n.host&&e.pathname,x=b,T=n.pathname&&n.pathname.split("/")||[],A=n.protocol&&!tF[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],A&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),b=b&&(""===r[0]||""===T[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,T=r;else if(r.length)T||(T=[]),T.pop(),T=T.concat(r),n.search=e.search,n.query=e.query;else if(null!=e.search)return A&&(n.hostname=n.host=T.shift(),(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),n.search=e.search,n.query=e.query,tg(n.pathname)&&tg(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=T.slice(-1)[0],w=(n.host||e.host||T.length>1)&&("."===E||".."===E)||""===E,S=0,P=T.length;P>=0;P--)"."===(E=T[P])?T.splice(P,1):".."===E?(T.splice(P,1),S++):S&&(T.splice(P,1),S--);if(!b&&!x)for(;S--;S)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),w&&"/"!==T.join("/").substr(-1)&&T.push("");var M=""===T[0]||T[0]&&"/"===T[0].charAt(0);return A&&(n.hostname=n.host=M?"":T.length?T.shift():"",(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),(b=b||n.host&&T.length)&&!M&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),tg(n.pathname)&&tg(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},tw.prototype.parseHost=function(){return tU(this)};var tG={parse:tB,format:function(e){return tv(e)&&(e=tk({},e)),tN(e)},resolve:function(e,i){return tB(e,!1,!0).resolve(i)}};G.RETINA_PREFIX=/@([0-9\.]+)x/,G.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var tX,tV,tH,tj,tY,tz,tW,tq,tZ,tQ,tJ,tK,t0,t2,t1,t4,t3,t6,t8,t5,t7,t9,et,ee,ei,er,en,es,eo,ea,eh,el,eu,ec,ed,ef,ep,e_,em,eg,ev,ey,eb,ex,eT,eA,eE,ew,eS,eP,eM,eI,eC,eR,eO,eD,e$,eL,eF,eB,ek,eN=!1,eU="6.5.10",eG={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function eX(e,i){return void 0===i&&(i=[]),i[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(255&e)/255,i}function eV(e){var i=e.toString(16);return"#"+(i="000000".substring(0,6-i.length)+i)}function eH(e){return"string"==typeof e&&"#"===(e=eG[e.toLowerCase()]||e)[0]&&(e=e.slice(1)),parseInt(e,16)}var ej=function(){for(var e=[],i=[],r=0;r<32;r++)e[r]=r,i[r]=r;e[ex.NORMAL_NPM]=ex.NORMAL,e[ex.ADD_NPM]=ex.ADD,e[ex.SCREEN_NPM]=ex.SCREEN,i[ex.NORMAL]=ex.NORMAL_NPM,i[ex.ADD]=ex.ADD_NPM,i[ex.SCREEN]=ex.SCREEN_NPM;var n=[];return n.push(i),n.push(e),n}();function eY(e,i){if(1===i)return(255*i<<24)+e;if(0===i)return 0;var r=e>>16&255,n=e>>8&255,s=255&e;return(255*i<<24)+((r=r*i+.5|0)<<16)+((n=n*i+.5|0)<<8)+(s=s*i+.5|0)}function ez(e,i,r,n){return(r=r||new Float32Array(4))[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(n||void 0===n)&&(r[0]*=i,r[1]*=i,r[2]*=i),r[3]=i,r}function eW(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function eq(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function eZ(e){var i=(e>65535?1:0)<<4,r=((e>>>=i)>255?1:0)<<3;return i|=r,i|=r=((e>>>=r)>15?1:0)<<2,(i|=r=((e>>>=r)>3?1:0)<<1)|(e>>>=r)>>1}function eQ(e,i,r){var n,s=e.length;if(!(i>=s||0===r)){var o=s-(r=i+r>s?s-i:r);for(n=i;n<o;++n)e[n]=e[n+r];e.length=o}}function eJ(e){return 0===e?0:e<0?-1:1}var eK=0,e0={};function e2(e,i,r){if(void 0===r&&(r=3),!e0[i]){var n=Error().stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",i+"\nDeprecated since v"+e):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i+"\nDeprecated since v"+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i+"\nDeprecated since v"+e),console.warn(n))),e0[i]=!0}}var e1,e4={},e3=Object.create(null),e6=Object.create(null),e8=function(){function e(e,i,r){this.canvas=G.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||G.RESOLUTION,this.resize(e,i)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,i){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(i*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),e}();function e5(e,i){var r=G.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==i?i:1}/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var e7,e9=2*Math.PI,it=180/Math.PI,ie=Math.PI/180;(ix=e7||(e7={}))[ix.POLY=0]="POLY",ix[ix.RECT=1]="RECT",ix[ix.CIRC=2]="CIRC",ix[ix.ELIP=3]="ELIP",ix[ix.RREC=4]="RREC";var ii=function(){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.x=e,this.y=i}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=e),this.x=e,this.y=i,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),ir=[new ii,new ii,new ii,new ii],is=function(){function e(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(n),this.type=e7.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,i){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height},e.prototype.intersects=function(e,i){if(!i){var r=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=r)return!1;var n=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>n}var s=this.left,o=this.right,a=this.top,h=this.bottom;if(o<=s||h<=a)return!1;var l=ir[0].set(e.left,e.top),u=ir[1].set(e.left,e.bottom),c=ir[2].set(e.right,e.top),d=ir[3].set(e.right,e.bottom);if(c.x<=l.x||u.y<=l.y)return!1;var f=Math.sign(i.a*i.d-i.b*i.c);if(0===f||(i.apply(l,l),i.apply(u,u),i.apply(c,c),i.apply(d,d),Math.max(l.x,u.x,c.x,d.x)<=s||Math.min(l.x,u.x,c.x,d.x)>=o||Math.max(l.y,u.y,c.y,d.y)<=a||Math.min(l.y,u.y,c.y,d.y)>=h))return!1;var p=f*(u.y-l.y),_=f*(l.x-u.x),g=p*s+_*a,v=p*o+_*a,y=p*s+_*h,b=p*o+_*h;if(Math.max(g,v,y,b)<=p*l.x+_*l.y||Math.min(g,v,y,b)>=p*d.x+_*d.y)return!1;var x=f*(l.y-c.y),T=f*(c.x-l.x),A=x*s+T*a,E=x*o+T*a,w=x*s+T*h,S=x*o+T*h;return!(Math.max(A,E,w,S)<=x*l.x+T*l.y||Math.min(A,E,w,S)>=x*d.x+T*d.y)},e.prototype.pad=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=e),this.x-=e,this.y-=i,this.width+=2*e,this.height+=2*i,this},e.prototype.fit=function(e){var i=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(r-i,0),this.y=n,this.height=Math.max(s-n,0),this},e.prototype.ceil=function(e,i){void 0===e&&(e=1),void 0===i&&(i=.001);var r=Math.ceil((this.x+this.width-i)*e)/e,n=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=r-this.x,this.height=n-this.y,this},e.prototype.enlarge=function(e){var i=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=r-i,this.y=n,this.height=s-n,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),io=function(){function e(e,i,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=e,this.y=i,this.radius=r,this.type=e7.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,i){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-e,s=this.y-i;return(n*=n)+(s*=s)<=r},e.prototype.getBounds=function(){return new is(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),ia=function(){function e(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=i,this.width=r,this.height=n,this.type=e7.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,i){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(i-this.y)/this.height;return(r*=r)+(n*=n)<=1},e.prototype.getBounds=function(){return new is(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),ih=function(){function e(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=Array.isArray(i[0])?i[0]:i;if("number"!=typeof n[0]){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=e7.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var i=new e(this.points.slice());return i.closeStroke=this.closeStroke,i},e.prototype.contains=function(e,i){for(var r=!1,n=this.points.length/2,s=0,o=n-1;s<n;o=s++){var a=this.points[2*s],h=this.points[2*s+1],l=this.points[2*o],u=this.points[2*o+1];h>i!=u>i&&e<(i-h)/(u-h)*(l-a)+a&&(r=!r)}return r},e.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(e,i){return e+", "+i},"")+"]"},e}(),il=function(){function e(e,i,r,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=20),this.x=e,this.y=i,this.width=r,this.height=n,this.radius=s,this.type=e7.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,i){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+r&&i<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;var n=e-(this.x+r),s=i-(this.y+r),o=r*r;if(n*n+s*s<=o||(n=e-(this.x+this.width-r))*n+s*s<=o||n*n+(s=i-(this.y+this.height-r))*s<=o||(n=e-(this.x+r))*n+s*s<=o)return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},e}(),iu=function(){function e(e,i,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this._x=r,this._y=n,this.cb=e,this.scope=i}return e.prototype.clone=function(i,r){return void 0===i&&(i=this.cb),void 0===r&&(r=this.scope),new e(i,r,this._x,this._y)},e.prototype.set=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=e),this._x===e&&this._y===i||(this._x=e,this._y=i,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),ic=function(){function e(e,i,r,n,s,o){void 0===e&&(e=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===o&&(o=0),this.array=null,this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,i,r,n,s,o){return this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o,this},e.prototype.toArray=function(e,i){this.array||(this.array=new Float32Array(9));var r=i||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0),r[8]=1,r},e.prototype.apply=function(e,i){i=i||new ii;var r=e.x,n=e.y;return i.x=this.a*r+this.c*n+this.tx,i.y=this.b*r+this.d*n+this.ty,i},e.prototype.applyInverse=function(e,i){i=i||new ii;var r=1/(this.a*this.d+-(this.c*this.b)),n=e.x,s=e.y;return i.x=this.d*r*n+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,i.y=this.a*r*s+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,i},e.prototype.translate=function(e,i){return this.tx+=e,this.ty+=i,this},e.prototype.scale=function(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this},e.prototype.rotate=function(e){var i=Math.cos(e),r=Math.sin(e),n=this.a,s=this.c,o=this.tx;return this.a=n*i-this.b*r,this.b=n*r+this.b*i,this.c=s*i-this.d*r,this.d=s*r+this.d*i,this.tx=o*i-this.ty*r,this.ty=o*r+this.ty*i,this},e.prototype.append=function(e){var i=this.a,r=this.b,n=this.c,s=this.d;return this.a=e.a*i+e.b*n,this.b=e.a*r+e.b*s,this.c=e.c*i+e.d*n,this.d=e.c*r+e.d*s,this.tx=e.tx*i+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this},e.prototype.setTransform=function(e,i,r,n,s,o,a,h,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=e-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d),this},e.prototype.prepend=function(e){var i=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var i=this.a,r=this.b,n=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-n,s),h=Math.atan2(r,i),l=Math.abs(a+h);return l<1e-5||1e-5>Math.abs(e9-l)?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=h),e.scale.x=Math.sqrt(i*i+r*r),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(o.x*i+o.y*n),e.position.y=this.ty+(o.x*r+o.y*s),e},e.prototype.invert=function(){var e=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,o=e*n-i*r;return this.a=n/o,this.b=-i/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*s)/o,this.ty=-(e*this.ty-i*s)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var i=new e;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),ip=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],i_=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],im=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ig=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],iv=[],iy=[],ib=Math.sign;!function(){for(var e=0;e<16;e++){var i=[];iv.push(i);for(var r=0;r<16;r++)for(var n=ib(ip[e]*ip[r]+im[e]*i_[r]),s=ib(i_[e]*ip[r]+ig[e]*i_[r]),o=ib(ip[e]*im[r]+im[e]*ig[r]),a=ib(i_[e]*im[r]+ig[e]*ig[r]),h=0;h<16;h++)if(ip[h]===n&&i_[h]===s&&im[h]===o&&ig[h]===a){i.push(h);break}}for(e=0;e<16;e++){var l=new ic;l.set(ip[e],i_[e],im[e],ig[e],0,0),iy.push(l)}}();var ix,iT,iA={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return ip[e]},uY:function(e){return i_[e]},vX:function(e){return im[e]},vY:function(e){return ig[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,i){return iv[e][i]},sub:function(e,i){return iv[e][iA.inv(i)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,i){return 2*Math.abs(e)<=Math.abs(i)?i>=0?iA.S:iA.N:2*Math.abs(i)<=Math.abs(e)?e>0?iA.E:iA.W:i>0?e>0?iA.SE:iA.SW:e>0?iA.NE:iA.NW},matrixAppendRotationInv:function(e,i,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var s=iy[iA.inv(i)];s.tx=r,s.ty=n,e.append(s)}},iE=function(){function e(){this.worldTransform=new ic,this.localTransform=new ic,this.position=new iu(this.onChange,this,0,0),this.scale=new iu(this.onChange,this,1,1),this.pivot=new iu(this.onChange,this,0,0),this.skew=new iu(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var i=this.localTransform;if(this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=i.a*r.a+i.b*r.c,n.b=i.a*r.b+i.b*r.d,n.c=i.c*r.a+i.d*r.c,n.d=i.c*r.b+i.d*r.d,n.tx=i.tx*r.a+i.ty*r.c+r.tx,n.ty=i.tx*r.b+i.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}(),iw=function(){return(iw=Object.assign||function(e){for(var i,r=arguments,n=1,s=arguments.length;n<s;n++)for(var o in i=r[n])Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);return e}).apply(this,arguments)};(iS=iT||(iT={})).Application="application",iS.RendererPlugin="renderer-webgl-plugin",iS.CanvasRendererPlugin="renderer-canvas-plugin",iS.Loader="loader",iS.LoadParser="load-parser",iS.ResolveParser="resolve-parser",iS.CacheParser="cache-parser",iS.DetectionParser="detection-parser";var iS,iP,iM=function(e){if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw Error("Extension class must have an extension object");var i="object"!=typeof e.extension?{type:e.extension}:e.extension;e=iw(iw({},i),{ref:e})}if("object"!=typeof e)throw Error("Invalid extension type");return"string"==typeof(e=iw({},e)).type&&(e.type=[e.type]),e},iI={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var e=arguments,i=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];return r.map(iM).forEach(function(e){e.type.forEach(function(r){var n,s;return null===(s=(n=i._removeHandlers)[r])||void 0===s?void 0:s.call(n,e)})}),this},add:function(){for(var e=arguments,i=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];return r.map(iM).forEach(function(e){e.type.forEach(function(r){var n=i._addHandlers,s=i._queue;n[r]?n[r](e):(s[r]=s[r]||[],s[r].push(e))})}),this},handle:function(e,i,r){var n=this._addHandlers=this._addHandlers||{},s=this._removeHandlers=this._removeHandlers||{};if(n[e]||s[e])throw Error("Extension type "+e+" already has a handler");n[e]=i,s[e]=r;var o=this._queue;return o[e]&&(o[e].forEach(function(e){return i(e)}),delete o[e]),this},handleByMap:function(e,i){return this.handle(e,function(e){i[e.name]=e.ref},function(e){delete i[e.name]})},handleByList:function(e,i){return this.handle(e,function(r){var n,s;i.includes(r.ref)||(i.push(r.ref),e===iT.Loader&&(null===(s=(n=r.ref).add)||void 0===s||s.call(n)))},function(e){var r=i.indexOf(e.ref);-1!==r&&i.splice(r,1)})}},iC=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,i,r,n,s,o,a,h){if(arguments.length>8)throw Error("max arguments reached");var l=this.name,u=this.items;this._aliasCount++;for(var c=0,d=u.length;c<d;c++)u[c][l](e,i,r,n,s,o,a,h);return u===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var i=this.items.indexOf(e);return -1!==i&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this},e.prototype.contains=function(e){return -1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(iC.prototype,{dispatch:{value:iC.prototype.emit},run:{value:iC.prototype.emit}}),/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */G.TARGET_FPMS=.06,(rP=iP||(iP={}))[rP.INTERACTION=50]="INTERACTION",rP[rP.HIGH=25]="HIGH",rP[rP.NORMAL=0]="NORMAL",rP[rP.LOW=-25]="LOW",rP[rP.UTILITY=-50]="UTILITY";var iR=function(){function e(e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=0),void 0===n&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=i,this.priority=r,this.once=n}return e.prototype.match=function(e,i){return void 0===i&&(i=null),this.fn===e&&this.context===i},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var i=this.next;return this.next=e?null:i,this.previous=null,i},e}(),iO=function(){function e(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new iR(null,null,1/0),this.deltaMS=1/G.TARGET_FPMS,this.elapsedMS=1/G.TARGET_FPMS,this._tick=function(i){e._requestId=null,e.started&&(e.update(i),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,i,r){return void 0===r&&(r=iP.NORMAL),this._addListener(new iR(e,i,r))},e.prototype.addOnce=function(e,i,r){return void 0===r&&(r=iP.NORMAL),this._addListener(new iR(e,i,r,!0))},e.prototype._addListener=function(e){var i=this._head.next,r=this._head;if(i){for(;i;){if(e.priority>i.priority){e.connect(r);break}r=i,i=i.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},e.prototype.remove=function(e,i){for(var r=this._head.next;r;)r=r.match(e,i)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,i=this._head;i=i.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var i;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((i=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*G.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var i=Math.min(Math.max(0,Math.min(this.maxFPS,e))/1e3,G.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var i=Math.max(this.minFPS,e);this._minElapsedMS=1/(i/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var i=e._shared=new e;i.autoStart=!0,i._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var i=e._system=new e;i.autoStart=!0,i._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),iD=function(){function e(){}return e.init=function(e){var i=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,iP.LOW)},get:function(){return this._ticker}}),this.stop=function(){i._ticker.stop()},this.start=function(){i._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?iO.shared:new iO,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},e.extension=iT.Application,e}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */G.PREFER_ENV=U.any?ev.WEBGL:ev.WEBGL2,G.STRICT_TEXTURE_CACHE=!1;var i$=[];function iL(e,i){if(!e)return null;var r="";if("string"==typeof e){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(var s=i$.length-1;s>=0;--s){var o=i$[s];if(o.test&&o.test(e,r))return new o(e,i)}throw Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iF=function(e,i){return(iF=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};function iB(e,i){function r(){this.constructor=e}iF(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var ik=function(){return(ik=Object.assign||function(e){for(var i,r=arguments,n=1,s=arguments.length;n<s;n++)for(var o in i=r[n])Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);return e}).apply(this,arguments)},iN=function(){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._width=e,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new iC("setRealSize"),this.onUpdate=new iC("update"),this.onError=new iC("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,i){e===this._width&&i===this._height||(this._width=e,this._height=i,this.onResize.emit(e,i))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,i,r){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,i){return!1},e}(),iU=function(e){function i(i,r){var n=this,s=r||{},o=s.width,a=s.height;if(!o||!a)throw Error("BufferResource width or height invalid");return(n=e.call(this,o,a)||this).data=i,n}return iB(i,e),i.prototype.upload=function(e,i,r){var n=e.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===eC.UNPACK);var s=i.realWidth,o=i.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(i.target,0,0,0,s,o,i.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(i.target,0,r.internalFormat,s,o,0,i.format,r.type,this.data)),!0},i.prototype.dispose=function(){this.data=null},i.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},i}(iN),iG={scaleMode:eP.NEAREST,format:eA.RGBA,alphaMode:eC.NPM},iX=function(e){function i(i,r){void 0===i&&(i=null),void 0===r&&(r=null);var n=e.call(this)||this,s=(r=r||{}).alphaMode,o=r.mipmap,a=r.anisotropicLevel,h=r.scaleMode,l=r.width,u=r.height,c=r.wrapMode,d=r.format,f=r.type,p=r.target,_=r.resolution,g=r.resourceOptions;return!i||i instanceof iN||((i=iL(i,g)).internal=!0),n.resolution=_||G.RESOLUTION,n.width=Math.round((l||0)*n.resolution)/n.resolution,n.height=Math.round((u||0)*n.resolution)/n.resolution,n._mipmap=void 0!==o?o:G.MIPMAP_TEXTURES,n.anisotropicLevel=void 0!==a?a:G.ANISOTROPIC_LEVEL,n._wrapMode=c||G.WRAP_MODE,n._scaleMode=void 0!==h?h:G.SCALE_MODE,n.format=d||eA.RGBA,n.type=f||ew.UNSIGNED_BYTE,n.target=p||eE.TEXTURE_2D,n.alphaMode=void 0!==s?s:eC.UNPACK,n.uid=++eK,n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(i),n}return iB(i,e),Object.defineProperty(i.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),i.prototype.setStyle=function(e,i){var r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==i&&i!==this.mipmap&&(this.mipmap=i,r=!0),r&&this.dirtyStyleId++,this},i.prototype.setSize=function(e,i,r){return r=r||this.resolution,this.setRealSize(e*r,i*r,r)},i.prototype.setRealSize=function(e,i,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},i.prototype._refreshPOT=function(){var e,i;this.isPowerOfTwo=!((e=this.realWidth)&e-1||!e)&&!((i=this.realHeight)&i-1||!i)},i.prototype.setResolution=function(e){var i=this.resolution;return i===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT()),this},i.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw Error("Resource can be set only once");return e.bind(this),this.resource=e,this},i.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},i.prototype.onError=function(e){this.emit("error",this,e)},i.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete e6[this.cacheId],delete e3[this.cacheId],this.cacheId=null),this.dispose(),i.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},i.prototype.dispose=function(){this.emit("dispose",this)},i.prototype.castToBaseTexture=function(){return this},i.from=function(e,r,n){void 0===n&&(n=G.STRICT_TEXTURE_CACHE);var s="string"==typeof e,o=null;if(s)o=e;else{if(!e._pixiId){var a=r&&r.pixiIdPrefix||"pixiid";e._pixiId=a+"_"+ ++eK}o=e._pixiId}var h=e6[o];if(s&&n&&!h)throw Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return h||((h=new i(e,r)).cacheId=o,i.addToCache(h,o)),h},i.fromBuffer=function(e,r,n,s){var o=new iU(e=e||new Float32Array(r*n*4),{width:r,height:n}),a=e instanceof Float32Array?ew.FLOAT:ew.UNSIGNED_BYTE;return new i(o,Object.assign({},iG,s||{width:r,height:n,type:a}))},i.addToCache=function(e,i){i&&(-1===e.textureCacheIds.indexOf(i)&&e.textureCacheIds.push(i),e6[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),e6[i]=e)},i.removeFromCache=function(e){if("string"==typeof e){var i=e6[e];if(i){var r=i.textureCacheIds.indexOf(e);return r>-1&&i.textureCacheIds.splice(r,1),delete e6[e],i}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete e6[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},i._globalBatch=0,i}(H),iV=function(e){function i(i,r){var n=this,s=r||{},o=s.width,a=s.height;(n=e.call(this,o,a)||this).items=[],n.itemDirtyIds=[];for(var h=0;h<i;h++){var l=new iX;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=i,n._load=null,n.baseTexture=null,n}return iB(i,e),i.prototype.initFromArray=function(e,i){for(var r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof iN?this.addResourceAt(e[r],r):this.addResourceAt(iL(e[r],i),r))},i.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},i.prototype.addResourceAt=function(e,i){if(!this.items[i])throw Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},i.prototype.bind=function(i){if(null!==this.baseTexture)throw Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,i);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=i,this.items[r].on("update",i.update,i)},i.prototype.unbind=function(i){e.prototype.unbind.call(this,i);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",i.update,i)},i.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(e){return e.resource}).filter(function(e){return e}).map(function(e){return e.load()});return this._load=Promise.all(i).then(function(){var i=e.items[0],r=i.realWidth,n=i.realHeight;return e.resize(r,n),Promise.resolve(e)}),this._load},i}(iN),iH=function(e){function i(i,r){var n,s,o=this,a=r||{},h=a.width,l=a.height;return Array.isArray(i)?(n=i,s=i.length):s=i,o=e.call(this,s,{width:h,height:l})||this,n&&o.initFromArray(n,r),o}return iB(i,e),i.prototype.addBaseTextureAt=function(e,i){if(!e.resource)throw Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,i),this},i.prototype.bind=function(i){e.prototype.bind.call(this,i),i.target=eE.TEXTURE_2D_ARRAY},i.prototype.upload=function(e,i,r){var n=this.length,s=this.itemDirtyIds,o=this.items,a=e.gl;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,i.format,r.type,null);for(var h=0;h<n;h++){var l=o[h];s[h]<l.dirtyId&&(s[h]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,l.resource.width,l.resource.height,1,i.format,r.type,l.resource.source))}return!0},i}(iV),ij=function(e){function i(i){var r=this,n=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;return(r=e.call(this,n,s)||this).source=i,r.noSubImage=!1,r}return iB(i,e),i.crossOrigin=function(e,i,r){void 0===r&&0!==i.indexOf("data:")?e.crossOrigin=function(e,i){if(void 0===i&&(i=globalThis.location),0===e.indexOf("data:"))return"";i=i||globalThis.location,e1||(e1=document.createElement("a")),e1.href=e;var r=tG.parse(e1.href),n=!r.port&&""===i.port||r.port===i.port;return r.hostname===i.hostname&&n&&r.protocol===i.protocol?"":"anonymous"}(i):!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous")},i.prototype.upload=function(e,i,r,n){var s=e.gl,o=i.realWidth,a=i.realHeight;if((n=n||this.source)instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if(n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===eC.UNPACK),this.noSubImage||i.target!==s.TEXTURE_2D||r.width!==o||r.height!==a?(r.width=o,r.height=a,s.texImage2D(i.target,0,r.internalFormat,i.format,r.type,n)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,r.type,n),!0},i.prototype.update=function(){if(!this.destroyed){var i=this.source,r=i.naturalWidth||i.videoWidth||i.width,n=i.naturalHeight||i.videoHeight||i.height;this.resize(r,n),e.prototype.update.call(this)}},i.prototype.dispose=function(){this.source=null},i}(iN),iY=function(e){function i(i){return e.call(this,i)||this}return iB(i,e),i.test=function(e){var i=globalThis.OffscreenCanvas;return!!(i&&e instanceof i)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},i}(ij),iz=function(e){function i(r,n){var s=this,o=n||{},a=o.width,h=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(r&&r.length!==i.SIDES)throw Error("Invalid length. Got "+r.length+", expected 6");s=e.call(this,6,{width:a,height:h})||this;for(var c=0;c<i.SIDES;c++)s.items[c].target=eE.TEXTURE_CUBE_MAP_POSITIVE_X+c;return s.linkBaseTexture=!1!==u,r&&s.initFromArray(r,n),!1!==l&&s.load(),s}return iB(i,e),i.prototype.bind=function(i){e.prototype.bind.call(this,i),i.target=eE.TEXTURE_CUBE_MAP},i.prototype.addBaseTextureAt=function(e,i,r){if(!this.items[i])throw Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,i)}else e.target=eE.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},i.prototype.upload=function(e,r,n){for(var s=this.itemDirtyIds,o=0;o<i.SIDES;o++){var a=this.items[o];(s[o]<a.dirtyId||n.dirtyId<r.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(e,a,n),s[o]=a.dirtyId):s[o]<-1&&(e.gl.texImage2D(a.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),s[o]=-1))}return!0},i.test=function(e){return Array.isArray(e)&&e.length===i.SIDES},i.SIDES=6,i}(iV),iW=function(e){function i(i,r){var n=this;if(r=r||{},!(i instanceof HTMLImageElement)){var s=new Image;ij.crossOrigin(s,i,r.crossorigin),s.src=i,i=s}return n=e.call(this,i)||this,!i.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=i.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==r.createBitmap?r.createBitmap:G.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,n.bitmap=null,n._load=null,!1!==r.autoLoad&&n.load(),n}return iB(i,e),i.prototype.load=function(e){var i=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(function(e,r){var n=i.source;i.url=n.src;var s=function(){i.destroyed||(n.onload=null,n.onerror=null,i.resize(n.width,n.height),i._load=null,i.createBitmap?e(i.process()):e(i))};n.complete&&n.src?s():(n.onload=s,n.onerror=function(e){r(e),i.onError.emit(e)})})),this._load},i.prototype.process=function(){var e=this,i=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var r=globalThis.createImageBitmap,n=!i.crossOrigin||"anonymous"===i.crossOrigin;return this._process=fetch(i.src,{mode:n?"cors":"no-cors"}).then(function(e){return e.blob()}).then(function(n){return r(n,0,0,i.width,i.height,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===eC.UNPACK?"premultiply":"none"})}).then(function(i){return e.destroyed?Promise.reject():(e.bitmap=i,e.update(),e._process=null,Promise.resolve(e))}),this._process},i.prototype.upload=function(i,r,n){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,i,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,i,r,n,this.bitmap),!this.preserveBitmap){var s=!0,o=r._glTextures;for(var a in o){var h=o[a];if(h!==n&&h.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},i.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},i.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},i}(ij),iq=function(e){function i(i,r){var n=this;return r=r||{},(n=e.call(this,G.ADAPTER.createCanvas())||this)._width=0,n._height=0,n.svg=i,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,!1!==r.autoLoad&&n.load(),n}return iB(i,e),i.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(r){if(e._resolve=function(){e.resize(e.source.width,e.source.height),r(e)},i.SVG_XML.test(e.svg.trim())){if(!btoa)throw Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()})),this._load},i.prototype._loadSvg=function(){var e=this,i=new Image;ij.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(r){e._resolve&&(i.onerror=null,e.onError.emit(r))},i.onload=function(){if(e._resolve){var r=i.width,n=i.height;if(!r||!n)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=r*e.scale,o=n*e.scale;(e._overrideWidth||e._overrideHeight)&&(s=e._overrideWidth||e._overrideHeight/n*r,o=e._overrideHeight||e._overrideWidth/r*n),s=Math.round(s),o=Math.round(o);var a=e.source;a.width=s,a.height=o,a._pixiId="canvas_"+ ++eK,a.getContext("2d").drawImage(i,0,0,r,n,0,0,s,o),e._resolve(),e._resolve=null}}},i.getSize=function(e){var r=i.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},i.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},i.test=function(e,r){return"svg"===r||"string"==typeof e&&e.startsWith("data:image/svg+xml")||"string"==typeof e&&i.SVG_XML.test(e)},i.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i}(ij),iZ=function(e){function i(r,n){var s=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof r&&(r=[r]);var a=r[0].src||r[0];ij.crossOrigin(o,a,n.crossorigin);for(var h=0;h<r.length;++h){var l=document.createElement("source"),u=r[h],c=u.src,d=u.mime,f=(c=c||r[h]).split("?").shift().toLowerCase(),p=f.slice(f.lastIndexOf(".")+1);d=d||i.MIME_TYPES[p]||"video/"+p,l.src=c,l.type=d,o.appendChild(l)}r=o}return(s=e.call(this,r)||this).noSubImage=!0,s._autoUpdate=!0,s._isConnectedToTicker=!1,s._updateFPS=n.updateFPS||0,s._msToNextUpdate=0,s.autoPlay=!1!==n.autoPlay,s._load=null,s._resolve=null,s._onCanPlay=s._onCanPlay.bind(s),s._onError=s._onError.bind(s),!1!==n.autoLoad&&s.load(),s}return iB(i,e),i.prototype.update=function(i){if(!this.destroyed){var r=iO.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},i.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(r){e.valid?r(e):(e._resolve=r,i.load())}),this._load},i.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},i.prototype._isSourcePlaying=function(){var e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()},i.prototype._isSourceReady=function(){return this.source.readyState>2},i.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(iO.shared.add(this.update,this),this._isConnectedToTicker=!0)},i.prototype._onPlayStop=function(){this._isConnectedToTicker&&(iO.shared.remove(this.update,this),this._isConnectedToTicker=!1)},i.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},i.prototype.dispose=function(){this._isConnectedToTicker&&(iO.shared.remove(this.update,this),this._isConnectedToTicker=!1);var i=this.source;i&&(i.removeEventListener("error",this._onError,!0),i.pause(),i.src="",i.load()),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(iO.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(iO.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),i.test=function(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||i.TYPES.indexOf(r)>-1},i.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],i.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},i}(ij),iQ=function(e){function i(i){return e.call(this,i)||this}return iB(i,e),i.test=function(e){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap},i}(ij);i$.push(iW,iQ,iY,iZ,iq,iU,iz,iH);var iJ=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return iB(i,e),i.prototype.upload=function(e,i,r){var n=e.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===eC.UNPACK);var s=i.realWidth,o=i.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(i.target,0,0,0,s,o,i.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(i.target,0,r.internalFormat,s,o,0,i.format,r.type,this.data)),!0},i}(iU),iK=function(){function e(e,i){this.width=Math.round(e||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new iC("disposeFramebuffer"),this.multisample=eF.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,i){return void 0===e&&(e=0),this.colorTextures[e]=i||new iX(null,{scaleMode:eP.NEAREST,resolution:1,mipmap:eI.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new iX(new iJ(null,{width:this.width,height:this.height}),{scaleMode:eP.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:eI.OFF,format:eA.DEPTH_COMPONENT,type:ew.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,i){if(e=Math.round(e),i=Math.round(i),e!==this.width||i!==this.height){this.width=e,this.height=i,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],s=n.resolution;n.setSize(e/s,i/s)}this.depthTexture&&(s=this.depthTexture.resolution,this.depthTexture.setSize(e/s,i/s))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),i0=function(e){function i(i){void 0===i&&(i={});var r=this;return"number"==typeof i&&(i={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),i.width=i.width||100,i.height=i.height||100,i.multisample=void 0!==i.multisample?i.multisample:eF.NONE,(r=e.call(this,null,i)||this).mipmap=eI.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new iK(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=i.multisample,r.maskStack=[],r.filterStack=[{}],r}return iB(i,e),i.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},i.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},i}(iX),i2=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,i,r){var n=i.width,s=i.height;if(r){var o=e.width/2/n,a=e.height/2/s,h=e.x/n+o,l=e.y/s+a;r=iA.add(r,iA.NW),this.x0=h+o*iA.uX(r),this.y0=l+a*iA.uY(r),r=iA.add(r,2),this.x1=h+o*iA.uX(r),this.y1=l+a*iA.uY(r),r=iA.add(r,2),this.x2=h+o*iA.uX(r),this.y2=l+a*iA.uY(r),r=iA.add(r,2),this.x3=h+o*iA.uX(r),this.y3=l+a*iA.uY(r)}else this.x0=e.x/n,this.y0=e.y/s,this.x1=(e.x+e.width)/n,this.y1=e.y/s,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/s,this.x3=e.x/n,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},e}(),i1=new i2;function i4(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var i3=function(e){function i(r,n,s,o,a,h){var l=e.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new is(0,0,1,1)),r instanceof i&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=o,l.valid=!1,l._uvs=i1,l.uvMatrix=null,l.orig=s||n,l._rotate=Number(a||0),!0===a)l._rotate=2;else if(l._rotate%2!=0)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=h?new ii(h.x,h.y):new ii(0,0),l._updateID=0,l.textureCacheIds=[],r.valid?l.noFrame?r.valid&&l.onBaseTextureUpdated(r):l.frame=n:r.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&r.on("update",l.onBaseTextureUpdated,l),l}return iB(i,e),i.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},i.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},i.prototype.destroy=function(e){if(this.baseTexture){if(e){var r=this.baseTexture.resource;r&&r.url&&e3[r.url]&&i.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,i.removeFromCache(this),this.textureCacheIds=null},i.prototype.clone=function(){var e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new i(this.baseTexture,!this.noFrame&&e,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},i.prototype.updateUvs=function(){this._uvs===i1&&(this._uvs=new i2),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},i.from=function(e,r,n){void 0===r&&(r={}),void 0===n&&(n=G.STRICT_TEXTURE_CACHE);var s="string"==typeof e,o=null;if(s)o=e;else if(e instanceof iX){if(!e.cacheId){var a=r&&r.pixiIdPrefix||"pixiid";e.cacheId=a+"-"+ ++eK,iX.addToCache(e,e.cacheId)}o=e.cacheId}else e._pixiId||(a=r&&r.pixiIdPrefix||"pixiid",e._pixiId=a+"_"+ ++eK),o=e._pixiId;var h=e3[o];if(s&&n&&!h)throw Error('The cacheId "'+o+'" does not exist in TextureCache.');return h||e instanceof iX?!h&&e instanceof iX&&(h=new i(e),i.addToCache(h,o)):(r.resolution||(r.resolution=e5(e)),(h=new i(new iX(e,r))).baseTexture.cacheId=o,iX.addToCache(h.baseTexture,o),i.addToCache(h,o)),h},i.fromURL=function(e,r){var n=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),s=i.from(e,Object.assign({resourceOptions:n},r),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},i.fromBuffer=function(e,r,n,s){return new i(iX.fromBuffer(e,r,n,s))},i.fromLoader=function(e,r,n,s){var o=new iX(e,Object.assign({scaleMode:G.SCALE_MODE,resolution:e5(r)},s)),a=o.resource;a instanceof iW&&(a.url=r);var h=new i(o);return n||(n=r),iX.addToCache(h.baseTexture,n),i.addToCache(h,n),n!==r&&(iX.addToCache(h.baseTexture,r),i.addToCache(h,r)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(e){h.baseTexture.once("loaded",function(){return e(h)})})},i.addToCache=function(e,i){i&&(-1===e.textureCacheIds.indexOf(i)&&e.textureCacheIds.push(i),e3[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),e3[i]=e)},i.removeFromCache=function(e){if("string"==typeof e){var i=e3[e];if(i){var r=i.textureCacheIds.indexOf(e);return r>-1&&i.textureCacheIds.splice(r,1),delete e3[e],i}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)e3[e.textureCacheIds[n]]===e&&delete e3[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(i.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,r=e.y,n=e.width,s=e.height,o=i+n>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+i+" + "+n+" = "+(i+n))+" > "+this.baseTexture.width+" "+(o&&a?"and":"or")+" "+("Y: "+r+" + "+s+" = "+(r+s))+" > "+this.baseTexture.height);this.valid=n&&s&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),i.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(i,"EMPTY",{get:function(){return i._EMPTY||(i._EMPTY=new i(new iX),i4(i._EMPTY),i4(i._EMPTY.baseTexture)),i._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(i,"WHITE",{get:function(){if(!i._WHITE){var e=G.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),i._WHITE=new i(iX.from(e)),i4(i._WHITE),i4(i._WHITE.baseTexture)}return i._WHITE},enumerable:!1,configurable:!0}),i}(H),i6=function(e){function i(i,r){var n=e.call(this,i,r)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return iB(i,e),Object.defineProperty(i.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),i.prototype.resize=function(e,i,r){void 0===r&&(r=!0);var n=this.baseTexture.resolution,s=Math.round(e*n)/n,o=Math.round(i*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()},i.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},i.create=function(e){for(var r=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=r[s];return"number"==typeof e&&(e2("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new i(new i0(e))},i}(i3),i8=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,i,r){return void 0===r&&(r=eF.NONE),new i6(new i0(Object.assign({width:e,height:i,resolution:1,multisample:r},this.textureOptions)))},e.prototype.getOptimalTexture=function(e,i,r,n){void 0===r&&(r=1),void 0===n&&(n=eF.NONE),e=Math.ceil(e*r-1e-6),i=Math.ceil(i*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&i===this._pixelsHeight?s=n>1?-n:-1:(s=((65535&(e=eq(e)))<<16|65535&(i=eq(i)))>>>0,n>1&&(s+=4294967296*n)),this.texturePool[s]||(this.texturePool[s]=[]);var s,o=this.texturePool[s].pop();return o||(o=this.createTexture(e,i,n)),o.filterPoolKey=s,o.setResolution(r),o},e.prototype.getFilterTexture=function(e,i,r){var n=this.getOptimalTexture(e.width,e.height,i||e.resolution,r||eF.NONE);return n.filterFrame=e.filterFrame,n},e.prototype.returnTexture=function(e){var i=e.filterPoolKey;e.filterFrame=null,this.texturePool[i].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var i in this.texturePool){var r=this.texturePool[i];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var i in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(0>Number(i)){var r=this.texturePool[i];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},e.SCREEN_KEY=-1,e}(),i5=function(){function e(e,i,r,n,s,o,a){void 0===i&&(i=0),void 0===r&&(r=!1),void 0===n&&(n=ew.FLOAT),this.buffer=e,this.size=i,this.normalized=r,this.type=n,this.stride=s,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(i,r,n,s,o){return new e(i,r,n,s,o)},e}(),i7=0,i9=function(){function e(e,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=i,this.id=i7++,this.disposeRunner=new iC("disposeBuffer")}return e.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===eB.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?eB.ELEMENT_ARRAY_BUFFER:eB.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(i){return i instanceof Array&&(i=new Float32Array(i)),new e(i)},e}(),rt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},re={5126:4,5123:2,5121:1},ri=0,rr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},rn=function(){function e(e,i){void 0===e&&(e=[]),void 0===i&&(i={}),this.buffers=e,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=ri++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new iC("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,i,r,n,s,o,a,h){if(void 0===r&&(r=0),void 0===n&&(n=!1),void 0===h&&(h=!1),!i)throw Error("You must pass a buffer when creating an attribute");i instanceof i9||(i instanceof Array&&(i=new Float32Array(i)),i=new i9(i));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],i,r,n,s);return this}var c=this.buffers.indexOf(i);return -1===c&&(this.buffers.push(i),c=this.buffers.length-1),this.attributes[e]=new i5(c,r,n,s,o,a,h),this.instanced=this.instanced||h,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof i9||(e instanceof Array&&(e=new Uint16Array(e)),e=new i9(e)),e.type=eB.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,i=[],r=[],n=new i9;for(e in this.attributes){var s=this.attributes[e],o=this.buffers[s.buffer];i.push(o.data),r.push(s.size*re[s.type]/4),s.buffer=0}for(n.data=function(e,i){for(var r=0,n=0,s={},o=0;o<e.length;o++)n+=i[o],r+=e[o].length;var a=new ArrayBuffer(4*r),h=null,l=0;for(o=0;o<e.length;o++){var u=i[o],c=e[o],d=eW(c);s[d]||(s[d]=new rt[d](a)),h=s[d];for(var f=0;f<c.length;f++)h[(f/u|0)*n+l+f%u]=c[f];l+=u}return new Float32Array(a)}(i,r),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var i=this.attributes[e];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var i=new e,r=0;r<this.buffers.length;r++)i.buffers[r]=new i9(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];i.attributes[r]=new i5(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.type=eB.ELEMENT_ARRAY_BUFFER),i},e.merge=function(i){for(var r,n=new e,s=[],o=[],a=[],h=0;h<i.length;h++){r=i[h];for(var l=0;l<r.buffers.length;l++)o[l]=o[l]||0,o[l]+=r.buffers[l].data.length,a[l]=0}for(h=0;h<r.buffers.length;h++)s[h]=new rr[eW(r.buffers[h].data)](o[h]),n.buffers[h]=new i9(s[h]);for(h=0;h<i.length;h++)for(l=0,r=i[h];l<r.buffers.length;l++)s[l].set(r.buffers[l].data,a[l]),a[l]+=r.buffers[l].data.length;if(n.attributes=r.attributes,r.indexBuffer){n.indexBuffer=n.buffers[r.buffers.indexOf(r.indexBuffer)],n.indexBuffer.type=eB.ELEMENT_ARRAY_BUFFER;var u=0,c=0,d=0,f=0;for(h=0;h<r.buffers.length;h++)if(r.buffers[h]!==r.indexBuffer){f=h;break}for(var h in r.attributes){var p=r.attributes[h];(0|p.buffer)===f&&(c+=p.size*re[p.type]/4)}for(h=0;h<i.length;h++){var _=i[h].indexBuffer.data;for(l=0;l<_.length;l++)n.indexBuffer.data[l+d]+=u;u+=i[h].buffers[f].data.length/c,d+=_.length}}return n},e}(),rs=function(e){function i(){var i=e.call(this)||this;return i.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),i}return iB(i,e),i}(rn),ro=function(e){function i(){var i=e.call(this)||this;return i.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i.uvs=new Float32Array([0,0,1,0,1,1,0,1]),i.vertexBuffer=new i9(i.vertices),i.uvBuffer=new i9(i.uvs),i.addAttribute("aVertexPosition",i.vertexBuffer).addAttribute("aTextureCoord",i.uvBuffer).addIndex([0,1,2,0,2,3]),i}return iB(i,e),i.prototype.map=function(e,i){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+i.width/e.width,this.uvs[3]=n,this.uvs[4]=r+i.width/e.width,this.uvs[5]=n+i.height/e.height,this.uvs[6]=r,this.uvs[7]=n+i.height/e.height,r=i.x,n=i.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+i.width,this.vertices[3]=n,this.vertices[4]=r+i.width,this.vertices[5]=n+i.height,this.vertices[6]=r,this.vertices[7]=n+i.height,this.invalidate(),this},i.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},i}(rn),ra=0,rh=function(){function e(e,i,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ra++,this.static=!!i,this.ubo=!!r,e instanceof i9?(this.buffer=e,this.buffer.type=eB.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new i9(new Float32Array(1)),this.buffer.type=eB.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(i,r,n){if(this.ubo)throw Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[i]=new e(r,n)},e.from=function(i,r,n){return new e(i,r,n)},e.uboFrom=function(i,r){return new e(i,null==r||r,!0)},e}(),rl=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=eF.NONE,this.sourceFrame=new is,this.destinationFrame=new is,this.bindingSourceFrame=new is,this.bindingDestinationFrame=new is,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),ru=[new ii,new ii,new ii,new ii],rc=new ic,rd=function(){function e(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new i8,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new rs,this.quadUv=new ro,this.tempRect=new is,this.activeState={},this.globalUniforms=new rh({outputFrame:new is,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(e,i){for(var r,n,s=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new rl,h=this.renderer.renderTexture,l=i[0].resolution,u=i[0].multisample,c=i[0].padding,d=i[0].autoFit,f=null===(r=i[0].legacy)||void 0===r||r,p=1;p<i.length;p++){var _=i[p];l=Math.min(l,_.resolution),u=Math.min(u,_.multisample),c=this.useMaxPadding?Math.max(c,_.padding):c+_.padding,d=d&&_.autoFit,f=f||null===(n=_.legacy)||void 0===n||n}1===o.length&&(this.defaultFilterStack[0].renderTexture=h.current),o.push(a),a.resolution=l,a.multisample=u,a.legacy=f,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(c);var g=this.tempRect.copyFrom(h.sourceFrame);s.projection.transform&&this.transformAABB(rc.copyFrom(s.projection.transform).invert(),g),d?(a.sourceFrame.fit(g),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(g)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,h.current?h.current.resolution:s.resolution,h.sourceFrame,h.destinationFrame,s.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,l,u),a.filters=i,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var v=this.tempRect;v.x=0,v.y=0,v.width=a.sourceFrame.width,v.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(h.sourceFrame),a.bindingDestinationFrame.copyFrom(h.destinationFrame),a.transform=s.projection.transform,s.projection.transform=null,h.bind(a.renderTexture,a.sourceFrame,v),s.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var e=this.defaultFilterStack,i=e.pop(),r=i.filters;this.activeState=i;var n=this.globalUniforms.uniforms;n.outputFrame=i.sourceFrame,n.resolution=i.resolution;var s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=i.destinationFrame.width,s[1]=i.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*i.resolution),o[1]=Math.round(s[1]*i.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=i.sourceFrame.width*s[2]-.5*o[2],a[3]=i.sourceFrame.height*s[3]-.5*o[3],i.legacy){var h=n.filterArea;h[0]=i.destinationFrame.width,h[1]=i.destinationFrame.height,h[2]=i.sourceFrame.x,h[3]=i.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,i.renderTexture,l.renderTexture,eR.BLEND,i),this.returnFilterTexture(i.renderTexture);else{var u=i.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,i.resolution);c.filterFrame=u.filterFrame;var d=0;for(d=0;d<r.length-1;++d){1===d&&i.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,i.resolution)).filterFrame=u.filterFrame),r[d].apply(this,u,c,eR.CLEAR,i);var f=u;u=c,c=f}r[d].apply(this,u,l.renderTexture,eR.BLEND,i),d>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}i.clear(),this.statePool.push(i)},e.prototype.bindAndClear=function(e,i){void 0===i&&(i=eR.CLEAR);var r=this.renderer,n=r.renderTexture,s=r.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&s.stateId||this.forceClear;(i===eR.CLEAR||i===eR.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(e,i,r,n){var s=this.renderer;s.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=i,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(i._frame,i.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(eT.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(eT.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(e,i){var r=this.activeState,n=r.sourceFrame,s=r.destinationFrame,o=i._texture.orig,a=e.set(s.width,0,0,s.height,n.x,n.y),h=i.worldTransform.copyTo(ic.TEMP_MATRIX);return h.invert(),a.prepend(h),a.scale(1/o.width,1/o.height),a.translate(i.anchor.x,i.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(e,i,r,n){return void 0===r&&(r=1),void 0===n&&(n=eF.NONE),this.texturePool.getOptimalTexture(e,i,r,n)},e.prototype.getFilterTexture=function(e,i,r){if("number"==typeof e){var n=e;e=i,i=n}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,i||e.resolution,r||eF.NONE);return s.filterFrame=e.filterFrame,s},e.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(e,i){var r=ru[0],n=ru[1],s=ru[2],o=ru[3];r.set(i.left,i.top),n.set(i.left,i.bottom),s.set(i.right,i.top),o.set(i.right,i.bottom),e.apply(r,r),e.apply(n,n),e.apply(s,s),e.apply(o,o);var a=Math.min(r.x,n.x,s.x,o.x),h=Math.min(r.y,n.y,s.y,o.y),l=Math.max(r.x,n.x,s.x,o.x),u=Math.max(r.y,n.y,s.y,o.y);i.x=a,i.y=h,i.width=l-a,i.height=u-h},e.prototype.roundFrame=function(e,i,r,n,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){var o=s.a,a=s.b,h=s.c,l=s.d;if((Math.abs(a)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}(s=s?rc.copyFrom(s):rc.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(s,e),e.ceil(i),this.transformAABB(s.invert(),e)}},e}(),rf=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),rp=function(){function e(e){this.renderer=e,this.emptyRenderer=new rf(e),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(e,i){for(var r=this.renderer.texture.boundTextures,n=i-1;n>=0;--n)e[n]=r[n]||null,e[n]&&(e[n]._batchLocation=n)},e.prototype.boundArray=function(e,i,r,n){for(var s=e.elements,o=e.ids,a=e.count,h=0,l=0;l<a;l++){var u=s[l],c=u._batchLocation;if(c>=0&&c<n&&i[c]===u)o[l]=c;else for(;h<n;){var d=i[h];if(!d||d._batchEnabled!==r||d._batchLocation!==h){o[l]=h,u._batchLocation=h,i[h]=u;break}h++}}},e.prototype.destroy=function(){this.renderer=null},e}(),r_=0,rm=function(){function e(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=r_++},e.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=r_++,this.renderer.runners.contextChange.emit(e)},e.prototype.initFromOptions=function(e){var i=this.createContext(this.renderer.view,e);this.initFromContext(i)},e.prototype.createContext=function(e,i){var r;if(G.PREFER_ENV>=ev.WEBGL2&&(r=e.getContext("webgl2",i)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",i)||e.getContext("experimental-webgl",i)))throw Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var e=this.gl,i={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,i,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,i,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(e){var i=this;e.preventDefault(),setTimeout(function(){i.gl.isContextLost()&&i.extensions.loseContext&&i.extensions.loseContext.restoreContext()},0)},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(e){var i=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),rg=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=eF.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},rv=new is,ry=function(){function e(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new iK(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new is,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var i=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;G.PREFER_ENV===ev.WEBGL_LEGACY&&(i=null,r=null),i?e.drawBuffers=function(e){return i.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},e.prototype.bind=function(e,i,r){void 0===r&&(r=0);var n=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),i){var h=i.width>>r,l=i.height>>r,u=h/i.width;this.setViewport(i.x*u,i.y*u,h,l)}else h=e.width>>r,l=e.height>>r,this.setViewport(0,0,h,l)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(e,i,r,n){var s=this.viewport;e=Math.round(e),i=Math.round(i),r=Math.round(r),n=Math.round(n),s.width===r&&s.height===n&&s.x===e&&s.y===i||(s.x=e,s.y=i,s.width=r,s.height=n,this.gl.viewport(e,i,r,n))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(e,i,r,n,s){void 0===s&&(s=eb.COLOR|eb.DEPTH);var o=this.gl;o.clearColor(e,i,r,n),o.clear(s)},e.prototype.initFramebuffer=function(e){var i=new rg(this.gl.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},e.prototype.resizeFramebuffer=function(e){var i=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,e.width,e.height)),r.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height));var n=e.colorTextures,s=n.length;i.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var a=n[o],h=a.parentTextureArray||a;this.renderer.texture.bind(h,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},e.prototype.updateFramebuffer=function(e,i){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,o=s.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?(n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var a=[],h=0;h<o;h++){var l=s[h],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),0===h&&n.msaaBuffer||(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+h,l.target,u._glTextures[this.CONTEXT_UID].texture,i),a.push(r.COLOR_ATTACHMENT0+h))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){var c=e.depthTexture;this.renderer.texture.bind(c,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,i)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},e.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},e.prototype.detectSamples=function(e){var i=this.msaaSamples,r=eF.NONE;if(e<=1||null===i)return r;for(var n=0;n<i.length;n++)if(i[n]<=e){r=i[n];break}return 1===r&&(r=eF.NONE),r},e.prototype.blit=function(e,i,r){var n=this.current,s=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===s.context.webGLVersion&&n){var h=n.glFramebuffers[a];if(h){if(!e){if(!h.msaaBuffer)return;var l=n.colorTextures[0];if(!l)return;h.blitFramebuffer||(h.blitFramebuffer=new iK(n.width,n.height),h.blitFramebuffer.addColorTexture(0,l)),(e=h.blitFramebuffer).colorTextures[0]!==l&&(e.colorTextures[0]=l,e.dirtyId++,e.dirtyFormat++),e.width===n.width&&e.height===n.height||(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}i||((i=rv).width=n.width,i.height=n.height),r||(r=i);var u=i.width===r.width&&i.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(i.left,i.top,i.right,i.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(e,i){var r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),i||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(e){var i=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<i.length;r++)this.disposeFramebuffer(i[r],e)},e.prototype.forceStencil=function(){var e=this.current;if(e){var i=e.glFramebuffers[this.CONTEXT_UID];if(i&&!i.stencil){e.stencil=!0;var r=e.width,n=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),i.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,i.multisample,s.DEPTH24_STENCIL8,r,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,n),i.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new is},e.prototype.destroy=function(){this.renderer=null},e}(),rb={5126:4,5123:2,5121:1},rx=function(){function e(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==i.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;G.PREFER_ENV===ev.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(e){return r.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return r.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==i.webGLVersion){var n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=function(e,i){return n.vertexAttribDivisorANGLE(e,i)},e.drawElementsInstanced=function(e,i,r,s,o){return n.drawElementsInstancedANGLE(e,i,r,s,o)},e.drawArraysInstanced=function(e,i,r,s){return n.drawArraysInstancedANGLE(e,i,r,s)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===i.webGLVersion||!!i.extensions.uint32ElementIndex},e.prototype.bind=function(e,i){i=i||this.renderer.shader.shader;var r=this.gl,n=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var o=n[i.program.id]||this.initGeometryVao(e,i,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,i.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var e=this._activeGeometry,i=this.renderer.buffer,r=0;r<e.buffers.length;r++){var n=e.buffers[r];i.update(n)}},e.prototype.checkCompatibility=function(e,i){var r=e.attributes,n=i.attributeData;for(var s in n)if(!r[s])throw Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(e,i){var r=e.attributes,n=i.attributeData,s=["g",e.id];for(var o in r)n[o]&&s.push(o,n[o].location);return s.join("-")},e.prototype.initGeometryVao=function(e,i,r){void 0===r&&(r=!0);var n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=i.program;a.glPrograms[s]||this.renderer.shader.generateProgram(i),this.checkCompatibility(e,a);var h=this.getSignature(e,a),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[h];if(u)return l[a.id]=u,u;var c=e.buffers,d=e.attributes,f={},p={};for(var _ in c)f[_]=0,p[_]=0;for(var _ in d)!d[_].size&&a.attributeData[_]?d[_].size=a.attributeData[_].size:d[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[d[_].buffer]+=d[_].size*rb[d[_].type];for(var _ in d){var g=d[_],v=g.size;void 0===g.stride&&(f[g.buffer]===v*rb[g.type]?g.stride=0:g.stride=f[g.buffer]),void 0===g.start&&(g.start=p[g.buffer],p[g.buffer]+=v*rb[g.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(var y=0;y<c.length;y++){var b=c[y];o.bind(b),r&&b._glBuffers[s].refCount++}return this.activateVao(e,a),this._activeVao=u,l[a.id]=u,l[h]=u,u},e.prototype.disposeGeometry=function(e,i){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=e.buffers,a=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(e.disposeRunner.remove(this),n){if(a)for(var h=0;h<o.length;h++){var l=o[h]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0!==l.refCount||i||a.dispose(o[h],i))}if(!i){for(var u in n)if("g"===u[0]){var c=n[u];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(e){for(var i=Object.keys(this.managedGeometries),r=0;r<i.length;r++)this.disposeGeometry(this.managedGeometries[i[r]],e)},e.prototype.activateVao=function(e,i){var r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);var h=null;for(var l in a){var u=a[l],c=o[u.buffer],d=c._glBuffers[n];if(i.attributeData[l]){h!==d&&(s.bind(c),h=d);var f=i.attributeData[l].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(f,1)}}}},e.prototype.draw=function(e,i,r,n){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,h=2===a?s.UNSIGNED_SHORT:s.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,i||o.indexBuffer.data.length,h,(r||0)*a,n||1):s.drawElements(e,i||o.indexBuffer.data.length,h,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,i||o.getSize(),n||1):s.drawArrays(e,r,i||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),rT=function(){function e(e){void 0===e&&(e=null),this.type=e$.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=G.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=e$.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function rA(e,i,r){var n=e.createShader(i);return e.shaderSource(n,r),e.compileShader(n),n}function rE(e,i){var r=e.getShaderSource(i).split("\n").map(function(e,i){return i+": "+e}),n=e.getShaderInfoLog(i),s=n.split("\n"),o={},a=s.map(function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(e){return!(!e||o[e])&&(o[e]=!0,!0)}),h=[""];a.forEach(function(e){r[e-1]="%c"+r[e-1]+"%c",h.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=r.join("\n");h[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,h),console.groupEnd()}function rw(e){for(var i=Array(e),r=0;r<i.length;r++)i[r]=!1;return i}function rS(e,i){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*i);case"vec3":return new Float32Array(3*i);case"vec4":return new Float32Array(4*i);case"ivec2":return new Int32Array(2*i);case"ivec3":return new Int32Array(3*i);case"ivec4":return new Int32Array(4*i);case"uvec2":return new Uint32Array(2*i);case"uvec3":return new Uint32Array(3*i);case"uvec4":return new Uint32Array(4*i);case"bool":return!1;case"bvec2":return rw(2*i);case"bvec3":return rw(3*i);case"bvec4":return rw(4*i);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var rP,rM,rI={},rC=rI;function rR(e,i,r){if("precision"!==e.substring(0,9)){var n=i;return i===eD.HIGH&&r!==eD.HIGH&&(n=eD.MEDIUM),"precision "+n+" float;\n"+e}return r!==eD.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var rO={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},rD=null,r$={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function rL(e,i){if(!rD){var r=Object.keys(r$);rD={};for(var n=0;n<r.length;++n){var s=r[n];rD[e[s]]=r$[s]}}return rD[i]}var rF=[{test:function(e){return"float"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e,i){return!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=i&&void 0===i.castToBaseTexture)},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,i){return"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==i.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '},codeUbo:function(e){return"\n                var "+e+"_matrix = uv."+e+".toArray(true);\n\n                data[offset] = "+e+"_matrix[0];\n                data[offset+1] = "+e+"_matrix[1];\n                data[offset+2] = "+e+"_matrix[2];\n        \n                data[offset + 4] = "+e+"_matrix[3];\n                data[offset + 5] = "+e+"_matrix[4];\n                data[offset + 6] = "+e+"_matrix[5];\n        \n                data[offset + 8] = "+e+"_matrix[6];\n                data[offset + 9] = "+e+"_matrix[7];\n                data[offset + 10] = "+e+"_matrix[8];\n            "}},{test:function(e,i){return"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==i.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'},codeUbo:function(e){return"\n                v = uv."+e+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(e){return"vec2"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,i){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==i.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(e){return"\n                    v = uv."+e+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(e){return"vec4"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],rB={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},rk={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},rN=0,rU={},rG=function(){function e(i,r,n){void 0===n&&(n="pixi-shader"),this.id=rN++,this.vertexSrc=i||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(rU[n=n.replace(/\s+/g,"-")]?(rU[n]++,n+="-"+rU[n]):rU[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=rR(this.vertexSrc,G.PRECISION_VERTEX,eD.HIGH),this.fragmentSrc=rR(this.fragmentSrc,G.PRECISION_FRAGMENT,function(){if(!rM){rM=eD.MEDIUM;var e=function(){if(rC===rI||rC&&rC.isContextLost()){var e=G.ADAPTER.createCanvas(),i=void 0;G.PREFER_ENV>=ev.WEBGL2&&(i=e.getContext("webgl2",{})),i||((i=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?i.getExtension("WEBGL_draw_buffers"):i=null),rC=i}return rC}();e&&e.getShaderPrecisionFormat&&(rM=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?eD.HIGH:eD.MEDIUM)}return rM}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(i,r,n){var s=i+r,o=e4[s];return o||(e4[s]=o=new e(i,r,n)),o},e}(),rX=function(){function e(e,i){this.uniformBindCount=0,this.program=e,this.uniformGroup=i?i instanceof rh?i:new rh(i):new rh({}),this.disposeRunner=new iC("disposeShader")}return e.prototype.checkUniformExists=function(e,i){if(i.uniforms[e])return!0;for(var r in i.uniforms){var n=i.uniforms[r];if(n.group&&this.checkUniformExists(e,n))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(i,r,n){return new e(rG.from(i,r),n)},e}(),rV=function(){function e(){this.data=0,this.blendMode=ex.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ex.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},e.for2d=function(){var i=new e;return i.depthTest=!1,i.blend=!0,i},e}(),rH=function(e){function i(r,n,s){var o=this,a=rG.from(r||i.defaultVertexSrc,n||i.defaultFragmentSrc);return(o=e.call(this,a,s)||this).padding=0,o.resolution=G.FILTER_RESOLUTION,o.multisample=G.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new rV,o}return iB(i,e),i.prototype.apply=function(e,i,r,n,s){e.applyFilter(this,i,r,n)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),i}(rX),rj=new ic,rY=function(){function e(e,i){this._texture=e,this.mapCoord=new ic,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===i?.5:i,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,i){void 0===i&&(i=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var s=e[n],o=e[n+1];i[n]=s*r.a+o*r.c+r.tx,i[n+1]=s*r.b+o*r.d+r.ty}return i},e.prototype.update=function(e){var i=this._texture;if(!i||!i.valid||!e&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;var r=i._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=i.orig,s=i.trim;s&&(rj.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(rj));var o=i.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(i._frame.x+h+l)/o.width,a[1]=(i._frame.y+h+l)/o.height,a[2]=(i._frame.x+i._frame.width-h+l)/o.width,a[3]=(i._frame.y+i._frame.height-h+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=i._frame.width===o.width&&i._frame.height===o.height&&0===i.rotate,!0},e}(),rz=function(e){function i(i,r,n){var s=this,o=null;return"string"!=typeof i&&void 0===r&&void 0===n&&(o=i,i=void 0,r=void 0,n=void 0),(s=e.call(this,i||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n)||this).maskSprite=o,s.maskMatrix=new ic,s}return iB(i,e),Object.defineProperty(i.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),i.prototype.apply=function(e,i,r,n){var s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new rY(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,r,n))},i}(rH),rW=function(){function e(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},e.prototype.push=function(e,i){var r=i;if(!r.isMaskData){var n=this.maskDataPool.pop()||new rT;n.pooled=!0,n.maskObject=i,r=n}var s=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==e$.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case e$.SCISSOR:this.renderer.scissor.push(r);break;case e$.STENCIL:this.renderer.stencil.push(r);break;case e$.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case e$.COLOR:this.pushColorMask(r)}r.type===e$.SPRITE&&this.maskStack.push(r)},e.prototype.pop=function(e){var i=this.maskStack.pop();if(i&&i._target===e){if(i.enabled)switch(i.type){case e$.SCISSOR:this.renderer.scissor.pop(i);break;case e$.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case e$.SPRITE:this.popSpriteMask(i);break;case e$.COLOR:this.popColorMask(i)}if(i.reset(),i.pooled&&this.maskDataPool.push(i),0!==this.maskStack.length){var r=this.maskStack[this.maskStack.length-1];r.type===e$.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},e.prototype.detect=function(e){var i=e.maskObject;i?i.isSprite?e.type=e$.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=e$.SCISSOR:e.type=e$.STENCIL:e.type=e$.COLOR},e.prototype.pushSpriteMask=function(e){var i,r,n=e.maskObject,s=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new rz]);var a,h,l=this.renderer,u=l.renderTexture;if(u.current){var c=u.current;a=e.resolution||c.resolution,h=null!==(i=e.multisample)&&void 0!==i?i:c.multisample}else a=e.resolution||l.resolution,h=null!==(r=e.multisample)&&void 0!==r?r:l.multisample;o[0].resolution=a,o[0].multisample=h,o[0].maskSprite=n;var d=s.filterArea;s.filterArea=n.getBounds(!0),l.filter.push(s,o),s.filterArea=d,e._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.pushColorMask=function(e){var i=e._colorMask,r=e._colorMask=i&e.colorMask;r!==i&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))},e.prototype.popColorMask=function(e){var i=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==i&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))},e.prototype.destroy=function(){this.renderer=null},e}(),rq=function(){function e(e){this.renderer=e,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(e){var i=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var n=this.getStackLength();n!==r&&(0===n?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),rZ=new ic,rQ=[],rJ=function(e){function i(i){var r=e.call(this,i)||this;return r.glConst=G.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return iB(i,e),i.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},i.prototype.calcScissorRect=function(e){var i;if(!e._scissorRectLocal){var r=e._scissorRect,n=e.maskObject,s=this.renderer,o=s.renderTexture,a=n.getBounds(!0,null!==(i=rQ.pop())&&void 0!==i?i:new is);this.roundFrameToPixels(a,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),r&&a.fit(r),e._scissorRectLocal=a}},i.isMatrixRotated=function(e){if(!e)return!1;var i=e.a,r=e.b,n=e.c,s=e.d;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(s)>1e-4)},i.prototype.testScissor=function(e){var r=e.maskObject;if(!r.isFastRect||!r.isFastRect()||i.isMatrixRotated(r.worldTransform)||i.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var n=e._scissorRectLocal;return n.width>0&&n.height>0},i.prototype.roundFrameToPixels=function(e,r,n,s,o){i.isMatrixRotated(o)||((o=o?rZ.copyFrom(o):rZ.identity()).translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,e),e.fit(s),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))},i.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var i=this.renderer.gl;e._scissorRect||i.enable(i.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},i.prototype.pop=function(e){var i=this.renderer.gl;e&&rQ.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},i.prototype._useCurrent=function(){var e,i=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?i.y:this.renderer.height-i.height-i.y,this.renderer.gl.scissor(i.x,e,i.width,i.height)},i}(rq),rK=function(e){function i(i){var r=e.call(this,i)||this;return r.glConst=G.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return iB(i,e),i.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},i.prototype.push=function(e){var i=e.maskObject,r=this.renderer.gl,n=e._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;var s=e._colorMask;0!==s&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,0!==s&&(e._colorMask=s,r.colorMask(!!(1&s),!!(2&s),!!(4&s),!!(8&s))),this._useCurrent()},i.prototype.pop=function(e){var i=this.renderer.gl;if(0===this.getStackLength())i.disable(i.STENCIL_TEST);else{var r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(r._colorMask=n,i.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))),this._useCurrent()}},i.prototype._useCurrent=function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},i}(rq),r0=function(){function e(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ic,this.transform=null}return e.prototype.update=function(e,i,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(e,i,r,n){var s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/i.width*2,s.d=1/i.height*2*o,s.tx=-1-i.x*s.a,s.ty=-o-i.y*s.d},e.prototype.setTransform=function(e){},e.prototype.destroy=function(){this.renderer=null},e}(),r2=new is,r1=new is,r4=function(){function e(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new is,this.destinationFrame=new is,this.viewportFrame=new is}return e.prototype.bind=function(e,i,r){void 0===e&&(e=null);var n,s,o,a=this.renderer;this.current=e,e?(o=(n=e.baseTexture).resolution,i||(r2.width=e.frame.width,r2.height=e.frame.height,i=r2),r||(r1.x=e.frame.x,r1.y=e.frame.y,r1.width=i.width,r1.height=i.height,r=r1),s=n.framebuffer):(o=a.resolution,i||(r2.width=a.screen.width,r2.height=a.screen.height,i=r2),r||((r=r2).width=i.width,r.height=i.height));var h=this.viewportFrame;h.x=r.x*o,h.y=r.y*o,h.width=r.width*o,h.height=r.height*o,e||(h.y=a.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(s,h),this.renderer.projection.update(r,i,o,!s),e?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(r)},e.prototype.clear=function(e,i){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=r.width!==n.width||r.height!==n.height;if(s){var o=this.viewportFrame,a=o.x,h=o.y,l=o.width,u=o.height;a=Math.round(a),h=Math.round(h),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,h,l,u)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],i),s&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function r3(e,i,r,n,s){r.buffer.update(s)}var r6={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},r8={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64},r5=function(){function e(e,i){this.program=e,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}(),r7=0,r9={textureCount:0,uboCount:0},nt=function(){function e(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=r7++}return e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof ac)return ac;try{var e=Function("param1","param2","param3","return param1[param2] === param3;");ac=!0===e({a:"b"},"a","b")}catch(e){ac=!1}return ac}())throw Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(e){this.gl=e,this.reset()},e.prototype.bind=function(e,i){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),i||(r9.textureCount=0,r9.uboCount=0,this.syncUniformGroup(e.uniformGroup,r9)),n},e.prototype.setUniforms=function(e){var i=this.shader.program,r=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(r.uniformData,e,this.renderer)},e.prototype.syncUniformGroup=function(e,i){var r=this.getGlProgram();e.static&&e.dirtyId===r.uniformDirtyGroups[e.id]||(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,i))},e.prototype.syncUniforms=function(e,i,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(i.uniformData,e.uniforms,this.renderer,r)},e.prototype.createSyncGroups=function(e){var i=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=function(e,i){var r,n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var s in e.uniforms){var o=i[s];if(o){for(var a=e.uniforms[s],h=!1,l=0;l<rF.length;l++)if(rF[l].test(o,a)){n.push(rF[l].code(s,a)),h=!0;break}if(!h){var u=(1!==o.size||o.isArray?rk:rB)[o.type].replace("location",'ud["'+s+'"].location');n.push('\n            cu = ud["'+s+'"];\n            cv = cu.value;\n            v = uv["'+s+'"];\n            '+u+";")}}else(null===(r=e.uniforms[s])||void 0===r?void 0:r.group)&&(e.uniforms[s].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+s+", '"+s+"');\n                    "):n.push("\n                        renderer.shader.syncUniformGroup(uv."+s+", syncData);\n                    "))}return Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[i],e.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(e,i){var r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;var n=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,i);e.buffer.update(),n(r.uniformData,e.uniforms,this.renderer,r9,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[i])},e.prototype.createSyncBufferGroup=function(e,i,r){var n=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var s=this.gl.getUniformBlockIndex(i.program,r);i.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(i.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(e,i){if(!e.autoManage)return{size:0,syncFunc:r3};for(var r=function(e,i){var r=[];for(var n in e)i[n]&&r.push(i[n]);return r.sort(function(e,i){return e.index-i.index}),r}(e.uniforms,i),n=function(e){for(var i=e.map(function(e){return{data:e,offset:0,dataLen:0,dirty:0}}),r=0,n=0,s=0,o=0;o<i.length;o++){var a=i[o];if(r=r8[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,n%r!=0&&n<16){var h=n%r%16;n+=h,s+=h}n+r>16?(s=16*Math.ceil(s/16),a.offset=s,s+=r,n=r):(a.offset=s,n+=r,s+=r)}return{uboElements:i,size:s=16*Math.ceil(s/16)}}(r),s=n.uboElements,o=n.size,a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],h=0;h<s.length;h++){for(var l=s[h],u=e.uniforms[l.data.name],c=l.data.name,d=!1,f=0;f<rF.length;f++){var p=rF[f];if(p.codeUbo&&p.test(l.data,u)){a.push("offset = "+l.offset/4+";",rF[f].codeUbo(l.data.name,u)),d=!0;break}}if(!d){if(l.data.size>1){var _=rO[l.data.type],g=Math.max(r8[l.data.type]/16,1),v=_/g,y=(4-v%4)%4;a.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+l.data.size*g+"; i++)\n                {\n                    for(var j = 0; j < "+v+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+y+";\n                }\n\n                ")}else{var b=r6[l.data.type];a.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+l.offset/4+";\n                "+b+";\n                ")}}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:o,syncFunc:Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var h=new Float32Array(a.size/4);e.buffer.update(h)}return i.uniformGroups[e.id]=a.syncFunc,i.uniformGroups[e.id]},e.prototype.getSignature=function(e,i,r){var n=e.uniforms,s=[r+"-"];for(var o in n)s.push(o),i[o]&&s.push(i[o].type);return s.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(e){var i=this.gl,r=e.program,n=function(e,i){var r=rA(e,e.VERTEX_SHADER,i.vertexSrc),n=rA(e,e.FRAGMENT_SHADER,i.fragmentSrc),s=e.createProgram();if(e.attachShader(s,r),e.attachShader(s,n),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||e.getProgramParameter(s,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||rE(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||rE(e,n),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(s)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(s))),i.attributeData=function(e,i){for(var r={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=i.getActiveAttrib(e,s);if(0!==o.name.indexOf("gl_")){var a=rL(i,o.type),h={type:a,name:o.name,size:rO[a],location:i.getAttribLocation(e,o.name)};r[o.name]=h}}return r}(s,e),i.uniformData=function(e,i){for(var r={},n=i.getProgramParameter(e,i.ACTIVE_UNIFORMS),s=0;s<n;s++){var o=i.getActiveUniform(e,s),a=o.name.replace(/\[.*?\]$/,""),h=!!o.name.match(/\[.*?\]$/),l=rL(i,o.type);r[a]={name:a,index:s,type:l,size:o.size,isArray:h,value:rS(l,o.size)}}return r}(s,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(i.vertexSrc)){var o=Object.keys(i.attributeData);o.sort(function(e,i){return e>i?1:-1});for(var a=0;a<o.length;a++)i.attributeData[o[a]].location=a,e.bindAttribLocation(s,a,o[a]);e.linkProgram(s)}e.deleteShader(r),e.deleteShader(n);var h={};for(var a in i.uniformData){var l=i.uniformData[a];h[a]={location:e.getUniformLocation(s,a),value:rS(l.type,l.size)}}return new r5(s,h)}(i,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}(),ne=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ex.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new rV,this.defaultState.blend=!0}return e.prototype.contextChange=function(e){var i;this.gl=e,this.blendModes=(void 0===i&&(i=[]),i[ex.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.ADD]=[e.ONE,e.ONE],i[ex.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.NONE]=[0,0],i[ex.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],i[ex.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[ex.SRC_IN]=[e.DST_ALPHA,e.ZERO],i[ex.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],i[ex.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[ex.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],i[ex.DST_IN]=[e.ZERO,e.SRC_ALPHA],i[ex.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],i[ex.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],i[ex.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[ex.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],i),this.set(this.defaultState),this.reset()},e.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var i=this.stateId^e.data,r=0;i;)1&i&&this.map[r].call(this,!!(e.data&1<<r)),i>>=1,r++;this.stateId=e.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,e)},e.prototype.forceState=function(e){e=e||this.defaultState;for(var i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data},e.prototype.setBlend=function(i){this.updateCheck(e.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(i){this.updateCheck(e.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(e){this.gl.depthMask(e)},e.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},e.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var i=this.blendModes[e],r=this.gl;2===i.length?r.blendFunc(i[0],i[1]):r.blendFuncSeparate(i[0],i[1],i[2],i[3]),6===i.length?(this._blendEq=!0,r.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(e,i){this.gl.polygonOffset(e,i)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(e,i){var r=this.checks.indexOf(e);i&&-1===r?this.checks.push(e):i||-1===r||this.checks.splice(r,1)},e.checkBlendMode=function(e,i){e.setBlendMode(i.blendMode)},e.checkPolygonOffset=function(e,i){e.setPolygonOffset(1,i.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),ni=function(){function e(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=G.GC_MAX_IDLE,this.checkCountMax=G.GC_MAX_CHECK_COUNT,this.mode=G.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==eO.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var e=this.renderer.texture,i=e.managedTextures,r=!1,n=0;n<i.length;n++){var s=i[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),i[n]=null,r=!0)}if(r){var o=0;for(n=0;n<i.length;n++)null!==i[n]&&(i[o++]=i[n]);i.length=o}},e.prototype.unload=function(e){var i=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&i.destroyTexture(r);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},e.prototype.destroy=function(){this.renderer=null},e}(),nr=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ew.UNSIGNED_BYTE,this.internalFormat=eA.RGBA,this.samplerType=0},nn=function(){function e(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new iX,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var e,i,r,n,s,o,a,h,l,u,c,d,f,p,_,g,v,y,b,x,T,A,E,w=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=("WebGL2RenderingContext"in globalThis&&w instanceof globalThis.WebGL2RenderingContext?((e={})[ew.UNSIGNED_BYTE]=((i={})[eA.RGBA]=w.RGBA8,i[eA.RGB]=w.RGB8,i[eA.RG]=w.RG8,i[eA.RED]=w.R8,i[eA.RGBA_INTEGER]=w.RGBA8UI,i[eA.RGB_INTEGER]=w.RGB8UI,i[eA.RG_INTEGER]=w.RG8UI,i[eA.RED_INTEGER]=w.R8UI,i[eA.ALPHA]=w.ALPHA,i[eA.LUMINANCE]=w.LUMINANCE,i[eA.LUMINANCE_ALPHA]=w.LUMINANCE_ALPHA,i),e[ew.BYTE]=((r={})[eA.RGBA]=w.RGBA8_SNORM,r[eA.RGB]=w.RGB8_SNORM,r[eA.RG]=w.RG8_SNORM,r[eA.RED]=w.R8_SNORM,r[eA.RGBA_INTEGER]=w.RGBA8I,r[eA.RGB_INTEGER]=w.RGB8I,r[eA.RG_INTEGER]=w.RG8I,r[eA.RED_INTEGER]=w.R8I,r),e[ew.UNSIGNED_SHORT]=((n={})[eA.RGBA_INTEGER]=w.RGBA16UI,n[eA.RGB_INTEGER]=w.RGB16UI,n[eA.RG_INTEGER]=w.RG16UI,n[eA.RED_INTEGER]=w.R16UI,n[eA.DEPTH_COMPONENT]=w.DEPTH_COMPONENT16,n),e[ew.SHORT]=((s={})[eA.RGBA_INTEGER]=w.RGBA16I,s[eA.RGB_INTEGER]=w.RGB16I,s[eA.RG_INTEGER]=w.RG16I,s[eA.RED_INTEGER]=w.R16I,s),e[ew.UNSIGNED_INT]=((o={})[eA.RGBA_INTEGER]=w.RGBA32UI,o[eA.RGB_INTEGER]=w.RGB32UI,o[eA.RG_INTEGER]=w.RG32UI,o[eA.RED_INTEGER]=w.R32UI,o[eA.DEPTH_COMPONENT]=w.DEPTH_COMPONENT24,o),e[ew.INT]=((a={})[eA.RGBA_INTEGER]=w.RGBA32I,a[eA.RGB_INTEGER]=w.RGB32I,a[eA.RG_INTEGER]=w.RG32I,a[eA.RED_INTEGER]=w.R32I,a),e[ew.FLOAT]=((h={})[eA.RGBA]=w.RGBA32F,h[eA.RGB]=w.RGB32F,h[eA.RG]=w.RG32F,h[eA.RED]=w.R32F,h[eA.DEPTH_COMPONENT]=w.DEPTH_COMPONENT32F,h),e[ew.HALF_FLOAT]=((l={})[eA.RGBA]=w.RGBA16F,l[eA.RGB]=w.RGB16F,l[eA.RG]=w.RG16F,l[eA.RED]=w.R16F,l),e[ew.UNSIGNED_SHORT_5_6_5]=((u={})[eA.RGB]=w.RGB565,u),e[ew.UNSIGNED_SHORT_4_4_4_4]=((c={})[eA.RGBA]=w.RGBA4,c),e[ew.UNSIGNED_SHORT_5_5_5_1]=((d={})[eA.RGBA]=w.RGB5_A1,d),e[ew.UNSIGNED_INT_2_10_10_10_REV]=((f={})[eA.RGBA]=w.RGB10_A2,f[eA.RGBA_INTEGER]=w.RGB10_A2UI,f),e[ew.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[eA.RGB]=w.R11F_G11F_B10F,p),e[ew.UNSIGNED_INT_5_9_9_9_REV]=((_={})[eA.RGB]=w.RGB9_E5,_),e[ew.UNSIGNED_INT_24_8]=((g={})[eA.DEPTH_STENCIL]=w.DEPTH24_STENCIL8,g),e[ew.FLOAT_32_UNSIGNED_INT_24_8_REV]=((v={})[eA.DEPTH_STENCIL]=w.DEPTH32F_STENCIL8,v),E=e):((y={})[ew.UNSIGNED_BYTE]=((b={})[eA.RGBA]=w.RGBA,b[eA.RGB]=w.RGB,b[eA.ALPHA]=w.ALPHA,b[eA.LUMINANCE]=w.LUMINANCE,b[eA.LUMINANCE_ALPHA]=w.LUMINANCE_ALPHA,b),y[ew.UNSIGNED_SHORT_5_6_5]=((x={})[eA.RGB]=w.RGB,x),y[ew.UNSIGNED_SHORT_4_4_4_4]=((T={})[eA.RGBA]=w.RGBA,T),y[ew.UNSIGNED_SHORT_5_5_5_1]=((A={})[eA.RGBA]=w.RGBA,A),E=y),E);var S=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=S;for(var P=0;P<S;P++)this.boundTextures[P]=null;this.emptyTextures={};var M=new nr(w.createTexture());for(w.bindTexture(w.TEXTURE_2D,M.texture),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[w.TEXTURE_2D]=M,this.emptyTextures[w.TEXTURE_CUBE_MAP]=new nr(w.createTexture()),w.bindTexture(w.TEXTURE_CUBE_MAP,this.emptyTextures[w.TEXTURE_CUBE_MAP].texture),P=0;P<6;P++)w.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+P,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,null);for(w.texParameteri(w.TEXTURE_CUBE_MAP,w.TEXTURE_MAG_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_CUBE_MAP,w.TEXTURE_MIN_FILTER,w.LINEAR),P=0;P<this.boundTextures.length;P++)this.bind(null,P)},e.prototype.bind=function(e,i){void 0===i&&(i=0);var r=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[i]!==e&&(this.currentLocation!==i&&(this.currentLocation=i,r.activeTexture(r.TEXTURE0+i)),r.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,r.activeTexture(r.TEXTURE0+i)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[i]=e}else this.currentLocation!==i&&(this.currentLocation=i,r.activeTexture(r.TEXTURE0+i)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[i]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},e.prototype.unbind=function(e){var i=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<r.length;n++)r[n]===e&&(this.currentLocation!==n&&(i.activeTexture(i.TEXTURE0+n),this.currentLocation=n),i.bindTexture(e.target,this.emptyTextures[e.target].texture),r[n]=null)},e.prototype.ensureSamplerType=function(e){var i=this.boundTextures,r=this.hasIntegerTextures,n=this.CONTEXT_UID;if(r)for(var s=e-1;s>=0;--s){var o=i[s];o&&o._glTextures[n].samplerType!==eS.FLOAT&&this.renderer.texture.unbind(o)}},e.prototype.initTexture=function(e){var i=new nr(this.gl.createTexture());return i.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),i},e.prototype.initTextureType=function(e,i){var r,n;i.internalFormat=null!==(n=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==n?n:e.format,2===this.webGLVersion&&e.type===ew.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=e.type},e.prototype.updateTexture=function(e){var i=e._glTextures[this.CONTEXT_UID];if(i){var r=this.renderer;if(this.initTextureType(e,i),e.resource&&e.resource.upload(r,e,i))i.samplerType!==eS.FLOAT&&(this.hasIntegerTextures=!0);else{var n=e.realWidth,s=e.realHeight,o=r.gl;(i.width!==n||i.height!==s||i.dirtyId<0)&&(i.width=n,i.height=s,o.texImage2D(e.target,0,i.internalFormat,n,s,0,e.format,i.type,null))}e.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(e),i.dirtyId=e.dirtyId}},e.prototype.destroyTexture=function(e,i){var r=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!i)){var n=this.managedTextures.indexOf(e);-1!==n&&eQ(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(e){var i=e._glTextures[this.CONTEXT_UID];i&&(e.mipmap!==eI.POW2&&2===this.webGLVersion||e.isPowerOfTwo?i.mipmap=e.mipmap>=1:i.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?i.wrapMode=e.wrapMode:i.wrapMode=eM.CLAMP,e.resource&&e.resource.style(this.renderer,e,i)||this.setStyle(e,i),i.dirtyStyleId=e.dirtyStyleId)},e.prototype.setStyle=function(e,i){var r=this.gl;if(i.mipmap&&e.mipmap!==eI.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,i.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===eP.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===eP.LINEAR){var s=Math.min(e.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===eP.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===eP.LINEAR?r.LINEAR:r.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),ns=new ic,no=function(e){function i(i,r){void 0===i&&(i=ey.UNKNOWN);var n=e.call(this)||this;return r=Object.assign({},G.RENDER_OPTIONS,r),n.options=r,n.type=i,n.screen=new is(0,0,r.width,r.height),n.view=r.view||G.ADAPTER.createCanvas(),n.resolution=r.resolution||G.RESOLUTION,n.useContextAlpha=r.useContextAlpha,n.autoDensity=!!r.autoDensity,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&(e2("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=r.transparent,n.backgroundAlpha=r.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return iB(i,e),i.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),i.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var r=this.view.width/this.resolution,n=this.view.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.view.style.width=r+"px",this.view.style.height=n+"px"),this.emit("resize",r,n)},i.prototype.generateTexture=function(e,i,r,n){void 0===i&&(i={}),"number"==typeof i&&(e2("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:r,region:n});var s=i.region,o=function(e,i){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>i.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>i.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(i,["region"]);0===(n=s||e.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);var a=i6.create(ik({width:n.width,height:n.height},o));return ns.tx=-n.x,ns.ty=-n.y,this.render(e,{renderTexture:a,clear:!1,transform:ns,skipUpdateTransform:!!e.parent}),a},i.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=ey.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(i.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=eV(e),eX(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),i}(H),na=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},nh=function(){function e(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(e){var i=this.gl,r=this.CONTEXT_UID,n=e._glBuffers[r]||this.createGLBuffer(e);i.bindBuffer(e.type,n.buffer)},e.prototype.bindBufferBase=function(e,i){var r=this.gl,n=this.CONTEXT_UID;if(this.boundBufferBases[i]!==e){var s=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[i]=e,r.bindBufferBase(r.UNIFORM_BUFFER,i,s.buffer)}},e.prototype.bindBufferRange=function(e,i,r){var n=this.gl,s=this.CONTEXT_UID;r=r||0;var o=e._glBuffers[s]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,i||0,o.buffer,256*r,256)},e.prototype.update=function(e){var i=this.gl,r=this.CONTEXT_UID,n=e._glBuffers[r];if(e._updateID!==n.updateID){if(n.updateID=e._updateID,i.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var s=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,s)}}},e.prototype.dispose=function(e,i){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(i||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(e){for(var i=Object.keys(this.managedBuffers),r=0;r<i.length;r++)this.dispose(this.managedBuffers[i[r]],e)},e.prototype.createGLBuffer=function(e){var i=this.CONTEXT_UID,r=this.gl;return e._glBuffers[i]=new na(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},e}(),nl=function(e){function i(r){var n,s,o=e.call(this,ey.WEBGL,r)||this;return r=o.options,o.gl=null,o.CONTEXT_UID=0,o.runners={destroy:new iC("destroy"),contextChange:new iC("contextChange"),reset:new iC("reset"),update:new iC("update"),postrender:new iC("postrender"),prerender:new iC("prerender"),resize:new iC("resize")},o.runners.contextChange.add(o),o.globalUniforms=new rh({projectionMatrix:new ic},!0),o.addSystem(rW,"mask").addSystem(rm,"context").addSystem(ne,"state").addSystem(nt,"shader").addSystem(nn,"texture").addSystem(nh,"buffer").addSystem(rx,"geometry").addSystem(ry,"framebuffer").addSystem(rJ,"scissor").addSystem(rK,"stencil").addSystem(r0,"projection").addSystem(ni,"textureGC").addSystem(rd,"filter").addSystem(r4,"renderTexture").addSystem(rp,"batch"),o.initPlugins(i.__plugins),o.multisample=void 0,r.context?o.context.initFromContext(r.context):o.context.initFromOptions({alpha:!!o.useContextAlpha,antialias:r.antialias,premultipliedAlpha:o.useContextAlpha&&"notMultiplied"!==o.useContextAlpha,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:o.options.powerPreference}),o.renderingToScreen=!0,n=2===o.context.webGLVersion?"WebGL 2":"WebGL 1",eN||(G.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1?(s=globalThis.console).log.apply(s,["\n %c %c %c PixiJS "+eU+" -  "+n+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):globalThis.console&&globalThis.console.log("PixiJS "+eU+" - "+n+" - http://www.pixijs.com/"),eN=!0),o.resize(o.options.width,o.options.height),o}return iB(i,e),i.create=function(e){if(void 0===ek&&(ek=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:G.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!G.ADAPTER.getWebGLRenderingContext())return!1;var i=G.ADAPTER.createCanvas(),r=i.getContext("webgl",e)||i.getContext("experimental-webgl",e),n=!(!r||!r.getContextAttributes().stencil);if(r){var s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,n}catch(e){return!1}}()),ek)return new i(e);throw Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},i.prototype.contextChange=function(){var e,i=this.gl;if(1===this.context.webGLVersion){var r=i.getParameter(i.FRAMEBUFFER_BINDING);i.bindFramebuffer(i.FRAMEBUFFER,null),e=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.FRAMEBUFFER,r)}else r=i.getParameter(i.DRAW_FRAMEBUFFER_BINDING),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),e=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,r);e>=eF.HIGH?this.multisample=eF.HIGH:e>=eF.MEDIUM?this.multisample=eF.MEDIUM:e>=eF.LOW?this.multisample=eF.LOW:this.multisample=eF.NONE},i.prototype.addSystem=function(e,i){var r=new e(this);if(this[i])throw Error('Whoops! The name "'+i+'" is already in use');for(var n in this[i]=r,this.runners)this.runners[n].add(r);return this},i.prototype.render=function(e,i){var r,n,s,o;if(i&&(i instanceof i6?(e2("6.0.0","Renderer#render arguments changed, use options instead."),r=i,n=arguments[2],s=arguments[3],o=arguments[4]):(r=i.renderTexture,n=i.clear,s=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(r||(this._lastObjectRendered=e),!o){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},i.prototype.generateTexture=function(i,r,n,s){void 0===r&&(r={});var o=e.prototype.generateTexture.call(this,i,r,n,s);return this.framebuffer.blit(),o},i.prototype.resize=function(i,r){e.prototype.resize.call(this,i,r),this.runners.resize.emit(this.screen.height,this.screen.width)},i.prototype.reset=function(){return this.runners.reset.emit(),this},i.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},i.prototype.destroy=function(i){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();e.prototype.destroy.call(this,i),this.gl=null},Object.defineProperty(i.prototype,"extract",{get:function(){return e2("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),i.registerPlugin=function(e,i){e2("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),iI.add({name:e,type:iT.RendererPlugin,ref:i})},i.__plugins={},i}(no);iI.handleByMap(iT.RendererPlugin,nl.__plugins);var nu="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",nc=function(){this.texArray=null,this.blend=0,this.type=eT.TRIANGLES,this.start=0,this.size=0,this.data=null},nd=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),nf=function(){function e(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(e+" isn't a valid view type")}},e}(),np=function(e){function i(i){var r=e.call(this,i)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=rV.for2d(),r.size=4*G.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),i.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return iB(i,e),i.prototype.contextChange=function(){var e=this.renderer.gl;G.PREFER_ENV===ev.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),G.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(e,i){if(0===e)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=i.createShader(i.FRAGMENT_SHADER);;){var n="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}".replace(/%forloop%/gi,function(e){for(var i="",r=0;r<e;++r)r>0&&(i+="\nelse "),r<e-1&&(i+="if(test == "+r+".0){}");return i}(e));if(i.shaderSource(r,n),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS))break;e=e/2|0}return e}(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},i.prototype.initFlushBuffers=function(){for(var e=i._drawCallPool,r=i._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new nc);for(;r.length<s;)r.push(new nd);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},i.prototype.onPrerender=function(){this._flushId=0},i.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},i.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,r=this.MAX_TEXTURES,n=i._textureArrayPool,s=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,h=++iX._globalBatch,l=0,u=n[0],c=0;s.copyBoundTextures(o,r);for(var d=0;d<this._bufferSize;++d){var f=e[d];e[d]=null,f._batchEnabled!==h&&(u.count>=r&&(s.boundArray(u,o,h,r),this.buildDrawCalls(u,c,d),c=d,u=n[++l],++h),f._batchEnabled=h,f.touched=a,u.elements[u.count++]=f)}for(u.count>0&&(s.boundArray(u,o,h,r),this.buildDrawCalls(u,c,this._bufferSize),++l,++h),d=0;d<o.length;d++)o[d]=null;iX._globalBatch=h},i.prototype.buildDrawCalls=function(e,r,n){var s=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,h=this.vertexSize,l=i._drawCallPool,u=this._dcIndex,c=this._aIndex,d=this._iIndex,f=l[u];f.start=this._iIndex,f.texArray=e;for(var p=r;p<n;++p){var _=s[p],g=ej[_._texture.baseTexture.alphaMode?1:0][_.blendMode];s[p]=null,r<p&&f.blend!==g&&(f.size=d-f.start,r=p,(f=l[++u]).texArray=e,f.start=d),this.packInterleavedGeometry(_,o,a,c,d),c+=_.vertexData.length/2*h,d+=_.indices.length,f.blend=g}r<n&&(f.size=d-f.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d},i.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,r=0;r<e.count;r++)i.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0},i.prototype.updateGeometry=function(){var e=this._packedGeometries,i=this._attributeBuffer,r=this._indexBuffer;G.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},i.prototype.drawBatches=function(){for(var e=this._dcIndex,r=this.renderer,n=r.gl,s=r.state,o=i._drawCallPool,a=null,h=0;h<e;h++){var l=o[h],u=l.texArray,c=l.type,d=l.size,f=l.start,p=l.blend;a!==u&&(a=u,this.bindAndClearTexArray(u)),this.state.blendMode=p,s.set(this.state),n.drawElements(c,d,n.UNSIGNED_SHORT,2*f)}},i.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},i.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),G.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},i.prototype.stop=function(){this.flush()},i.prototype.destroy=function(){for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]&&this._packedGeometries[i].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},i.prototype.getAttributeBuffer=function(e){var i=eq(Math.ceil(e/8)),r=eZ(i),n=8*i;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new nf(n*this.vertexSize*4)),s},i.prototype.getIndexBuffer=function(e){var i=eq(Math.ceil(e/12)),r=eZ(i);this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(12*i)),n},i.prototype.packInterleavedGeometry=function(e,i,r,n,s){for(var o=i.uint32View,a=i.float32View,h=n/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=f<1&&e._texture.baseTexture.alphaMode?eY(e._tintRGB,f):e._tintRGB+(255*f<<24),_=0;_<c.length;_+=2)a[n++]=c[_],a[n++]=c[_+1],a[n++]=l[_],a[n++]=l[_+1],o[n++]=p,a[n++]=d;for(_=0;_<u.length;_++)r[s++]=h+u[_]},i._drawCallPool=[],i._textureArrayPool=[],i}(rf),n_=function(){function e(e,i){if(this.vertexSrc=e,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},0>i.indexOf("%count%"))throw Error('Fragment template must contain "%count%".');if(0>i.indexOf("%forloop%"))throw Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var i=new Int32Array(e),r=0;r<e;r++)i[r]=r;this.defaultGroupCache[e]=rh.from({uSamplers:i},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new rG(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ic,default:this.defaultGroupCache[e]};return new rX(this.programCache[e],s)},e.prototype.generateSampleSrc=function(e){var i="";i+="\n\n";for(var r=0;r<e;r++)r>0&&(i+="\nelse "),r<e-1&&(i+="if(vTextureId < "+r+".5)"),i+="\n{\n	color = texture2D(uSamplers["+r+"], vTextureCoord);\n}";return i+"\n\n"},e}(),nm=function(e){function i(i){void 0===i&&(i=!1);var r=e.call(this)||this;return r._buffer=new i9(null,i,!1),r._indexBuffer=new i9(null,i,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,ew.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,ew.FLOAT).addAttribute("aColor",r._buffer,4,!0,ew.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,ew.FLOAT).addIndex(r._indexBuffer),r}return iB(i,e),i}(rn),ng="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",nv="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ny=(function(){function e(){}return e.create=function(e){var i=Object.assign({vertex:ng,fragment:nv,geometryClass:nm,vertexSize:6},e),r=i.vertex,n=i.fragment,s=i.vertexSize,o=i.geometryClass;return function(e){function i(i){var a=e.call(this,i)||this;return a.shaderGenerator=new n_(r,n),a.geometryClass=o,a.vertexSize=s,a}return iB(i,e),i}(np)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return ng},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return nv},enumerable:!1,configurable:!0}),e})().create();Object.assign(ny,{extension:{name:"batch",type:iT.RendererPlugin}}),/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */G.SORTABLE_CHILDREN=!1;var nb=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?is.EMPTY:((e=e||new is(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addPointMatrix=function(e,i){var r=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,h=e.ty,l=r*i.x+s*i.y+a,u=n*i.x+o*i.y+h;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(e){var i=this.minX,r=this.minY,n=this.maxX,s=this.maxY,o=e[0],a=e[1];i=o<i?o:i,r=a<r?a:r,n=o>n?o:n,s=a>s?a:s,i=(o=e[2])<i?o:i,r=(a=e[3])<r?a:r,n=o>n?o:n,s=a>s?a:s,i=(o=e[4])<i?o:i,r=(a=e[5])<r?a:r,n=o>n?o:n,s=a>s?a:s,i=(o=e[6])<i?o:i,r=(a=e[7])<r?a:r,n=o>n?o:n,s=a>s?a:s,this.minX=i,this.minY=r,this.maxX=n,this.maxY=s},e.prototype.addFrame=function(e,i,r,n,s){this.addFrameMatrix(e.worldTransform,i,r,n,s)},e.prototype.addFrameMatrix=function(e,i,r,n,s){var o=e.a,a=e.b,h=e.c,l=e.d,u=e.tx,c=e.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,g=o*i+h*r+u,v=a*i+l*r+c;d=g<d?g:d,f=v<f?v:f,p=g>p?g:p,_=v>_?v:_,d=(g=o*n+h*r+u)<d?g:d,f=(v=a*n+l*r+c)<f?v:f,p=g>p?g:p,_=v>_?v:_,d=(g=o*i+h*s+u)<d?g:d,f=(v=a*i+l*s+c)<f?v:f,p=g>p?g:p,_=v>_?v:_,d=(g=o*n+h*s+u)<d?g:d,f=(v=a*n+l*s+c)<f?v:f,p=g>p?g:p,_=v>_?v:_,this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},e.prototype.addVertexData=function(e,i,r){for(var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY,h=i;h<r;h+=2){var l=e[h],u=e[h+1];n=l<n?l:n,s=u<s?u:s,o=l>o?l:o,a=u>a?u:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(e,i,r,n){this.addVerticesMatrix(e.worldTransform,i,r,n)},e.prototype.addVerticesMatrix=function(e,i,r,n,s,o){void 0===s&&(s=0),void 0===o&&(o=s);for(var a=e.a,h=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty,f=this.minX,p=this.minY,_=this.maxX,g=this.maxY,v=r;v<n;v+=2){var y=i[v],b=i[v+1],x=a*y+l*b+c,T=u*b+h*y+d;f=Math.min(f,x-s),_=Math.max(_,x+s),p=Math.min(p,T-o),g=Math.max(g,T+o)}this.minX=f,this.minY=p,this.maxX=_,this.maxY=g},e.prototype.addBounds=function(e){var i=this.minX,r=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<i?e.minX:i,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s},e.prototype.addBoundsMask=function(e,i){var r=e.minX>i.minX?e.minX:i.minX,n=e.minY>i.minY?e.minY:i.minY,s=e.maxX<i.maxX?e.maxX:i.maxX,o=e.maxY<i.maxY?e.maxY:i.maxY;if(r<=s&&n<=o){var a=this.minX,h=this.minY,l=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=n<h?n:h,this.maxX=s>l?s:l,this.maxY=o>u?o:u}},e.prototype.addBoundsMatrix=function(e,i){this.addFrameMatrix(i,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,i){var r=e.minX>i.x?e.minX:i.x,n=e.minY>i.y?e.minY:i.y,s=e.maxX<i.x+i.width?e.maxX:i.x+i.width,o=e.maxY<i.y+i.height?e.maxY:i.y+i.height;if(r<=s&&n<=o){var a=this.minX,h=this.minY,l=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=n<h?n:h,this.maxX=s>l?s:l,this.maxY=o>u?o:u}},e.prototype.pad=function(e,i){void 0===e&&(e=0),void 0===i&&(i=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=i,this.maxY+=i)},e.prototype.addFramePad=function(e,i,r,n,s,o){e-=s,i-=o,r+=s,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>n?this.maxY:n},e}(),nx=function(e,i){return(nx=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function nT(e,i){function r(){this.constructor=e}nx(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var nA=function(e){function i(){var i=e.call(this)||this;return i.tempDisplayObjectParent=null,i.transform=new iE,i.alpha=1,i.visible=!0,i.renderable=!0,i.cullable=!1,i.cullArea=null,i.parent=null,i.worldAlpha=1,i._lastSortedIndex=0,i._zIndex=0,i.filterArea=null,i.filters=null,i._enabledFilters=null,i._bounds=new nb,i._localBounds=null,i._boundsID=0,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._maskRefCount=0,i._destroyed=!1,i.isSprite=!1,i.isMask=!1,i}return nT(i,e),i.mixin=function(e){for(var r=Object.keys(e),n=0;n<r.length;++n){var s=r[n];Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),i.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},i.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},i.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new is),i=this._boundsRect),this._bounds.getRectangle(i)},i.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new is),e=this._localBoundsRect),this._localBounds||(this._localBounds=new nb);var i=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=r,this.transform=i,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o},i.prototype.toGlobal=function(e,i,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},i.prototype.toLocal=function(e,i,r,n){return i&&(e=i.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},i.prototype.setParent=function(e){if(!e||!e.addChild)throw Error("setParent: Argument must be a Container");return e.addChild(this),e},i.prototype.setTransform=function(e,i,r,n,s,o,a,h,l){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=r||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=h,this.pivot.y=l,this},i.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(i.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new nE),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),i.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},i.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(i.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.transform.rotation*it},set:function(e){this.transform.rotation=e*ie},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask!==e){var i;this._mask&&(i=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(i._maskRefCount--,0===i._maskRefCount&&(i.renderable=!0,i.isMask=!1)),this._mask=e,this._mask&&(i=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===i._maskRefCount&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}},enumerable:!1,configurable:!0}),i}(H),nE=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.sortDirty=null,i}return nT(i,e),i}(nA);function nw(e,i){return e.zIndex===i.zIndex?e._lastSortedIndex-i._lastSortedIndex:e.zIndex-i.zIndex}nA.prototype.displayObjectUpdateTransform=nA.prototype.updateTransform;var nS=function(e){function i(){var i=e.call(this)||this;return i.children=[],i.sortableChildren=G.SORTABLE_CHILDREN,i.sortDirty=!1,i}return nT(i,e),i.prototype.onChildrenChange=function(e){},i.prototype.addChild=function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(i.length>1)for(var n=0;n<i.length;n++)this.addChild(i[n]);else{var s=i[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return i[0]},i.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},i.prototype.swapChildren=function(e,i){if(e!==i){var r=this.getChildIndex(e),n=this.getChildIndex(i);this.children[r]=i,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},i.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(-1===i)throw Error("The supplied DisplayObject must be a child of the caller");return i},i.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw Error("The index "+i+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);eQ(this.children,r,1),this.children.splice(i,0,e),this.onChildrenChange(i)},i.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},i.prototype.removeChild=function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(i.length>1)for(var n=0;n<i.length;n++)this.removeChild(i[n]);else{var s=i[0],o=this.children.indexOf(s);if(-1===o)return null;s.parent=null,s.transform._parentID=-1,eQ(this.children,o,1),this._boundsID++,this.onChildrenChange(o),s.emit("removed",this),this.emit("childRemoved",s,this,o)}return i[0]},i.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,eQ(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},i.prototype.removeChildren=function(e,i){void 0===e&&(e=0),void 0===i&&(i=this.children.length);var r,n=e,s=i-n;if(s>0&&s<=i){r=this.children.splice(n,s);for(var o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(e),o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}if(0===s&&0===this.children.length)return[];throw RangeError("removeChildren: numeric values are outside the acceptable range.")},i.prototype.sortChildren=function(){for(var e=!1,i=0,r=this.children.length;i<r;++i){var n=this.children[i];n._lastSortedIndex=i,e||0===n.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(nw),this.sortDirty=!1},i.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var r=this.children[e];r.visible&&r.updateTransform()}},i.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(i.visible&&i.renderable){if(i.calculateBounds(),i._mask){var r=i._mask.isMaskData?i._mask.maskObject:i._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(i._bounds,r._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}}this._bounds.updateID=this._boundsID},i.prototype.getLocalBounds=function(i,r){void 0===r&&(r=!1);var n=e.prototype.getLocalBounds.call(this,i);if(!r)for(var s=0,o=this.children.length;s<o;++s){var a=this.children[s];a.visible&&a.updateTransform()}return n},i.prototype._calculateBounds=function(){},i.prototype._renderWithCulling=function(e){var r,n,s=e.renderTexture.sourceFrame;if(s.width>0&&s.height>0){if(this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==i.prototype._render&&(r=this.getBounds(!0)),r&&s.intersects(r,n))this._render(e);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var h=this.children[o],l=h.cullable;h.cullable=l||!this.cullArea,h.render(e),h.cullable=l}}},i.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var i=0,r=this.children.length;i<r;++i)this.children[i].render(e)}}},i.prototype.renderAdvanced=function(e){var i=this.filters,r=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<i.length;n++)i[n].enabled&&this._enabledFilters.push(i[n])}var s=i&&this._enabledFilters&&this._enabledFilters.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==e$.NONE));if(s&&e.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e),n=0;for(var o=this.children.length;n<o;++n)this.children[n].render(e)}s&&e.batch.flush(),r&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},i.prototype._render=function(e){},i.prototype.destroy=function(i){e.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof i?i:i&&i.children,n=this.removeChildren(0,this.children.length);if(r)for(var s=0;s<n.length;++s)n[s].destroy(i)},Object.defineProperty(i.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;this.scale.x=0!==i?e/i:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;this.scale.y=0!==i?e/i:1,this._height=e},enumerable:!1,configurable:!0}),i}(nA);nS.prototype.containerUpdateTransform=nS.prototype.updateTransform;var nP=Math.pow,nM=(e,i,r)=>new Promise((n,s)=>{var o=e=>{try{h(r.next(e))}catch(e){s(e)}},a=e=>{try{h(r.throw(e))}catch(e){s(e)}},h=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,a);h((r=r.apply(e,i)).next())});(aw=aE||(aE={})).supportMoreMaskDivisions=!0,aw.setOpacityFromMotion=!1,(aP=aS||(aS={})).LOG_LEVEL_VERBOSE=0,aP.LOG_LEVEL_WARNING=1,aP.LOG_LEVEL_ERROR=2,aP.LOG_LEVEL_NONE=999,aP.logLevel=aP.LOG_LEVEL_WARNING,aP.sound=!0,aP.motionSync=!0,aP.motionFadingDuration=500,aP.idleMotionFadingDuration=2e3,aP.expressionFadingDuration=500,aP.preserveExpressionOnMotion=!0,aP.cubism4=aE;let nI={log(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];aS.logLevel<=aS.LOG_LEVEL_VERBOSE&&console.log("[".concat(e,"]"),...r)},warn(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];aS.logLevel<=aS.LOG_LEVEL_WARNING&&console.warn("[".concat(e,"]"),...r)},error(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];aS.logLevel<=aS.LOG_LEVEL_ERROR&&console.error("[".concat(e,"]"),...r)}};function nC(e,i,r){return e<i?i:e>r?r:e}function nR(e,i,r,n,s){let o=i[n];null!==o&&typeof o===e&&(r[s]=o)}function nO(e,i,r,n,s){let o=i[n];Array.isArray(o)&&(r[s]=o.filter(i=>null!==i&&typeof i===e))}function nD(e,i){i.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(i.prototype,r))})})}class n$ extends H{init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return nM(this,null,function*(){if(!this.definitions[e])return void nI.warn(this.tag,"Undefined expression at [".concat(e,"]"));if(null===this.expressions[e])return void nI.warn(this.tag,"Cannot set expression at [".concat(e,"] because it's already failed in loading."));if(this.expressions[e])return this.expressions[e];let i=yield this._loadExpression(e);return this.expressions[e]=i,i})}_loadExpression(e){throw Error("Not implemented.")}setRandomExpression(){return nM(this,null,function*(){if(this.definitions.length){let e=[];for(let i=0;i<this.definitions.length;i++)null!==this.expressions[i]&&this.expressions[i]!==this.currentExpression&&i!==this.reserveExpressionIndex&&e.push(i);if(e.length){let i=Math.floor(Math.random()*e.length);return this.setExpression(i)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return nM(this,null,function*(){if("number"!=typeof e&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;let i=yield this.loadExpression(e);return!(!i||this.reserveExpressionIndex!==e)&&(this.reserveExpressionIndex=-1,this.currentExpression=i,this._setExpression(i),!0)})}update(e,i){return!this.isFinished()&&this.updateParameters(e,i)}destroy(){this.destroyed=!0,this.emit("destroy"),this.definitions=void 0,this.expressions=void 0}constructor(e,i){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag="ExpressionManager(".concat(e.name,")")}}let nL=40/7.5,nF=1/150;class nB{focus(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.targetX=nC(e,-1,1),this.targetY=nC(i,-1,1),r&&(this.x=this.targetX,this.y=this.targetY)}update(e){let i=this.targetX-this.x,r=this.targetY-this.y;if(.01>Math.abs(i)&&.01>Math.abs(r))return;let n=Math.sqrt(nP(i,2)+nP(r,2)),s=nL/(1e3/e),o=i/n*s-this.vx,a=r/n*s-this.vy,h=Math.sqrt(nP(o,2)+nP(a,2)),l=s*nF*e;h>l&&(o*=l/h,a*=l/h),this.vx+=o,this.vy+=a;let u=Math.sqrt(nP(this.vx,2)+nP(this.vy,2)),c=.5*(Math.sqrt(nP(l,2)+8*l*n)-l);u>c&&(this.vx*=c/u,this.vy*=c/u),this.x+=this.vx,this.y+=this.vy}constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}}class nk{resolveURL(e){return tG.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),void 0!==this.pose&&(this.pose=e(this.pose,"pose")),void 0!==this.physics&&(this.physics=e(this.physics,"physics"));for(let i=0;i<this.textures.length;i++)this.textures[i]=e(this.textures[i],"textures[".concat(i,"]"))}getDefinedFiles(){let e=[];return this.replaceFiles(i=>(e.push(i),i)),e}validateFiles(e){let i=(i,r)=>{let n=this.resolveURL(i);if(!e.includes(n)){if(r)throw Error('File "'.concat(i,"\" is defined in settings, but doesn't exist in given files"));return!1}return!0};return[this.moc,...this.textures].forEach(e=>i(e,!0)),this.getDefinedFiles().filter(e=>i(e,!1))}constructor(e){var i;let r;this.json=e;let n=e.url;if("string"!=typeof n)throw TypeError("The `url` field in settings JSON must be defined as a string.");this.url=n,this.name=(-1!=(r=(i=this.url).lastIndexOf("/"))&&(i=i.slice(0,r)),-1!==(r=i.lastIndexOf("/"))&&(i=i.slice(r+1)),i)}}var nN=((ad=nN||{})[ad.NONE=0]="NONE",ad[ad.IDLE=1]="IDLE",ad[ad.NORMAL=2]="NORMAL",ad[ad.FORCE=3]="FORCE",ad);class nU{reserve(e,i,r){if(r<=0)return nI.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&i===this.currentIndex)return nI.log(this.tag,"Motion is already playing.",this.dump(e,i)),!1;if(e===this.reservedGroup&&i===this.reservedIndex||e===this.reservedIdleGroup&&i===this.reservedIdleIndex)return nI.log(this.tag,"Motion is already reserved.",this.dump(e,i)),!1;if(1===r){if(0!==this.currentPriority)return nI.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,i)),!1;if(void 0!==this.reservedIdleGroup)return nI.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,i)),!1;this.setReservedIdle(e,i)}else{if(r<3){if(r<=this.currentPriority)return nI.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,i)),!1;if(r<=this.reservePriority)return nI.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,i)),!1}this.setReserved(e,i,r)}return!0}start(e,i,r,n){if(1===n){if(this.setReservedIdle(void 0,void 0),0!==this.currentPriority)return nI.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(i,r)),!1}else{if(i!==this.reservedGroup||r!==this.reservedIndex)return nI.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(i,r)),!1;this.setReserved(void 0,void 0,0)}return!!e&&(this.setCurrent(i,r,n),!0)}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,i,r){this.currentPriority=r,this.currentGroup=e,this.currentIndex=i}setReserved(e,i,r){this.reservePriority=r,this.reservedGroup=e,this.reservedIndex=i}setReservedIdle(e,i){this.reservedIdleGroup=e,this.reservedIdleIndex=i}isActive(e,i){return e===this.currentGroup&&i===this.currentIndex||e===this.reservedGroup&&i===this.reservedIndex||e===this.reservedIdleGroup&&i===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return void 0===this.currentGroup&&void 0===this.reservedIdleGroup}shouldOverrideExpression(){return!aS.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,i){return this.debug?'\n<Requested> group = "'.concat(e,'", index = ').concat(i,"\n")+["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"].map(e=>"["+e+"] "+this[e]).join("\n"):""}constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}}class nG{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(e=>e.volume=this._volume)}static add(e,i,r){let n=new Audio(e);return n.volume=this._volume,n.preload="auto",n.addEventListener("ended",()=>{this.dispose(n),null==i||i()}),n.addEventListener("error",i=>{this.dispose(n),nI.warn("SoundManager",'Error occurred on "'.concat(e,'"'),i.error),null==r||r(i.error)}),this.audios.push(n),n}static play(e){return new Promise((i,r)=>{var n;null==(n=e.play())||n.catch(i=>{e.dispatchEvent(new ErrorEvent("error",{error:i})),r(i)}),e.readyState===e.HAVE_ENOUGH_DATA?i():e.addEventListener("canplaythrough",i)})}static dispose(e){e.pause(),e.removeAttribute("src"),function(e,i){let r=e.indexOf(i);-1!==r&&e.splice(r,1)}(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}nG.audios=[],nG._volume=.5;var nX=((af=nX||{}).ALL="ALL",af.IDLE="IDLE",af.NONE="NONE",af);class nV extends H{init(e){(null==e?void 0:e.idleMotionGroup)&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){let i;for(let e of Object.keys(this.definitions))this.motionGroups[e]=[];switch(null==e?void 0:e.motionPreload){case"NONE":return;case"ALL":i=Object.keys(this.definitions);break;default:i=[this.groups.idle]}for(let e of i)if(this.definitions[e])for(let i=0;i<this.definitions[e].length;i++)this.loadMotion(e,i).then()}loadMotion(e,i){return nM(this,null,function*(){var r;if(!(null==(r=this.definitions[e])?void 0:r[i]))return void nI.warn(this.tag,'Undefined motion at "'.concat(e,'"[').concat(i,"]"));if(null===this.motionGroups[e][i])return void nI.warn(this.tag,'Cannot start motion at "'.concat(e,'"[').concat(i,"] because it's already failed in loading."));if(this.motionGroups[e][i])return this.motionGroups[e][i];let n=yield this._loadMotion(e,i);return this.destroyed?void 0:(this.motionGroups[e][i]=null!=n?n:null,n)})}_loadMotion(e,i){throw Error("Not implemented.")}startMotion(e,i){return nM(this,arguments,function*(e,i){var r;let n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nN.NORMAL;if(!this.state.reserve(e,i,s))return!1;let o=null==(r=this.definitions[e])?void 0:r[i];if(!o)return!1;if(this.currentAudio&&nG.dispose(this.currentAudio),aS.sound){let e=this.getSoundFile(o);if(e)try{n=nG.add(this.settings.resolveURL(e),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=n}catch(i){nI.warn(this.tag,"Failed to create audio",e,i)}}let a=yield this.loadMotion(e,i);if(n){let e=nG.play(n).catch(e=>nI.warn(this.tag,"Failed to play audio",n.src,e));aS.motionSync&&(yield e)}return this.state.start(a,e,i,s)?(nI.log(this.tag,"Start motion:",this.getMotionName(o)),this.emit("motionStart",e,i,n),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(a),!0):(n&&(nG.dispose(n),this.currentAudio=void 0),!1)})}startRandomMotion(e,i){return nM(this,null,function*(){let r=this.definitions[e];if(null==r?void 0:r.length){let n=[];for(let i=0;i<r.length;i++)null===this.motionGroups[e][i]||this.state.isActive(e,i)||n.push(i);if(n.length){let r=Math.floor(Math.random()*n.length);return this.startMotion(e,n[r],i)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(nG.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,i){var r;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&(null==(r=this.expressionManager)||r.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,nN.IDLE)),this.updateParameters(e,i)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),null==(e=this.expressionManager)||e.destroy(),this.definitions=void 0,this.motionGroups=void 0}constructor(e,i){super(),this.motionGroups={},this.state=new nU,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag="MotionManager(".concat(e.name,")"),this.state.tag=this.tag}}let nH={x:0,y:0,width:0,height:0};class nj extends H{init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){let e=this.getSize();this.originalWidth=e[0],this.originalHeight=e[1];let i=Object.assign({width:2,height:2},this.getLayout());this.localTransform.scale(i.width/2,i.height/2),this.width=this.originalWidth*this.localTransform.a,this.height=this.originalHeight*this.localTransform.d;let r=void 0!==i.x&&i.x-i.width/2||void 0!==i.centerX&&i.centerX||void 0!==i.left&&i.left-i.width/2||void 0!==i.right&&i.right+i.width/2||0,n=void 0!==i.y&&i.y-i.height/2||void 0!==i.centerY&&i.centerY||void 0!==i.top&&i.top-i.height/2||void 0!==i.bottom&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*r,-this.height*n)}setupHitAreas(){for(let e of this.getHitAreaDefs().filter(e=>e.index>=0))this.hitAreas[e.name]=e}hitTest(e,i){return Object.keys(this.hitAreas).filter(r=>this.isHit(r,e,i))}isHit(e,i,r){if(!this.hitAreas[e])return!1;let n=this.hitAreas[e].index,s=this.getDrawableBounds(n,nH);return s.x<=i&&i<=s.x+s.width&&s.y<=r&&r<=s.y+s.height}getDrawableBounds(e,i){let r=this.getDrawableVertices(e),n=r[0],s=r[0],o=r[1],a=r[1];for(let e=0;e<r.length;e+=2){let i=r[e],h=r[e+1];n=Math.min(i,n),s=Math.max(i,s),o=Math.min(h,o),a=Math.max(h,a)}return null!=i||(i={}),i.x=n,i.y=o,i.width=s-n,i.height=a-o,i}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,i){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}constructor(){super(...arguments),this.focusController=new nB,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new ic,this.drawingMatrix=new ic,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}}class nY extends Error{constructor(e,i,r,n=!1){super(e),this.url=i,this.status=r,this.aborted=n}}let nz=class{static createXHR(e,i,r,n,s){let o=new XMLHttpRequest;if(nz.allXhrSet.add(o),e){let i=nz.xhrMap.get(e);i?i.add(o):(i=new Set([o]),nz.xhrMap.set(e,i)),e.listeners("destroy").includes(nz.cancelXHRs)||e.once("destroy",nz.cancelXHRs)}return o.open("GET",i),o.responseType=r,o.onload=()=>{(200===o.status||0===o.status)&&o.response?n(o.response):o.onerror()},o.onerror=()=>{nI.warn("XHRLoader","Failed to load resource as ".concat(o.responseType," (Status ").concat(o.status,"): ").concat(i)),s(new nY("Network error.",i,o.status))},o.onabort=()=>s(new nY("Aborted.",i,o.status,!0)),o.onloadend=()=>{var i;nz.allXhrSet.delete(o),e&&(null==(i=nz.xhrMap.get(e))||i.delete(o))},o}static cancelXHRs(){var e;null==(e=nz.xhrMap.get(this))||e.forEach(e=>{e.abort(),nz.allXhrSet.delete(e)}),nz.xhrMap.delete(this)}static release(){nz.allXhrSet.forEach(e=>e.abort()),nz.allXhrSet.clear(),nz.xhrMap=new WeakMap}};function nW(e,i){let r=-1;return function n(s,o){if(o)return Promise.reject(o);if(s<=r)return Promise.reject(Error("next() called multiple times"));r=s;let a=e[s];if(!a)return Promise.resolve();try{return Promise.resolve(a(i,n.bind(null,s+1)))}catch(e){return Promise.reject(e)}}(0)}nz.xhrMap=new WeakMap,nz.allXhrSet=new Set,nz.loader=(e,i)=>new Promise((i,r)=>{nz.createXHR(e.target,e.settings?e.settings.resolveURL(e.url):e.url,e.type,r=>{e.result=r,i()},r).send()});class nq{static load(e){return nW(this.middlewares,e).then(()=>e.result)}}nq.middlewares=[nz.loader];let nZ="Live2DFactory",nQ=(e,i)=>nM(void 0,null,function*(){if("string"==typeof e.source){let i=yield nq.load({url:e.source,type:"json",target:e.live2dModel});i.url=e.source,e.source=i,e.live2dModel.emit("settingsJSONLoaded",i)}return i()}),nJ=(e,i)=>nM(void 0,null,function*(){if(e.source instanceof nk)return e.settings=e.source,i();if("object"==typeof e.source){let r=n3.findRuntime(e.source);if(r){let n=r.createModelSettings(e.source);return e.settings=n,e.live2dModel.emit("settingsLoaded",n),i()}}throw TypeError("Unknown settings format.")}),nK=(e,i)=>{if(e.settings){let r=n3.findRuntime(e.settings);if(r)return r.ready().then(i)}return i()},n0=(e,i)=>nM(void 0,null,function*(){yield i();let r=e.internalModel;if(r){let i=e.settings,n=n3.findRuntime(i);if(n){let s=[];i.pose&&s.push(nq.load({settings:i,url:i.pose,type:"json",target:r}).then(i=>{r.pose=n.createPose(r.coreModel,i),e.live2dModel.emit("poseLoaded",r.pose)}).catch(i=>{e.live2dModel.emit("poseLoadError",i),nI.warn(nZ,"Failed to load pose.",i)})),i.physics&&s.push(nq.load({settings:i,url:i.physics,type:"json",target:r}).then(i=>{r.physics=n.createPhysics(r.coreModel,i),e.live2dModel.emit("physicsLoaded",r.physics)}).catch(i=>{e.live2dModel.emit("physicsLoadError",i),nI.warn(nZ,"Failed to load physics.",i)})),s.length&&(yield Promise.all(s))}}}),n2=(e,i)=>nM(void 0,null,function*(){if(!e.settings)throw TypeError("Missing settings.");{let r=e.live2dModel,n=e.settings.textures.map(i=>(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={resourceOptions:{crossorigin:i.crossOrigin}};if(i3.fromURL)return i3.fromURL(e,r).catch(e=>{if(e instanceof Error)throw e;let i=Error("Texture loading error");throw i.event=e,i});r.resourceOptions.autoLoad=!1;let n=i3.from(e,r);if(n.baseTexture.valid)return Promise.resolve(n);let s=n.baseTexture.resource;return null!=s._live2d_load||(s._live2d_load=new Promise((e,i)=>{let r=e=>{s.source.removeEventListener("error",r);let n=Error("Texture loading error");n.event=e,i(n)};s.source.addEventListener("error",r),s.load().then(()=>e(n)).catch(r)})),s._live2d_load})(e.settings.resolveURL(i),{crossOrigin:e.options.crossOrigin}));if(yield i(),!e.internalModel)throw TypeError("Missing internal model.");r.internalModel=e.internalModel,r.emit("modelLoaded",e.internalModel),r.textures=yield Promise.all(n),r.emit("textureLoaded",r.textures)}}),n1=(e,i)=>nM(void 0,null,function*(){let r=e.settings;if(r instanceof nk){let n=n3.findRuntime(r);if(!n)throw TypeError("Unknown model settings.");let s=yield nq.load({settings:r,url:r.moc,type:"arraybuffer",target:e.live2dModel});if(!n.isValidMoc(s))throw Error("Invalid moc data");let o=n.createCoreModel(s);return e.internalModel=n.createInternalModel(o,r,e.options),i()}throw TypeError("Missing settings.")}),n4=class{static registerRuntime(e){n4.runtimes.push(e),n4.runtimes.sort((e,i)=>i.version-e.version)}static findRuntime(e){for(let i of n4.runtimes)if(i.test(e))return i}static setupLive2DModel(e,i,r){return nM(this,null,function*(){let n=Promise.all([new Promise(i=>e.once("textureLoaded",i)),new Promise(i=>e.once("modelLoaded",i))]).then(()=>e.emit("ready"));yield nW(n4.live2DModelMiddlewares,{live2dModel:e,source:i,options:r||{}}),yield n,e.emit("load")})}static loadMotion(e,i,r){var n;let s=n=>e.emit("motionLoadError",i,r,n);try{let o=null==(n=e.definitions[i])?void 0:n[r];if(!o)return Promise.resolve(void 0);e.listeners("destroy").includes(n4.releaseTasks)||e.once("destroy",n4.releaseTasks);let a=n4.motionTasksMap.get(e);a||(a={},n4.motionTasksMap.set(e,a));let h=a[i];h||(h=[],a[i]=h);let l=e.getMotionFile(o);return null!=h[r]||(h[r]=nq.load({url:l,settings:e.settings,type:e.motionDataType,target:e}).then(n=>{var s;let a=null==(s=n4.motionTasksMap.get(e))?void 0:s[i];a&&delete a[r];let h=e.createMotion(n,i,o);return e.emit("motionLoaded",i,r,h),h}).catch(i=>{nI.warn(e.tag,"Failed to load motion: ".concat(l,"\n"),i),s(i)})),h[r]}catch(n){nI.warn(e.tag,'Failed to load motion at "'.concat(i,'"[').concat(r,"]\n"),n),s(n)}return Promise.resolve(void 0)}static loadExpression(e,i){let r=r=>e.emit("expressionLoadError",i,r);try{let n=e.definitions[i];if(!n)return Promise.resolve(void 0);e.listeners("destroy").includes(n4.releaseTasks)||e.once("destroy",n4.releaseTasks);let s=n4.expressionTasksMap.get(e);s||(s=[],n4.expressionTasksMap.set(e,s));let o=e.getExpressionFile(n);return null!=s[i]||(s[i]=nq.load({url:o,settings:e.settings,type:"json",target:e}).then(r=>{let s=n4.expressionTasksMap.get(e);s&&delete s[i];let o=e.createExpression(r,n);return e.emit("expressionLoaded",i,o),o}).catch(i=>{nI.warn(e.tag,"Failed to load expression: ".concat(o,"\n"),i),r(i)})),s[i]}catch(n){nI.warn(e.tag,"Failed to load expression at [".concat(i,"]\n"),n),r(n)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof nV?n4.motionTasksMap.delete(this):n4.expressionTasksMap.delete(this)}},n3=n4;function n6(e){this.tap(e.data.global.x,e.data.global.y)}function n8(e){this.focus(e.data.global.x,e.data.global.y)}n3.runtimes=[],n3.urlToJSON=nQ,n3.jsonToSettings=nJ,n3.waitUntilReady=nK,n3.setupOptionals=n0,n3.setupEssentials=n2,n3.createInternalModel=n1,n3.live2DModelMiddlewares=[nQ,nJ,nK,n0,n2,n1],n3.motionTasksMap=new WeakMap,n3.expressionTasksMap=new WeakMap,nV.prototype._loadMotion=function(e,i){return n3.loadMotion(this,e,i)},n$.prototype._loadExpression=function(e){return n3.loadExpression(this,e)};class n5 extends iE{}let n7=new ii,n9=new ic;class st extends nS{static from(e,i){let r=new this(i);return n3.setupLive2DModel(r,e,i).then(()=>r)}static fromSync(e,i){let r=new this(i);return n3.setupLive2DModel(r,e,i).then(null==i?void 0:i.onLoad).catch(null==i?void 0:i.onError),r}static registerTicker(e){n=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var i;n||(n=null==(i=window.PIXI)?void 0:i.Ticker),e?this._destroyed||(n?(n.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):nI.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(null==n||n.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag="Live2DModel(".concat(this.internalModel.settings.name,")");let i=Object.assign({autoUpdate:!0,autoInteract:!0},e);i.autoInteract&&(this.interactive=!0),this.autoInteract=i.autoInteract,this.autoUpdate=i.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,i,r){return void 0===i?this.internalModel.motionManager.startRandomMotion(e,r):this.internalModel.motionManager.startMotion(e,i,r)}expression(e){return this.internalModel.motionManager.expressionManager?void 0===e?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n7.x=e,n7.y=i,this.toModelPosition(n7,n7,!0);let n=n7.x/this.internalModel.originalWidth*2-1,s=Math.atan2(n7.y/this.internalModel.originalHeight*2-1,n);this.internalModel.focusController.focus(Math.cos(s),-Math.sin(s),r)}tap(e,i){let r=this.hitTest(e,i);r.length&&(nI.log(this.tag,"Hit",r),this.emit("hit",r))}hitTest(e,i){return n7.x=e,n7.y=i,this.toModelPosition(n7,n7),this.internalModel.hitTest(n7.x,n7.y)}toModelPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.clone(),r=arguments.length>2?arguments[2]:void 0;return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,i),this.internalModel.localTransform.applyInverse(i,i),i}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(n.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let i=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),i=!0);for(let r=0;r<this.textures.length;r++){let n=this.textures[r];n.valid&&(!i&&n.baseTexture._glTextures[this.glContextID]||(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(n.baseTexture,0)),this.internalModel.bindTexture(r,n.baseTexture._glTextures[this.glContextID].texture),n.baseTexture.touched=e.textureGC.count)}let r=e.framebuffer.viewport;this.internalModel.viewport=[r.x,r.y,r.width,r.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);let n=n9.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(n),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),(null==e?void 0:e.texture)&&this.textures.forEach(i=>i.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new n5,this.anchor=new iu(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}}nD(st,[class{get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",n6,this):this.off("pointertap",n6,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",n8,this)))}unregisterInteraction(){var e;this.interactionManager&&(null==(e=this.interactionManager)||e.off("pointermove",n8,this),this.interactionManager=void 0)}constructor(){this._autoInteract=!1}}]);let se=class{static resolveURL(e,i){var r;let n=null==(r=se.filesMap[e])?void 0:r[i];if(void 0===n)throw Error("Cannot find this file from uploaded files: "+i);return n}static upload(e,i){return nM(this,null,function*(){let r={};for(let n of i.getDefinedFiles()){let s=decodeURI(tG.resolve(i.url,n)),o=e.find(e=>e.webkitRelativePath===s);o&&(r[n]=URL.createObjectURL(o))}se.filesMap[i._objectURL]=r})}static createSettings(e){return nM(this,null,function*(){let i=e.find(e=>e.name.endsWith("model.json")||e.name.endsWith("model3.json"));if(!i)throw TypeError("Settings file not found");let r=JSON.parse((yield se.readText(i)));r.url=i.webkitRelativePath;let n=n3.findRuntime(r);if(!n)throw Error("Unknown settings JSON");let s=n.createModelSettings(r);return s._objectURL=URL.createObjectURL(i),s})}static readText(e){return nM(this,null,function*(){return new Promise((i,r)=>{let n=new FileReader;n.onload=()=>i(n.result),n.onerror=r,n.readAsText(e,"utf8")})})}};se.filesMap={},se.factory=(e,i)=>nM(void 0,null,function*(){if(Array.isArray(e.source)&&e.source[0]instanceof File){let i=e.source,r=i.settings;if(r){if(!r._objectURL)throw Error('"_objectURL" must be specified in ModelSettings')}else r=yield se.createSettings(i);r.validateFiles(i.map(e=>encodeURI(e.webkitRelativePath))),yield se.upload(i,r),r.resolveURL=function(e){return se.resolveURL(this._objectURL,e)},e.source=r,e.live2dModel.once("modelLoaded",e=>{e.once("destroy",function(){let e=this.settings._objectURL;if(URL.revokeObjectURL(e),se.filesMap[e])for(let i of Object.values(se.filesMap[e]))URL.revokeObjectURL(i);delete se.filesMap[e]})})}return i()}),n3.live2DModelMiddlewares.unshift(se.factory);let si=class{static unzip(e,i){return nM(this,null,function*(){let r=yield si.getFilePaths(e),n=[];for(let e of i.getDefinedFiles()){let s=decodeURI(tG.resolve(i.url,e));r.includes(s)&&n.push(s)}let s=yield si.getFiles(e,n);for(let e=0;e<s.length;e++){let i=n[e];Object.defineProperty(s[e],"webkitRelativePath",{value:i})}return s})}static createSettings(e){return nM(this,null,function*(){let i=(yield si.getFilePaths(e)).find(e=>e.endsWith("model.json")||e.endsWith("model3.json"));if(!i)throw Error("Settings file not found");let r=yield si.readText(e,i);if(!r)throw Error("Empty settings file: "+i);let n=JSON.parse(r);n.url=i;let s=n3.findRuntime(n);if(!s)throw Error("Unknown settings JSON");return s.createModelSettings(n)})}static zipReader(e,i){return nM(this,null,function*(){throw Error("Not implemented")})}static getFilePaths(e){return nM(this,null,function*(){throw Error("Not implemented")})}static getFiles(e,i){return nM(this,null,function*(){throw Error("Not implemented")})}static readText(e,i){return nM(this,null,function*(){throw Error("Not implemented")})}static releaseReader(e){}};if(si.ZIP_PROTOCOL="zip://",si.uid=0,si.factory=(e,i)=>nM(void 0,null,function*(){let r,n,s;let o=e.source;if("string"==typeof o&&(o.endsWith(".zip")||o.startsWith(si.ZIP_PROTOCOL))?(r=o.startsWith(si.ZIP_PROTOCOL)?o.slice(si.ZIP_PROTOCOL.length):o,n=yield nq.load({url:r,type:"blob",target:e.live2dModel})):Array.isArray(o)&&1===o.length&&o[0]instanceof File&&o[0].name.endsWith(".zip")&&(n=o[0],r=URL.createObjectURL(n),s=o.settings),n){if(!n.size)throw Error("Empty zip file");let i=yield si.zipReader(n,r);s||(s=yield si.createSettings(i)),s._objectURL=si.ZIP_PROTOCOL+si.uid+"/"+s.url;let o=yield si.unzip(i,s);o.settings=s,e.source=o,r.startsWith("blob:")&&e.live2dModel.once("modelLoaded",e=>{e.once("destroy",function(){URL.revokeObjectURL(r)})}),si.releaseReader(i)}return i()}),n3.live2DModelMiddlewares.unshift(si.factory),!window.Live2D)throw Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");let sr=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(e,i){sr.call(this,e,i),i.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class sn extends AMotion{updateParamExe(e,i,r,n){this.params.forEach(i=>{e.setParamFloat(i.id,i.val*r)})}constructor(e){super(),this.params=[],this.setFadeIn(e.fade_in>0?e.fade_in:aS.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:aS.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(e=>{let i=e.calc||"add";if("add"===i){let i=e.def||0;e.val-=i}else if("mult"===i){let i=e.def||1;e.val/=i}this.params.push({calc:i,val:e.val,id:e.id})})}}class ss extends n${isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(i=>i.name===e)}getExpressionFile(e){return e.file}createExpression(e,i){return new sn(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,i){return this.queueManager.updateParam(e)}constructor(e,i){var r;super(e,i),this.queueManager=new MotionQueueManager,this.definitions=null!=(r=this.settings.expressions)?r:[],this.init()}}class so extends nV{init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new ss(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,i,r){let n=Live2DMotion.loadMotion(e),s=i===this.groups.idle?aS.idleMotionFadingDuration:aS.motionFadingDuration;return n.setFadeIn(r.fade_in>0?r.fade_in:s),n.setFadeOut(r.fade_out>0?r.fade_out:s),n}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,i){return e.onFinishHandler=i,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,i){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}constructor(e,i){super(e,i),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(i)}}class sa{setEyeParams(e){this.eyeParamValue=nC(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+(2e3*Math.random()+0));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}constructor(e){this.coreModel=e,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}}let sh=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class sl extends nj{init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(e=>{let{id:i,value:r}=e;return this.coreModel.setParamFloat(i,r)}),this.settings.initOpacities&&this.settings.initOpacities.forEach(e=>{let{id:i,value:r}=e;return this.coreModel.setPartsOpacity(i,r)}),this.coreModel.saveParam();let e=this.coreModel.getModelContext()._$aS;(null==e?void 0:e.length)&&(this.drawDataCount=e.length);let i=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:e=>i=e,get:()=>!this.disableCulling&&i});let r=this.coreModel.getModelContext().clipManager,n=r.setupClip;r.setupClip=(e,i)=>{n.call(r,e,i),i.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){let e={};if(this.settings.layout)for(let i of Object.keys(this.settings.layout)){let r=i;"center_x"===i?r="centerX":"center_y"===i&&(r="centerY"),e[r]=this.settings.layout[i]}return e}updateWebGLContext(e,i){let r=this.coreModel.drawParamWebGL;for(let n in r.firstDraw=!0,r.setGL(e),r.glno=i,r)r.hasOwnProperty(n)&&r[n]instanceof WebGLBuffer&&(r[n]=null);let n=this.coreModel.getModelContext().clipManager;n.curFrameNo=i;let s=e.getParameter(e.FRAMEBUFFER_BINDING);n.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,s)}bindTexture(e,i){this.coreModel.setTexture(e,i)}getHitAreaDefs(){var e;return(null==(e=this.settings.hitAreas)?void 0:e.map(e=>({id:e.id,name:e.name,index:this.coreModel.getDrawDataIndex(e.id)})))||[]}getDrawableIDs(){let e=this.coreModel.getModelContext(),i=[];for(let r=0;r<this.drawDataCount;r++){let n=e.getDrawData(r);n&&i.push(n.getDrawDataID().id)}return i}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if("string"==typeof e&&-1===(e=this.coreModel.getDrawDataIndex(e)))throw TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}update(e,i){var r,n,s,o;super.update(e,i);let a=this.coreModel;this.emit("beforeMotionUpdate");let h=this.motionManager.update(this.coreModel,i);this.emit("afterMotionUpdate"),a.saveParam(),null==(r=this.motionManager.expressionManager)||r.update(a,i),h||null==(n=this.eyeBlink)||n.update(e),this.updateFocus(),this.updateNaturalMovements(e,i),null==(s=this.physics)||s.update(i),null==(o=this.pose)||o.update(e),this.emit("beforeModelUpdate"),a.update(),a.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,30*this.focusController.x),this.coreModel.addToParamFloat(this.angleYParamIndex,30*this.focusController.y),this.coreModel.addToParamFloat(this.angleZParamIndex,-(this.focusController.x*this.focusController.y*30)),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,10*this.focusController.x)}updateNaturalMovements(e,i){let r=i/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(r/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(r/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(r/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(r/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(r/3.2345))}draw(e){let i=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);let r=this.drawingMatrix;sh[0]=r.a,sh[1]=r.b,sh[4]=r.c,sh[5]=r.d,sh[12]=r.tx,sh[13]=r.ty,this.coreModel.setMatrix(sh),this.coreModel.draw(),this.disableCulling=i}destroy(){super.destroy(),this.coreModel=void 0}constructor(e,i,r){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=e,this.settings=i,this.motionManager=new so(i,r),this.eyeBlink=new sa(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}}class su extends nk{static isValidJSON(e){var i;return!!e&&"string"==typeof e.model&&(null==(i=e.textures)?void 0:i.length)>0&&e.textures.every(e=>"string"==typeof e)}copy(e){nR("string",e,this,"name","name"),nR("string",e,this,"pose","pose"),nR("string",e,this,"physics","physics"),nR("object",e,this,"layout","layout"),nR("object",e,this,"motions","motions"),nO("object",e,this,"hit_areas","hitAreas"),nO("object",e,this,"expressions","expressions"),nO("object",e,this,"init_params","initParams"),nO("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){for(let[i,r]of(super.replaceFiles(e),Object.entries(this.motions)))for(let n=0;n<r.length;n++)r[n].file=e(r[n].file,"motions.".concat(i,"[").concat(n,"].file")),void 0!==r[n].sound&&(r[n].sound=e(r[n].sound,"motions.".concat(i,"[").concat(n,"].sound")));if(this.expressions)for(let i=0;i<this.expressions.length;i++)this.expressions[i].file=e(this.expressions[i].file,"expressions[".concat(i,"].file"))}constructor(e){if(super(e),this.motions={},!su.isValidJSON(e))throw TypeError("Invalid JSON.");this.moc=e.model,nO("string",e,this,"textures","textures"),this.copy(e)}}let sc={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},sd={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class sf{update(e){this.physicsHairs.forEach(i=>i.update(this.coreModel,e))}constructor(e,i){this.coreModel=e,this.physicsHairs=[],i.physics_hair&&(this.physicsHairs=i.physics_hair.map(e=>{let i=new PhysicsHair;return i.setup(e.setup.length,e.setup.regist,e.setup.mass),e.src.forEach(e=>{let{id:r,ptype:n,scale:s,weight:o}=e,a=sc[n];a&&i.addSrcParam(a,r,s,o)}),e.targets.forEach(e=>{let{id:r,ptype:n,scale:s,weight:o}=e,a=sd[n];a&&i.addTargetParam(a,r,s,o)}),i}))}}class sp{initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}constructor(e){this.id=e,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}}class s_{init(){this.partsGroups.forEach(e=>{e.forEach(e=>{if(e.initIndex(this.coreModel),e.paramIndex>=0){let i=0!==this.coreModel.getParamFloat(e.paramIndex);this.coreModel.setPartsOpacity(e.partsIndex,i?1:0),this.coreModel.setParamFloat(e.paramIndex,i?1:0),e.link.length>0&&e.link.forEach(e=>e.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,i){let r=this.coreModel,n=1,s=e.findIndex(e=>{let{paramIndex:i,partsIndex:n}=e;return n>=0&&0!==r.getParamFloat(i)});s>=0?n=nC(r.getPartsOpacity(e[s].partsIndex)+i/this.opacityAnimDuration,0,1):(s=0,n=1),e.forEach((e,i)=>{let{partsIndex:o}=e;if(o>=0){if(s==i)r.setPartsOpacity(o,n);else{let e,i=r.getPartsOpacity(o);(1-(e=n<.5?-.5*n/.5+1:(1-n)*.5/.5))*(1-n)>.15&&(e=1-.15/(1-n)),i>e&&(i=e),r.setPartsOpacity(o,i)}}})}copyOpacity(e){let i=this.coreModel;e.forEach(e=>{let{partsIndex:r,link:n}=e;if(r>=0&&n){let e=i.getPartsOpacity(r);n.forEach(r=>{let{partsIndex:n}=r;n>=0&&i.setPartsOpacity(n,e)})}})}update(e){this.partsGroups.forEach(i=>{this.normalizePartsOpacityGroup(i,e),this.copyOpacity(i)})}constructor(e,i){this.coreModel=e,this.opacityAnimDuration=500,this.partsGroups=[],i.parts_visible&&(this.partsGroups=i.parts_visible.map(e=>{let{group:i}=e;return i.map(e=>{let{id:i,link:r}=e,n=new sp(i);return r&&(n.link=r.map(e=>new sp(e))),n})}),this.init())}}if(n3.registerRuntime({version:2,test:e=>e instanceof su||su.isValidJSON(e),ready:()=>Promise.resolve(),isValidMoc:e=>!(e.byteLength<3)&&"moc"===String.fromCharCode(...new Int8Array(e,0,3)),createModelSettings:e=>new su(e),createCoreModel(e){let i=Live2DModelWebGL.loadModel(e),r=Live2D.getError();if(r)throw r;return i},createInternalModel:(e,i,r)=>new sl(e,i,r),createPose:(e,i)=>new s_(e,i),createPhysics:(e,i)=>new sf(e,i)}),!window.Live2DCubismCore)throw Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class sm{add(e){let i=new sm(0,0);return i.x=this.x+e.x,i.y=this.y+e.y,i}substract(e){let i=new sm(0,0);return i.x=this.x-e.x,i.y=this.y-e.y,i}multiply(e){let i=new sm(0,0);return i.x=this.x*e.x,i.y=this.y*e.y,i}multiplyByScaler(e){return this.multiply(new sm(e,e))}division(e){let i=new sm(0,0);return i.x=this.x/e.x,i.y=this.y/e.y,i}divisionByScalar(e){return this.division(new sm(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){let e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}constructor(e,i){this.x=e||0,this.y=i||0}}let sg=class{static range(e,i,r){return e<i?e=i:e>r&&(e=r),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){let i;if(0===e)return e;let r=e,n=r<0;return n&&(r=-r),r===1/0?i=1/0:(i=Math.exp(Math.log(r)/3),i=(r/(i*i)+2*i)/3),n?-i:i}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,i){return e>i?e:i}static min(e,i){return e>i?i:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return 180*e/Math.PI}static directionToRadian(e,i){let r=Math.atan2(i.y,i.x)-Math.atan2(e.y,e.x);for(;r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r}static directionToDegrees(e,i){let r=this.directionToRadian(e,i),n=this.radianToDegrees(r);return i.x-e.x>0&&(n=-n),n}static radianToDirection(e){let i=new sm;return i.x=this.sin(e),i.y=this.cos(e),i}static quadraticEquation(e,i,r){return this.abs(e)<sg.Epsilon?this.abs(i)<sg.Epsilon?-r:-r/i:-(i+this.sqrt(i*i-4*e*r))/(2*e)}static cardanoAlgorithmForBezier(e,i,r,n){if(this.sqrt(e)<sg.Epsilon)return this.range(this.quadraticEquation(i,r,n),0,1);let s=i/e,o=r/e,a=(3*o-s*s)/3,h=a/3,l=(2*s*s*s-9*s*o+n/e*27)/27,u=l/2,c=u*u+h*h*h;if(c<0){let e=-a/3,i=this.sqrt(e*e*e),r=Math.acos(this.range(-l/(2*i),-1,1)),n=2*this.cbrt(i),o=n*this.cos(r/3)-s/3;if(.51>this.abs(o-.5))return this.range(o,0,1);let h=n*this.cos((r+2*Math.PI)/3)-s/3;if(.51>this.abs(h-.5))return this.range(h,0,1);let u=n*this.cos((r+4*Math.PI)/3)-s/3;return this.range(u,0,1)}if(0==c){let e;let i=2*(e=u<0?this.cbrt(-u):-this.cbrt(u))-s/3;return .51>this.abs(i-.5)?this.range(i,0,1):this.range(-e-s/3,0,1)}let d=this.sqrt(c),f=this.cbrt(d-u)-this.cbrt(d+u)-s/3;return this.range(f,0,1)}constructor(){}};sg.Epsilon=1e-5;class sv{static multiply(e,i,r){let n=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);for(let r=0;r<4;++r)for(let s=0;s<4;++s)for(let o=0;o<4;++o)n[s+4*r]+=e[o+4*r]*i[s+4*o];for(let e=0;e<16;++e)r[e]=n[e]}loadIdentity(){let e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let i=0;i<16;++i)this._tr[i]=e[i]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,i){let r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,i,0,1]);sv.multiply(r,this._tr,this._tr)}translate(e,i){this._tr[12]=e,this._tr[13]=i}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,i){let r=new Float32Array([e,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]);sv.multiply(r,this._tr,this._tr)}scale(e,i){this._tr[0]=e,this._tr[5]=i}multiplyByMatrix(e){sv.multiply(e.getArray(),this._tr,this._tr)}clone(){let e=new sv;for(let i=0;i<this._tr.length;i++)e._tr[i]=this._tr[i];return e}constructor(){this._tr=new Float32Array(16),this.loadIdentity()}}class sy{initialize(e){this._model=e}drawModel(){null!=this.getModel()&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,i,r,n){e<0?e=0:e>1&&(e=1),i<0?i=0:i>1&&(i=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),this._modelColor.R=e,this._modelColor.G=i,this._modelColor.B=r,this._modelColor.A=n}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new sx,this._mvpMatrix4x4=new sv,this._mvpMatrix4x4.loadIdentity()}}var sb=((ap=sb||{})[ap.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",ap[ap.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",ap[ap.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",ap);class sx{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let sT,sA=!1,sE=!1;class sw{static startUp(e){if(sA)return sM("CubismFramework.startUp() is already done."),sA;if(Live2DCubismCore._isStarted)return sA=!0,!0;Live2DCubismCore._isStarted=!0,(sT=e)&&Live2DCubismCore.Logging.csmSetLogFunction(sT.logFunction),sA=!0;{let e=Live2DCubismCore.Version.csmGetVersion(),i=(16711680&e)>>16,r=65535&e;sM("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&e)>>24)).slice(-2),("00"+i).slice(-2),("0000"+r).slice(-4),e)}return sM("CubismFramework.startUp() is complete."),sA}static cleanUp(){sA=!1,sE=!1,sT=void 0}static initialize(){sA?sE?sI("CubismFramework.initialize() skipped, already initialized."):(sE=!0,sM("CubismFramework.initialize() is complete.")):sI("CubismFramework is not started.")}static dispose(){sA?sE?(sy.staticRelease(),sE=!1,sM("CubismFramework.dispose() is complete.")):sI("CubismFramework.dispose() skipped, not initialized."):sI("CubismFramework is not started.")}static isStarted(){return sA}static isInitialized(){return sE}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return null!=sT?sT.loggingLevel:sS.LogLevel_Off}constructor(){}}var sS=((a_=sS||{})[a_.LogLevel_Verbose=0]="LogLevel_Verbose",a_[a_.LogLevel_Debug=1]="LogLevel_Debug",a_[a_.LogLevel_Info=2]="LogLevel_Info",a_[a_.LogLevel_Warning=3]="LogLevel_Warning",a_[a_.LogLevel_Error=4]="LogLevel_Error",a_[a_.LogLevel_Off=5]="LogLevel_Off",a_);function sP(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];sR.print(sS.LogLevel_Debug,"[CSM][D]"+e+"\n",r)}function sM(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];sR.print(sS.LogLevel_Info,"[CSM][I]"+e+"\n",r)}function sI(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];sR.print(sS.LogLevel_Warning,"[CSM][W]"+e+"\n",r)}function sC(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];sR.print(sS.LogLevel_Error,"[CSM][E]"+e+"\n",r)}class sR{static print(e,i,r){if(e<sw.getLoggingLevel())return;let n=sw.coreLogFunction;n&&n(i.replace(/{(\d+)}/g,(e,i)=>r[i]))}static dumpBytes(e,i,r){for(let n=0;n<r;n++)n%16==0&&n>0?this.print(e,"\n"):n%8==0&&n>0&&this.print(e,"  "),this.print(e,"{0} ",[255&i[n]]);this.print(e,"\n")}constructor(){}}class sO{release(){this._weight=0}updateParameters(e,i,r){if(!i.isAvailable()||i.isFinished())return;if(!i.isStarted()){i.setIsStarted(!0),i.setStartTime(r-this._offsetSeconds),i.setFadeInStartTime(r);let e=this.getDuration();0>i.getEndTime()&&i.setEndTime(e<=0?-1:i.getStartTime()+e)}let n=this._weight;n=n*(0==this._fadeInSeconds?1:sg.getEasingSine((r-i.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||0>i.getEndTime()?1:sg.getEasingSine((i.getEndTime()-r)/this._fadeOutSeconds)),i.setState(r,n),this.doUpdateParameters(e,r,n,i),i.getEndTime()>0&&i.getEndTime()<r&&i.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return -1}getLoopDuration(){return -1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,i){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}}class sD extends sO{static create(e){let i=new sD,r=e.FadeInTime,n=e.FadeOutTime;i.setFadeInTime(void 0!==r?r:1),i.setFadeOutTime(void 0!==n?n:1);let s=e.Parameters||[];for(let e=0;e<s.length;++e){let r;let n=s[e],o=n.Id,a=n.Value;switch(n.Blend){case"Multiply":r=s$.ExpressionBlendType_Multiply;break;case"Overwrite":r=s$.ExpressionBlendType_Overwrite;break;default:r=s$.ExpressionBlendType_Add}let h={parameterId:o,blendType:r,value:a};i._parameters.push(h)}return i}doUpdateParameters(e,i,r,n){for(let i=0;i<this._parameters.length;++i){let n=this._parameters[i];switch(n.blendType){case s$.ExpressionBlendType_Add:e.addParameterValueById(n.parameterId,n.value,r);break;case s$.ExpressionBlendType_Multiply:e.multiplyParameterValueById(n.parameterId,n.value,r);break;case s$.ExpressionBlendType_Overwrite:e.setParameterValueById(n.parameterId,n.value,r)}}}constructor(){super(),this._parameters=[]}}var s$=((am=s$||{})[am.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",am[am.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",am[am.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",am);class sL{release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,i){let r=i+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,i){this._stateTimeSeconds=e,this._stateWeight=i}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}}class sF{release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,i,r){let n;if(null==e)return sB;for(let e=0;e<this._motions.length;++e)null!=(n=this._motions[e])&&n.setFadeOut(n._motion.getFadeOutTime());return(n=new sL)._autoDelete=i,n._motion=e,this._motions.push(n),n._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){let i=this._motions[e];if(null==i){this._motions.splice(e,1);continue}if(null!=i._motion){if(!i.isFinished())return!1;e++}else i.release(),this._motions.splice(e,1)}return!0}isFinishedByHandle(e){for(let i=0;i<this._motions.length;i++){let r=this._motions[i];if(null!=r&&r._motionQueueEntryHandle==e&&!r.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){let i=this._motions[e];null!=i&&i.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(i=>null!=i&&i._motionQueueEntryHandle==e)}setEventCallback(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._eventCallBack=e,this._eventCustomData=i}doUpdateMotion(e,i){let r=!1,n=0;for(;n<this._motions.length;){let s=this._motions[n];if(null==s){this._motions.splice(n,1);continue}let o=s._motion;if(null==o){s.release(),this._motions.splice(n,1);continue}o.updateParameters(e,s,i),r=!0;let a=o.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),i-s.getStartTime());for(let e=0;e<a.length;++e)this._eventCallBack(this,a[e],this._eventCustomData);s.setLastCheckEventSeconds(i),s.isFinished()?(s.release(),this._motions.splice(n,1)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),i),n++)}return r}constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}}let sB=-1;class sk extends n${isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(i=>i.Name===e)}getExpressionFile(e){return e.File}createExpression(e,i){return sD.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,i){return this.queueManager.doUpdateMotion(e,i)}constructor(e,i){var r;super(e,i),this.queueManager=new sF,this.definitions=null!=(r=e.expressions)?r:[],this.init()}}class sN{getEyeBlinkParameters(){var e,i;return null==(i=null==(e=this.groups)?void 0:e.find(e=>"EyeBlink"===e.Name))?void 0:i.Ids}getLipSyncParameters(){var e,i;return null==(i=null==(e=this.groups)?void 0:e.find(e=>"LipSync"===e.Name))?void 0:i.Ids}constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}}class sU extends nk{static isValidJSON(e){var i;return!!(null==e?void 0:e.FileReferences)&&"string"==typeof e.FileReferences.Moc&&(null==(i=e.FileReferences.Textures)?void 0:i.length)>0&&e.FileReferences.Textures.every(e=>"string"==typeof e)}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(let[i,r]of Object.entries(this.motions))for(let n=0;n<r.length;n++)r[n].File=e(r[n].File,"motions.".concat(i,"[").concat(n,"].File")),void 0!==r[n].Sound&&(r[n].Sound=e(r[n].Sound,"motions.".concat(i,"[").concat(n,"].Sound")));if(this.expressions)for(let i=0;i<this.expressions.length;i++)this.expressions[i].File=e(this.expressions[i].File,"expressions[".concat(i,"].File"))}constructor(e){if(super(e),!sU.isValidJSON(e))throw TypeError("Invalid JSON.");Object.assign(this,new sN(e))}}nD(sU,[sN]);var sG=((ag=sG||{})[ag.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",ag[ag.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",ag[ag.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",ag),sX=((av=sX||{})[av.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",av[av.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",av[av.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",av[av.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",av);class sV{constructor(e=0,i=0){this.time=e,this.value=i}}class sH{constructor(){this.basePointIndex=0,this.segmentType=0}}class sj{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class sY{constructor(){this.fireTime=0,this.value=""}}class sz{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class sW{release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return sq.EvaluationOptionFlag_AreBeziersRistricted==e&&!!this._json.Meta.AreBeziersRestricted}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,i){return this._json.Curves[e].Segments[i]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}constructor(e){this._json=e}}var sq=((ay=sq||{})[ay.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",ay);function sZ(e,i,r){let n=new sV;return n.time=e.time+(i.time-e.time)*r,n.value=e.value+(i.value-e.value)*r,n}function sQ(e,i){let r=(i-e[0].time)/(e[1].time-e[0].time);return r<0&&(r=0),e[0].value+(e[1].value-e[0].value)*r}function sJ(e,i){let r=(i-e[0].time)/(e[3].time-e[0].time);r<0&&(r=0);let n=sZ(e[0],e[1],r),s=sZ(e[1],e[2],r),o=sZ(e[2],e[3],r),a=sZ(n,s,r),h=sZ(s,o,r);return sZ(a,h,r).value}function sK(e,i){let r=e[0].time,n=e[3].time,s=e[1].time,o=e[2].time,a=sg.cardanoAlgorithmForBezier(n-3*o+3*s-r,3*o-6*s+3*r,3*s-3*r,r-i),h=sZ(e[0],e[1],a),l=sZ(e[1],e[2],a),u=sZ(e[2],e[3],a),c=sZ(h,l,a),d=sZ(l,u,a);return sZ(c,d,a).value}function s0(e,i){return e[0].value}function s2(e,i){return e[1].value}function s1(e,i,r){let n=e.curves[i],s=-1,o=n.baseSegmentIndex+n.segmentCount,a=0;for(let i=n.baseSegmentIndex;i<o;++i)if(a=e.segments[i].basePointIndex+(e.segments[i].segmentType==sX.CubismMotionSegmentType_Bezier?3:1),e.points[a].time>r){s=i;break}if(-1==s)return e.points[a].value;let h=e.segments[s];return h.evaluate(e.points.slice(h.basePointIndex),r)}class s4 extends sO{static create(e,i){let r=new s4;return r.parse(e),r._sourceFrameRate=r._motionData.fps,r._loopDurationSeconds=r._motionData.duration,r._onFinishedMotion=i,r}doUpdateParameters(e,i,r,n){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink="EyeBlink"),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync="LipSync");let s=i-n.getStartTime();s<0&&(s=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE,h=0,l=0;this._eyeBlinkParameterIds.length>64&&sP("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>64&&sP("too many lip sync targets : {0}",this._lipSyncParameterIds.length);let u=this._fadeInSeconds<=0?1:sg.getEasingSine((i-n.getFadeInStartTime())/this._fadeInSeconds),c=this._fadeOutSeconds<=0||0>n.getEndTime()?1:sg.getEasingSine((n.getEndTime()-i)/this._fadeOutSeconds),d,f,p,_=s;if(this._isLoop)for(;_>this._motionData.duration;)_-=this._motionData.duration;let g=this._motionData.curves;for(f=0;f<this._motionData.curveCount&&g[f].type==sG.CubismMotionCurveTarget_Model;++f)d=s1(this._motionData,f,_),g[f].id==this._modelCurveIdEyeBlink?a=d:g[f].id==this._modelCurveIdLipSync&&(o=d);for(;f<this._motionData.curveCount&&g[f].type==sG.CubismMotionCurveTarget_Parameter;++f){let s;if(-1==(p=e.getParameterIndex(g[f].id)))continue;let v=e.getParameterValueByIndex(p);if(d=s1(this._motionData,f,_),a!=Number.MAX_VALUE){for(let e=0;e<this._eyeBlinkParameterIds.length&&e<64;++e)if(this._eyeBlinkParameterIds[e]==g[f].id){d*=a,l|=1<<e;break}}if(o!=Number.MAX_VALUE){for(let e=0;e<this._lipSyncParameterIds.length&&e<64;++e)if(this._lipSyncParameterIds[e]==g[f].id){d+=o,h|=1<<e;break}}if(g[f].fadeInTime<0&&g[f].fadeOutTime<0)s=v+(d-v)*r;else{let e,r;e=g[f].fadeInTime<0?u:0==g[f].fadeInTime?1:sg.getEasingSine((i-n.getFadeInStartTime())/g[f].fadeInTime),r=g[f].fadeOutTime<0?c:0==g[f].fadeOutTime||0>n.getEndTime()?1:sg.getEasingSine((n.getEndTime()-i)/g[f].fadeOutTime),s=v+this._weight*e*r*(d-v)}e.setParameterValueByIndex(p,s,1)}if(a!=Number.MAX_VALUE)for(let i=0;i<this._eyeBlinkParameterIds.length&&i<64;++i){let n=e.getParameterValueById(this._eyeBlinkParameterIds[i]);if(l>>i&1)continue;let s=n+(a-n)*r;e.setParameterValueById(this._eyeBlinkParameterIds[i],s)}if(o!=Number.MAX_VALUE)for(let i=0;i<this._lipSyncParameterIds.length&&i<64;++i){let n=e.getParameterValueById(this._lipSyncParameterIds[i]);if(h>>i&1)continue;let s=n+(o-n)*r;e.setParameterValueById(this._lipSyncParameterIds[i],s)}for(;f<this._motionData.curveCount&&g[f].type==sG.CubismMotionCurveTarget_PartOpacity;++f)if(d=s1(this._motionData,f,_),aE.setOpacityFromMotion)e.setPartOpacityById(g[f].id,d);else{if(-1==(p=e.getParameterIndex(g[f].id)))continue;e.setParameterValueByIndex(p,d)}s>=this._motionData.duration&&(this._isLoop?(n.setStartTime(i),this._isLoopFadeIn&&n.setFadeInStartTime(i)):(this._onFinishedMotion&&this._onFinishedMotion(this),n.setIsFinished(!0))),this._lastWeight=r}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,i){let r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==r[n].id)return void(r[n].fadeInTime=i)}setParameterFadeOutTime(e,i){let r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==r[n].id)return void(r[n].fadeOutTime=i)}getParameterFadeInTime(e){let i=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(e==i[r].id)return i[r].fadeInTime;return -1}getParameterFadeOutTime(e){let i=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(e==i[r].id)return i[r].fadeOutTime;return -1}setEffectIds(e,i){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=i}release(){this._motionData=void 0}parse(e){this._motionData=new sz;let i=new sW(e);this._motionData.duration=i.getMotionDuration(),this._motionData.loop=i.isMotionLoop(),this._motionData.curveCount=i.getMotionCurveCount(),this._motionData.fps=i.getMotionFps(),this._motionData.eventCount=i.getEventCount();let r=i.getEvaluationOptionFlag(sq.EvaluationOptionFlag_AreBeziersRistricted),n=i.getMotionFadeInTime(),s=i.getMotionFadeOutTime();this._fadeInSeconds=void 0!==n?n<0?1:n:1,this._fadeOutSeconds=void 0!==s?s<0?1:s:1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new sj),this._motionData.segments=Array.from({length:i.getMotionTotalSegmentCount()}).map(()=>new sH),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new sY),this._motionData.points=[];let o=0,a=0;for(let e=0;e<this._motionData.curveCount;++e){let n=this._motionData.curves[e];switch(i.getMotionCurveTarget(e)){case"Model":n.type=sG.CubismMotionCurveTarget_Model;break;case"Parameter":n.type=sG.CubismMotionCurveTarget_Parameter;break;case"PartOpacity":n.type=sG.CubismMotionCurveTarget_PartOpacity;break;default:sI('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}n.id=i.getMotionCurveId(e),n.baseSegmentIndex=a;let s=i.getMotionCurveFadeInTime(e),h=i.getMotionCurveFadeOutTime(e);n.fadeInTime=void 0!==s?s:-1,n.fadeOutTime=void 0!==h?h:-1;for(let s=0;s<i.getMotionCurveSegmentCount(e);){switch(0==s?(this._motionData.segments[a].basePointIndex=o,this._motionData.points[o]=new sV(i.getMotionCurveSegment(e,s),i.getMotionCurveSegment(e,s+1)),o+=1,s+=2):this._motionData.segments[a].basePointIndex=o-1,i.getMotionCurveSegment(e,s)){case sX.CubismMotionSegmentType_Linear:this._motionData.segments[a].segmentType=sX.CubismMotionSegmentType_Linear,this._motionData.segments[a].evaluate=sQ,this._motionData.points[o]=new sV(i.getMotionCurveSegment(e,s+1),i.getMotionCurveSegment(e,s+2)),o+=1,s+=3;break;case sX.CubismMotionSegmentType_Bezier:this._motionData.segments[a].segmentType=sX.CubismMotionSegmentType_Bezier,this._motionData.segments[a].evaluate=r?sJ:sK,this._motionData.points[o]=new sV(i.getMotionCurveSegment(e,s+1),i.getMotionCurveSegment(e,s+2)),this._motionData.points[o+1]=new sV(i.getMotionCurveSegment(e,s+3),i.getMotionCurveSegment(e,s+4)),this._motionData.points[o+2]=new sV(i.getMotionCurveSegment(e,s+5),i.getMotionCurveSegment(e,s+6)),o+=3,s+=7;break;case sX.CubismMotionSegmentType_Stepped:this._motionData.segments[a].segmentType=sX.CubismMotionSegmentType_Stepped,this._motionData.segments[a].evaluate=s0,this._motionData.points[o]=new sV(i.getMotionCurveSegment(e,s+1),i.getMotionCurveSegment(e,s+2)),o+=1,s+=3;break;case sX.CubismMotionSegmentType_InverseStepped:this._motionData.segments[a].segmentType=sX.CubismMotionSegmentType_InverseStepped,this._motionData.segments[a].evaluate=s2,this._motionData.points[o]=new sV(i.getMotionCurveSegment(e,s+1),i.getMotionCurveSegment(e,s+2)),o+=1,s+=3}++n.segmentCount,++a}this._motionData.curves.push(n)}for(let e=0;e<i.getEventCount();++e)this._motionData.events[e].fireTime=i.getEventTime(e),this._motionData.events[e].value=i.getEventValue(e);i.release()}getFiredEvent(e,i){this._firedEventValues.length=0;for(let r=0;r<this._motionData.eventCount;++r)this._motionData.events[r].fireTime>e&&this._motionData.events[r].fireTime<=i&&this._firedEventValues.push(this._motionData.events[r].value);return this._firedEventValues}constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}}class s3 extends nV{init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new sk(this.settings,e)),this.queueManager.setEventCallback((e,i,r)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,i){return e.setFinishedMotionHandler(i),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,i,r){let n=s4.create(e),s=new sW(e),o=(i===this.groups.idle?aS.idleMotionFadingDuration:aS.motionFadingDuration)/1e3;return void 0===s.getMotionFadeInTime()&&n.setFadeInTime(r.FadeInTime>0?r.FadeInTime:o),void 0===s.getMotionFadeOutTime()&&n.setFadeOutTime(r.FadeOutTime>0?r.FadeOutTime:o),n.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),n}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,i){return this.queueManager.doUpdateMotion(e,i)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}constructor(e,i){var r;super(e,i),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new sF,this.definitions=null!=(r=e.motions)?r:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(i)}}class s6{static create(){return new s6}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,i){this._currentTime+=i;let r=2*this._currentTime*3.14159;for(let i=0;i<this._breathParameters.length;++i){let n=this._breathParameters[i];e.addParameterValueById(n.parameterId,n.offset+n.peak*Math.sin(r/n.cycle),n.weight)}}constructor(){this._breathParameters=[],this._currentTime=0}}class s8{constructor(e,i,r,n,s){this.parameterId=null==e?void 0:e,this.offset=null==i?0:i,this.peak=null==r?0:r,this.cycle=null==n?0:n,this.weight=null==s?0:s}}let s5=class{static create(e){return new s5(e)}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,i,r){this._closingSeconds=e,this._closedSeconds=i,this._openingSeconds=r}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,i){let r;this._userTimeSeconds+=i;let n=0;switch(this._blinkingState){case s7.EyeState_Closing:(n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)>=1&&(n=1,this._blinkingState=s7.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-n;break;case s7.EyeState_Closed:(n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)>=1&&(this._blinkingState=s7.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case s7.EyeState_Opening:(n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)>=1&&(n=1,this._blinkingState=s7.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=n;break;case s7.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=s7.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;case s7.EyeState_First:default:this._blinkingState=s7.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1}s5.CloseIfZero||(r=-r);for(let i=0;i<this._parameterIds.length;++i)e.setParameterValueById(this._parameterIds[i],r)}determinNextBlinkingTiming(){let e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}constructor(e){var i,r;this._blinkingState=s7.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],null!=e&&(this._parameterIds=null!=(r=null==(i=e.getEyeBlinkParameters())?void 0:i.slice())?r:this._parameterIds)}};s5.CloseIfZero=!0;var s7=((ab=s7||{})[ab.EyeState_First=0]="EyeState_First",ab[ab.EyeState_Interval=1]="EyeState_Interval",ab[ab.EyeState_Closing=2]="EyeState_Closing",ab[ab.EyeState_Closed=3]="EyeState_Closed",ab[ab.EyeState_Opening=4]="EyeState_Opening",ab);class s9{getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,i){this.x-=e,this.y-=i,this.width+=2*e,this.height+=2*i}constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}}class ot{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),0==e){let i=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a),this._maskTexture=new oe(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,i){let r=Number.MAX_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE,a=i._clippedDrawableIndexList.length;for(let h=0;h<a;h++){let a=i._clippedDrawableIndexList[h],l=e.getDrawableVertexCount(a),u=e.getDrawableVertices(a),c=Number.MAX_VALUE,d=Number.MAX_VALUE,f=Number.MIN_VALUE,p=Number.MIN_VALUE,_=2*l;for(let e=0;e<_;e+=2){let i=u[e],r=u[e+1];i<c&&(c=i),i>f&&(f=i),r<d&&(d=r),r>p&&(p=r)}if(c!=Number.MAX_VALUE){if(c<r&&(r=c),d<n&&(n=d),f>s&&(s=f),p>o&&(o=p),r==Number.MAX_VALUE)i._allClippedDrawRect.x=0,i._allClippedDrawRect.y=0,i._allClippedDrawRect.width=0,i._allClippedDrawRect.height=0,i._isUsing=!1;else{i._isUsing=!0;let e=s-r,a=o-n;i._allClippedDrawRect.x=r,i._allClippedDrawRect.y=n,i._allClippedDrawRect.width=e,i._allClippedDrawRect.height=a}}}}release(){var e,i,r;for(let i=0;i<this._clippingContextListForMask.length;i++)this._clippingContextListForMask[i]&&(null==(e=this._clippingContextListForMask[i])||e.release());this._clippingContextListForMask=void 0,this._clippingContextListForDraw=void 0,this._maskTexture&&(null==(i=this.gl)||i.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=void 0),this._channelColors=void 0,null==(r=this.gl)||r.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,i,r,n){for(let e=0;e<i;e++){if(n[e]<=0){this._clippingContextListForDraw.push(null);continue}let i=this.findSameClip(r[e],n[e]);null==i&&(i=new oi(this,r[e],n[e]),this._clippingContextListForMask.push(i)),i.addClippedDrawable(e),this._clippingContextListForDraw.push(i)}}setupClippingContext(e,i){this._currentFrameNo++;let r=0;for(let i=0;i<this._clippingContextListForMask.length;i++){let n=this._clippingContextListForMask[i];this.calcClippedDrawTotalBounds(e,n),n._isUsing&&r++}if(r>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),i.getMvpMatrix(),i.preDraw(),this.setupLayoutBounds(r),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let r=0;r<this._clippingContextListForMask.length;r++){let n=this._clippingContextListForMask[r],s=n._allClippedDrawRect,o=n._layoutBounds;this._tmpBoundsOnModel.setRect(s),this._tmpBoundsOnModel.expand(.05*s.width,.05*s.height);let a=o.width/this._tmpBoundsOnModel.width,h=o.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(o.x,o.y),this._tmpMatrix.scaleRelative(a,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(o.x,o.y),this._tmpMatrix.scaleRelative(a,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),n._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),n._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());let l=n._clippingIdCount;for(let r=0;r<l;r++){let s=n._clippingIdList[r];e.getDrawableDynamicFlagVertexPositionsDidChange(s)&&(i.setIsCulling(0!=e.getDrawableCulling(s)),i.setClippingContextBufferForMask(n),i.drawMesh(e.getDrawableTextureIndices(s),e.getDrawableVertexIndexCount(s),e.getDrawableVertexCount(s),e.getDrawableVertexIndices(s),e.getDrawableVertices(s),e.getDrawableVertexUvs(s),e.getDrawableOpacity(s),sb.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a),i.setClippingContextBufferForMask(null),this.gl.viewport(o[0],o[1],o[2],o[3])}}findSameClip(e,i){for(let r=0;r<this._clippingContextListForMask.length;r++){let n=this._clippingContextListForMask[r],s=n._clippingIdCount;if(s!=i)continue;let o=0;for(let i=0;i<s;i++){let r=n._clippingIdList[i];for(let i=0;i<s;i++)if(e[i]==r){o++;break}}if(o==s)return n}return null}setupLayoutBounds(e){let i=e/4,r=e%4;i=~~i,r=~~r;let n=0;for(let e=0;e<4;e++){let s=i+(e<r?1:0);if(0==s);else if(1==s){let i=this._clippingContextListForMask[n++];i._layoutChannelNo=e,i._layoutBounds.x=0,i._layoutBounds.y=0,i._layoutBounds.width=1,i._layoutBounds.height=1}else if(2==s)for(let i=0;i<s;i++){let r=i%2;r=~~r;let s=this._clippingContextListForMask[n++];s._layoutChannelNo=e,s._layoutBounds.x=.5*r,s._layoutBounds.y=0,s._layoutBounds.width=.5,s._layoutBounds.height=1}else if(s<=4)for(let i=0;i<s;i++){let r=i%2,s=i/2;r=~~r,s=~~s;let o=this._clippingContextListForMask[n++];o._layoutChannelNo=e,o._layoutBounds.x=.5*r,o._layoutBounds.y=.5*s,o._layoutBounds.width=.5,o._layoutBounds.height=.5}else if(s<=9)for(let i=0;i<s;i++){let r=i%3,s=i/3;r=~~r,s=~~s;let o=this._clippingContextListForMask[n++];o._layoutChannelNo=e,o._layoutBounds.x=r/3,o._layoutBounds.y=s/3,o._layoutBounds.width=1/3,o._layoutBounds.height=1/3}else if(aE.supportMoreMaskDivisions&&s<=16)for(let i=0;i<s;i++){let r=i%4,s=i/4;r=~~r,s=~~s;let o=this._clippingContextListForMask[n++];o._layoutChannelNo=e,o._layoutBounds.x=r/4,o._layoutBounds.y=s/4,o._layoutBounds.width=1/4,o._layoutBounds.height=1/4}else sC("not supported mask count : {0}",s)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new s9,this._tmpMatrix=new sv,this._tmpMatrixForMask=new sv,this._tmpMatrixForDraw=new sv;let e=new sx;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),(e=new sx).R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),(e=new sx).R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),(e=new sx).R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}}class oe{constructor(e,i){this.frameNo=e,this.texture=i}}class oi{release(){this._layoutBounds=void 0,this._allClippedDrawRect=void 0,this._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}constructor(e,i,r){this._isUsing=!1,this._owner=e,this._clippingIdList=i,this._clippingIdCount=r,this._allClippedDrawRect=new s9,this._layoutBounds=new s9,this._clippedDrawableIndexList=[],this._matrixForMask=new sv,this._matrixForDraw=new sv}}class or{static getInstance(){return null==s?s=new or:s}static deleteInstance(){s&&(s.release(),s=void 0)}release(){this.releaseShaderProgram()}setupShaderProgram(e,i,r,n,s,o,a,h,l,u,c,d,f){let p,_,g,v;c||sC("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.length&&this.generateShaders();let y=e.getClippingContextBufferForMask();if(null!=y){let e=this._shaderSets[on.ShaderNames_SetupMask];this.gl.useProgram(e.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(e.samplerTexture0Location,0),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(e.attributePositionLocation),this.gl.vertexAttribPointer(e.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(e.attributeTexCoordLocation),this.gl.vertexAttribPointer(e.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);let r=y._layoutChannelNo,s=y.getClippingManager().getChannelFlagAsColor(r);this.gl.uniform4f(e.uniformChannelFlagLocation,s.R,s.G,s.B,s.A),this.gl.uniformMatrix4fv(e.uniformClipMatrixLocation,!1,y._matrixForMask.getArray());let h=y._layoutBounds;this.gl.uniform4f(e.uniformBaseColorLocation,2*h.x-1,2*h.y-1,2*h.getRight()-1,2*h.getBottom()-1),p=this.gl.ZERO,_=this.gl.ONE_MINUS_SRC_COLOR,g=this.gl.ZERO,v=this.gl.ONE_MINUS_SRC_ALPHA}else{let r;let s=e.getClippingContextBufferForDraw(),h=null!=s?f?2:1:0;switch(l){case sb.CubismBlendMode_Normal:default:r=this._shaderSets[on.ShaderNames_NormalPremultipliedAlpha+h],p=this.gl.ONE,_=this.gl.ONE_MINUS_SRC_ALPHA,g=this.gl.ONE,v=this.gl.ONE_MINUS_SRC_ALPHA;break;case sb.CubismBlendMode_Additive:r=this._shaderSets[on.ShaderNames_AddPremultipliedAlpha+h],p=this.gl.ONE,_=this.gl.ONE,g=this.gl.ZERO,v=this.gl.ONE;break;case sb.CubismBlendMode_Multiplicative:r=this._shaderSets[on.ShaderNames_MultPremultipliedAlpha+h],p=this.gl.DST_COLOR,_=this.gl.ONE_MINUS_SRC_ALPHA,g=this.gl.ZERO,v=this.gl.ONE}if(this.gl.useProgram(r.shaderProgram),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(r.attributePositionLocation),this.gl.vertexAttribPointer(r.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(r.attributeTexCoordLocation),this.gl.vertexAttribPointer(r.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),null!=s){this.gl.activeTexture(this.gl.TEXTURE1);let e=s.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(r.samplerTexture1Location,1),this.gl.uniformMatrix4fv(r.uniformClipMatrixLocation,!1,s._matrixForDraw.getArray());let i=s._layoutChannelNo,n=s.getClippingManager().getChannelFlagAsColor(i);this.gl.uniform4f(r.uniformChannelFlagLocation,n.R,n.G,n.B,n.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(r.samplerTexture0Location,0),this.gl.uniformMatrix4fv(r.uniformMatrixLocation,!1,d.getArray()),this.gl.uniform4f(r.uniformBaseColorLocation,u.R,u.G,u.B,u.A)}null==a.index&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(p,_,g,v)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<10;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(os,oo),this._shaderSets[1].shaderProgram=this.loadShaderProgram(oa,ol),this._shaderSets[2].shaderProgram=this.loadShaderProgram(oh,ou),this._shaderSets[3].shaderProgram=this.loadShaderProgram(oh,oc),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,i){let r=this.gl.createProgram(),n=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!n)return sC("Vertex shader compile error!"),0;let s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,i);return s?(this.gl.attachShader(r,n),this.gl.attachShader(r,s),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(n),this.gl.deleteShader(s),r):(sC("Failed to link program: {0}",r),this.gl.deleteShader(n),this.gl.deleteShader(s),r&&this.gl.deleteProgram(r),0)):(sC("Vertex shader compile error!"),0)}compileShaderSource(e,i){let r=this.gl.createShader(e);return this.gl.shaderSource(r,i),this.gl.compileShader(r),r||sC("Shader compile log: {0} ",this.gl.getShaderInfoLog(r)),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(this.gl.deleteShader(r),null)}setGl(e){this.gl=e}constructor(){this._shaderSets=[]}}var on=((ax=on||{})[ax.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",ax[ax.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",ax[ax.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",ax[ax.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",ax[ax.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",ax[ax.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",ax[ax.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",ax[ax.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",ax[ax.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",ax[ax.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",ax);let os="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",oo="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",oa="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",oh="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",ol="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",ou="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",oc="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class od extends sy{initialize(e){e.isUsingMasking()&&(this._clippingManager=new ot,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let i=e.getDrawableCount()-1;i>=0;i--)this._sortedDrawableIndexList[i]=0;super.initialize(e)}bindTexture(e,i){this._textures[e]=i}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new ot,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,i,r;this._clippingManager.release(),this._clippingManager=void 0,null==(e=this.gl)||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,null==(i=this.gl)||i.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,null==(r=this.gl)||r.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=void 0,this._textures=void 0}doDrawModel(){this.preDraw(),null!=this._clippingManager&&this._clippingManager.setupClippingContext(this.getModel(),this);let e=this.getModel().getDrawableCount(),i=this.getModel().getDrawableRenderOrders();for(let r=0;r<e;++r){let e=i[r];this._sortedDrawableIndexList[e]=r}for(let i=0;i<e;++i){let e=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(e)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw()[e]:null),this.setIsCulling(this.getModel().getDrawableCulling(e)),this.drawMesh(this.getModel().getDrawableTextureIndices(e),this.getModel().getDrawableVertexIndexCount(e),this.getModel().getDrawableVertexCount(e),this.getModel().getDrawableVertexIndices(e),this.getModel().getDrawableVertices(e),this.getModel().getDrawableVertexUvs(e),this.getModel().getDrawableOpacity(e),this.getModel().getDrawableBlendMode(e),this.getModel().getDrawableInvertedMaskBit(e)))}}drawMesh(e,i,r,n,s,o,a,h,l){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);let u=this.getModelColor();null==this.getClippingContextBufferForMask()&&(u.A*=a,this.isPremultipliedAlpha()&&(u.R*=u.A,u.G*=u.A,u.B*=u.A));let c=null;null!=this._textures[e]&&(c=this._textures[e]),or.getInstance().setupShaderProgram(this,c,r,s,n,o,this._bufferData,a,h,u,this.isPremultipliedAlpha(),this.getMvpMatrix(),l),this.gl.drawElements(this.gl.TRIANGLES,i,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){or.deleteInstance()}setRenderState(e,i){a=e,o=i}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),or.getInstance().setGl(e)}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new ot,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}}sy.staticRelease=()=>{od.doStaticRelease()};let of=new sv;class op extends nj{init(){var e;super.init(),(null==(e=this.settings.getEyeBlinkParameters())?void 0:e.length)>0&&(this.eyeBlink=s5.create(this.settings)),this.breath.setParameters([new s8(this.idParamAngleX,0,15,6.5345,.5),new s8(this.idParamAngleY,0,8,3.5345,.5),new s8(this.idParamAngleZ,0,10,5.5345,.5),new s8(this.idParamBodyAngleX,0,4,15.5345,.5),new s8(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){let e={};if(this.settings.layout)for(let i of Object.keys(this.settings.layout))e[i.charAt(0).toLowerCase()+i.slice(1)]=this.settings.layout[i];return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,i){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=i,this.renderer._clippingManager._maskTexture=void 0,or.getInstance()._shaderSets=[]}bindTexture(e,i){this.renderer.bindTexture(e,i)}getHitAreaDefs(){var e,i;return null!=(i=null==(e=this.settings.hitAreas)?void 0:e.map(e=>({id:e.Id,name:e.Name,index:this.coreModel.getDrawableIndex(e.Id)})))?i:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if("string"==typeof e&&-1===(e=this.coreModel.getDrawableIndex(e)))throw TypeError("Unable to find drawable ID: "+e);let i=this.coreModel.getDrawableVertices(e).slice();for(let e=0;e<i.length;e+=2)i[e]=i[e]*this.pixelsPerUnit+this.originalWidth/2,i[e+1]=-i[e+1]*this.pixelsPerUnit+this.originalHeight/2;return i}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,i){var r,n,s,o;super.update(e,i),e/=1e3,i/=1e3;let a=this.coreModel;this.emit("beforeMotionUpdate");let h=this.motionManager.update(this.coreModel,i);this.emit("afterMotionUpdate"),a.saveParameters(),null==(r=this.motionManager.expressionManager)||r.update(a,i),h||null==(n=this.eyeBlink)||n.updateParameters(a,e),this.updateFocus(),this.updateNaturalMovements(1e3*e,1e3*i),null==(s=this.physics)||s.evaluate(a,e),null==(o=this.pose)||o.updateParameters(a,e),this.emit("beforeModelUpdate"),a.update(),a.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,30*this.focusController.x),this.coreModel.addParameterValueById(this.idParamAngleY,30*this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleZ,-(this.focusController.x*this.focusController.y*30)),this.coreModel.addParameterValueById(this.idParamBodyAngleX,10*this.focusController.x)}updateNaturalMovements(e,i){var r;null==(r=this.breath)||r.updateParameters(this.coreModel,e/1e3)}draw(e){let i=this.drawingMatrix,r=of.getArray();r[0]=i.a,r[1]=i.b,r[4]=-i.c,r[5]=-i.d,r[12]=i.tx,r[13]=i.ty,this.renderer.setMvpMatrix(of),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}constructor(e,i,r){super(),this.lipSync=!0,this.breath=s6.create(),this.renderer=new od,this.idParamAngleX="ParamAngleX",this.idParamAngleY="ParamAngleY",this.idParamAngleZ="ParamAngleZ",this.idParamEyeBallX="ParamEyeBallX",this.idParamEyeBallY="ParamEyeBallY",this.idParamBodyAngleX="ParamBodyAngleX",this.idParamBreath="ParamBreath",this.pixelsPerUnit=1,this.centeringTransform=new ic,this.coreModel=e,this.settings=i,this.motionManager=new s3(i,r),this.init()}}let o_,om=20;class og{static create(e){let i=new og;"number"==typeof e.FadeInTime&&(i._fadeTimeSeconds=e.FadeInTime,i._fadeTimeSeconds<=0&&(i._fadeTimeSeconds=.5));let r=e.Groups,n=r.length;for(let e=0;e<n;++e){let n=r[e],s=n.length,o=0;for(let e=0;e<s;++e){let r=n[e],s=new ov;s.partId=r.Id;let a=r.Link;if(a){let e=a.length;for(let i=0;i<e;++i){let e=new ov;e.partId=a[i],s.link.push(e)}}i._partGroups.push(s),++o}i._partGroupCounts.push(o)}return i}updateParameters(e,i){e!=this._lastModel&&this.reset(e),this._lastModel=e,i<0&&(i=0);let r=0;for(let n=0;n<this._partGroupCounts.length;n++){let s=this._partGroupCounts[n];this.doFade(e,i,r,s),r+=s}this.copyPartOpacities(e)}reset(e){let i=0;for(let r=0;r<this._partGroupCounts.length;++r){let n=this._partGroupCounts[r];for(let r=i;r<i+n;++r){this._partGroups[r].initialize(e);let n=this._partGroups[r].partIndex,s=this._partGroups[r].parameterIndex;if(!(n<0)){e.setPartOpacityByIndex(n,r==i?1:0),e.setParameterValueByIndex(s,r==i?1:0);for(let i=0;i<this._partGroups[r].link.length;++i)this._partGroups[r].link[i].initialize(e)}}i+=n}}copyPartOpacities(e){for(let i=0;i<this._partGroups.length;++i){let r=this._partGroups[i];if(0==r.link.length)continue;let n=this._partGroups[i].partIndex,s=e.getPartOpacityByIndex(n);for(let i=0;i<r.link.length;++i){let n=r.link[i].partIndex;n<0||e.setPartOpacityByIndex(n,s)}}}doFade(e,i,r,n){let s=-1,o=1;for(let a=r;a<r+n;++a){let r=this._partGroups[a].partIndex,n=this._partGroups[a].parameterIndex;if(e.getParameterValueByIndex(n)>.001){if(s>=0)break;s=a,(o=e.getPartOpacityByIndex(r)+i/this._fadeTimeSeconds)>1&&(o=1)}}s<0&&(s=0,o=1);for(let i=r;i<r+n;++i){let r=this._partGroups[i].partIndex;if(s==i)e.setPartOpacityByIndex(r,o);else{let i,n=e.getPartOpacityByIndex(r);(1-(i=o<.5?-.5*o/.5+1:(1-o)*.5/.5))*(1-o)>.15&&(i=1-.15/(1-o)),n>i&&(n=i),e.setPartOpacityByIndex(r,n)}}}constructor(){this._fadeTimeSeconds=.5,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class ov{assignment(e){return this.partId=e.partId,this.link=e.link.map(e=>e.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){let e=new ov;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(e=>e.clone()),e}constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],null!=e&&this.assignment(e)}}class oy{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){let e=this._model.parameters.count,i=this._savedParameters.length;for(let r=0;r<e;++r)r<i?this._savedParameters[r]=this._parameterValues[r]:this._savedParameters.push(this._parameterValues[r])}getModel(){return this._model}getPartIndex(e){let i;let r=this._model.parts.count;for(i=0;i<r;++i)if(e==this._partIds[i])return i;return e in this._notExistPartId?this._notExistPartId[e]:(i=r+this._notExistPartId.length,this._notExistPartId[e]=i,this._notExistPartOpacities[i]=0,i)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,i){e in this._notExistPartOpacities?this._notExistPartOpacities[e]=i:(0<=e&&this.getPartCount(),this._partOpacities[e]=i)}setPartOpacityById(e,i){let r=this.getPartIndex(e);r<0||this.setPartOpacityByIndex(r,i)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(0<=e&&this.getPartCount(),this._partOpacities[e])}getPartOpacityById(e){let i=this.getPartIndex(e);return i<0?0:this.getPartOpacityByIndex(i)}getParameterIndex(e){let i;let r=this._model.parameters.count;for(i=0;i<r;++i)if(e==this._parameterIds[i])return i;return e in this._notExistParameterId?this._notExistParameterId[e]:(i=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=i,this._notExistParameterValues[i]=0,i)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(0<=e&&this.getParameterCount(),this._parameterValues[e])}getParameterValueById(e){let i=this.getParameterIndex(e);return this.getParameterValueByIndex(i)}setParameterValueByIndex(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e in this._notExistParameterValues?this._notExistParameterValues[e]=1==r?i:this._notExistParameterValues[e]*(1-r)+i*r:(0<=e&&this.getParameterCount(),this._model.parameters.maximumValues[e]<i&&(i=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>i&&(i=this._model.parameters.minimumValues[e]),this._parameterValues[e]=1==r?i:this._parameterValues[e]=this._parameterValues[e]*(1-r)+i*r)}setParameterValueById(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.getParameterIndex(e);this.setParameterValueByIndex(n,i,r)}addParameterValueByIndex(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+i*r)}addParameterValueById(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.getParameterIndex(e);this.addParameterValueByIndex(n,i,r)}multiplyParameterValueById(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.getParameterIndex(e);this.multiplyParameterValueByIndex(n,i,r)}multiplyParameterValueByIndex(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(i-1)*r))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){let i=this._model.drawables.count;for(let r=0;r<i;++r)if(this._drawableIds[r]==e)return r;return -1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){let i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(i[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){let i=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(i[e])}getDrawableBlendMode(e){let i=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(i[e])?sb.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(i[e])?sb.CubismBlendMode_Multiplicative:sb.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){let i=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(i[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){let i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(i[e])}getDrawableDynamicFlagVisibilityDidChange(e){let i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(i[e])}getDrawableDynamicFlagOpacityDidChange(e){let i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(i[e])}getDrawableDynamicFlagRenderOrderDidChange(e){let i=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(i[e])}loadParameters(){let e=this._model.parameters.count,i=this._savedParameters.length;e>i&&(e=i);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{let e=this._model.parameters.ids,i=this._model.parameters.count;for(let r=0;r<i;++r)this._parameterIds.push(e[r])}{let e=this._model.parts.ids,i=this._model.parts.count;for(let r=0;r<i;++r)this._partIds.push(e[r])}{let e=this._model.drawables.ids,i=this._model.drawables.count;for(let r=0;r<i;++r)this._drawableIds.push(e[r])}}release(){this._model.release(),this._model=void 0}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}}class ob{static create(e){let i=Live2DCubismCore.Moc.fromArrayBuffer(e);if(i)return new ob(i);throw Error("Unknown error")}createModel(){let e;let i=Live2DCubismCore.Model.fromMoc(this._moc);if(i)return e=new oy(i),++this._modelCount,e;throw Error("Unknown error")}deleteModel(e){null!=e&&--this._modelCount}release(){this._moc._release(),this._moc=void 0}constructor(e){this._moc=e,this._modelCount=0}}var ox=((aT=ox||{})[aT.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",aT),oT=((aA=oT||{})[aA.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",aA[aA.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",aA[aA.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",aA);class oA{constructor(){this.initialPosition=new sm(0,0),this.position=new sm(0,0),this.lastPosition=new sm(0,0),this.lastGravity=new sm(0,0),this.force=new sm(0,0),this.velocity=new sm(0,0)}}class oE{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class ow{constructor(){this.source={}}}class oS{constructor(){this.destination={},this.translationScale=new sm(0,0)}}class oP{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new sm(0,0),this.wind=new sm(0,0)}}class oM{release(){this._json=void 0}getGravity(){let e=new sm(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){let e=new sm(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,i){return this._json.PhysicsSettings[e].Input[i].Weight}getInputReflect(e,i){return this._json.PhysicsSettings[e].Input[i].Reflect}getInputType(e,i){return this._json.PhysicsSettings[e].Input[i].Type}getInputSourceId(e,i){return this._json.PhysicsSettings[e].Input[i].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,i){return this._json.PhysicsSettings[e].Output[i].VertexIndex}getOutputAngleScale(e,i){return this._json.PhysicsSettings[e].Output[i].Scale}getOutputWeight(e,i){return this._json.PhysicsSettings[e].Output[i].Weight}getOutputDestinationId(e,i){return this._json.PhysicsSettings[e].Output[i].Destination.Id}getOutputType(e,i){return this._json.PhysicsSettings[e].Output[i].Type}getOutputReflect(e,i){return this._json.PhysicsSettings[e].Output[i].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,i){return this._json.PhysicsSettings[e].Vertices[i].Mobility}getParticleDelay(e,i){return this._json.PhysicsSettings[e].Vertices[i].Delay}getParticleAcceleration(e,i){return this._json.PhysicsSettings[e].Vertices[i].Acceleration}getParticleRadius(e,i){return this._json.PhysicsSettings[e].Vertices[i].Radius}getParticlePosition(e,i){let r=new sm(0,0);return r.x=this._json.PhysicsSettings[e].Vertices[i].Position.X,r.y=this._json.PhysicsSettings[e].Vertices[i].Position.Y,r}constructor(e){this._json=e}}let oI="Angle";class oC{static create(e){let i=new oC;return i.parse(e),i._physicsRig.gravity.y=0,i}evaluate(e,i){let r,n,s,o,a,h,l,u,c,d,f,p;let _=new sm;c=e.getModel().parameters.values,d=e.getModel().parameters.maximumValues,f=e.getModel().parameters.minimumValues,p=e.getModel().parameters.defaultValues;for(let g=0;g<this._physicsRig.subRigCount;++g){r={angle:0},_.x=0,_.y=0,a=this._physicsRig.settings[g],h=this._physicsRig.inputs.slice(a.baseInputIndex),l=this._physicsRig.outputs.slice(a.baseOutputIndex),u=this._physicsRig.particles.slice(a.baseParticleIndex);for(let i=0;i<a.inputCount;++i)n=h[i].weight/100,-1==h[i].sourceParameterIndex&&(h[i].sourceParameterIndex=e.getParameterIndex(h[i].source.id)),h[i].getNormalizedParameterValue(_,r,c[h[i].sourceParameterIndex],f[h[i].sourceParameterIndex],d[h[i].sourceParameterIndex],p[h[i].sourceParameterIndex],a.normalizationPosition,a.normalizationAngle,h[i].reflect,n);s=sg.degreesToRadian(-r.angle),_.x=_.x*sg.cos(s)-_.y*sg.sin(s),_.y=_.x*sg.sin(s)+_.y*sg.cos(s),function(e,i,r,n,s,o,a,h){let l,u,c,d,f=new sm(0,0),p=new sm(0,0),_=new sm(0,0),g=new sm(0,0);e[0].position=new sm(r.x,r.y),l=sg.degreesToRadian(n),(d=sg.radianToDirection(l)).normalize();for(let r=1;r<i;++r)e[r].force=d.multiplyByScaler(e[r].acceleration).add(s),e[r].lastPosition=new sm(e[r].position.x,e[r].position.y),u=e[r].delay*a*30,f=e[r].position.substract(e[r-1].position),c=sg.directionToRadian(e[r].lastGravity,d)/5,f.x=sg.cos(c)*f.x-f.y*sg.sin(c),f.y=sg.sin(c)*f.x+f.y*sg.cos(c),e[r].position=e[r-1].position.add(f),p=e[r].velocity.multiplyByScaler(u),_=e[r].force.multiplyByScaler(u).multiplyByScaler(u),e[r].position=e[r].position.add(p).add(_),(g=e[r].position.substract(e[r-1].position)).normalize(),e[r].position=e[r-1].position.add(g.multiplyByScaler(e[r].radius)),sg.abs(e[r].position.x)<o&&(e[r].position.x=0),0!=u&&(e[r].velocity=e[r].position.substract(e[r].lastPosition),e[r].velocity=e[r].velocity.divisionByScalar(u),e[r].velocity=e[r].velocity.multiplyByScaler(e[r].mobility)),e[r].force=new sm(0,0),e[r].lastGravity=new sm(d.x,d.y)}(u,a.particleCount,_,r.angle,this._options.wind,.001*a.normalizationPosition.maximum,i,0);for(let i=0;i<a.outputCount;++i){let r=l[i].vertexIndex;if(r<1||r>=a.particleCount)break;-1==l[i].destinationParameterIndex&&(l[i].destinationParameterIndex=e.getParameterIndex(l[i].destination.id));let n=new sm;n.x=u[r].position.x-u[r-1].position.x,n.y=u[r].position.y-u[r-1].position.y,o=l[i].getValue(n,u,r,l[i].reflect,this._options.gravity);let s=l[i].destinationParameterIndex,h=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(c.subarray(s))):c.slice(s);!function(e,i,r,n,s){let o,a;(o=n*s.getScale(s.translationScale,s.angleScale))<i?(o<s.valueBelowMinimum&&(s.valueBelowMinimum=o),o=i):o>r&&(o>s.valueExceededMaximum&&(s.valueExceededMaximum=o),o=r),(a=s.weight/100)>=1||(o=e[0]*(1-a)+o*a),e[0]=o}(h,f[s],d[s],o,l[i]);for(let e=s,i=0;e<c.length;e++,i++)c[e]=h[i]}}}setOptions(e){this._options=e}getOption(){return this._options}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new oP;let i=new oM(e);this._physicsRig.gravity=i.getGravity(),this._physicsRig.wind=i.getWind(),this._physicsRig.subRigCount=i.getSubRigCount();let r=0,n=0,s=0;for(let e=0;e<this._physicsRig.subRigCount;++e){let o=new oE;o.normalizationPosition.minimum=i.getNormalizationPositionMinimumValue(e),o.normalizationPosition.maximum=i.getNormalizationPositionMaximumValue(e),o.normalizationPosition.defalut=i.getNormalizationPositionDefaultValue(e),o.normalizationAngle.minimum=i.getNormalizationAngleMinimumValue(e),o.normalizationAngle.maximum=i.getNormalizationAngleMaximumValue(e),o.normalizationAngle.defalut=i.getNormalizationAngleDefaultValue(e),o.inputCount=i.getInputCount(e),o.baseInputIndex=r,r+=o.inputCount;for(let r=0;r<o.inputCount;++r){let n=new ow;switch(n.sourceParameterIndex=-1,n.weight=i.getInputWeight(e,r),n.reflect=i.getInputReflect(e,r),i.getInputType(e,r)){case"X":n.type=oT.CubismPhysicsSource_X,n.getNormalizedParameterValue=oO;break;case"Y":n.type=oT.CubismPhysicsSource_Y,n.getNormalizedParameterValue=oD;break;case oI:n.type=oT.CubismPhysicsSource_Angle,n.getNormalizedParameterValue=o$}n.source.targetType=ox.CubismPhysicsTargetType_Parameter,n.source.id=i.getInputSourceId(e,r),this._physicsRig.inputs.push(n)}o.outputCount=i.getOutputCount(e),o.baseOutputIndex=n,n+=o.outputCount;for(let r=0;r<o.outputCount;++r){let n=new oS;switch(n.destinationParameterIndex=-1,n.vertexIndex=i.getOutputVertexIndex(e,r),n.angleScale=i.getOutputAngleScale(e,r),n.weight=i.getOutputWeight(e,r),n.destination.targetType=ox.CubismPhysicsTargetType_Parameter,n.destination.id=i.getOutputDestinationId(e,r),i.getOutputType(e,r)){case"X":n.type=oT.CubismPhysicsSource_X,n.getValue=oL,n.getScale=ok;break;case"Y":n.type=oT.CubismPhysicsSource_Y,n.getValue=oF,n.getScale=oN;break;case oI:n.type=oT.CubismPhysicsSource_Angle,n.getValue=oB,n.getScale=oU}n.reflect=i.getOutputReflect(e,r),this._physicsRig.outputs.push(n)}o.particleCount=i.getParticleCount(e),o.baseParticleIndex=s,s+=o.particleCount;for(let r=0;r<o.particleCount;++r){let n=new oA;n.mobility=i.getParticleMobility(e,r),n.delay=i.getParticleDelay(e,r),n.acceleration=i.getParticleAcceleration(e,r),n.radius=i.getParticleRadius(e,r),n.position=i.getParticlePosition(e,r),this._physicsRig.particles.push(n)}this._physicsRig.settings.push(o)}this.initialize(),i.release()}initialize(){let e,i,r;for(let n=0;n<this._physicsRig.subRigCount;++n){i=this._physicsRig.settings[n],(e=this._physicsRig.particles.slice(i.baseParticleIndex))[0].initialPosition=new sm(0,0),e[0].lastPosition=new sm(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new sm(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new sm(0,0),e[0].force=new sm(0,0);for(let n=1;n<i.particleCount;++n)(r=new sm(0,0)).y=e[n].radius,e[n].initialPosition=new sm(e[n-1].initialPosition.x+r.x,e[n-1].initialPosition.y+r.y),e[n].position=new sm(e[n].initialPosition.x,e[n].initialPosition.y),e[n].lastPosition=new sm(e[n].initialPosition.x,e[n].initialPosition.y),e[n].lastGravity=new sm(0,-1),e[n].lastGravity.y*=-1,e[n].velocity=new sm(0,0),e[n].force=new sm(0,0)}}constructor(){this._options=new oR,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}}class oR{constructor(){this.gravity=new sm(0,0),this.wind=new sm(0,0)}}function oO(e,i,r,n,s,o,a,h,l,u){e.x+=oG(r,n,s,o,a.minimum,a.maximum,a.defalut,l)*u}function oD(e,i,r,n,s,o,a,h,l,u){e.y+=oG(r,n,s,o,a.minimum,a.maximum,a.defalut,l)*u}function o$(e,i,r,n,s,o,a,h,l,u){i.angle+=oG(r,n,s,o,h.minimum,h.maximum,h.defalut,l)*u}function oL(e,i,r,n,s){let o=e.x;return n&&(o*=-1),o}function oF(e,i,r,n,s){let o=e.y;return n&&(o*=-1),o}function oB(e,i,r,n,s){let o;return s=r>=2?i[r-1].position.substract(i[r-2].position):s.multiplyByScaler(-1),o=sg.directionToRadian(s,e),n&&(o*=-1),o}function ok(e,i){return e.x}function oN(e,i){return e.y}function oU(e,i){return i}function oG(e,i,r,n,s,o,a,h){let l=0,u=sg.max(r,i);u<e&&(e=u);let c=sg.min(r,i);c>e&&(e=c);let d=sg.min(s,o),f=sg.max(s,o),p=Math.min(c,u)+Math.abs(Math.max(c,u)-Math.min(c,u))/2,_=e-p;switch(Math.sign(_)){case 1:{let e=u-p;0!=e&&(l=(f-a)/e*_+a);break}case -1:{let e=c-p;0!=e&&(l=(d-a)/e*_+a);break}case 0:l=a}return h?l:-1*l}function oX(){var e;null==(e=this.__moc)||e.release()}function oV(e,i){this.name="AggregateError",this.errors=e,this.message=i||""}n3.registerRuntime({version:4,ready:function(){return sw.isStarted()?Promise.resolve():(null!=o_||(o_=new Promise((e,i)=>{!function r(){var n;try{n=Object.assign({logFunction:console.log,loggingLevel:sS.LogLevel_Verbose},n),sw.startUp(n),sw.initialize(),e()}catch(e){if(--om<0){let r=Error("Failed to start up Cubism 4 framework.");return r.cause=e,void i(r)}nI.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(r,10)}}()})),o_)},test:e=>e instanceof sU||sU.isValidJSON(e),isValidMoc:e=>!(e.byteLength<4)&&"MOC3"===String.fromCharCode(...new Int8Array(e,0,4)),createModelSettings:e=>new sU(e),createCoreModel(e){let i=ob.create(e);try{let e=i.createModel();return e.__moc=i,e}catch(e){try{i.release()}catch(e){}throw e}},createInternalModel(e,i,r){let n=new op(e,i,r);return e.__moc&&(n.__moc=e.__moc,delete e.__moc,n.once("destroy",oX)),n},createPhysics:(e,i)=>oC.create(i),createPose:(e,i)=>og.create(i)}),oV.prototype=Error.prototype;var oH=setTimeout;function oj(e){return!!(e&&void 0!==e.length)}function oY(){}function oz(e){if(!(this instanceof oz))throw TypeError("Promises must be constructed via new");if("function"!=typeof e)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],oK(e,this)}function oW(e,i){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,oz._immediateFn(function(){var r,n=1===e._state?i.onFulfilled:i.onRejected;if(null!==n){try{r=n(e._value)}catch(e){return void oZ(i.promise,e)}oq(i.promise,r)}else(1===e._state?oq:oZ)(i.promise,e._value)})):e._deferreds.push(i)}function oq(e,i){try{if(i===e)throw TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if(i instanceof oz)return e._state=3,e._value=i,void oQ(e);if("function"==typeof r)return void oK(function(){r.apply(i,arguments)},e)}e._state=1,e._value=i,oQ(e)}catch(i){oZ(e,i)}}function oZ(e,i){e._state=2,e._value=i,oQ(e)}function oQ(e){2===e._state&&0===e._deferreds.length&&oz._immediateFn(function(){e._handled||oz._unhandledRejectionFn(e._value)});for(var i=0,r=e._deferreds.length;i<r;i++)oW(e,e._deferreds[i]);e._deferreds=null}function oJ(e,i,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof i?i:null,this.promise=r}function oK(e,i){var r=!1;try{e(function(e){r||(r=!0,oq(i,e))},function(e){r||(r=!0,oZ(i,e))})}catch(e){if(r)return;r=!0,oZ(i,e)}}oz.prototype.catch=function(e){return this.then(null,e)},oz.prototype.then=function(e,i){var r=new this.constructor(oY);return oW(this,new oJ(e,i,r)),r},oz.prototype.finally=function(e){var i=this.constructor;return this.then(function(r){return i.resolve(e()).then(function(){return r})},function(r){return i.resolve(e()).then(function(){return i.reject(r)})})},oz.all=function(e){return new oz(function(i,r){if(!oj(e))return r(TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return i([]);for(var s=n.length,o=0;o<n.length;o++)(function e(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var h=a.then;if("function"==typeof h)return void h.call(a,function(i){e(o,i)},r)}n[o]=a,0==--s&&i(n)}catch(e){r(e)}})(o,n[o])})},oz.any=function(e){var i=this;return new i(function(r,n){if(!e||void 0===e.length)return n(TypeError("Promise.any accepts an array"));var s=Array.prototype.slice.call(e);if(0===s.length)return n();for(var o=[],a=0;a<s.length;a++)try{i.resolve(s[a]).then(r).catch(function(e){o.push(e),o.length===s.length&&n(new oV(o,"All promises were rejected"))})}catch(e){n(e)}})},oz.allSettled=function(e){return new this(function(i,r){if(!e||void 0===e.length)return r(TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return i([]);for(var s=n.length,o=0;o<n.length;o++)(function e(r,o){if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(i){e(r,i)},function(e){n[r]={status:"rejected",reason:e},0==--s&&i(n)})}n[r]={status:"fulfilled",value:o},0==--s&&i(n)})(o,n[o])})},oz.resolve=function(e){return e&&"object"==typeof e&&e.constructor===oz?e:new oz(function(i){i(e)})},oz.reject=function(e){return new oz(function(i,r){r(e)})},oz.race=function(e){return new oz(function(i,r){if(!oj(e))return r(TypeError("Promise.race accepts an array"));for(var n=0,s=e.length;n<s;n++)oz.resolve(e[n]).then(i,r)})},oz._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){oH(e,0)},oz._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o0=Object.getOwnPropertySymbols,o2=Object.prototype.hasOwnProperty,o1=Object.prototype.propertyIsEnumerable,o4=X(!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var i={},r=0;r<10;r++)i["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(i).map(function(e){return i[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?function(e,i){for(var r,n,s=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))o2.call(r,a)&&(s[a]=r[a]);if(o0){n=o0(r);for(var h=0;h<n.length;h++)o1.call(r,n[h])&&(s[n[h]]=r[n[h]])}}return s}:Object.assign);if(/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */"undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=oz),Object.assign||(Object.assign=o4),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var o3=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-o3}}for(var o6=Date.now(),o8=["ms","moz","webkit","o"],o5=0;o5<o8.length&&!globalThis.requestAnimationFrame;++o5){var o7=o8[o5];globalThis.requestAnimationFrame=globalThis[o7+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[o7+"CancelAnimationFrame"]||globalThis[o7+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if("function"!=typeof e)throw TypeError(e+"is not a function");var i=Date.now(),r=16+o6-i;return r<0&&(r=0),o6=i,globalThis.self.setTimeout(function(){o6=Date.now(),e(performance.now())},r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */),nA.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var o9=function(){function e(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(U.tablet||U.phone)&&this.createTouchHook();var i=document.createElement("div");i.style.width="100px",i.style.height="100px",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex="2",this.div=i,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var e=this,i=document.createElement("button");i.style.width="1px",i.style.height="1px",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.style.zIndex="2",i.style.backgroundColor="#FF0000",i.title="select to enable accessibility for this content",i.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(i),this._hookDiv=i},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},e.prototype.deactivate=function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var i=e.children;if(i)for(var r=0;r<i.length;r++)this.updateAccessibleObjects(i[r])}},e.prototype.update=function(){var e=performance.now();if(!(U.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var i=this.renderer.view.getBoundingClientRect(),r=i.left,n=i.top,s=i.width,o=i.height,a=this.renderer,h=a.width,l=a.height,u=a.resolution,c=s/h*u,d=o/l*u,f=this.div;f.style.left=r+"px",f.style.top=n+"px",f.style.width=h+"px",f.style.height=l+"px";for(var p=0;p<this.children.length;p++){var _=this.children[p];if(_.renderId!==this.renderId)_._accessibleActive=!1,eQ(this.children,p,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,p--;else{f=_._accessibleDiv;var g=_.hitArea,v=_.worldTransform;_.hitArea?(f.style.left=(v.tx+g.x*v.a)*c+"px",f.style.top=(v.ty+g.y*v.d)*d+"px",f.style.width=g.width*v.a*c+"px",f.style.height=g.height*v.d*d+"px"):(g=_.getBounds(),this.capHitArea(g),f.style.left=g.x*c+"px",f.style.top=g.y*d+"px",f.style.width=g.width*c+"px",f.style.height=g.height*d+"px",f.title!==_.accessibleTitle&&null!==_.accessibleTitle&&(f.title=_.accessibleTitle),f.getAttribute("aria-label")!==_.accessibleHint&&null!==_.accessibleHint&&f.setAttribute("aria-label",_.accessibleHint)),_.accessibleTitle===f.title&&_.tabIndex===f.tabIndex||(f.title=_.accessibleTitle,f.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}},e.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var i=this.renderer,r=i.width,n=i.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)},e.prototype.addChild=function(e){var i=this.pool.pop();i||((i=document.createElement("button")).style.width="100px",i.style.height="100px",i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex="2",i.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=e.accessiblePointerEvents,i.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?i.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(i.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&i.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(i),e._accessibleActive=!0,e._accessibleDiv=i,i.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var i=this.renderer.plugins.interaction,r=e.target.displayObject,n=i.eventData;i.dispatchEvent(r,"click",n),i.dispatchEvent(r,"pointertap",n),i.dispatchEvent(r,"tap",n)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var i=this.renderer.plugins.interaction,r=e.target.displayObject,n=i.eventData;i.dispatchEvent(r,"mouseover",n)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var i=this.renderer.plugins.interaction,r=e.target.displayObject,n=i.eventData;i.dispatchEvent(r,"mouseout",n)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e.extension={name:"accessibility",type:[iT.RendererPlugin,iT.CanvasRendererPlugin]},e}(),at=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ii,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(e,i,r){return e.worldTransform.applyInverse(r||this.global,i)},e.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var i="buttons"in e&&e.buttons;this.buttons=Number.isInteger(i)?i:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),ae=function(e,i){return(ae=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)},ai=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),ar=function(){function e(i){this._pointerId=i,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,i){this._flags=i?this._flags|e:this._flags&~e},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 0!=(this._flags&e.FLAGS.OVER)},set:function(i){this._doSet(e.FLAGS.OVER,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return 0!=(this._flags&e.FLAGS.RIGHT_DOWN)},set:function(i){this._doSet(e.FLAGS.RIGHT_DOWN,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return 0!=(this._flags&e.FLAGS.LEFT_DOWN)},set:function(i){this._doSet(e.FLAGS.LEFT_DOWN,i)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),an=function(){function e(){this._tempPoint=new ii}return e.prototype.recursiveFindHit=function(e,i,r,n,s){if(!i||!i.visible)return!1;var o,a=e.data.global,h=!1,l=s=i.interactive||s,u=!0;if(i.hitArea)n&&(i.worldTransform.applyInverse(a,this._tempPoint),i.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?h=!0:(n=!1,u=!1)),l=!1;else if(i._mask&&n){var c=i._mask.isMaskData?i._mask.maskObject:i._mask;!c||(null===(o=c.containsPoint)||void 0===o?void 0:o.call(c,a))||(n=!1)}if(u&&i.interactiveChildren&&i.children)for(var d=i.children,f=d.length-1;f>=0;f--){var p=d[f],_=this.recursiveFindHit(e,p,r,n,l);if(_){if(!p.parent)continue;l=!1,_&&(e.target&&(n=!1),h=!0)}}return s&&(n&&!e.target&&!i.hitArea&&i.containsPoint&&i.containsPoint(a)&&(h=!0),i.interactive&&(h&&!e.target&&(e.target=i),r&&r(e,i,!!h))),h},e.prototype.findHit=function(e,i,r,n){this.recursiveFindHit(e,i,r,n,!1)},e}();nA.mixin({interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0});var as={target:null,data:{global:null}},ao=function(e){function i(i,r){var n=e.call(this)||this;return r=r||{},n.renderer=i,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new at,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new ai,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new an,n._tempDisplayObject=new nE,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(e,i){function r(){this.constructor=e}ae(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(i,e),Object.defineProperty(i.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),i.prototype.hitTest=function(e,i){return as.target=null,as.data.global=e,i||(i=this.lastObjectRendered),this.processInteractive(as,i,null,!0),as.target},i.prototype.setTargetElement=function(e,i){void 0===i&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=i,this.addEvents(),this.addTickerListener()},i.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(iO.system.add(this.tickerUpdate,this,iP.INTERACTION),this.tickerAdded=!0)},i.prototype.removeTickerListener=function(){this.tickerAdded&&(iO.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},i.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},i.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},i.prototype.tickerUpdate=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},i.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)this._didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}}},i.prototype.setCursorMode=function(e){e=e||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var r=this.cursorStyles[e];if(r)switch(typeof r){case"string":i&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(e);break;case"object":i&&Object.assign(this.interactionDOMElement.style,r)}else i&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},i.prototype.dispatchEvent=function(e,i,r){r.stopPropagationHint&&e!==r.stopsPropagatingAt||(r.currentTarget=e,r.type=i,e.emit(i,r),e[i]&&e[i](r))},i.prototype.delayDispatchEvent=function(e,i,r){this.delayedEvents.push({displayObject:e,eventString:i,eventData:r})},i.prototype.mapPositionToPoint=function(e,i,r){n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n,s=1/this.resolution;e.x=(i-n.left)*(this.interactionDOMElement.width/n.width)*s,e.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*s},i.prototype.processInteractive=function(e,i,r,n){var s=this.search.findHit(e,i,r,n),o=this.delayedEvents;if(!o.length)return s;e.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var h=0;h<a;h++){var l=o[h],u=l.displayObject,c=l.eventString,d=l.eventData;d.stopsPropagatingAt===u&&(d.stopPropagationHint=!0),this.dispatchEvent(u,c,d)}return s},i.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var i=this.normalizeToPointerData(e);this.autoPreventDefault&&i[0].isNormalized&&(!e.cancelable&&"cancelable"in e||e.preventDefault());for(var r=i.length,n=0;n<r;n++){var s=i[n],o=this.getInteractionDataForPointerId(s),a=this.configureInteractionEventForDOMEvent(this.eventData,s,o);if(a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===s.pointerType)this.emit("touchstart",a);else if("mouse"===s.pointerType||"pen"===s.pointerType){var h=2===s.button;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},i.prototype.processPointerDown=function(e,i,r){var n=e.data,s=e.data.identifier;if(r){if(i.trackedPointers[s]||(i.trackedPointers[s]=new ar(s)),this.dispatchEvent(i,"pointerdown",e),"touch"===n.pointerType)this.dispatchEvent(i,"touchstart",e);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?i.trackedPointers[s].rightDown=!0:i.trackedPointers[s].leftDown=!0,this.dispatchEvent(i,o?"rightdown":"mousedown",e)}}},i.prototype.onPointerComplete=function(e,i,r){var n=this.normalizeToPointerData(e),s=n.length,o=e.target;e.composedPath&&e.composedPath().length>0&&(o=e.composedPath()[0]);for(var a=o!==this.interactionDOMElement?"outside":"",h=0;h<s;h++){var l=n[h],u=this.getInteractionDataForPointerId(l),c=this.configureInteractionEventForDOMEvent(this.eventData,l,u);if(c.data.originalEvent=e,this.processInteractive(c,this.lastObjectRendered,r,i||!a),this.emit(i?"pointercancel":"pointerup"+a,c),"mouse"===l.pointerType||"pen"===l.pointerType){var d=2===l.button;this.emit(d?"rightup"+a:"mouseup"+a,c)}else"touch"===l.pointerType&&(this.emit(i?"touchcancel":"touchend"+a,c),this.releaseInteractionDataForPointerId(l.pointerId))}},i.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(e,i){var r=e.data,n=e.data.identifier;void 0!==i.trackedPointers[n]&&(delete i.trackedPointers[n],this.dispatchEvent(i,"pointercancel",e),"touch"===r.pointerType&&this.dispatchEvent(i,"touchcancel",e))},i.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},i.prototype.processPointerUp=function(e,i,r){var n=e.data,s=e.data.identifier,o=i.trackedPointers[s],a="touch"===n.pointerType,h="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(h){var u=2===n.button,c=ar.FLAGS,d=u?c.RIGHT_DOWN:c.LEFT_DOWN,f=void 0!==o&&o.flags&d;r?(this.dispatchEvent(i,u?"rightup":"mouseup",e),f&&(this.dispatchEvent(i,u?"rightclick":"click",e),l=!0)):f&&this.dispatchEvent(i,u?"rightupoutside":"mouseupoutside",e),o&&(u?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(i,"pointerup",e),a&&this.dispatchEvent(i,"touchend",e),o&&(h&&!l||this.dispatchEvent(i,"pointertap",e),a&&(this.dispatchEvent(i,"tap",e),o.over=!1))):o&&(this.dispatchEvent(i,"pointerupoutside",e),a&&this.dispatchEvent(i,"touchendoutside",e)),o&&o.none&&delete i.trackedPointers[s]},i.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var i=this.normalizeToPointerData(e);"mouse"!==i[0].pointerType&&"pen"!==i[0].pointerType||(this._didMove=!0,this.cursor=null);for(var r=i.length,n=0;n<r;n++){var s=i[n],o=this.getInteractionDataForPointerId(s),a=this.configureInteractionEventForDOMEvent(this.eventData,s,o);a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===s.pointerType&&this.emit("touchmove",a),"mouse"!==s.pointerType&&"pen"!==s.pointerType||this.emit("mousemove",a)}"mouse"===i[0].pointerType&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(e,i,r){var n=e.data,s="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(e,i,r),this.moveWhenInside&&!r||(this.dispatchEvent(i,"pointermove",e),s&&this.dispatchEvent(i,"touchmove",e),o&&this.dispatchEvent(i,"mousemove",e))},i.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var i=this.normalizeToPointerData(e)[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(i),n=this.configureInteractionEventForDOMEvent(this.eventData,i,r);n.data.originalEvent=i,this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},i.prototype.processPointerOverOut=function(e,i,r){var n=e.data,s=e.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,a=i.trackedPointers[s];r&&!a&&(a=i.trackedPointers[s]=new ar(s)),void 0!==a&&(r&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(i,"pointerover",e),o&&this.delayDispatchEvent(i,"mouseover",e)),o&&null===this.cursor&&(this.cursor=i.cursor)):a.over&&(a.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),o&&this.dispatchEvent(i,"mouseout",e),a.none&&delete i.trackedPointers[s]))},i.prototype.onPointerOver=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var i=this.normalizeToPointerData(e)[0],r=this.getInteractionDataForPointerId(i),n=this.configureInteractionEventForDOMEvent(this.eventData,i,r);n.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mouseover",n)}},i.prototype.getInteractionDataForPointerId=function(e){var i,r=e.pointerId;return 1===r||"mouse"===e.pointerType?i=this.mouse:this.activeInteractionData[r]?i=this.activeInteractionData[r]:((i=this.interactionDataPool.pop()||new at).identifier=r,this.activeInteractionData[r]=i),i.copyEvent(e),i},i.prototype.releaseInteractionDataForPointerId=function(e){var i=this.activeInteractionData[e];i&&(delete this.activeInteractionData[e],i.reset(),this.interactionDataPool.push(i))},i.prototype.configureInteractionEventForDOMEvent=function(e,i,r){return e.data=r,this.mapPositionToPoint(r.global,i.clientX,i.clientY),"touch"===i.pointerType&&(i.globalX=r.global.x,i.globalY=r.global.y),r.originalEvent=i,e.reset(),e},i.prototype.normalizeToPointerData=function(e){var i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var r=0,n=e.changedTouches.length;r<n;r++){var s=e.changedTouches[r];void 0===s.button&&(s.button=e.touches.length?1:0),void 0===s.buttons&&(s.buttons=e.touches.length?1:0),void 0===s.isPrimary&&(s.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===s.width&&(s.width=s.radiusX||1),void 0===s.height&&(s.height=s.radiusY||1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="touch"),void 0===s.pointerId&&(s.pointerId=s.identifier||0),void 0===s.pressure&&(s.pressure=s.force||.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),void 0===s.layerX&&(s.layerX=s.offsetX=s.clientX),void 0===s.layerY&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,i.push(s)}else globalThis.MouseEvent&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)||(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=1),void 0===e.pressure&&(e.pressure=.5),void 0===e.twist&&(e.twist=0),void 0===e.tangentialPressure&&(e.tangentialPressure=0),e.isNormalized=!0),i.push(e);return i},i.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},i.extension={name:"interaction",type:[iT.RendererPlugin,iT.CanvasRendererPlugin]},i}(H),aa=new is,ah=function(){function e(e){this.renderer=e}return e.prototype.image=function(e,i,r){var n=new Image;return n.src=this.base64(e,i,r),n},e.prototype.base64=function(e,i,r){return this.canvas(e).toDataURL(i,r)},e.prototype.canvas=function(i,r){var n=this._rawPixels(i,r),s=n.pixels,o=n.width,a=n.height,h=n.flipY,l=new e8(o,a,1),u=l.context.getImageData(0,0,o,a);if(e.arrayPostDivide(s,u.data),l.context.putImageData(u,0,0),h){var c=new e8(l.width,l.height,1);c.context.scale(1,-1),c.context.drawImage(l.canvas,0,-a),l.destroy(),l=c}return l.canvas},e.prototype.pixels=function(i,r){var n=this._rawPixels(i,r).pixels;return e.arrayPostDivide(n,n),n},e.prototype._rawPixels=function(e,i){var r,n,s=this.renderer,o=!1,a=!1;if(e){if(e instanceof i6)n=e;else{var h=s.context.webGLVersion>=2?s.multisample:eF.NONE;if(n=this.renderer.generateTexture(e,{multisample:h}),h!==eF.NONE){var l=i6.create({width:n.width,height:n.height});s.framebuffer.bind(n.framebuffer),s.framebuffer.blit(l.framebuffer),s.framebuffer.bind(null),n.destroy(!0),n=l}a=!0}}n?(r=n.baseTexture.resolution,i=null!=i?i:n.frame,o=!1,s.renderTexture.bind(n)):(r=s.resolution,i||((i=aa).width=s.width,i.height=s.height),o=!0,s.renderTexture.bind(null));var u=Math.round(i.width*r),c=Math.round(i.height*r),d=new Uint8Array(4*u*c),f=s.gl;return f.readPixels(Math.round(i.x*r),Math.round(i.y*r),u,c,f.RGBA,f.UNSIGNED_BYTE,d),a&&n.destroy(!0),{pixels:d,width:u,height:c,flipY:o}},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(e,i){for(var r=0;r<e.length;r+=4){var n=i[r+3]=e[r+3];0!==n?(i[r]=Math.round(Math.min(255*e[r]/n,255)),i[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),i[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(i[r]=e[r],i[r+1]=e[r+1],i[r+2]=e[r+2])}},e.extension={name:"extract",type:iT.RendererPlugin},e}(),al=function(){function e(e,i,r){void 0===i&&(i=!1),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},e}();function au(e,i){return e._head?(e._tail._next=i,i._prev=e._tail):e._head=i,e._tail=i,i._owner=e,i}var ac,ad,af,ap,a_,am,ag,av,ay,ab,ax,aT,aA,aE,aw,aS,aP,aM,aI=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(e){void 0===e&&(e=!1);var i=this._head;if(e)return!!i;for(var r=[];i;)r.push(i),i=i._next;return r},e.prototype.has=function(e){if(!(e instanceof al))throw Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},e.prototype.dispatch=function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,i),n=n._next;return!0},e.prototype.add=function(e,i){if(void 0===i&&(i=null),"function"!=typeof e)throw Error("MiniSignal#add(): First arg must be a Function.");return au(this,new al(e,!1,i))},e.prototype.once=function(e,i){if(void 0===i&&(i=null),"function"!=typeof e)throw Error("MiniSignal#once(): First arg must be a Function.");return au(this,new al(e,!0,i))},e.prototype.detach=function(e){if(!(e instanceof al))throw Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},e.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},e}();function aC(e,i){i=i||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[i.strictMode?"strict":"loose"].exec(e),s={},o=14;o--;)s[r.key[o]]=n[o]||"";return s[r.q.name]={},s[r.key[12]].replace(r.q.parser,function(e,i,n){i&&(s[r.q.name][i]=n)}),s}var aR=null;function aO(){}function aD(e,i,r){i&&0===i.indexOf(".")&&(i=i.substring(1)),i&&(e[i]=r)}function a$(e){return e.toString().replace("object ","")}var aL=function(){function e(i,r,n){if(this._dequeue=aO,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof i||"string"!=typeof r)throw Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=i,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=aO,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new aI,this.onProgress=new aI,this.onComplete=new aI,this.onAfterMiddleware=new aI}return e.setExtensionLoadType=function(i,r){aD(e._loadTypeMap,i,r)},e.setExtensionXhrType=function(i,r){aD(e._xhrTypeMap,i,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(i){if(!this.error){if(this.error=Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data){if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild)}this._finish()}},e.prototype.load=function(i){var r=this;if(!this.isLoading){if(this.isComplete)i&&setTimeout(function(){return i(r)},1);else switch(i&&this.onComplete.once(i),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:void 0===aM&&(aM=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),aM&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},e.prototype._hasFlag=function(e){return 0!=(this._flags&e)},e.prototype._setFlag=function(e,i){this._flags=i?this._flags|e:this._flags&~e},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource){if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var i=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(i)?i[r]:i));else i=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(i.withCredentials=!0),i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=e.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,i,r){r||(r=e+"/"+this._getExtension(i));var n=document.createElement("source");return n.src=i,n.type=r,n},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(a$(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(a$(e)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(a$(e)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var i=this.xhr,r="",n=void 0===i.status?200:i.status;if(""!==i.responseType&&"text"!==i.responseType&&void 0!==i.responseType||(r=i.responseText),0===n&&(r.length>0||i.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=i.response||r;this.complete()}else this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL)},e.prototype._determineCrossOrigin=function(e,i){if(0===e.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";i=i||globalThis.location,aR||(aR=document.createElement("a")),aR.href=e;var r=aC(aR.href,{strictMode:!0}),n=!r.port&&""===i.port||r.port===i.port,s=r.protocol?r.protocol+":":"";return r.host===i.hostname&&n&&s===i.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(e){void 0===e&&(e=this.url);var i="";if(this.isDataUrl){var r=e.indexOf("/");i=e.substring(r+1,e.indexOf(";",r))}else{var n=e.indexOf("?"),s=e.indexOf("#"),o=Math.min(n>-1?n:e.length,s>-1?s:e.length);i=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return i.toLowerCase()},e.prototype._getMimeFromXhrType=function(i){switch(i){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();function aF(){}(aj=(aH=aL||(aL={})).STATUS_FLAGS||(aH.STATUS_FLAGS={}))[aj.NONE=0]="NONE",aj[aj.DATA_URL=1]="DATA_URL",aj[aj.COMPLETE=2]="COMPLETE",aj[aj.LOADING=4]="LOADING",(aY=aH.TYPE||(aH.TYPE={}))[aY.UNKNOWN=0]="UNKNOWN",aY[aY.JSON=1]="JSON",aY[aY.XML=2]="XML",aY[aY.IMAGE=3]="IMAGE",aY[aY.AUDIO=4]="AUDIO",aY[aY.VIDEO=5]="VIDEO",aY[aY.TEXT=6]="TEXT",(az=aH.LOAD_TYPE||(aH.LOAD_TYPE={}))[az.XHR=1]="XHR",az[az.IMAGE=2]="IMAGE",az[az.AUDIO=3]="AUDIO",az[az.VIDEO=4]="VIDEO",(aW=aH.XHR_RESPONSE_TYPE||(aH.XHR_RESPONSE_TYPE={})).DEFAULT="text",aW.BUFFER="arraybuffer",aW.BLOB="blob",aW.DOCUMENT="document",aW.JSON="json",aW.TEXT="text",aH._loadTypeMap={gif:aH.LOAD_TYPE.IMAGE,png:aH.LOAD_TYPE.IMAGE,bmp:aH.LOAD_TYPE.IMAGE,jpg:aH.LOAD_TYPE.IMAGE,jpeg:aH.LOAD_TYPE.IMAGE,tif:aH.LOAD_TYPE.IMAGE,tiff:aH.LOAD_TYPE.IMAGE,webp:aH.LOAD_TYPE.IMAGE,tga:aH.LOAD_TYPE.IMAGE,avif:aH.LOAD_TYPE.IMAGE,svg:aH.LOAD_TYPE.IMAGE,"svg+xml":aH.LOAD_TYPE.IMAGE,mp3:aH.LOAD_TYPE.AUDIO,ogg:aH.LOAD_TYPE.AUDIO,wav:aH.LOAD_TYPE.AUDIO,mp4:aH.LOAD_TYPE.VIDEO,webm:aH.LOAD_TYPE.VIDEO},aH._xhrTypeMap={xhtml:aH.XHR_RESPONSE_TYPE.DOCUMENT,html:aH.XHR_RESPONSE_TYPE.DOCUMENT,htm:aH.XHR_RESPONSE_TYPE.DOCUMENT,xml:aH.XHR_RESPONSE_TYPE.DOCUMENT,tmx:aH.XHR_RESPONSE_TYPE.DOCUMENT,svg:aH.XHR_RESPONSE_TYPE.DOCUMENT,tsx:aH.XHR_RESPONSE_TYPE.DOCUMENT,gif:aH.XHR_RESPONSE_TYPE.BLOB,png:aH.XHR_RESPONSE_TYPE.BLOB,bmp:aH.XHR_RESPONSE_TYPE.BLOB,jpg:aH.XHR_RESPONSE_TYPE.BLOB,jpeg:aH.XHR_RESPONSE_TYPE.BLOB,tif:aH.XHR_RESPONSE_TYPE.BLOB,tiff:aH.XHR_RESPONSE_TYPE.BLOB,webp:aH.XHR_RESPONSE_TYPE.BLOB,tga:aH.XHR_RESPONSE_TYPE.BLOB,avif:aH.XHR_RESPONSE_TYPE.BLOB,json:aH.XHR_RESPONSE_TYPE.JSON,text:aH.XHR_RESPONSE_TYPE.TEXT,txt:aH.XHR_RESPONSE_TYPE.TEXT,ttf:aH.XHR_RESPONSE_TYPE.BUFFER,otf:aH.XHR_RESPONSE_TYPE.BUFFER},aH.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var aB=function(e,i){this.data=e,this.callback=i},ak=function(){function e(e,i){var r=this;if(void 0===i&&(i=1),this.workers=0,this.saturated=aF,this.unsaturated=aF,this.empty=aF,this.drain=aF,this.error=aF,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(e,i,n){if(n&&"function"!=typeof n)throw Error("task callback must be a function");if(r.started=!0,null==e&&r.idle())setTimeout(function(){return r.drain()},1);else{var s=new aB(e,"function"==typeof n?n:aF);i?r._tasks.unshift(s):r._tasks.push(s),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var e=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(e.data,function(e){return function(){for(var i=arguments,r=[],n=0;n<arguments.length;n++)r[n]=i[n];if(null===e)throw Error("Callback was already called.");var s=e;e=null,s.apply(this,r)}}(r._next(e)))}},this._worker=e,0===i)throw Error("Concurrency must not be zero");this.concurrency=i,this.buffer=i/4}return e.prototype._next=function(e){var i=this;return function(){for(var r=arguments,n=[],s=0;s<arguments.length;s++)n[s]=r[s];i.workers-=1,e.callback.apply(e,n),null!=n[0]&&i.error(n[0],e.data),i.workers<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}},e.prototype.push=function(e,i){this._insert(e,!1,i)},e.prototype.kill=function(){this.workers=0,this.drain=aF,this.started=!1,this._tasks=[]},e.prototype.unshift=function(e,i){this._insert(e,!0,i)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},e.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},e.eachSeries=function(e,i,r,n){var s=0,o=e.length;!function a(h){h||s===o?r&&r(h):n?setTimeout(function(){i(e[s++],a)},1):i(e[s++],a)}()},e.queue=function(i,r){return new e(i,r)},e}(),aN=/(#[\w-]+)?$/,aU=function(){function e(i,r){var n=this;void 0===i&&(i=""),void 0===r&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,i){return n._loadResource(e,i)},this.resources={},this.baseUrl=i,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,i){return n._loadResource(e,i)},this._queue=ak.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new aI,this.onError=new aI,this.onLoad=new aI,this.onStart=new aI,this.onComplete=new aI;for(var s=0;s<e._plugins.length;++s){var o=e._plugins[s],a=o.pre,h=o.use;a&&this.pre(a),h&&this.use(h)}this._protected=!1}return e.prototype._add=function(e,i,r,n){if(this.loading&&(!r||!r.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[e])throw Error('Resource named "'+e+'" already exists.');if(i=this._prepareUrl(i),this.resources[e]=new aL(e,i,r),"function"==typeof n&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var s=r.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);for(s.children.push(this.resources[e]),s.progressChunk=h,a=0;a<o.length;++a)o[a].progressChunk=h;this.resources[e].progressChunk=h}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var i=this.resources[e];i._onLoadBinding&&i._onLoadBinding.detach(),i.isLoading&&i.abort("loader reset")}return this.resources={},this},e.prototype.load=function(e){if(e2("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var i=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(e){var i,r=aC(e,{strictMode:!0});if(i=r.protocol||!r.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var n=aN.exec(i)[0];-1!==(i=i.slice(0,i.length-n.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},e.prototype._loadResource=function(e,i){var r=this;e._dequeue=i,ak.eachSeries(this._beforeMiddleware,function(i,n){i.call(r,e,function(){n(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var i=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),ak.eachSeries(this._afterMiddleware,function(r,n){r.call(i,e,n)},function(){e.onAfterMiddleware.dispatch(e),i.progress=Math.min(100,i.progress+e.progressChunk),i.onProgress.dispatch(i,e),e.error?i.onError.dispatch(e.error,i,e):i.onLoad.dispatch(i,e),i._resourcesParsing.splice(i._resourcesParsing.indexOf(e),1),i._queue.idle()&&0===i._resourcesParsing.length&&i._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var i=e._shared;return i||((i=new e)._protected=!0,e._shared=i),i},enumerable:!1,configurable:!0}),e.registerPlugin=function(i){return e2("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),iI.add({type:iT.Loader,ref:i}),e},e._plugins=[],e}();iI.handleByList(iT.Loader,aU._plugins),aU.prototype.add=function(e,i,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if("object"==typeof e&&(r=e,n=i||r.callback||r.onComplete,i=r.url,e=r.name||r.key||r.url),"string"!=typeof i&&(n=r,r=i,i=e),"string"!=typeof i)throw Error("No url passed to add resource to loader.");return"function"==typeof r&&(n=r,r=null),this._add(e,i,r,n)};var aG=function(){function e(){}return e.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?aU.shared:new aU},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.extension=iT.Application,e}(),aX=function(){function e(){}return e.add=function(){aL.setExtensionLoadType("svg",aL.LOAD_TYPE.XHR),aL.setExtensionXhrType("svg",aL.XHR_RESPONSE_TYPE.TEXT)},e.use=function(e,i){if(e.data&&(e.type===aL.TYPE.IMAGE||"svg"===e.extension)){var r=e.data,n=e.url,s=e.name,o=e.metadata;i3.fromLoader(r,n,s,o).then(function(r){e.texture=r,i()}).catch(i)}else i()},e.extension=iT.Loader,e}();function aV(e,i){if(e.data){if(e.xhr&&e.xhrType===aL.XHR_RESPONSE_TYPE.BLOB){if(self.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var r=globalThis.URL||globalThis.webkitURL,n=r.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=n,e.type=aL.TYPE.IMAGE,void(e.data.onload=function(){r.revokeObjectURL(n),e.data.onload=null,i()})}}else{var s=e.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return e.data=new Image,e.data.src="data:"+s+";base64,"+function(e){for(var i="",r=0;r<e.length;){for(var n=[0,0,0],s=[0,0,0,0],o=0;o<n.length;++o)r<e.length?n[o]=255&e.charCodeAt(r++):n[o]=0;switch(s[0]=n[0]>>2,s[1]=(3&n[0])<<4|n[1]>>4,s[2]=(15&n[1])<<2|n[2]>>6,s[3]=63&n[2],r-(e.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(o=0;o<s.length;++o)i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s[o])}return i}(e.xhr.responseText),e.type=aL.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,i()})}}i()}else i()}var aH,aj,aY,az,aW,aq,aZ,aQ=function(){function e(){}return e.extension=iT.Loader,e.use=aV,e}();iI.add(aX,aQ),(a2=aZ||(aZ={}))[a2.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a2[a2.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a2[a2.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a2[a2.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a2[a2.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",a2[a2.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",a2[a2.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",a2[a2.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",a2[a2.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a2[a2.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a2[a2.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a2[a2.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a2[a2.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a2[a2.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",a2[a2.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",a2[a2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a2[a2.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a2[a2.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a2[a2.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a2[a2.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a2[a2.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a2[a2.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a2[a2.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a2[a2.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a2[a2.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a2[a2.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a2[a2.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR";var aJ=((aq={})[aZ.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,aq[aZ.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,aq[aZ.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,aq[aZ.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,aq[aZ.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,aq[aZ.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,aq[aZ.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,aq[aZ.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,aq[aZ.COMPRESSED_R11_EAC]=.5,aq[aZ.COMPRESSED_SIGNED_R11_EAC]=.5,aq[aZ.COMPRESSED_RG11_EAC]=1,aq[aZ.COMPRESSED_SIGNED_RG11_EAC]=1,aq[aZ.COMPRESSED_RGB8_ETC2]=.5,aq[aZ.COMPRESSED_RGBA8_ETC2_EAC]=1,aq[aZ.COMPRESSED_SRGB8_ETC2]=.5,aq[aZ.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,aq[aZ.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,aq[aZ.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,aq[aZ.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,aq[aZ.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,aq[aZ.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,aq[aZ.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,aq[aZ.COMPRESSED_RGB_ETC1_WEBGL]=.5,aq[aZ.COMPRESSED_RGB_ATC_WEBGL]=.5,aq[aZ.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,aq[aZ.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,aq[aZ.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,aq),aK=function(e,i){return(aK=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function a0(e,i){function r(){this.constructor=e}aK(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var a2,a1,a4,a3=function(e){function i(r,n){var s=e.call(this,r,n)||this;return s.format=n.format,s.levels=n.levels||1,s._width=n.width,s._height=n.height,s._extension=i._formatToExtension(s.format),(n.levelBuffers||s.buffer)&&(s._levelBuffers=n.levelBuffers||i._createLevelBuffers(r instanceof Uint8Array?r:s.buffer.uint8View,s.format,s.levels,4,4,s.width,s.height)),s}return a0(i,e),i.prototype.upload=function(e,i,r){var n=e.gl;if(!e.context.extensions[this._extension])throw Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,o=this.levels;s<o;s++){var a=this._levelBuffers[s],h=a.levelID,l=a.levelWidth,u=a.levelHeight,c=a.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,h,this.format,l,u,0,c)}return!0},i.prototype.onBlobLoaded=function(){this._levelBuffers=i._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},i._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw Error("Invalid (compressed) texture format given!")},i._createLevelBuffers=function(e,i,r,n,s,o,a){for(var h=Array(r),l=e.byteOffset,u=o,c=a,d=u+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*aJ[i],_=0;_<r;_++)h[_]={levelID:_,levelWidth:r>1?u:d,levelHeight:r>1?c:f,levelBuffer:new Uint8Array(e.buffer,l,p)},l+=p,p=(d=(u=u>>1||1)+n-1&~(n-1))*(f=(c=c>>1||1)+s-1&~(s-1))*aJ[i];return h},i}(function(e){function i(i,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var n,s,o=this;return"string"==typeof i?(n=i,s=new Uint8Array):(n=null,s=i),(o=e.call(this,s,r)||this).origin=n,o.buffer=s?new nf(s):null,o.origin&&!1!==r.autoLoad&&o.load(),s&&s.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return a0(i,e),i.prototype.onBlobLoaded=function(e){},i.prototype.load=function(){var e,i,r;return e=this,i=Promise,r=function(){var e;return function(e,i){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function h(o){return function(h){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=i.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}(this,function(i){switch(i.label){case 0:return[4,fetch(this.origin)];case 1:return[4,i.sent().blob()];case 2:return[4,i.sent().arrayBuffer()];case 3:return e=i.sent(),this.data=new Uint32Array(e),this.buffer=new nf(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),[2,this]}})},new(i||(i=Promise))(function(n,s){function o(e){try{h(r.next(e))}catch(e){s(e)}}function a(e){try{h(r.throw(e))}catch(e){s(e)}}function h(e){var r;e.done?n(e.value):((r=e.value)instanceof i?r:new i(function(e){e(r)})).then(o,a)}h((r=r.apply(e,[])).next())})},i}(iU)),a6=function(){function e(){}return e.use=function(i,r){var n=i.data;if(i.type===aL.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var s=n.textures,o=void 0,a=void 0,h=0,l=s.length;h<l;h++){var u=s[h],c=u.src,d=u.format;if(d||(a=c),e.textureFormats[d]){o=c;break}}if(!(o=o||a))return void r(Error("Cannot load compressed-textures in "+i.url+", make sure you provide a fallback"));if(o===i.url)return void r(Error("URL of compressed texture cannot be the same as the manifest's URL"));var f={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},p=tG.resolve(i.url.replace(this.baseUrl,""),o),_=n.cacheID;this.add(_,p,f,function(e){if(e.error)r(e.error);else{var n=e.texture,s=e.textures;Object.assign(i,{texture:void 0===n?null:n,textures:void 0===s?{}:s}),r()}})}else r()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var i=G.ADAPTER.createCanvas().getContext("webgl");if(!i)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:i.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:i.getExtension("WEBGL_compressed_texture_etc"),etc1:i.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:i.getExtension("WEBGL_compressed_texture_atc"),astc:i.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=r}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var i=e.textureExtensions;for(var r in e._textureFormats={},i){var n=i[r];n&&Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e.extension=iT.Loader,e}();function a8(e,i,r){var n={textures:{},texture:null};return i&&i.map(function(e){return new i3(new iX(e,Object.assign({mipmap:eI.OFF,alphaMode:eC.NO_PREMULTIPLIED_ALPHA},r)))}).forEach(function(i,r){var s=i.baseTexture,o=e+"-"+(r+1);iX.addToCache(s,o),i3.addToCache(i,o),0===r&&(iX.addToCache(s,e),i3.addToCache(i,e),n.texture=i),n.textures[o]=i}),n}(a9=a5||(a5={}))[a9.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",a9[a9.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",a9[a9.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",a9[a9.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",a9[a9.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",a9[a9.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",a9[a9.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",a9[a9.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",a9[a9.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",a9[a9.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",a9[a9.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",a9[a9.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",a9[a9.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",a9[a9.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",a9[a9.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",a9[a9.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",a9[a9.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",a9[a9.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",a9[a9.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",a9[a9.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",a9[a9.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",a9[a9.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",a9[a9.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",a9[a9.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",a9[a9.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",a9[a9.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",a9[a9.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",a9[a9.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",a9[a9.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",a9[a9.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",a9[a9.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",a9[a9.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",a9[a9.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",a9[a9.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",a9[a9.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",a9[a9.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",a9[a9.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",a9[a9.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",a9[a9.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",a9[a9.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",a9[a9.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",a9[a9.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",a9[a9.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",a9[a9.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",a9[a9.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",a9[a9.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",a9[a9.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",a9[a9.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",a9[a9.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",a9[a9.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",a9[a9.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",a9[a9.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",a9[a9.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",a9[a9.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",a9[a9.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",a9[a9.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",a9[a9.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",a9[a9.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",a9[a9.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",a9[a9.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",a9[a9.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",a9[a9.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",a9[a9.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",a9[a9.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",a9[a9.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",a9[a9.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",a9[a9.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",a9[a9.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",a9[a9.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",a9[a9.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",a9[a9.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",a9[a9.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",a9[a9.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",a9[a9.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",a9[a9.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",a9[a9.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",a9[a9.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",a9[a9.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",a9[a9.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",a9[a9.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",a9[a9.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",a9[a9.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",a9[a9.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",a9[a9.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",a9[a9.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",a9[a9.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",a9[a9.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",a9[a9.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",a9[a9.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",a9[a9.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",a9[a9.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",a9[a9.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",a9[a9.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",a9[a9.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",a9[a9.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",a9[a9.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",a9[a9.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",a9[a9.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",a9[a9.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",a9[a9.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",a9[a9.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",a9[a9.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",a9[a9.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",a9[a9.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",a9[a9.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",a9[a9.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",a9[a9.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",a9[a9.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",a9[a9.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",a9[a9.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",a9[a9.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",a9[a9.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",a9[a9.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",a9[a9.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",a9[a9.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",a9[a9.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",a9[a9.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",a9[a9.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",a9[a9.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",a9[a9.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",a9[a9.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",a9[a9.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",(ht=a7||(a7={}))[ht.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",ht[ht.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",ht[ht.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D";var a5,a7,a9,ht,he,hi,hr,hn=((a1={})[827611204]=aZ.COMPRESSED_RGBA_S3TC_DXT1_EXT,a1[861165636]=aZ.COMPRESSED_RGBA_S3TC_DXT3_EXT,a1[894720068]=aZ.COMPRESSED_RGBA_S3TC_DXT5_EXT,a1),hs=((a4={})[a5.DXGI_FORMAT_BC1_TYPELESS]=aZ.COMPRESSED_RGBA_S3TC_DXT1_EXT,a4[a5.DXGI_FORMAT_BC1_UNORM]=aZ.COMPRESSED_RGBA_S3TC_DXT1_EXT,a4[a5.DXGI_FORMAT_BC2_TYPELESS]=aZ.COMPRESSED_RGBA_S3TC_DXT3_EXT,a4[a5.DXGI_FORMAT_BC2_UNORM]=aZ.COMPRESSED_RGBA_S3TC_DXT3_EXT,a4[a5.DXGI_FORMAT_BC3_TYPELESS]=aZ.COMPRESSED_RGBA_S3TC_DXT5_EXT,a4[a5.DXGI_FORMAT_BC3_UNORM]=aZ.COMPRESSED_RGBA_S3TC_DXT5_EXT,a4[a5.DXGI_FORMAT_BC1_UNORM_SRGB]=aZ.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,a4[a5.DXGI_FORMAT_BC2_UNORM_SRGB]=aZ.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,a4[a5.DXGI_FORMAT_BC3_UNORM_SRGB]=aZ.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,a4),ho=[171,75,84,88,32,49,49,187,13,10,26,10],ha=((he={})[ew.UNSIGNED_BYTE]=1,he[ew.UNSIGNED_SHORT]=2,he[ew.INT]=4,he[ew.UNSIGNED_INT]=4,he[ew.FLOAT]=4,he[ew.HALF_FLOAT]=8,he),hh=((hi={})[eA.RGBA]=4,hi[eA.RGB]=3,hi[eA.RG]=2,hi[eA.RED]=1,hi[eA.LUMINANCE]=1,hi[eA.LUMINANCE_ALPHA]=2,hi[eA.ALPHA]=1,hi),hl=((hr={})[ew.UNSIGNED_SHORT_4_4_4_4]=2,hr[ew.UNSIGNED_SHORT_5_5_5_1]=2,hr[ew.UNSIGNED_SHORT_5_6_5]=2,hr);aL.setExtensionXhrType("dds",aL.XHR_RESPONSE_TYPE.BUFFER);var hu=function(){function e(){}return e.use=function(e,i){if("dds"===e.extension&&e.data)try{Object.assign(e,a8(e.name||e.url,function(e){var i=new Uint32Array(e);if(542327876!==i[0])throw Error("Invalid DDS file magic word");var r=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),n=r[3],s=r[4],o=r[7],a=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),h=a[1];if(4&h){var l=a[2];if(808540228!==l){var u=hn[l],c=new Uint8Array(e,128);return[new a3(c,{format:u,width:s,height:n,levels:o})]}var d=new Uint32Array(i.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),f=d[0],p=d[1],_=d[2],g=d[3],v=hs[f];if(void 0===v)throw Error("DDSParser cannot parse texture data with DXGI format "+f);if(4===_)throw Error("DDSParser does not support cubemap textures");if(p===a7.DDS_DIMENSION_TEXTURE3D)throw Error("DDSParser does not supported 3D texture data");var y=[];if(1===g)y.push(new Uint8Array(e,148));else{for(var b=aJ[v],x=0,T=s,A=n,E=0;E<o;E++)x+=Math.max(1,T+3&-4)*Math.max(1,A+3&-4)*b,T>>>=1,A>>>=1;var w=148;for(E=0;E<g;E++)y.push(new Uint8Array(e,w,x)),w+=x}return y.map(function(e){return new a3(e,{format:v,width:s,height:n,levels:o})})}if(64&h)throw Error("DDSParser does not support uncompressed texture data.");if(512&h)throw Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&h)throw Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&h)throw Error("DDSParser does not support single-channel (alpha) texture data!");throw Error("DDSParser failed to load a texture file due to an unknown reason!")}(e.data),e.metadata))}catch(e){return void i(e)}i()},e.extension=iT.Loader,e}();aL.setExtensionXhrType("ktx",aL.XHR_RESPONSE_TYPE.BUFFER);var hc=function(){function e(){}return e.use=function(e,i){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url,n=function(e,i,r){void 0===r&&(r=!1);var n=new DataView(i);if(!function(e,i){for(var r=0;r<ho.length;r++)if(i.getUint8(r)!==ho[r])return console.error(e+" is not a valid *.ktx file!"),!1;return!0}(e,n))return null;var s=67305985===n.getUint32(12,!0),o=n.getUint32(16,s),a=n.getUint32(24,s),h=n.getUint32(28,s),l=n.getUint32(36,s),u=n.getUint32(40,s)||1,c=n.getUint32(44,s)||1,d=n.getUint32(48,s)||1,f=n.getUint32(52,s),p=n.getUint32(56,s),_=n.getUint32(60,s);if(0===u||1!==c)throw Error("Only 2D textures are supported");if(1!==f)throw Error("CubeTextures are not supported by KTXLoader yet!");if(1!==d)throw Error("WebGL does not support array textures");var g,v=l+3&-4,y=u+3&-4,b=Array(d),x=l*u;if(0===o&&(x=v*y),void 0===(g=0!==o?ha[o]?ha[o]*hh[a]:hl[o]:aJ[h]))throw Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var T=r?function(e,i,r){for(var n=new Map,s=0;s<i;){var o=e.getUint32(64+s,r),a=64+s+4,h=3-(o+3)%4;if(0===o||o>i-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&0!==e.getUint8(a+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=(new TextDecoder).decode(new Uint8Array(e.buffer,a,l)),c=new DataView(e.buffer,a+l+1,o-l-1);n.set(u,c),s+=4+o+h}return n}(n,_,s):null,A=x*g,E=l,w=u,S=v,P=y,M=64+_,I=0;I<p;I++){for(var C=n.getUint32(M,s),R=M+4,O=0;O<d;O++){var D=b[O];D||(D=b[O]=Array(p)),D[I]={levelID:I,levelWidth:p>1||0!==o?E:S,levelHeight:p>1||0!==o?w:P,levelBuffer:new Uint8Array(i,R,A)},R+=A}M=(M+=C+4)%4!=0?M+4-M%4:M,A=(S=(E=E>>1||1)+4-1&-4)*(P=(w=w>>1||1)+4-1&-4)*g}return 0!==o?{uncompressed:b.map(function(e){var i=e[0].levelBuffer,r=!1;return o===ew.FLOAT?i=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===ew.UNSIGNED_INT?(r=!0,i=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===ew.INT&&(r=!0,i=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new iU(i,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:r?function(e){switch(e){case eA.RGBA:return eA.RGBA_INTEGER;case eA.RGB:return eA.RGB_INTEGER;case eA.RG:return eA.RG_INTEGER;case eA.RED:return eA.RED_INTEGER;default:return e}}(a):a}}),kvData:T}:{compressed:b.map(function(e){return new a3(null,{format:h,width:l,height:u,levels:p,levelBuffers:e})}),kvData:T}}(r,e.data,this.loadKeyValueData),s=n.compressed,o=n.uncompressed,a=n.kvData;if(s){var h=a8(r,s,e.metadata);if(a&&h.textures)for(var l in h.textures)h.textures[l].baseTexture.ktxKeyValueData=a;Object.assign(e,h)}else if(o){var u={};o.forEach(function(e,i){var n=new i3(new iX(e.resource,{mipmap:eI.OFF,alphaMode:eC.NO_PREMULTIPLIED_ALPHA,type:e.type,format:e.format})),s=r+"-"+(i+1);a&&(n.baseTexture.ktxKeyValueData=a),iX.addToCache(n.baseTexture,s),i3.addToCache(n,s),0===i&&(u[r]=n,iX.addToCache(n.baseTexture,r),i3.addToCache(n,r)),u[s]=n}),Object.assign(e,{textures:u})}}catch(e){return void i(e)}i()},e.extension=iT.Loader,e.loadKeyValueData=!1,e}(),hd=function(e,i){return(hd=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function hf(e,i){function r(){this.constructor=e}hd(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}!function(e){function i(i,r,n,s){void 0===i&&(i=1500),void 0===n&&(n=16384),void 0===s&&(s=!1);var o=e.call(this)||this;return n>16384&&(n=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=i,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=ex.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(r),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}hf(i,e),i.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},i.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,eX(e,this.tintRgb)},enumerable:!1,configurable:!0}),i.prototype.render=function(e){var i=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},i.prototype.onChildrenChange=function(e){for(var i=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},i.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},i.prototype.destroy=function(i){e.prototype.destroy.call(this,i),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(nS);var hp,h_,hm=function(){function e(e,i,r){this.geometry=new rn,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var s=e[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ew.FLOAT,offset:s.offset},i[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,i=0;this.indexBuffer=new i9(function(e,i){void 0===i&&(i=null);var r=6*e;if((i=i||new Uint16Array(r)).length!==r)throw Error("Out buffer length is incorrect, got "+i.length+" and expected "+r);for(var n=0,s=0;n<r;n+=6,s+=4)i[n+0]=s+0,i[n+1]=s+1,i[n+2]=s+2,i[n+3]=s+0,i[n+4]=s+2,i[n+5]=s+3;return i}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r)(a=this.dynamicProperties[r]).offset=i,i+=a.size,this.dynamicStride+=a.size;var n=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new i9(this.dynamicData,!1,!1);var s=0;for(r=0,this.staticStride=0;r<this.staticProperties.length;++r)(a=this.staticProperties[r]).offset=s,s+=a.size,this.staticStride+=a.size;var o=new ArrayBuffer(this.size*this.staticStride*16);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new i9(this.staticData,!0,!1),r=0;r<this.dynamicProperties.length;++r){var a=this.dynamicProperties[r];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ew.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(r=0;r<this.staticProperties.length;++r)a=this.staticProperties[r],e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ew.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)},e.prototype.uploadDynamic=function(e,i,r){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(e,i,r,s.type===ew.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,i,r){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(e,i,r,s.type===ew.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),hg=function(e){function i(i){var r=e.call(this,i)||this;return r.shader=null,r.properties=null,r.tempMatrix=new ic,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ew.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=rX.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=rV.for2d(),r}return hf(i,e),i.prototype.render=function(e){var i=e.children,r=e._maxSize,n=e._batchSize,s=this.renderer,o=i.length;if(0!==o){o>r&&!e.autoResize&&(o=r);var a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));var h=i[0]._texture.baseTexture,l=h.alphaMode>0;this.state.blendMode=(u=e.blendMode,ej[l?1:0][u]),s.state.set(this.state);var u,c,d,f,p=s.gl,_=e.worldTransform.copyTo(this.tempMatrix);_.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=_.toArray(!0),this.shader.uniforms.uColor=(c=e.tintRgb,d=e.worldAlpha,f=(f=this.shader.uniforms.uColor)||new Float32Array(4),l||void 0===l?(f[0]=c[0]*d,f[1]=c[1]*d,f[2]=c[2]*d):(f[0]=c[0],f[1]=c[1],f[2]=c[2]),f[3]=d,f),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var g=!1,v=0,y=0;v<o;v+=n,y+=1){var b=o-v;b>n&&(b=n),y>=a.length&&a.push(this._generateOneMoreBuffer(e));var x=a[y];x.uploadDynamic(i,v,b);var T=e._bufferUpdateIDs[y]||0;(g=g||x._updateID<T)&&(x._updateID=e._updateID,x.uploadStatic(i,v,b)),s.geometry.bind(x.geometry),p.drawElements(p.TRIANGLES,6*b,p.UNSIGNED_SHORT,0)}}},i.prototype.generateBuffers=function(e){for(var i=[],r=e._maxSize,n=e._batchSize,s=e._properties,o=0;o<r;o+=n)i.push(new hm(this.properties,s,n));return i},i.prototype._generateOneMoreBuffer=function(e){var i=e._batchSize,r=e._properties;return new hm(this.properties,r,i)},i.prototype.uploadVertices=function(e,i,r,n,s,o){for(var a=0,h=0,l=0,u=0,c=0;c<r;++c){var d=e[i+c],f=d._texture,p=d.scale.x,_=d.scale.y,g=f.trim,v=f.orig;g?(a=(h=g.x-d.anchor.x*v.width)+g.width,l=(u=g.y-d.anchor.y*v.height)+g.height):(a=v.width*(1-d.anchor.x),h=-(v.width*d.anchor.x),l=v.height*(1-d.anchor.y),u=-(v.height*d.anchor.y)),n[o]=h*p,n[o+1]=u*_,n[o+s]=a*p,n[o+s+1]=u*_,n[o+2*s]=a*p,n[o+2*s+1]=l*_,n[o+3*s]=h*p,n[o+3*s+1]=l*_,o+=4*s}},i.prototype.uploadPosition=function(e,i,r,n,s,o){for(var a=0;a<r;a++){var h=e[i+a].position;n[o]=h.x,n[o+1]=h.y,n[o+s]=h.x,n[o+s+1]=h.y,n[o+2*s]=h.x,n[o+2*s+1]=h.y,n[o+3*s]=h.x,n[o+3*s+1]=h.y,o+=4*s}},i.prototype.uploadRotation=function(e,i,r,n,s,o){for(var a=0;a<r;a++){var h=e[i+a].rotation;n[o]=h,n[o+s]=h,n[o+2*s]=h,n[o+3*s]=h,o+=4*s}},i.prototype.uploadUvs=function(e,i,r,n,s,o){for(var a=0;a<r;++a){var h=e[i+a]._texture._uvs;h?(n[o]=h.x0,n[o+1]=h.y0,n[o+s]=h.x1,n[o+s+1]=h.y1,n[o+2*s]=h.x2,n[o+2*s+1]=h.y2,n[o+3*s]=h.x3,n[o+3*s+1]=h.y3):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+2*s]=0,n[o+2*s+1]=0,n[o+3*s]=0,n[o+3*s+1]=0),o+=4*s}},i.prototype.uploadTint=function(e,i,r,n,s,o){for(var a=0;a<r;++a){var h=e[i+a],l=h._texture.baseTexture.alphaMode>0,u=h.alpha,c=u<1&&l?eY(h._tintRGB,u):h._tintRGB+(255*u<<24);n[o]=c,n[o+s]=c,n[o+2*s]=c,n[o+3*s]=c,o+=4*s}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},i.extension={name:"particle",type:iT.RendererPlugin},i}(rf);(hI=hp||(hp={})).MITER="miter",hI.BEVEL="bevel",hI.ROUND="round",(hC=h_||(h_={})).BUTT="butt",hC.ROUND="round",hC.SQUARE="square";var hv={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,i){if(void 0===i&&(i=20),!this.adaptive||!e||isNaN(e))return i;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},hy=function(){function e(){this.color=16777215,this.alpha=1,this.texture=i3.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var i=new e;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=i3.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),hb=function(e,i){return(hb=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};function hx(e,i){function r(){this.constructor=e}hb(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}function hT(e,i){void 0===i&&(i=!1);var r,n,s=e.length;if(!(s<6)){for(var o=0,a=0,h=e[s-2],l=e[s-1];a<s;a+=2){var u=e[a],c=e[a+1];o+=(u-h)*(c+l),h=u,l=c}if(!i&&o>0||i&&o<=0){var d=s/2;for(a=d+d%2;a<s;a+=2){var f=s-a-2,p=s-a-1,_=a,g=a+1;r=[e[_],e[f]],e[f]=r[0],e[_]=r[1],n=[e[g],e[p]],e[p]=n[0],e[g]=n[1]}}}}var hA={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,i){var r=e.points,n=e.holes,s=i.points,o=i.indices;if(r.length>=6){hT(r,!1);for(var a=[],h=0;h<n.length;h++){var l=n[h];hT(l.points,!0),a.push(r.length/2),r=r.concat(l.points)}var u=tl(r,a,2);if(!u)return;var c=s.length/2;for(h=0;h<u.length;h+=3)o.push(u[h]+c),o.push(u[h+1]+c),o.push(u[h+2]+c);for(h=0;h<r.length;h++)s.push(r[h])}}},hE={build:function(e){var i,r,n,s,o,a,h=e.points;if(e.type===e7.CIRC){var l=e.shape;i=l.x,r=l.y,o=a=l.radius,n=s=0}else if(e.type===e7.ELIP){var u=e.shape;i=u.x,r=u.y,o=u.width,a=u.height,n=s=0}else{var c=e.shape,d=c.width/2,f=c.height/2;i=c.x+d,r=c.y+f,n=d-(o=a=Math.max(0,Math.min(c.radius,Math.min(d,f)))),s=f-a}if(o>=0&&a>=0&&n>=0&&s>=0){var p=Math.ceil(2.3*Math.sqrt(o+a)),_=8*p+(n?4:0)+(s?4:0);if(h.length=_,0!==_){if(0===p)return h.length=8,h[0]=h[6]=i+n,h[1]=h[3]=r+s,h[2]=h[4]=i-n,void(h[5]=h[7]=r-s);var g,v,y=0,b=4*p+(n?2:0)+2,x=b,T=_,A=i+(g=n+o),E=i-g,w=r+(v=s);if(h[y++]=A,h[y++]=w,h[--b]=w,h[--b]=E,s){var S=r-v;h[x++]=E,h[x++]=S,h[--T]=S,h[--T]=A}for(var P=1;P<p;P++){var M=Math.PI/2*(P/p);A=i+(g=n+Math.cos(M)*o),E=i-g,w=r+(v=s+Math.sin(M)*a),S=r-v,h[y++]=A,h[y++]=w,h[--b]=w,h[--b]=E,h[x++]=E,h[x++]=S,h[--T]=S,h[--T]=A}A=i+(g=n),E=i-g,w=r+(v=s+a),S=r-v,h[y++]=A,h[y++]=w,h[--T]=S,h[--T]=A,n&&(h[y++]=E,h[y++]=w,h[--T]=S,h[--T]=E)}}else h.length=0},triangulate:function(e,i){var r=e.points,n=i.points,s=i.indices;if(0!==r.length){var o,a,h=n.length/2,l=h;if(e.type!==e7.RREC){var u=e.shape;o=u.x,a=u.y}else{var c=e.shape;o=c.x+c.width/2,a=c.y+c.height/2}var d=e.matrix;n.push(e.matrix?d.a*o+d.c*a+d.tx:o,e.matrix?d.b*o+d.d*a+d.ty:a),h++,n.push(r[0],r[1]);for(var f=2;f<r.length;f+=2)n.push(r[f],r[f+1]),s.push(h++,l,h);s.push(l+1,l,h)}}};function hw(e,i,r,n,s,o,a){void 0===a&&(a=[]);for(var h,l,u=a,c=0,d=0,f=0,p=0,_=0,g=0,v=0,y=0;v<=20;++v)c=e+(r-e)*(y=v/20),d=i+(n-i)*y,f=r+(s-r)*y,p=n+(o-n)*y,_=(h=c)+(f-h)*y,g=(l=d)+(p-l)*y,0===v&&u[u.length-2]===_&&u[u.length-1]===g||u.push(_,g);return u}function hS(e,i,r,n,s,o,a,h){a?(l=n,u=-r):(l=-n,u=r);var l,u,c=e-r*s+l,d=i-n*s+u,f=e+r*o+l,p=i+n*o+u;return h.push(c,d),h.push(f,p),2}function hP(e,i,r,n,s,o,a,h){var l=r-e,u=n-i,c=Math.atan2(l,u),d=Math.atan2(s-e,o-i);h&&c<d?c+=2*Math.PI:!h&&c>d&&(d+=2*Math.PI);var f=c,p=d-c,_=Math.sqrt(l*l+u*u),g=1+(15*Math.abs(p)*Math.sqrt(_)/Math.PI|0),v=p/g;if(f+=v,h){a.push(e,i),a.push(r,n);for(var y=1,b=f;y<g;y++,b+=v)a.push(e,i),a.push(e+Math.sin(b)*_,i+Math.cos(b)*_);a.push(e,i),a.push(s,o)}else{for(a.push(r,n),a.push(e,i),y=1,b=f;y<g;y++,b+=v)a.push(e+Math.sin(b)*_,i+Math.cos(b)*_),a.push(e,i);a.push(s,o),a.push(e,i)}return 2*g}function hM(e,i){e.lineStyle.native?function(e,i){var r=0,n=e.shape,s=e.points||n.points,o=n.type!==e7.POLY||n.closeStroke;if(0!==s.length){var a=i.points,h=i.indices,l=s.length/2,u=a.length/2,c=u;for(a.push(s[0],s[1]),r=1;r<l;r++)a.push(s[2*r],s[2*r+1]),h.push(c,c+1),c++;o&&h.push(c,u)}}(e,i):function(e,i){var r=e.shape,n=e.points||r.points.slice(),s=i.closePointEps;if(0!==n.length){var o=e.lineStyle,a=new ii(n[0],n[1]),h=new ii(n[n.length-2],n[n.length-1]),l=r.type!==e7.POLY||r.closeStroke,u=Math.abs(a.x-h.x)<s&&Math.abs(a.y-h.y)<s;if(l){n=n.slice(),u&&(n.pop(),n.pop(),h.set(n[n.length-2],n[n.length-1]));var c=.5*(a.x+h.x),d=.5*(h.y+a.y);n.unshift(c,d),n.push(c,d)}var f=i.points,p=n.length/2,_=n.length,g=f.length/2,v=o.width/2,y=v*v,b=o.miterLimit*o.miterLimit,x=n[0],T=n[1],A=n[2],E=n[3],w=0,S=0,P=-(T-E),M=x-A,I=0,C=0,R=Math.sqrt(P*P+M*M);P/=R,M/=R,P*=v,M*=v;var O=o.alignment,D=2*(1-O),$=2*O;l||(o.cap===h_.ROUND?_+=hP(x-P*(D-$)*.5,T-M*(D-$)*.5,x-P*D,T-M*D,x+P*$,T+M*$,f,!0)+2:o.cap===h_.SQUARE&&(_+=hS(x,T,P,M,D,$,!0,f))),f.push(x-P*D,T-M*D),f.push(x+P*$,T+M*$);for(var L=1;L<p-1;++L){x=n[2*(L-1)],T=n[2*(L-1)+1],A=n[2*L],E=n[2*L+1],w=n[2*(L+1)],S=n[2*(L+1)+1],P=-(T-E),M=x-A,P/=R=Math.sqrt(P*P+M*M),M/=R,P*=v,M*=v,I=-(E-S),C=A-w,I/=R=Math.sqrt(I*I+C*C),C/=R,I*=v,C*=v;var F=A-x,B=T-E,k=A-w,N=S-E,U=F*k+B*N,G=B*k-N*F,X=G<0;if(Math.abs(G)<.001*Math.abs(U))f.push(A-P*D,E-M*D),f.push(A+P*$,E+M*$),U>=0&&(o.join===hp.ROUND?_+=hP(A,E,A-P*D,E-M*D,A-I*D,E-C*D,f,!1)+4:_+=2,f.push(A-I*$,E-C*$),f.push(A+I*D,E+C*D));else{var V=(-P+x)*(-M+E)-(-P+A)*(-M+T),H=(-I+w)*(-C+E)-(-I+A)*(-C+S),j=(F*H-k*V)/G,Y=(N*V-B*H)/G,z=(j-A)*(j-A)+(Y-E)*(Y-E),W=A+(j-A)*D,q=E+(Y-E)*D,Z=A-(j-A)*$,Q=E-(Y-E)*$,J=X?D:$;z<=Math.min(F*F+B*B,k*k+N*N)+J*J*y?o.join===hp.BEVEL||z/y>b?(X?(f.push(W,q),f.push(A+P*$,E+M*$),f.push(W,q),f.push(A+I*$,E+C*$)):(f.push(A-P*D,E-M*D),f.push(Z,Q),f.push(A-I*D,E-C*D),f.push(Z,Q)),_+=2):o.join===hp.ROUND?X?(f.push(W,q),f.push(A+P*$,E+M*$),_+=hP(A,E,A+P*$,E+M*$,A+I*$,E+C*$,f,!0)+4,f.push(W,q),f.push(A+I*$,E+C*$)):(f.push(A-P*D,E-M*D),f.push(Z,Q),_+=hP(A,E,A-P*D,E-M*D,A-I*D,E-C*D,f,!1)+4,f.push(A-I*D,E-C*D),f.push(Z,Q)):(f.push(W,q),f.push(Z,Q)):(f.push(A-P*D,E-M*D),f.push(A+P*$,E+M*$),o.join===hp.ROUND?_+=X?hP(A,E,A+P*$,E+M*$,A+I*$,E+C*$,f,!0)+2:hP(A,E,A-P*D,E-M*D,A-I*D,E-C*D,f,!1)+2:o.join===hp.MITER&&z/y<=b&&(X?(f.push(Z,Q),f.push(Z,Q)):(f.push(W,q),f.push(W,q)),_+=2),f.push(A-I*D,E-C*D),f.push(A+I*$,E+C*$),_+=2)}}x=n[2*(p-2)],T=n[2*(p-2)+1],A=n[2*(p-1)],P=-(T-(E=n[2*(p-1)+1])),M=x-A,P/=R=Math.sqrt(P*P+M*M),M/=R,P*=v,M*=v,f.push(A-P*D,E-M*D),f.push(A+P*$,E+M*$),l||(o.cap===h_.ROUND?_+=hP(A-P*(D-$)*.5,E-M*(D-$)*.5,A-P*D,E-M*D,A+P*$,E+M*$,f,!1)+2:o.cap===h_.SQUARE&&(_+=hS(A,E,P,M,D,$,!1,f)));var K=i.indices,tt=hv.epsilon*hv.epsilon;for(L=g;L<_+g-2;++L)x=f[2*L],T=f[2*L+1],A=f[2*(L+1)],E=f[2*(L+1)+1],w=f[2*(L+2)],Math.abs(x*(E-(S=f[2*(L+2)+1]))+A*(S-T)+w*(T-E))<tt||K.push(L,L+1,L+2)}}(e,i)}var hI,hC,hR,hO,hD=function(){function e(){}return e.curveTo=function(e,i,r,n,s,o){var a=o[o.length-2],h=o[o.length-1]-i,l=a-e,u=n-i,c=r-e,d=Math.abs(h*c-l*u);if(d<1e-8||0===s)return o[o.length-2]===e&&o[o.length-1]===i||o.push(e,i),null;var f=h*h+l*l,p=u*u+c*c,_=h*u+l*c,g=s*Math.sqrt(f)/d,v=s*Math.sqrt(p)/d,y=g*_/f,b=v*_/p,x=g*c+v*l,T=g*u+v*h;return{cx:x+e,cy:T+i,radius:s,startAngle:Math.atan2(h*(v+y)-T,l*(v+y)-x),endAngle:Math.atan2(u*(g+b)-T,c*(g+b)-x),anticlockwise:l*u>c*h}},e.arc=function(e,i,r,n,s,o,a,h,l){for(var u=a-o,c=hv._segmentsCount(Math.abs(u)*s,40*Math.ceil(Math.abs(u)/e9)),d=u/(2*c),f=2*d,p=Math.cos(d),_=Math.sin(d),g=c-1,v=g%1/g,y=0;y<=g;++y){var b=d+o+f*(y+v*y),x=Math.cos(b),T=-Math.sin(b);l.push((p*x+_*T)*s+r,(-(p*T)+_*x)*s+n)}},e}(),h$=function(){function e(){}return e.curveLength=function(e,i,r,n,s,o,a,h){for(var l=0,u=0,c=0,d=0,f=0,p=0,_=0,g=0,v=0,y=0,b=0,x=e,T=i,A=1;A<=10;++A)y=x-(g=(_=(p=(f=1-(u=A/10))*f)*f)*e+3*p*u*r+3*f*(c=u*u)*s+(d=c*u)*a),b=T-(v=_*i+3*p*u*n+3*f*c*o+d*h),x=g,T=v,l+=Math.sqrt(y*y+b*b);return l},e.curveTo=function(i,r,n,s,o,a,h){var l=h[h.length-2],u=h[h.length-1];h.length-=2;var c=hv._segmentsCount(e.curveLength(l,u,i,r,n,s,o,a)),d=0,f=0,p=0,_=0,g=0;h.push(l,u);for(var v=1,y=0;v<=c;++v)p=(f=(d=1-(y=v/c))*d)*d,g=(_=y*y)*y,h.push(p*l+3*f*y*i+3*d*_*n+g*o,p*u+3*f*y*r+3*d*_*s+g*a)},e}(),hL=function(){function e(){}return e.curveLength=function(e,i,r,n,s,o){var a=e-2*r+s,h=i-2*n+o,l=2*r-2*e,u=2*n-2*i,c=4*(a*a+h*h),d=4*(a*l+h*u),f=l*l+u*u,p=2*Math.sqrt(c+d+f),_=Math.sqrt(c),g=2*c*_,v=2*Math.sqrt(f),y=d/_;return(g*p+_*d*(p-v)+(4*f*c-d*d)*Math.log((2*_+y+p)/(y+v)))/(4*g)},e.curveTo=function(i,r,n,s,o){for(var a=o[o.length-2],h=o[o.length-1],l=hv._segmentsCount(e.curveLength(a,h,i,r,n,s)),u=0,c=0,d=1;d<=l;++d){var f=d/l;u=a+(i-a)*f,c=h+(r-h)*f,o.push(u+(i+(n-i)*f-u)*f,c+(r+(s-r)*f-c)*f)}},e}(),hF=function(){function e(){this.reset()}return e.prototype.begin=function(e,i,r){this.reset(),this.style=e,this.start=i,this.attribStart=r},e.prototype.end=function(e,i){this.attribSize=i-this.attribStart,this.size=e-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),hB=((hR={})[e7.POLY]=hA,hR[e7.CIRC]=hE,hR[e7.ELIP]=hE,hR[e7.RECT]={build:function(e){var i=e.shape,r=i.x,n=i.y,s=i.width,o=i.height,a=e.points;a.length=0,a.push(r,n,r+s,n,r+s,n+o,r,n+o)},triangulate:function(e,i){var r=e.points,n=i.points,s=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),i.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},hR[e7.RREC]={build:function(e){if(hY.nextRoundedRectBehavior)hE.build(e);else{var i=e.shape,r=e.points,n=i.x,s=i.y,o=i.width,a=i.height,h=Math.max(0,Math.min(i.radius,Math.min(o,a)/2));r.length=0,h?(hw(n,s+h,n,s,n+h,s,r),hw(n+o-h,s,n+o,s,n+o,s+h,r),hw(n+o,s+a-h,n+o,s+a,n+o-h,s+a,r),hw(n+h,s+a,n,s+a,n,s+a-h,r)):r.push(n,s,n+o,s,n+o,s+a,n,s+a)}},triangulate:function(e,i){if(hY.nextRoundedRectBehavior)hE.triangulate(e,i);else{for(var r=e.points,n=i.points,s=i.indices,o=n.length/2,a=tl(r,null,2),h=0,l=a.length;h<l;h+=3)s.push(a[h]+o),s.push(a[h+1]+o),s.push(a[h+2]+o);for(h=0,l=r.length;h<l;h++)n.push(r[h],r[++h])}}},hR),hk=[],hN=[],hU=function(){function e(e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=i,this.matrix=n,this.type=e.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),hG=new ii,hX=function(e){function i(){var i=e.call(this)||this;return i.closePointEps=1e-4,i.boundsPadding=0,i.uvsFloat32=null,i.indicesUint16=null,i.batchable=!1,i.points=[],i.colors=[],i.uvs=[],i.indices=[],i.textureIds=[],i.graphicsData=[],i.drawCalls=[],i.batchDirty=-1,i.batches=[],i.dirty=0,i.cacheDirty=-1,i.clearDirty=0,i.shapeIndex=0,i._bounds=new nb,i.boundsDirty=-1,i}return hx(i,e),Object.defineProperty(i.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),i.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),hN.push(this.drawCalls[e]);for(e=0,this.drawCalls.length=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),hk.push(i)}this.batches.length=0},i.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},i.prototype.drawShape=function(e,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=null);var s=new hU(e,i,r,n);return this.graphicsData.push(s),this.dirty++,this},i.prototype.drawHole=function(e,i){if(void 0===i&&(i=null),!this.graphicsData.length)return null;var r=new hU(e,null,null,i),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},i.prototype.containsPoint=function(e){for(var i=this.graphicsData,r=0;r<i.length;++r){var n=i[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,hG):hG.copyFrom(e),n.shape.contains(hG.x,hG.y))){var s=!1;if(n.holes){for(var o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(hG.x,hG.y)){s=!0;break}}if(!s)return!0}}return!1},i.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,r=null,n=null;this.batches.length>0&&(n=(r=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var o=i[s],a=o.fillStyle,h=o.lineStyle;hB[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(a.visible||h.visible)&&this.processHoles(o.holes);for(var l=0;l<2;l++){var u=0===l?a:h;if(u.visible){var c=u.texture.baseTexture,d=this.indices.length,f=this.points.length/2;c.wrapMode=eM.REPEAT,0===l?this.processFill(o):this.processLine(o);var p=this.points.length/2-f;0!==p&&(r&&!this._compareStyles(n,u)&&(r.end(d,f),r=null),r||((r=hk.pop()||new hF).begin(u,d,f),this.batches.push(r),n=u),this.addUvs(this.points,e,u.texture,f,p,u.matrix))}}}var _=this.indices.length,g=this.points.length/2;if(r&&r.end(_,g),0!==this.batches.length){var v=g>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&v===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},i.prototype._compareStyles=function(e,i){return!(!e||!i)&&e.texture.baseTexture===i.texture.baseTexture&&e.color+e.alpha===i.color+i.alpha&&!!e.native==!!i.native},i.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,i=this.graphicsData.length;e<i;e++){var r=this.graphicsData[e],n=r.fillStyle,s=r.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},i.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,i=0,r=e.length;i<r;i++)for(var n=e[i],s=0;s<n.size;s++){var o=n.start+s;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}},i.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var e=this.batches,r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<2*i.BATCHABLE_SIZE},i.prototype.buildDrawCalls=function(){for(var e=++iX._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),hN.push(this.drawCalls[i]);this.drawCalls.length=0;var r=this.colors,n=this.textureIds,s=hN.pop();s||((s=new nc).texArray=new nd),s.texArray.count=0,s.start=0,s.size=0,s.type=eT.TRIANGLES;var o=0,a=null,h=0,l=!1,u=eT.TRIANGLES,c=0;for(this.drawCalls.push(s),i=0;i<this.batches.length;i++){var d=this.batches[i],f=d.style,p=f.texture.baseTexture;!!f.native!==l&&(u=(l=!!f.native)?eT.LINES:eT.TRIANGLES,a=null,o=8,e++),a!==p&&(a=p,p._batchEnabled!==e&&(8===o&&(e++,o=0,s.size>0&&((s=hN.pop())||((s=new nc).texArray=new nd),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=u),p.touched=1,p._batchEnabled=e,p._batchLocation=o,p.wrapMode=eM.REPEAT,s.texArray.elements[s.texArray.count++]=p,o++)),s.size+=d.size,c+=d.size,h=p._batchLocation,this.addColors(r,f.color,f.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,h,d.attribSize,d.attribStart)}iX._globalBatch=e,this.packAttributes()},i.prototype.packAttributes=function(){for(var e=this.points,i=this.uvs,r=this.colors,n=this.textureIds,s=new ArrayBuffer(3*e.length*4),o=new Float32Array(s),a=new Uint32Array(s),h=0,l=0;l<e.length/2;l++)o[h++]=e[2*l],o[h++]=e[2*l+1],o[h++]=i[2*l],o[h++]=i[2*l+1],a[h++]=r[l],o[h++]=n[l];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},i.prototype.processFill=function(e){e.holes.length?hA.triangulate(e,this):hB[e.type].triangulate(e,this)},i.prototype.processLine=function(e){hM(e,this);for(var i=0;i<e.holes.length;i++)hM(e.holes[i],this)},i.prototype.processHoles=function(e){for(var i=0;i<e.length;i++){var r=e[i];hB[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},i.prototype.calculateBounds=function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)},i.prototype.transformPoints=function(e,i){for(var r=0;r<e.length/2;r++){var n=e[2*r],s=e[2*r+1];e[2*r]=i.a*n+i.c*s+i.tx,e[2*r+1]=i.b*n+i.d*s+i.ty}},i.prototype.addColors=function(e,i,r,n,s){void 0===s&&(s=0);var o=eY((i>>16)+(65280&i)+((255&i)<<16),r);e.length=Math.max(e.length,s+n);for(var a=0;a<n;a++)e[s+a]=o},i.prototype.addTextureIds=function(e,i,r,n){void 0===n&&(n=0),e.length=Math.max(e.length,n+r);for(var s=0;s<r;s++)e[n+s]=i},i.prototype.addUvs=function(e,i,r,n,s,o){void 0===o&&(o=null);for(var a=0,h=i.length,l=r.frame;a<s;){var u=e[2*(n+a)],c=e[2*(n+a)+1];if(o){var d=o.a*u+o.c*c+o.tx;c=o.b*u+o.d*c+o.ty,u=d}a++,i.push(u/l.width,c/l.height)}var f=r.baseTexture;(l.width<f.width||l.height<f.height)&&this.adjustUvs(i,r,h,s)},i.prototype.adjustUvs=function(e,i,r,n){for(var s=i.baseTexture,o=r+2*n,a=i.frame,h=a.width/s.width,l=a.height/s.height,u=a.x/a.width,c=a.y/a.height,d=Math.floor(e[r]+1e-6),f=Math.floor(e[r+1]+1e-6),p=r+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+1e-6)),f=Math.min(f,Math.floor(e[p+1]+1e-6));for(u-=d,c-=f,p=r;p<o;p+=2)e[p]=(e[p]+u)*h,e[p+1]=(e[p+1]+c)*l},i.BATCHABLE_SIZE=100,i}(nm),hV=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.width=0,i.alignment=.5,i.native=!1,i.cap=h_.BUTT,i.join=hp.MITER,i.miterLimit=10,i}return hx(i,e),i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},i.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},i}(hy),hH=new Float32Array(3),hj={},hY=function(e){function i(i){void 0===i&&(i=null);var r=e.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new hy,r._lineStyle=new hV,r._matrix=null,r._holeMode=!1,r.state=rV.for2d(),r._geometry=i||new hX,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=ex.NORMAL,r}return hx(i,e),Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return this.finishPoly(),new i(this._geometry)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),i.prototype.lineStyle=function(e,i,r,n,s){return void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=.5),void 0===s&&(s=!1),"number"==typeof e&&(e={width:e,color:i,alpha:r,alignment:n,native:s}),this.lineTextureStyle(e)},i.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:i3.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:h_.BUTT,join:hp.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this},i.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new ih,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new ih,this.currentPath.closeStroke=!1},i.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},i.prototype.moveTo=function(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this},i.prototype.lineTo=function(e,i){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,n=r[r.length-2],s=r[r.length-1];return n===e&&s===i||r.push(e,i),this},i.prototype._initCurve=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,i]):this.moveTo(e,i)},i.prototype.quadraticCurveTo=function(e,i,r,n){this._initCurve();var s=this.currentPath.points;return 0===s.length&&this.moveTo(0,0),hL.curveTo(e,i,r,n,s),this},i.prototype.bezierCurveTo=function(e,i,r,n,s,o){return this._initCurve(),h$.curveTo(e,i,r,n,s,o,this.currentPath.points),this},i.prototype.arcTo=function(e,i,r,n,s){this._initCurve(e,i);var o=this.currentPath.points,a=hD.curveTo(e,i,r,n,s,o);if(a){var h=a.cx,l=a.cy,u=a.radius,c=a.startAngle,d=a.endAngle,f=a.anticlockwise;this.arc(h,l,u,c,d,f)}return this},i.prototype.arc=function(e,i,r,n,s,o){if(void 0===o&&(o=!1),n===s||(!o&&s<=n?s+=e9:o&&n<=s&&(n+=e9),0==s-n))return this;var a=e+Math.cos(n)*r,h=i+Math.sin(n)*r,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-h);c<l&&d<l||u.push(a,h)}else this.moveTo(a,h),u=this.currentPath.points;return hD.arc(a,h,e,i,r,n,s,o,u),this},i.prototype.beginFill=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=1),this.beginTextureFill({texture:i3.WHITE,color:e,alpha:i})},i.prototype.beginTextureFill=function(e){e=Object.assign({texture:i3.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this},i.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},i.prototype.drawRect=function(e,i,r,n){return this.drawShape(new is(e,i,r,n))},i.prototype.drawRoundedRect=function(e,i,r,n,s){return this.drawShape(new il(e,i,r,n,s))},i.prototype.drawCircle=function(e,i,r){return this.drawShape(new io(e,i,r))},i.prototype.drawEllipse=function(e,i,r,n){return this.drawShape(new ia(e,i,r,n))},i.prototype.drawPolygon=function(){for(var e,i=arguments,r=[],n=0;n<arguments.length;n++)r[n]=i[n];var s=!0,o=r[0];o.points?(s=o.closeStroke,e=o.points):e=Array.isArray(r[0])?r[0]:r;var a=new ih(e);return a.closeStroke=s,this.drawShape(a),this},i.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},i.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},i.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==e7.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)},i.prototype._render=function(e){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},i.prototype._populateBatches=function(){var e=this._geometry,i=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(var n=0;n<r;n++){var s=e.batches[n],o=s.style.color,a=new Float32Array(this.vertexData.buffer,4*s.attribStart*2,2*s.attribSize),h=new Float32Array(e.uvsFloat32.buffer,4*s.attribStart*2,2*s.attribSize),l={vertexData:a,blendMode:i,indices:new Uint16Array(e.indicesUint16.buffer,2*s.start,s.size),uvs:h,_batchRGB:eX(o),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=l}},i.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,r=this.batches.length;i<r;i++){var n=this.batches[i];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}},i.prototype._renderDirect=function(e){var i=this._resolveDirectShader(e),r=this._geometry,n=this.tint,s=this.worldAlpha,o=i.uniforms,a=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(n>>16&255)/255*s,o.tint[1]=(n>>8&255)/255*s,o.tint[2]=(255&n)/255*s,o.tint[3]=s,e.shader.bind(i),e.geometry.bind(r,i),e.state.set(this.state);for(var h=0,l=a.length;h<l;h++)this._renderDrawCallDirect(e,r.drawCalls[h])},i.prototype._renderDrawCallDirect=function(e,i){for(var r=i.texArray,n=i.type,s=i.size,o=i.start,a=r.count,h=0;h<a;h++)e.texture.bind(r.elements[h],h);e.geometry.draw(n,s,o)},i.prototype._resolveDirectShader=function(e){var i=this.shader,r=this.pluginName;if(!i){if(!hj[r]){for(var n=e.plugins[r].MAX_TEXTURES,s=new Int32Array(n),o=0;o<n;o++)s[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new ic,default:rh.from({uSamplers:s},!0)},h=e.plugins[r]._shader.program;hj[r]=new rX(h,a)}i=hj[r]}return i},i.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var i=e.bounds,r=i.minX,n=i.minY,s=i.maxX,o=i.maxY;this._bounds.addFrame(this.transform,r,n,s,o)}},i.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,i._TEMP_POINT),this._geometry.containsPoint(i._TEMP_POINT)},i.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=eX(this.tint,hH),i=0;i<this.batches.length;i++){var r=this.batches[i],n=r._batchRGB,s=(e[0]*n[0]*255<<16)+(e[1]*n[1]*255<<8)+(0|e[2]*n[2]*255);r._tintRGB=(s>>16)+(65280&s)+((255&s)<<16)}}},i.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var i=this.transform.worldTransform,r=i.a,n=i.b,s=i.c,o=i.d,a=i.tx,h=i.ty,l=this._geometry.points,u=this.vertexData,c=0,d=0;d<l.length;d+=2){var f=l[d],p=l[d+1];u[c++]=r*f+s*p+a,u[c++]=o*p+n*f+h}}},i.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},i.prototype.setMatrix=function(e){return this._matrix=e,this},i.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},i.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},i.prototype.destroy=function(i){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,i)},i.nextRoundedRectBehavior=!1,i._TEMP_POINT=new ii,i}(nS),hz=function(e,i){return(hz=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)},hW=new ii,hq=new Uint16Array([0,1,2,0,2,3]),hZ=function(e){function i(i){var r=e.call(this)||this;return r._anchor=new iu(r._onAnchorUpdate,r,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=ex.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=i||i3.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=hq,r.pluginName="batch",r.isSprite=!0,r._roundPixels=G.ROUND_PIXELS,r}return function(e,i){function r(){this.constructor=e}hz(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(i,e),i.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=eJ(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=eJ(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,r=i.a,n=i.b,s=i.c,o=i.d,a=i.tx,h=i.ty,l=this.vertexData,u=e.trim,c=e.orig,d=this._anchor,f=0,p=0,_=0,g=0;if(u?(f=(p=u.x-d._x*c.width)+u.width,_=(g=u.y-d._y*c.height)+u.height):(f=(p=-d._x*c.width)+c.width,_=(g=-d._y*c.height)+c.height),l[0]=r*p+s*g+a,l[1]=o*g+n*p+h,l[2]=r*f+s*g+a,l[3]=o*g+n*f+h,l[4]=r*f+s*_+a,l[5]=o*_+n*f+h,l[6]=r*p+s*_+a,l[7]=o*_+n*p+h,this._roundPixels)for(var v=G.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*v|0)/v)}},i.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,r=e.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,h=s.c,l=s.d,u=s.tx,c=s.ty,d=-n._x*r.width,f=d+r.width,p=-n._y*r.height,_=p+r.height;i[0]=o*d+h*p+u,i[1]=l*p+a*d+c,i[2]=o*f+h*p+u,i[3]=l*p+a*f+c,i[4]=o*f+h*_+u,i[5]=l*_+a*f+c,i[6]=o*d+h*_+u,i[7]=l*_+a*d+c},i.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;e&&(e.width!==i.width||e.height!==i.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},i.prototype.getLocalBounds=function(i){return 0===this.children.length?(this._localBounds||(this._localBounds=new nb),this._localBounds.minX=-(this._texture.orig.width*this._anchor._x),this._localBounds.minY=-(this._texture.orig.height*this._anchor._y),this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),i||(this._localBoundsRect||(this._localBoundsRect=new is),i=this._localBoundsRect),this._localBounds.getRectangle(i)):e.prototype.getLocalBounds.call(this,i)},i.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,hW);var i=this._texture.orig.width,r=this._texture.orig.height,n=-i*this.anchor.x,s=0;return hW.x>=n&&hW.x<n+i&&(s=-r*this.anchor.y,hW.y>=s&&hW.y<s+r)},i.prototype.destroy=function(i){if(e.prototype.destroy.call(this,i),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof i?i:i&&i.texture){var r="boolean"==typeof i?i:i&&i.baseTexture;this._texture.destroy(!!r)}this._texture=null},i.from=function(e,r){return new i(e instanceof i3?e:i3.from(e,r))},Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=eJ(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=eJ(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||i3.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),i}(nS),hQ=function(e,i){return(hQ=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};(h=hO||(hO={}))[h.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",h[h.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var hJ={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:hO.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},hK=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],h0=function(){function e(e){this.styleID=0,this.reset(),h4(this,e,e)}return e.prototype.clone=function(){var i={};return h4(i,this,hJ),new e(i)},e.prototype.reset=function(){h4(this,hJ,hJ)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var i=h1(e);this._dropShadowColor!==i&&(this._dropShadowColor=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){var i=h1(e);this._fill!==i&&(this._fill=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(e,i){if(!Array.isArray(e)||!Array.isArray(i)||e.length!==i.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==i[r])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var i=h1(e);this._stroke!==i&&(this._stroke=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,i=this.fontFamily;Array.isArray(this.fontFamily)||(i=this.fontFamily.split(","));for(var r=i.length-1;r>=0;r--){var n=i[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&0>hK.indexOf(n)&&(n='"'+n+'"'),i[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+i.join(",")},e}();function h2(e){return"number"==typeof e?eV(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function h1(e){if(Array.isArray(e)){for(var i=0;i<e.length;++i)e[i]=h2(e[i]);return e}return h2(e)}function h4(e,i,r){for(var n in r)Array.isArray(i[n])?e[n]=i[n].slice():e[n]=i[n]}var h3={willReadFrequently:!0},h6=function(){function e(e,i,r,n,s,o,a,h,l){this.text=e,this.style=i,this.width=r,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=l}return e.measureText=function(i,r,n,s){void 0===s&&(s=e._canvas),n=null==n?r.wordWrap:n;var o=r.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=r.fontSize,a.ascent=r.fontSize);var h=s.getContext("2d",h3);h.font=o;for(var l=(n?e.wordWrap(i,r,s):i).split(/(?:\r\n|\r|\n)/),u=Array(l.length),c=0,d=0;d<l.length;d++){var f=h.measureText(l[d]).width+(l[d].length-1)*r.letterSpacing;u[d]=f,c=Math.max(c,f)}var p=c+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);var _=r.lineHeight||a.fontSize+r.strokeThickness,g=Math.max(_,a.fontSize+r.strokeThickness)+(l.length-1)*(_+r.leading);return r.dropShadow&&(g+=r.dropShadowDistance),new e(i,r,p,g,l,u,_+r.leading,c,a)},e.wordWrap=function(i,r,n){void 0===n&&(n=e._canvas);for(var s=n.getContext("2d",h3),o=0,a="",h="",l=Object.create(null),u=r.letterSpacing,c=r.whiteSpace,d=e.collapseSpaces(c),f=e.collapseNewlines(c),p=!d,_=r.wordWrapWidth+u,g=e.tokenize(i),v=0;v<g.length;v++){var y=g[v];if(e.isNewline(y)){if(!f){h+=e.addLine(a),p=!d,a="",o=0;continue}y=" "}if(d){var b=e.isBreakingSpace(y),x=e.isBreakingSpace(a[a.length-1]);if(b&&x)continue}var T=e.getFromCache(y,u,l,s);if(T>_){if(""!==a&&(h+=e.addLine(a),a="",o=0),e.canBreakWords(y,r.breakWords))for(var A=e.wordWrapSplit(y),E=0;E<A.length;E++){for(var w=A[E],S=1;A[E+S];){var P=A[E+S],M=w[w.length-1];if(e.canBreakChars(M,P,y,E,r.breakWords))break;w+=P,S++}E+=w.length-1;var I=e.getFromCache(w,u,l,s);I+o>_&&(h+=e.addLine(a),p=!1,a="",o=0),a+=w,o+=I}else{a.length>0&&(h+=e.addLine(a),a="",o=0);var C=v===g.length-1;h+=e.addLine(y,!C),p=!1,a="",o=0}}else T+o>_&&(p=!1,h+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(y)||p)&&(a+=y,o+=T)}return h+e.addLine(a,!1)},e.addLine=function(i,r){return void 0===r&&(r=!0),i=e.trimRight(i),i=r?i+"\n":i},e.getFromCache=function(e,i,r,n){var s=r[e];if("number"!=typeof s){var o=e.length*i;s=n.measureText(e).width+o,r[e]=s}return s},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(i){if("string"!=typeof i)return"";for(var r=i.length-1;r>=0;r--){var n=i[r];if(!e.isBreakingSpace(n))break;i=i.slice(0,-1)}return i},e.isNewline=function(i){return"string"==typeof i&&e._newlines.indexOf(i.charCodeAt(0))>=0},e.isBreakingSpace=function(i,r){return"string"==typeof i&&e._breakingSpaces.indexOf(i.charCodeAt(0))>=0},e.tokenize=function(i){var r=[],n="";if("string"!=typeof i)return r;for(var s=0;s<i.length;s++){var o=i[s],a=i[s+1];e.isBreakingSpace(o,a)||e.isNewline(o)?(""!==n&&(r.push(n),n=""),r.push(o)):n+=o}return""!==n&&r.push(n),r},e.canBreakWords=function(e,i){return i},e.canBreakChars=function(e,i,r,n,s){return!0},e.wordWrapSplit=function(e){return e.split("")},e.measureFont=function(i){if(e._fonts[i])return e._fonts[i];var r={ascent:0,descent:0,fontSize:0},n=e._canvas,s=e._context;s.font=i;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(s.measureText(o).width),h=Math.ceil(s.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*h);h=h*e.BASELINE_MULTIPLIER|0,n.width=a,n.height=l,s.fillStyle="#f00",s.fillRect(0,0,a,l),s.font=i,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,h);var u=s.getImageData(0,0,a,l).data,c=u.length,d=4*a,f=0,p=0,_=!1;for(f=0;f<h;++f){for(var g=0;g<d;g+=4)if(255!==u[p+g]){_=!0;break}if(_)break;p+=d}for(r.ascent=h-f,p=c-d,_=!1,f=l;f>h;--f){for(g=0;g<d;g+=4)if(255!==u[p+g]){_=!0;break}if(_)break;p-=d}return r.descent=f-h,r.fontSize=r.ascent+r.descent,e._fonts[i]=r,r},e.clearMetrics=function(i){void 0===i&&(i=""),i?delete e._fonts[i]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var i=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",h3);if(n&&n.measureText)return e.__canvas=r,r;i=G.ADAPTER.createCanvas()}catch(e){i=G.ADAPTER.createCanvas()}i.width=i.height=10,e.__canvas=i}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d",h3)),e.__context},enumerable:!1,configurable:!0}),e}();h6._fonts={},h6.METRICS_STRING="|\xc9q\xc5",h6.BASELINE_SYMBOL="M",h6.BASELINE_MULTIPLIER=1.4,h6.HEIGHT_MULTIPLIER=2,h6._newlines=[10,13],h6._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var h8={texture:!0,children:!1,baseTexture:!0},h5=function(e){function i(i,r,n){var s=this,o=!1;n||(n=G.ADAPTER.createCanvas(),o=!0),n.width=3,n.height=3;var a=i3.from(n);return a.orig=new is,a.trim=new is,(s=e.call(this,a)||this)._ownCanvas=o,s.canvas=n,s.context=n.getContext("2d",{willReadFrequently:!0}),s._resolution=G.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=i,s.style=r,s.localStyleID=-1,s}return function(e,i){function r(){this.constructor=e}hQ(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(i,e),i.prototype.updateText=function(e){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!e){this._font=this._style.toFontString();var n,s,o=this.context,a=h6.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=a.width,l=a.height,u=a.lines,c=a.lineHeight,d=a.lineWidths,f=a.maxLineWidth,p=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h)+2*r.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+2*r.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=r.strokeThickness,o.textBaseline=r.textBaseline,o.lineJoin=r.lineJoin,o.miterLimit=r.miterLimit;for(var _=r.dropShadow?2:1,g=0;g<_;++g){var v=r.dropShadow&&0===g,y=v?Math.ceil(Math.max(1,l)+2*r.padding):0,b=y*this._resolution;if(v){o.fillStyle="black",o.strokeStyle="black";var x=r.dropShadowColor,T=eX("number"==typeof x?x:eH(x)),A=r.dropShadowBlur*this._resolution,E=r.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*T[0]+","+255*T[1]+","+255*T[2]+","+r.dropShadowAlpha+")",o.shadowBlur=A,o.shadowOffsetX=Math.cos(r.dropShadowAngle)*E,o.shadowOffsetY=Math.sin(r.dropShadowAngle)*E+b}else o.fillStyle=this._generateFillStyle(r,u,a),o.strokeStyle=r.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var w=(c-p.fontSize)/2;(!i.nextLineHeightBehavior||c-p.fontSize<0)&&(w=0);for(var S=0;S<u.length;S++)n=r.strokeThickness/2,s=r.strokeThickness/2+S*c+p.ascent+w,"right"===r.align?n+=f-d[S]:"center"===r.align&&(n+=(f-d[S])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(u[S],n+r.padding,s+r.padding-y,!0),r.fill&&this.drawLetterSpacing(u[S],n+r.padding,s+r.padding-y)}this.updateTexture()}},i.prototype.drawLetterSpacing=function(e,r,n,s){void 0===s&&(s=!1);var o=this._style.letterSpacing,a=i.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||a)return a&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(s?this.context.strokeText(e,r,n):this.context.fillText(e,r,n));for(var h=r,l=Array.from?Array.from(e):e.split(""),u=this.context.measureText(e).width,c=0,d=0;d<l.length;++d){var f=l[d];s?this.context.strokeText(f,h,n):this.context.fillText(f,h,n);for(var p="",_=d+1;_<l.length;++_)p+=l[_];h+=u-(c=this.context.measureText(p).width)+o,u=c}},i.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var i=function(e){var i,r,n,s=e.width,o=e.height,a=e.getContext("2d",{willReadFrequently:!0}),h=a.getImageData(0,0,s,o).data,l=h.length,u={top:null,left:null,right:null,bottom:null},c=null;for(i=0;i<l;i+=4)0!==h[i+3]&&(r=i/4%s,n=~~(i/4/s),null===u.top&&(u.top=n),(null===u.left||r<u.left)&&(u.left=r),(null===u.right||u.right<r)&&(u.right=r+1),(null===u.bottom||u.bottom<n)&&(u.bottom=n));return null!==u.top&&(s=u.right-u.left,o=u.bottom-u.top+1,c=a.getImageData(u.left,u.top,s,o)),{height:o,width:s,data:c}}(e);i.data&&(e.width=i.width,e.height=i.height,this.context.putImageData(i.data,0,0))}var r=this._texture,n=this._style,s=n.trim?0:n.padding,o=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-2*s,r.orig.height=r._frame.height-2*s,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1},i.prototype._render=function(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,i)},i.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},i.prototype.getBounds=function(i,r){return this.updateText(!0),-1===this._textureID&&(i=!1),e.prototype.getBounds.call(this,i,r)},i.prototype.getLocalBounds=function(i){return this.updateText(!0),e.prototype.getLocalBounds.call(this,i)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},i.prototype._generateFillStyle=function(e,i,r){var n,s=e.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,h=this.canvas.width/this._resolution-o-2*a,l=this.canvas.height/this._resolution-o-2*a,u=s.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var d=u.length+1,f=1;f<d;++f)c.push(f/d);if(u.unshift(s[0]),c.unshift(0),u.push(s[s.length-1]),c.push(1),e.fillGradientType===hO.LINEAR_VERTICAL){n=this.context.createLinearGradient(h/2,a,h/2,l+a);var p=r.fontProperties.fontSize+e.strokeThickness;for(f=0;f<i.length;f++){var _=r.lineHeight*(f-1)+p,g=r.lineHeight*f,v=g;f>0&&_>g&&(v=(g+_)/2);var y=g+p,b=r.lineHeight*(f+1),x=y;f+1<i.length&&b<y&&(x=(y+b)/2);for(var T=(x-v)/l,A=0;A<u.length;A++){var E=Math.min(1,Math.max(0,v/l+("number"==typeof c[A]?c[A]:A/u.length)*T));E=Number(E.toFixed(5)),n.addColorStop(E,u[A])}}}else{n=this.context.createLinearGradient(a,l/2,h+a,l/2);var w=u.length+1,S=1;for(f=0;f<u.length;f++){var P=void 0;P="number"==typeof c[f]?c[f]:S/w,n.addColorStop(P,u[f]),S++}}return n},i.prototype.destroy=function(i){"boolean"==typeof i&&(i={children:i}),i=Object.assign({},h8,i),e.prototype.destroy.call(this,i),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var i=eJ(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var i=eJ(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof h0?e:new h0(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),i.nextLineHeightBehavior=!1,i.experimentalLetterSpacing=!1,i}(hZ);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */G.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var h7=function(e,i){return(h7=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)},h9=function(){function e(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function lt(e,i){var r=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof i3){var s=e._textures[n].baseTexture;-1===i.indexOf(s)&&(i.push(s),r=!0)}}return r}function le(e,i){if(e.baseTexture instanceof iX){var r=e.baseTexture;return -1===i.indexOf(r)&&i.push(r),!0}return!1}function li(e,i){if(e._texture&&e._texture instanceof i3){var r=e._texture.baseTexture;return -1===i.indexOf(r)&&i.push(r),!0}return!1}function lr(e,i){return i instanceof h5&&(i.updateText(!0),!0)}function ln(e,i){if(i instanceof h0){var r=i.toFontString();return h6.measureFont(r),!0}return!1}function ls(e,i){if(e instanceof h5){-1===i.indexOf(e.style)&&i.push(e.style),-1===i.indexOf(e)&&i.push(e);var r=e._texture.baseTexture;return -1===i.indexOf(r)&&i.push(r),!0}return!1}function lo(e,i){return e instanceof h0&&(-1===i.indexOf(e)&&i.push(e),!0)}function la(e,i){return i instanceof iX&&(i._glTextures[e.CONTEXT_UID]||e.texture.bind(i),!0)}function lh(e,i){if(!(i instanceof hY))return!1;var r=i.geometry;i.finishPoly(),r.updateBatches();for(var n=r.batches,s=0;s<n.length;s++){var o=n[s].style.texture;o&&la(e,o.baseTexture)}return r.batchable||e.geometry.bind(r,i._resolveDirectShader(e)),!0}function ll(e,i){return e instanceof hY&&(i.push(e),!0)}var lu=function(e){function i(i){var r=e.call(this,i)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(ll),r.registerUploadHook(la),r.registerUploadHook(lh),r}return function(e,i){function r(){this.constructor=e}h7(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(i,e),i.extension={name:"prepare",type:iT.RendererPlugin},i}(function(){function e(e){var i=this;this.limiter=new h9(G.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(ls),this.registerFindHook(lo),this.registerFindHook(lt),this.registerFindHook(le),this.registerFindHook(li),this.registerUploadHook(lr),this.registerUploadHook(ln)}return e.prototype.upload=function(e,i){var r=this;return"function"==typeof e&&(i=e,e=null),i&&e2("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(n){e&&r.add(e);var s=function(){null==i||i(),n()};r.queue.length?(r.completes.push(s),r.ticking||(r.ticking=!0,iO.system.addOnce(r.tick,r,iP.UTILITY))):s()})},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],i=!1;if(e&&!e._destroyed){for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),i=!0;break}}i||this.queue.shift()}if(this.queue.length)iO.system.addOnce(this.tick,this,iP.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);for(r=0,this.completes.length=0,n=s.length;r<n;r++)s[r]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var i=0,r=this.addHooks.length;i<r&&!this.addHooks[i](e,this.queue);i++);if(e instanceof nS)for(i=e.children.length-1;i>=0;i--)this.add(e.children[i]);return this},e.prototype.destroy=function(){this.ticking&&iO.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}()),lc=function(){function e(e,i,r){void 0===r&&(r=null),this.linkedSheets=[],this._texture=e instanceof i3?e:null,this.baseTexture=e instanceof iX?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=i;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(e){void 0===e&&(e=null);var i=this.data.meta.scale,r=e5(e,null);return null===r&&(r=void 0!==i?parseFloat(i):1),1!==r&&this.baseTexture.setResolution(r),r},e.prototype.parse=function(i){var r=this;return i&&e2("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){r._callback=function(e){null==i||i(e),n(e)},r._batchIndex=0,r._frameKeys.length<=e.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},e.prototype._processFrames=function(i){for(var r=i,n=e.BATCH_SIZE;r-i<n&&r<this._frameKeys.length;){var s=this._frameKeys[r],o=this._frames[s],a=o.frame;if(a){var h=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new is(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);h=o.rotated?new is(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new is(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new is(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[s]=new i3(this.baseTexture,h,c,l,o.rotated?2:0,o.anchor),i3.addToCache(this.textures[s],s)}r++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var i in e){this.animations[i]=[];for(var r=0;r<e[i].length;r++){var n=e[i][r];this.animations[i].push(this.textures[n])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var i=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){i._batchIndex*e.BATCH_SIZE<i._frameKeys.length?i._nextBatch():(i._processAnimations(),i._parseComplete())},0)},e.prototype.destroy=function(e){var i;for(var r in void 0===e&&(e=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(i=this._texture)||void 0===i||i.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},e.BATCH_SIZE=1e3,e}(),ld=function(){function e(){}return e.use=function(i,r){var n,s,o=this,a=i.name+"_image";if(i.data&&i.type===aL.TYPE.JSON&&i.data.frames&&!o.resources[a]){var h=null===(s=null===(n=i.data)||void 0===n?void 0:n.meta)||void 0===s?void 0:s.related_multi_packs;if(Array.isArray(h))for(var l=0;l<h.length;l++)(function(e){if("string"==typeof e){var r=e.replace(".json",""),n=tG.resolve(i.url.replace(o.baseUrl,""),e);if(!(o.resources[r]||Object.values(o.resources).some(function(e){return tG.format(tG.parse(e.url))===n}))){var s={crossOrigin:i.crossOrigin,loadType:aL.LOAD_TYPE.XHR,xhrType:aL.XHR_RESPONSE_TYPE.JSON,parentResource:i,metadata:i.metadata};o.add(r,n,s)}}})(h[l]);var u={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},c=e.getResourcePath(i,o.baseUrl);o.add(a,c,u,function(e){if(e.error)r(e.error);else{var n=new lc(e.texture,i.data,i.url);n.parse().then(function(){i.spritesheet=n,i.textures=n.textures,r()})}})}else r()},e.getResourcePath=function(e,i){return e.isDataUrl?e.data.meta.image:tG.resolve(e.url.replace(i,""),e.data.meta.image)},e.extension=iT.Loader,e}(),lf=function(e,i){return(lf=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function lp(e,i){function r(){this.constructor=e}lf(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var l_=new ii;!function(e){function i(i,r,n){void 0===r&&(r=100),void 0===n&&(n=100);var s=e.call(this,i)||this;return s.tileTransform=new iE,s._width=r,s._height=n,s.uvMatrix=s.texture.uvMatrix||new rY(i),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}lp(i,e),Object.defineProperty(i.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),i.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},i.prototype._render=function(e){var i=this._texture;i&&i.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},i.prototype._calculateBounds=function(){var e=-(this._width*this._anchor._x),i=-(this._height*this._anchor._y),r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,i,r,n)},i.prototype.getLocalBounds=function(i){return 0===this.children.length?(this._bounds.minX=-(this._width*this._anchor._x),this._bounds.minY=-(this._height*this._anchor._y),this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),i||(this._localBoundsRect||(this._localBoundsRect=new is),i=this._localBoundsRect),this._bounds.getRectangle(i)):e.prototype.getLocalBounds.call(this,i)},i.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,l_);var i=this._width,r=this._height,n=-i*this.anchor._x;if(l_.x>=n&&l_.x<n+i){var s=-r*this.anchor._y;if(l_.y>=s&&l_.y<s+r)return!0}return!1},i.prototype.destroy=function(i){e.prototype.destroy.call(this,i),this.tileTransform=null,this.uvMatrix=null},i.from=function(e,r){return new i(e instanceof i3?e:i3.from(e,r),r.width,r.height)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0})}(hZ);var lm="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",lg=new ic,lv=function(e){function i(i){var r=e.call(this,i)||this;return i.runners.contextChange.add(r),r.quad=new ro,r.state=rV.for2d(),r}return lp(i,e),i.prototype.contextChange=function(){var e=this.renderer,i={globals:e.globalUniforms};this.simpleShader=rX.from(lm,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",i),this.shader=e.context.webGLVersion>1?rX.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",i):rX.from(lm,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",i)},i.prototype.render=function(e){var i,r=this.renderer,n=this.quad,s=n.vertices;s[0]=s[6]=-(e._width*e.anchor.x),s[1]=s[3]=-(e._height*e.anchor.y),s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);var o=e.uvRespectAnchor?e.anchor.x:0,a=e.uvRespectAnchor?e.anchor.y:0;(s=n.uvs)[0]=s[6]=-o,s[1]=s[3]=-a,s[2]=s[4]=1-o,s[5]=s[7]=1-a,n.invalidate();var h=e._texture,l=h.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,d=e.uvMatrix,f=l.isPowerOfTwo&&h.frame.width===l.width&&h.frame.height===l.height;f&&(l._glTextures[r.CONTEXT_UID]?f=l.wrapMode!==eM.CLAMP:l.wrapMode===eM.CLAMP&&(l.wrapMode=eM.REPEAT));var p=f?this.simpleShader:this.shader,_=h.width,g=h.height,v=e._width,y=e._height;lg.set(c.a*_/v,c.b*_/y,c.c*g/v,c.d*g/y,c.tx/v,c.ty/y),lg.invert(),f?lg.prepend(d.mapCoord):(p.uniforms.uMapCoord=d.mapCoord.toArray(!0),p.uniforms.uClampFrame=d.uClampFrame,p.uniforms.uClampOffset=d.uClampOffset),p.uniforms.uTransform=lg.toArray(!0),p.uniforms.uColor=ez(e.tint,e.worldAlpha,p.uniforms.uColor,u),p.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),p.uniforms.uSampler=h,r.shader.bind(p),r.geometry.bind(n),this.state.blendMode=(i=e.blendMode,ej[u?1:0][i]),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},i.extension={name:"tilingSprite",type:iT.RendererPlugin},i}(rf),ly=function(e,i){return(ly=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};function lb(e,i){function r(){this.constructor=e}ly(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var lx=function(){function e(e,i){this.uvBuffer=e,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var i=this.uvBuffer.data;this.data&&this.data.length===i.length||(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}},e}(),lT=new ii,lA=new ih,lE=function(e){function i(i,r,n,s){void 0===s&&(s=eT.TRIANGLES);var o=e.call(this)||this;return o.geometry=i,o.shader=r,o.state=n||rV.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=G.ROUND_PIXELS,o.batchUvs=null,o}return lb(i,e),Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),i.prototype._render=function(e){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===eT.TRIANGLES&&r.length<2*i.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},i.prototype._renderDefault=function(e){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),e.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(i),e.state.set(this.state),e.geometry.bind(this.geometry,i),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},i.prototype._renderToBatch=function(e){var i=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;var n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)},i.prototype.calculateVertices=function(){var e=this.geometry.buffers[0],i=e.data,r=e._updateID;if(r!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,l=n.tx,u=n.ty,c=this.vertexData,d=0;d<c.length/2;d++){var f=i[2*d],p=i[2*d+1];c[2*d]=s*f+a*p+l,c[2*d+1]=o*f+h*p+u}if(this._roundPixels){var _=G.RESOLUTION;for(d=0;d<c.length;++d)c[d]=Math.round((c[d]*_|0)/_)}this.vertexDirty=r}},i.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new lx(e,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},i.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,lT);for(var i=this.geometry.getBuffer("aVertexPosition").data,r=lA.points,n=this.geometry.getIndex().data,s=n.length,o=4===this.drawMode?3:1,a=0;a+2<s;a+=o){var h=2*n[a],l=2*n[a+1],u=2*n[a+2];if(r[0]=i[h],r[1]=i[h+1],r[2]=i[l],r[3]=i[l+1],r[4]=i[u],r[5]=i[u+1],lA.contains(lT.x,lT.y))return!0}return!1},i.prototype.destroy=function(i){e.prototype.destroy.call(this,i),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},i.BATCHABLE_SIZE=100,i}(nS),lw=function(e){function i(i,r){var n=this,s={uSampler:i,alpha:1,uTextureMatrix:ic.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(s,r.uniforms),(n=e.call(this,r.program||rG.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),s)||this)._colorDirty=!1,n.uvMatrix=new rY(i),n.batchable=void 0===r.program,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return lb(i,e),Object.defineProperty(i.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),i.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;ez(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},i}(rX),lS=function(e){function i(i,r,n){var s=e.call(this)||this,o=new i9(i),a=new i9(r,!0),h=new i9(n,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,ew.FLOAT).addAttribute("aTextureCoord",a,2,!1,ew.FLOAT).addIndex(h),s._updateId=-1,s}return lb(i,e),Object.defineProperty(i.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),i}(rn),lP=function(e,i){return(lP=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)},lM=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},lI=function(){function e(){}return e.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var i=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in i){var s=i[n].match(/^[a-z]+/gm)[0],o=i[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var h in o){var l=o[h].split("="),u=l[0],c=l[1].replace(/"/gm,""),d=parseFloat(c),f=isNaN(d)?c:d;a[u]=f}r[s].push(a)}var p=new lM;return r.info.forEach(function(e){return p.info.push({face:e.face,size:parseInt(e.size,10)})}),r.common.forEach(function(e){return p.common.push({lineHeight:parseInt(e.lineHeight,10)})}),r.page.forEach(function(e){return p.page.push({id:parseInt(e.id,10),file:e.file})}),r.char.forEach(function(e){return p.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})}),r.kerning.forEach(function(e){return p.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})}),r.distanceField.forEach(function(e){return p.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})}),p},e}(),lC=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var i=new lM,r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),h=e.getElementsByTagName("distanceField"),l=0;l<r.length;l++)i.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(l=0;l<n.length;l++)i.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(l=0;l<s.length;l++)i.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(l=0;l<o.length;l++){var u=o[l];i.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(l=0;l<a.length;l++)i.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(l=0;l<h.length;l++)i.distanceField.push({fieldType:h[l].getAttribute("fieldType"),distanceRange:parseInt(h[l].getAttribute("distanceRange"),10)});return i},e}(),lR=function(){function e(){}return e.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var i=(new globalThis.DOMParser).parseFromString(e,"text/xml");return lC.test(i)}return!1},e.parse=function(e){var i=(new globalThis.DOMParser).parseFromString(e,"text/xml");return lC.parse(i)},e}(),lO=[lI,lC,lR];function lD(e){for(var i=0;i<lO.length;i++)if(lO[i].test(e))return lO[i];return null}function l$(e){return Array.from?Array.from(e):e.split("")}function lL(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var lF=function(){function e(e,i,r){var n,s,o=e.info[0],a=e.common[0],h=e.page[0],l=e.distanceField[0],u=e5(h.file),c={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/u,this.chars={},this.pageTextures=c;for(var d=0;d<e.page.length;d++){var f=e.page[d],p=f.id,_=f.file;c[p]=i instanceof Array?i[d]:i[_],(null==l?void 0:l.fieldType)&&"none"!==l.fieldType&&(c[p].baseTexture.alphaMode=eC.NO_PREMULTIPLIED_ALPHA,c[p].baseTexture.mipmap=eI.OFF)}for(d=0;d<e.char.length;d++){var g=e.char[d],v=(p=g.id,g.page),y=e.char[d],b=y.x,x=y.y,T=y.width,A=y.height,E=y.xoffset,w=y.yoffset,S=y.xadvance;x/=u,T/=u,A/=u,E/=u,w/=u,S/=u;var P=new is((b/=u)+c[v].frame.x/u,x+c[v].frame.y/u,T,A);this.chars[p]={xOffset:E,yOffset:w,xAdvance:S,kerning:{},texture:new i3(c[v].baseTexture,P),page:v}}for(d=0;d<e.kerning.length;d++){var M=e.kerning[d],I=M.first,C=M.second,R=M.amount;I/=u,C/=u,R/=u,this.chars[C]&&(this.chars[C].kerning[I]=R)}this.distanceFieldRange=null==l?void 0:l.distanceRange,this.distanceFieldType=null!==(s=null===(n=null==l?void 0:l.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==s?s:"none"}return e.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},e.install=function(i,r,n){if(i instanceof lM)s=i;else{var s,o=lD(i);if(!o)throw Error("Unrecognized data format for font.");s=o.parse(i)}r instanceof i3&&(r=[r]);var a=new e(s,r,n);return e.available[a.font]=a,a},e.uninstall=function(i){var r=e.available[i];if(!r)throw Error("No font found named '"+i+"'");r.destroy(),delete e.available[i]},e.from=function(i,r,n){if(!i)throw Error("[BitmapFont] Property `name` is required.");var s=Object.assign({},e.defaultOptions,n),o=s.chars,a=s.padding,h=s.resolution,l=s.textureWidth,u=s.textureHeight,c=function(e){"string"==typeof e&&(e=[e]);for(var i=[],r=0,n=e.length;r<n;r++){var s=e[r];if(Array.isArray(s)){if(2!==s.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got "+s.length+".");var o=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<o)throw Error("[BitmapFont]: Invalid character range.");for(var h=o;h<=a;h++)i.push(String.fromCharCode(h))}else i.push.apply(i,l$(s))}if(0===i.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return i}(o),d=r instanceof h0?r:new h0(r),f=new lM;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};for(var p,_,g,v=0,y=0,b=0,x=[],T=0;T<c.length;T++){p||((p=G.ADAPTER.createCanvas()).width=l,p.height=u,_=p.getContext("2d"),g=new iX(p,{resolution:h}),x.push(new i3(g)),f.page.push({id:x.length-1,file:""}));var A=c[T],E=h6.measureText(A,d,!1,p),w=E.width,S=Math.ceil(E.height),P=Math.ceil(("italic"===d.fontStyle?2:1)*w);if(y>=u-S*h){if(0===y)throw Error("[BitmapFont] textureHeight "+u+"px is too small (fontFamily: '"+d.fontFamily+"', fontSize: "+d.fontSize+"px, char: '"+A+"')");--T,p=null,_=null,g=null,y=0,v=0,b=0}else if(b=Math.max(S+E.fontProperties.descent,b),P*h+v>=l){if(0===v)throw Error("[BitmapFont] textureWidth "+l+"px is too small (fontFamily: '"+d.fontFamily+"', fontSize: "+d.fontSize+"px, char: '"+A+"')");--T,y+=b*h,y=Math.ceil(y),v=0,b=0}else{(function(e,i,r,n,s,o,a){var h=r.text,l=r.fontProperties;i.translate(n,s),i.scale(o,o);var u=a.strokeThickness/2,c=-a.strokeThickness/2;if(i.font=a.toFontString(),i.lineWidth=a.strokeThickness,i.textBaseline=a.textBaseline,i.lineJoin=a.lineJoin,i.miterLimit=a.miterLimit,i.fillStyle=function(e,i,r,n,s,o){var a,h=r.fill;if(!Array.isArray(h))return h;if(1===h.length)return h[0];var l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=e.width/n-l-2*u,d=e.height/n-l-2*u,f=h.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var _=f.length+1,g=1;g<_;++g)p.push(g/_);if(f.unshift(h[0]),p.unshift(0),f.push(h[h.length-1]),p.push(1),r.fillGradientType===hO.LINEAR_VERTICAL){a=i.createLinearGradient(c/2,u,c/2,d+u);var v=0,y=(o.fontProperties.fontSize+r.strokeThickness)/d;for(g=0;g<s.length;g++)for(var b=o.lineHeight*g,x=0;x<f.length;x++){var T=Math.max(v,b/d+("number"==typeof p[x]?p[x]:x/f.length)*y);T=Math.min(T,1),a.addColorStop(T,f[x]),v=T}}else{a=i.createLinearGradient(u,d/2,c+u,d/2);var A=f.length+1,E=1;for(g=0;g<f.length;g++){var w=void 0;w="number"==typeof p[g]?p[g]:E/A,a.addColorStop(w,f[g]),E++}}return a}(e,i,a,o,[h],r),i.strokeStyle=a.stroke,a.dropShadow){var d=a.dropShadowColor,f=eX("number"==typeof d?d:eH(d)),p=a.dropShadowBlur*o,_=a.dropShadowDistance*o;i.shadowColor="rgba("+255*f[0]+","+255*f[1]+","+255*f[2]+","+a.dropShadowAlpha+")",i.shadowBlur=p,i.shadowOffsetX=Math.cos(a.dropShadowAngle)*_,i.shadowOffsetY=Math.sin(a.dropShadowAngle)*_}else i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;a.stroke&&a.strokeThickness&&i.strokeText(h,u,c+r.lineHeight-l.descent),a.fill&&i.fillText(h,u,c+r.lineHeight-l.descent),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(0, 0, 0, 0)"})(p,_,E,v,y,h,d);var M=lL(E.text);f.char.push({id:M,page:x.length-1,x:v/h,y:y/h,width:P,height:S,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0))}),v+=(P+2*a)*h,v=Math.ceil(v)}}if(!(null==n?void 0:n.skipKerning)){T=0;for(var I=c.length;T<I;T++)for(var C=c[T],R=0;R<I;R++){var O=c[R],D=_.measureText(C).width,$=_.measureText(O).width,L=_.measureText(C+O).width-(D+$);L&&f.kerning.push({first:lL(C),second:lL(O),amount:L})}}var F=new e(f,x,!0);return void 0!==e.available[i]&&e.uninstall(i),e.available[i]=F,F},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),lB=[],lk=[],lN=[];!function(e){function i(r,n){void 0===n&&(n={});var s=e.call(this)||this;s._tint=16777215;var o=Object.assign({},i.styleDefaults,n),a=o.align,h=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,d=o.fontSize;if(!lF.available[c])throw Error('Missing BitmapFont "'+c+'"');return s._activePagesMeshData=[],s._textWidth=0,s._textHeight=0,s._align=a,s._tint=h,s._font=void 0,s._fontName=c,s._fontSize=d,s.text=r,s._maxWidth=l,s._maxLineHeight=0,s._letterSpacing=u,s._anchor=new iu(function(){s.dirty=!0},s,0,0),s._roundPixels=G.ROUND_PIXELS,s.dirty=!0,s._resolution=G.RESOLUTION,s._autoResolution=!0,s._textureCache={},s}(function(e,i){function r(){this.constructor=e}lP(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)})(i,e),i.prototype.updateText=function(){for(var e,i=lF.available[this._fontName],r=this.fontSize,n=r/i.size,s=new ii,o=[],a=[],h=[],l=l$(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*i.size/r,c="none"===i.distanceFieldType?lB:lk,d=null,f=0,p=0,_=0,g=-1,v=0,y=0,b=0,x=0,T=0;T<l.length;T++){var A=lL(V=l[T]);if(/(?:\s)/.test(V)&&(g=T,v=f,x++),"\r"!==V&&"\n"!==V){var E=i.chars[A];if(E){d&&E.kerning[d]&&(s.x+=E.kerning[d]);var w=lN.pop()||{texture:i3.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ii};w.texture=E.texture,w.line=_,w.charCode=A,w.position.x=s.x+E.xOffset+this._letterSpacing/2,w.position.y=s.y+E.yOffset,w.prevSpaces=x,o.push(w),f=w.position.x+Math.max(E.xAdvance-E.xOffset,E.texture.orig.width),s.x+=E.xAdvance+this._letterSpacing,b=Math.max(b,E.yOffset+E.texture.height),d=A,-1!==g&&u>0&&s.x>u&&(eQ(o,1+g-++y,1+T-g),T=g,g=-1,a.push(v),h.push(o.length>0?o[o.length-1].prevSpaces:0),p=Math.max(p,v),_++,s.x=0,s.y+=i.lineHeight,d=null,x=0)}}else a.push(f),h.push(-1),p=Math.max(p,f),++_,++y,s.x=0,s.y+=i.lineHeight,d=null,x=0}var S=l[l.length-1];"\r"!==S&&"\n"!==S&&(/(?:\s)/.test(S)&&(f=v),a.push(f),p=Math.max(p,f),h.push(-1));var P=[];for(T=0;T<=_;T++){var M=0;"right"===this._align?M=p-a[T]:"center"===this._align?M=(p-a[T])/2:"justify"===this._align&&(M=h[T]<0?0:(p-a[T])/h[T]),P.push(M)}var I=o.length,C={},R=[],O=this._activePagesMeshData;for(c.push.apply(c,O),T=0;T<I;T++){var D=(j=o[T].texture).baseTexture.uid;if(!C[D]){if(!(J=c.pop())){var $=new lS,L=void 0,F=void 0;"none"===i.distanceFieldType?(L=new lw(i3.EMPTY),F=ex.NORMAL):(L=new lw(i3.EMPTY,{program:rG.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),F=ex.NORMAL_NPM);var B=new lE($,L);B.blendMode=F,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:B,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;var k=this._textureCache;k[D]=k[D]||new i3(j.baseTexture),J.mesh.texture=k[D],J.mesh.tint=this._tint,R.push(J),C[D]=J}C[D].total++}for(T=0;T<O.length;T++)-1===R.indexOf(O[T])&&this.removeChild(O[T].mesh);for(T=0;T<R.length;T++)R[T].mesh.parent!==this&&this.addChild(R[T].mesh);for(var T in this._activePagesMeshData=R,C){var N=(J=C[T]).total;if(!((null===(e=J.indices)||void 0===e?void 0:e.length)>6*N)||J.vertices.length<2*lE.BATCHABLE_SIZE)J.vertices=new Float32Array(8*N),J.uvs=new Float32Array(8*N),J.indices=new Uint16Array(6*N);else for(var U=J.total,G=J.vertices,X=4*U*2;X<G.length;X++)G[X]=0;J.mesh.size=6*N}for(T=0;T<I;T++){var V,H=(V=o[T]).position.x+P[V.line]*("justify"===this._align?V.prevSpaces:1);this._roundPixels&&(H=Math.round(H));var j,Y=H*n,z=V.position.y*n,W=C[(j=V.texture).baseTexture.uid],q=j.frame,Z=j._uvs,Q=W.index++;W.indices[6*Q+0]=0+4*Q,W.indices[6*Q+1]=1+4*Q,W.indices[6*Q+2]=2+4*Q,W.indices[6*Q+3]=0+4*Q,W.indices[6*Q+4]=2+4*Q,W.indices[6*Q+5]=3+4*Q,W.vertices[8*Q+0]=Y,W.vertices[8*Q+1]=z,W.vertices[8*Q+2]=Y+q.width*n,W.vertices[8*Q+3]=z,W.vertices[8*Q+4]=Y+q.width*n,W.vertices[8*Q+5]=z+q.height*n,W.vertices[8*Q+6]=Y,W.vertices[8*Q+7]=z+q.height*n,W.uvs[8*Q+0]=Z.x0,W.uvs[8*Q+1]=Z.y0,W.uvs[8*Q+2]=Z.x1,W.uvs[8*Q+3]=Z.y1,W.uvs[8*Q+4]=Z.x2,W.uvs[8*Q+5]=Z.y2,W.uvs[8*Q+6]=Z.x3,W.uvs[8*Q+7]=Z.y3}for(var T in this._textWidth=p*n,this._textHeight=(s.y+i.lineHeight)*n,C){var J=C[T];if(0!==this.anchor.x||0!==this.anchor.y)for(var K=0,tt=this._textWidth*this.anchor.x,te=this._textHeight*this.anchor.y,ti=0;ti<J.total;ti++)J.vertices[K++]-=tt,J.vertices[K++]-=te,J.vertices[K++]-=tt,J.vertices[K++]-=te,J.vertices[K++]-=tt,J.vertices[K++]-=te,J.vertices[K++]-=tt,J.vertices[K++]-=te;this._maxLineHeight=b*n;var tr=J.mesh.geometry.getBuffer("aVertexPosition"),tn=J.mesh.geometry.getBuffer("aTextureCoord"),ts=J.mesh.geometry.getIndex();tr.data=J.vertices,tn.data=J.uvs,ts.data=J.indices,tr.update(),tn.update(),ts.update()}for(T=0;T<o.length;T++)lN.push(o[T]);this._font=i,this.dirty=!1},i.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},i.prototype._render=function(i){this._autoResolution&&this._resolution!==i.resolution&&(this._resolution=i.resolution,this.dirty=!0);var r=lF.available[this._fontName],n=r.distanceFieldRange,s=r.distanceFieldType,o=r.size;if("none"!==s)for(var a=this.worldTransform,h=a.a,l=a.b,u=a.c,c=a.d,d=Math.sqrt(h*h+l*l),f=Math.sqrt(u*u+c*c),p=(Math.abs(d)+Math.abs(f))/2,_=this.fontSize/o,g=0,v=this._activePagesMeshData;g<v.length;g++)v[g].mesh.shader.uniforms.uFWidth=p*n*_*this._resolution;e.prototype._render.call(this,i)},i.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},i.prototype.validate=function(){var e=lF.available[this._fontName];if(!e)throw Error('Missing BitmapFont "'+this._fontName+'"');this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!lF.available[e])throw Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){var e;return null!==(e=this._fontSize)&&void 0!==e?e:lF.available[this._fontName].size},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),i.prototype.destroy=function(i){var r=this._textureCache,n="none"===lF.available[this._fontName].distanceFieldType?lB:lk;n.push.apply(n,this._activePagesMeshData);for(var s=0,o=this._activePagesMeshData;s<o.length;s++){var a=o[s];this.removeChild(a.mesh)}for(var h in this._activePagesMeshData=[],n.filter(function(e){return r[e.mesh.texture.baseTexture.uid]}).forEach(function(e){e.mesh.texture=i3.EMPTY}),r)r[h].destroy(),delete r[h];this._font=null,this._textureCache=null,e.prototype.destroy.call(this,i)},i.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(nS);var lU=function(){function e(){}return e.add=function(){aL.setExtensionXhrType("fnt",aL.XHR_RESPONSE_TYPE.TEXT)},e.use=function(i,r){var n=lD(i.data);if(n)for(var s=e.getBaseUrl(this,i),o=n.parse(i.data),a={},h=function(e){a[e.metadata.pageFile]=e.texture,Object.keys(a).length===o.page.length&&(i.bitmapFont=lF.install(o,a,!0),r())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=s+u,d=!1;for(var f in this.resources){var p=this.resources[f];if(p.url===c){p.metadata.pageFile=u,p.texture?h(p):p.onAfterMiddleware.add(h),d=!0;break}}if(!d){var _={crossOrigin:i.crossOrigin,loadType:aL.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},i.metadata.imageMetadata),parentResource:i};this.add(c,_,h)}}else r()},e.getBaseUrl=function(i,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&("."===n&&(n=""),i.baseUrl&&n&&"/"===i.baseUrl.charAt(i.baseUrl.length-1)&&(n+="/")),(n=n.replace(i.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},e.dirname=function(e){var i=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return i===e?".":""===i?"/":i},e.extension=iT.Loader,e}(),lG=function(e,i){return(lG=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */!function(e){function i(i){void 0===i&&(i=1);var r=e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=i,r}(function(e,i){function r(){this.constructor=e}lG(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)})(i,e),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0})}(rH);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lX=function(e,i){return(lX=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};function lV(e,i){function r(){this.constructor=e}lX(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var lH={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},lj=function(e){function i(i,r,n,s,o){void 0===r&&(r=8),void 0===n&&(n=4),void 0===s&&(s=G.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,h=function(e,i){var r,n=Math.ceil(e/2),s="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";r=i?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var h=r.replace("%index%",a.toString());o+=(h=h.replace("%sampleIndex%",a-(n-1)+".0"))+"\n"}return(s=s.replace("%blur%",o)).replace("%size%",e.toString())}(o,i),l=function(e){for(var i,r=lH[e],n=r.length,s="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}",o="",a=0;a<e;a++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());i=a,a>=n&&(i=e-a-1),o+=(h=h.replace("%value%",r[i].toString()))+"\n"}return(s=s.replace("%blur%",o)).replace("%size%",e.toString())}(o);return(a=e.call(this,h,l)||this).horizontal=i,a.resolution=s,a._quality=0,a.quality=n,a.blur=r,a}return lV(i,e),i.prototype.apply=function(e,i,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/i.width):this.uniforms.strength=1/r.height*(r.height/i.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/i.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,i,r,n);else{var s=e.getFilterTexture(),o=e.renderer,a=i,h=s;this.state.blend=!1,e.applyFilter(this,a,h,eR.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(a,eR.BLIT),this.uniforms.uSampler=h;var u=h;h=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,h,r,n),e.returnFilterTexture(s)}},Object.defineProperty(i.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),i}(rH);!function(e){function i(i,r,n,s){void 0===i&&(i=8),void 0===r&&(r=4),void 0===n&&(n=G.FILTER_RESOLUTION),void 0===s&&(s=5);var o=e.call(this)||this;return o.blurXFilter=new lj(!0,i,r,n,s),o.blurYFilter=new lj(!1,i,r,n,s),o.resolution=n,o.quality=r,o.blur=i,o.repeatEdgePixels=!1,o}lV(i,e),i.prototype.apply=function(e,i,r,n){var s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){var a=e.getFilterTexture();this.blurXFilter.apply(e,i,a,eR.CLEAR),this.blurYFilter.apply(e,a,r,n),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,i,r,n):this.blurXFilter.apply(e,i,r,n)},i.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(i.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0})}(rH);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lY=function(e,i){return(lY=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)},lz=function(e){function i(){var i=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(i=e.call(this,nu,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,i}return function(e,i){function r(){this.constructor=e}lY(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(i,e),i.prototype._loadMatrix=function(e,i){void 0===i&&(i=!1);var r=e;i&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r},i.prototype._multiply=function(e,i,r){return e[0]=i[0]*r[0]+i[1]*r[5]+i[2]*r[10]+i[3]*r[15],e[1]=i[0]*r[1]+i[1]*r[6]+i[2]*r[11]+i[3]*r[16],e[2]=i[0]*r[2]+i[1]*r[7]+i[2]*r[12]+i[3]*r[17],e[3]=i[0]*r[3]+i[1]*r[8]+i[2]*r[13]+i[3]*r[18],e[4]=i[0]*r[4]+i[1]*r[9]+i[2]*r[14]+i[3]*r[19]+i[4],e[5]=i[5]*r[0]+i[6]*r[5]+i[7]*r[10]+i[8]*r[15],e[6]=i[5]*r[1]+i[6]*r[6]+i[7]*r[11]+i[8]*r[16],e[7]=i[5]*r[2]+i[6]*r[7]+i[7]*r[12]+i[8]*r[17],e[8]=i[5]*r[3]+i[6]*r[8]+i[7]*r[13]+i[8]*r[18],e[9]=i[5]*r[4]+i[6]*r[9]+i[7]*r[14]+i[8]*r[19]+i[9],e[10]=i[10]*r[0]+i[11]*r[5]+i[12]*r[10]+i[13]*r[15],e[11]=i[10]*r[1]+i[11]*r[6]+i[12]*r[11]+i[13]*r[16],e[12]=i[10]*r[2]+i[11]*r[7]+i[12]*r[12]+i[13]*r[17],e[13]=i[10]*r[3]+i[11]*r[8]+i[12]*r[13]+i[13]*r[18],e[14]=i[10]*r[4]+i[11]*r[9]+i[12]*r[14]+i[13]*r[19]+i[14],e[15]=i[15]*r[0]+i[16]*r[5]+i[17]*r[10]+i[18]*r[15],e[16]=i[15]*r[1]+i[16]*r[6]+i[17]*r[11]+i[18]*r[16],e[17]=i[15]*r[2]+i[16]*r[7]+i[17]*r[12]+i[18]*r[17],e[18]=i[15]*r[3]+i[16]*r[8]+i[17]*r[13]+i[18]*r[18],e[19]=i[15]*r[4]+i[16]*r[9]+i[17]*r[14]+i[18]*r[19]+i[19],e},i.prototype._colorMatrix=function(e){var i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},i.prototype.brightness=function(e,i){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],i)},i.prototype.tint=function(e,i){this._loadMatrix([(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],i)},i.prototype.greyscale=function(e,i){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],i)},i.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},i.prototype.hue=function(e,i){var r=Math.cos(e=(e||0)/180*Math.PI),n=Math.sin(e),s=1/3,o=(0,Math.sqrt)(1/3);this._loadMatrix([r+(1-r)*s,s*(1-r)-o*n,s*(1-r)+o*n,0,0,s*(1-r)+o*n,r+s*(1-r),s*(1-r)-o*n,0,0,s*(1-r)-o*n,s*(1-r)+o*n,r+s*(1-r),0,0,0,0,0,1,0],i)},i.prototype.contrast=function(e,i){var r=(e||0)+1,n=-.5*(r-1);this._loadMatrix([r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0],i)},i.prototype.saturate=function(e,i){void 0===e&&(e=0);var r=2*e/3+1,n=-.5*(r-1);this._loadMatrix([r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0],i)},i.prototype.desaturate=function(){this.saturate(-1)},i.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},i.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},i.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},i.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},i.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},i.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},i.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},i.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},i.prototype.colorTone=function(e,i,r,n,s){var o=((r=r||16770432)>>16&255)/255,a=(r>>8&255)/255,h=(255&r)/255,l=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,c=(255&n)/255,d=[.3,.59,.11,0,0,o,a,h,e=e||.2,0,l,u,c,i=i||.15,0,o-l,a-u,h-c,0,0];this._loadMatrix(d,s)},i.prototype.night=function(e,i){var r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,i)},i.prototype.predator=function(e,i){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],i)},i.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},i.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(i.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),i}(rH);lz.prototype.grayscale=lz.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lW=function(e,i){return(lW=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};!function(e){function i(i,r){var n=this,s=new ic;return i.renderable=!1,(n=e.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n	gl_Position = filterVertexPosition();\n	vTextureCoord = filterTextureCoord();\n	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:i._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=i,n.maskMatrix=s,null==r&&(r=20),n.scale=new ii(r,r),n}(function(e,i){function r(){this.constructor=e}lW(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)})(i,e),i.prototype.apply=function(e,i,r,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,i,r,n)},Object.defineProperty(i.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0})}(rH);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lq=function(e,i){return(lq=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};!function(e,i){function r(){this.constructor=e}lq(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(function(){return l.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this},l=rH);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lZ=function(e,i){return(lZ=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};!function(e){function i(i,r){void 0===i&&(i=.5),void 0===r&&(r=Math.random());var n=e.call(this,nu,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=i,n.seed=r,n}(function(e,i){function r(){this.constructor=e}lZ(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)})(i,e),Object.defineProperty(i.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0})}(rH);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var lQ=new ic;nA.prototype._cacheAsBitmap=!1,nA.prototype._cacheData=null,nA.prototype._cacheAsBitmapResolution=null,nA.prototype._cacheAsBitmapMultisample=eF.NONE;var lJ=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(nA.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var i;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new lJ),(i=this._cacheData).originalRender=this.render,i.originalRenderCanvas=this.renderCanvas,i.originalUpdateTransform=this.updateTransform,i.originalCalculateBounds=this.calculateBounds,i.originalGetLocalBounds=this.getLocalBounds,i.originalDestroy=this.destroy,i.originalContainsPoint=this.containsPoint,i.originalMask=this._mask,i.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((i=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=i.originalRender,this.renderCanvas=i.originalRenderCanvas,this.calculateBounds=i.originalCalculateBounds,this.getLocalBounds=i.originalGetLocalBounds,this.destroy=i.originalDestroy,this.updateTransform=i.originalUpdateTransform,this.containsPoint=i.originalContainsPoint,this._mask=i.originalMask,this.filterArea=i.originalFilterArea))}}}),nA.prototype._renderCached=function(e){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},nA.prototype._initCachedDisplayObject=function(e){var i;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;n.pad(s)}n.ceil(G.RESOLUTION);var o=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),h=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,u=i6.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(i=this.cacheAsBitmapMultisample)&&void 0!==i?i:e.multisample}),c="cacheAsBitmap_"+ ++eK;this._cacheData.textureCacheId=c,iX.addToCache(u.baseTexture,c),i3.addToCache(u,c);var d=this.transform.localTransform.copyTo(lQ).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:u,clear:!0,transform:d,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=l,e.renderTexture.bind(o,a,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var f=new hZ(u);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-n.x/n.width,f.anchor.y=-n.y/n.height,f.alpha=r,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)}},nA.prototype._renderCachedCanvas=function(e){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},nA.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var i=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=e.context,s=e._projTransform;i.ceil(G.RESOLUTION);var o=i6.create({width:i.width,height:i.height}),a="cacheAsBitmap_"+ ++eK;this._cacheData.textureCacheId=a,iX.addToCache(o.baseTexture,a),i3.addToCache(o,a),this.transform.localTransform.copyTo(lQ),lQ.invert(),lQ.tx-=i.x,lQ.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:lQ,skipUpdateTransform:!1}),e.context=n,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var h=new hZ(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-i.x/i.width,h.anchor.y=-i.y/i.height,h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},nA.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},nA.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},nA.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,iX.removeFromCache(this._cacheData.textureCacheId),i3.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},nA.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nA.prototype.name=null,nS.prototype.getChildByName=function(e,i){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===e)return this.children[r];if(i)for(r=0,n=this.children.length;r<n;r++){var s=this.children[r];if(s.getChildByName){var o=s.getChildByName(e,!0);if(o)return o}}return null},/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */nA.prototype.getGlobalPosition=function(e,i){return void 0===e&&(e=new ii),void 0===i&&(i=!1),this.parent?this.parent.toGlobal(this.position,e,i):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var lK=function(){function e(){}return e.init=function(e){var i=this;Object.defineProperty(this,"resizeTo",{set:function(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){i._resizeTo&&(i.cancelResize(),i._resizeId=requestAnimationFrame(function(){return i.resize()}))},this.cancelResize=function(){i._resizeId&&(cancelAnimationFrame(i._resizeId),i._resizeId=null)},this.resize=function(){if(i._resizeTo){var e,r;if(i.cancelResize(),i._resizeTo===globalThis.window)e=globalThis.innerWidth,r=globalThis.innerHeight;else{var n=i._resizeTo;e=n.clientWidth,r=n.clientHeight}i.renderer.resize(e,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e.extension=iT.Application,e}(),l0=function(){function e(i){var r,n=this;this.stage=new nS,i=Object.assign({forceCanvas:!1},i),this.renderer=(r=i,nl.create(r)),e._plugins.forEach(function(e){e.init.call(n,i)})}return e.registerPlugin=function(e){e2("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),iI.add({type:iT.Application,ref:e})},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(i,r){var n=this,s=e._plugins.slice(0);s.reverse(),s.forEach(function(e){e.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(i),this.renderer=null},e._plugins=[],e}();iI.handleByList(iT.Application,l0._plugins),iI.add(lK);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var l2=function(e,i){return(l2=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};function l1(e,i){function r(){this.constructor=e}l2(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var l4=function(e){function i(i,r,n,s){void 0===i&&(i=100),void 0===r&&(r=100),void 0===n&&(n=10),void 0===s&&(s=10);var o=e.call(this)||this;return o.segWidth=n,o.segHeight=s,o.width=i,o.height=r,o.build(),o}return l1(i,e),i.prototype.build=function(){for(var e=this.segWidth*this.segHeight,i=[],r=[],n=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,h=this.height/o,l=0;l<e;l++){var u=l%this.segWidth,c=l/this.segWidth|0;i.push(u*a,c*h),r.push(u/s,c/o)}var d=s*o;for(l=0;l<d;l++){var f=l%s,p=l/s|0,_=p*this.segWidth+f,g=p*this.segWidth+f+1,v=(p+1)*this.segWidth+f,y=(p+1)*this.segWidth+f+1;n.push(_,g,v,g,y,v)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},i}(lS),l3=function(e){function i(i,r,n){void 0===i&&(i=200),void 0===n&&(n=0);var s=e.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return s.points=r,s._width=i,s.textureScale=n,s.build(),s}return l1(i,e),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),i.prototype.build=function(){var e=this.points;if(e){var i=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(e.length<1)){i.data.length/4!==e.length&&(i.data=new Float32Array(4*e.length),r.data=new Float32Array(4*e.length),n.data=new Uint16Array(6*(e.length-1)));var s=r.data,o=n.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var a=0,h=e[0],l=this._width*this.textureScale,u=e.length,c=0;c<u;c++){var d=4*c;if(this.textureScale>0){var f=h.x-e[c].x,p=h.y-e[c].y,_=Math.sqrt(f*f+p*p);h=e[c],a+=_/l}else a=c/(u-1);s[d]=a,s[d+1]=0,s[d+2]=a,s[d+3]=1}var g=0;for(c=0;c<u-1;c++)d=2*c,o[g++]=d,o[g++]=d+1,o[g++]=d+2,o[g++]=d+2,o[g++]=d+1,o[g++]=d+3;r.update(),n.update(),this.updateVertices()}}},i.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var i,r=e[0],n=0,s=0,o=this.buffers[0].data,a=e.length,h=0;h<a;h++){var l=e[h],u=4*h;s=-((i=h<e.length-1?e[h+1]:l).x-r.x);var c=Math.sqrt((n=i.y-r.y)*n+s*s),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=c,s/=c,n*=d,s*=d,o[u]=l.x+n,o[u+1]=l.y+s,o[u+2]=l.x-n,o[u+3]=l.y-s,r=l}this.buffers[0].update()}},i.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},i}(lS);!function(e){function i(i,r,n){void 0===n&&(n=0);var s=this,o=new l3(i.height,r,n),a=new lw(i);return n>0&&(i.baseTexture.wrapMode=eM.REPEAT),(s=e.call(this,o,a)||this).autoUpdate=!0,s}l1(i,e),i.prototype._render=function(i){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),e.prototype._render.call(this,i)}}(lE);var l6=function(e){function i(i,r,n){var s=this,o=new l4(i.width,i.height,r,n),a=new lw(i3.WHITE);return(s=e.call(this,o,a)||this).texture=i,s.autoResize=!0,s}return l1(i,e),i.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,i=this.shader.texture,r=i.width,n=i.height;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(i.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),i.prototype._render=function(i){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,i)},i.prototype.destroy=function(i){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,i)},i}(lE);!function(e){function i(i,r,n,s,o){void 0===i&&(i=i3.EMPTY);var a=this,h=new lS(r,n,s);h.getBuffer("aVertexPosition").static=!1;var l=new lw(i);return(a=e.call(this,h,l,null,o)||this).autoUpdate=!0,a}l1(i,e),Object.defineProperty(i.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),i.prototype._render=function(i){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,i)}}(lE),function(e){function i(i,r,n,s,o){void 0===r&&(r=10),void 0===n&&(n=10),void 0===s&&(s=10),void 0===o&&(o=10);var a=e.call(this,i3.WHITE,4,4)||this;return a._origWidth=i.orig.width,a._origHeight=i.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=s,a._topHeight=n,a._bottomHeight=o,a.texture=i,a}l1(i,e),i.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(i.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),i.prototype.updateHorizontalVertices=function(){var e=this.vertices,i=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height},i.prototype.updateVerticalVertices=function(){var e=this.vertices,i=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width},i.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight;return Math.min(i,this._height>r?1:this._height/r)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),i.prototype._refresh=function(){var e=this.texture,i=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,n=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=r*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-r*this._rightWidth,i[9]=i[11]=i[13]=i[15]=n*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(l6);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var l8=function(e,i){return(l8=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])})(e,i)};function l5(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function l7(e){return function i(r){return 0==arguments.length||l5(r)?i:e.apply(this,arguments)}}function l9(e){return function i(r,n){switch(arguments.length){case 0:return i;case 1:return l5(r)?i:l7(function(i){return e(r,i)});default:return l5(r)&&l5(n)?i:l5(r)?l7(function(i){return e(i,n)}):l5(n)?l7(function(i){return e(r,i)}):e(r,n)}}}function ut(e,i){switch(e){case 0:return function(){return i.apply(this,arguments)};case 1:return function(e){return i.apply(this,arguments)};case 2:return function(e,r){return i.apply(this,arguments)};case 3:return function(e,r,n){return i.apply(this,arguments)};case 4:return function(e,r,n,s){return i.apply(this,arguments)};case 5:return function(e,r,n,s,o){return i.apply(this,arguments)};case 6:return function(e,r,n,s,o,a){return i.apply(this,arguments)};case 7:return function(e,r,n,s,o,a,h){return i.apply(this,arguments)};case 8:return function(e,r,n,s,o,a,h,l){return i.apply(this,arguments)};case 9:return function(e,r,n,s,o,a,h,l,u){return i.apply(this,arguments)};case 10:return function(e,r,n,s,o,a,h,l,u,c){return i.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ue(e){return function i(r,n,s){switch(arguments.length){case 0:return i;case 1:return l5(r)?i:l9(function(i,n){return e(r,i,n)});case 2:return l5(r)&&l5(n)?i:l5(r)?l9(function(i,r){return e(i,n,r)}):l5(n)?l9(function(i,n){return e(r,i,n)}):l7(function(i){return e(r,n,i)});default:return l5(r)&&l5(n)&&l5(s)?i:l5(r)&&l5(n)?l9(function(i,r){return e(i,r,s)}):l5(r)&&l5(s)?l9(function(i,r){return e(i,n,r)}):l5(n)&&l5(s)?l9(function(i,n){return e(r,i,n)}):l5(r)?l7(function(i){return e(i,n,s)}):l5(n)?l7(function(i){return e(r,i,s)}):l5(s)?l7(function(i){return e(r,n,i)}):e(r,n,s)}}}!function(e){function i(i,r){void 0===r&&(r=!0);var n=e.call(this,i[0]instanceof i3?i[0]:i[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=i,n}(function(e,i){function r(){this.constructor=e}l8(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)})(i,e),i.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(iO.shared.remove(this.update,this),this._isConnectedToTicker=!1))},i.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(iO.shared.add(this.update,this,iP.HIGH),this._isConnectedToTicker=!0))},i.prototype.gotoAndStop=function(e){this.stop();var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(e){var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(e){if(this._playing){var i=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=i/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},i.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},i.prototype.destroy=function(i){this.stop(),e.prototype.destroy.call(this,i),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},i.fromFrames=function(e){for(var r=[],n=0;n<e.length;++n)r.push(i3.from(e[n]));return new i(r)},i.fromImages=function(e){for(var r=[],n=0;n<e.length;++n)r.push(i3.from(e[n]));return new i(r)},Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof i3)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(iO.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(iO.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(hZ),/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */iI.add(o9,ah,ao,hg,lu,ny,lv,lU,a6,hu,hc,ld,iD,aG);var ui=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)},ur=function(){return this.xf["@@transducer/init"]()};function un(e){for(var i,r=[];!(i=e.next()).done;)r.push(i.value);return r}function us(e,i,r){for(var n=0,s=r.length;n<s;){if(e(i,r[n]))return!0;n+=1}return!1}function uo(e,i){return Object.prototype.hasOwnProperty.call(i,e)}var ua="function"==typeof Object.is?Object.is:function(e,i){return e===i?0!==e||1/e==1/i:e!=e&&i!=i},uh=Object.prototype.toString,ul=function(){return"[object Arguments]"===uh.call(arguments)?function(e){return"[object Arguments]"===uh.call(e)}:function(e){return uo("callee",e)}}(),uu=!({toString:null}).propertyIsEnumerable("toString"),uc=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ud=function(){return arguments.propertyIsEnumerable("length")}(),uf=function(e,i){for(var r=0;r<e.length;){if(e[r]===i)return!0;r+=1}return!1},up="function"!=typeof Object.keys||ud?l7(function(e){if(Object(e)!==e)return[];var i,r,n=[],s=ud&&ul(e);for(i in e)!uo(i,e)||s&&"length"===i||(n[n.length]=i);if(uu)for(r=uc.length-1;r>=0;)uo(i=uc[r],e)&&!uf(n,i)&&(n[n.length]=i),r-=1;return n}):l7(function(e){return Object(e)!==e?[]:Object.keys(e)}),u_=l7(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function um(e,i,r,n){var s=un(e);function o(e,i){return ug(e,i,r.slice(),n.slice())}return!us(function(e,i){return!us(o,i,e)},un(i),s)}function ug(e,i,r,n){if(ua(e,i))return!0;var s,o=u_(e);if(o!==u_(i))return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof i["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](i)&&"function"==typeof i["fantasy-land/equals"]&&i["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof i.equals)return"function"==typeof e.equals&&e.equals(i)&&"function"==typeof i.equals&&i.equals(e);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(null==(s=String(e.constructor).match(/^function (\w*)/))?"":s[1]))return e===i;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof i||!ua(e.valueOf(),i.valueOf()))return!1;break;case"Date":if(!ua(e.valueOf(),i.valueOf()))return!1;break;case"Error":return e.name===i.name&&e.message===i.message;case"RegExp":if(e.source!==i.source||e.global!==i.global||e.ignoreCase!==i.ignoreCase||e.multiline!==i.multiline||e.sticky!==i.sticky||e.unicode!==i.unicode)return!1}for(var a=r.length-1;a>=0;){if(r[a]===e)return n[a]===i;a-=1}switch(o){case"Map":return e.size===i.size&&um(e.entries(),i.entries(),r.concat([e]),n.concat([i]));case"Set":return e.size===i.size&&um(e.values(),i.values(),r.concat([e]),n.concat([i]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var h=up(e);if(h.length!==up(i).length)return!1;var l=r.concat([e]),u=n.concat([i]);for(a=h.length-1;a>=0;){var c=h[a];if(!uo(c,i)||!ug(i[c],e[c],l,u))return!1;a-=1}return!0}var uv=l9(function(e,i){return ug(e,i,[],[])});function uy(e){return"[object Object]"===Object.prototype.toString.call(e)}function ub(e){return"[object String]"===Object.prototype.toString.call(e)}var ux=l7(function(e){return!!ui(e)||!!e&&"object"==typeof e&&!ub(e)&&(0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}),uT="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",uA=l9(function(e,i){return ut(e.length,function(){return e.apply(i,arguments)})}),uE=(u=function(e,i,r){for(var n=0,s=r.length;n<s;){if((i=e["@@transducer/step"](i,r[n]))&&i["@@transducer/reduced"]){i=i["@@transducer/value"];break}n+=1}return e["@@transducer/result"](i)},c=function(e,i,r,n){return e["@@transducer/result"](r[n](uA(e["@@transducer/step"],e),i))},d=function(e,i,r){for(var n=r.next();!n.done;){if((i=e["@@transducer/step"](i,n.value))&&i["@@transducer/reduced"]){i=i["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](i)},function(e,i,r){if(ux(r))return u(e,i,r);if(null==r)return i;if("function"==typeof r["fantasy-land/reduce"])return c(e,i,r,"fantasy-land/reduce");if(null!=r[uT])return d(e,i,r[uT]());if("function"==typeof r.next)return d(e,i,r);if("function"==typeof r.reduce)return c(e,i,r,"reduce");throw TypeError("reduce: list must be array or iterable")}),uw=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,i){return this.f(e,i)},e}(),uS=l7(function(e){return null==e});function uP(e,i,r){if(r||(r=new uM),n=typeof e,null==e||"object"!=n&&"function"!=n)return e;var n,s=function(i){var n=r.get(e);if(n)return n;for(var s in r.set(e,i),e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i};switch(u_(e)){case"Object":return s(Object.create(Object.getPrototypeOf(e)));case"Array":return s([]);case"Date":return new Date(e.valueOf());case"RegExp":return new RegExp(e.source,e.flags?e.flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.dotAll?"s":""));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var uM=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(e,i){let r=this.hash(e),n=this.map[r];n||(this.map[r]=n=[]),n.push([e,i]),this.length+=1},e.prototype.hash=function(e){let i=[];for(var r in e)i.push(Object.prototype.toString.call(e[r]));return i.join()},e.prototype.get=function(e){if(this.length<=180){for(let i in this.map){let r=this.map[i];for(let i=0;i<r.length;i+=1){let n=r[i];if(n[0]===e)return n[1]}}return}let i=this.hash(e),r=this.map[i];if(r)for(let i=0;i<r.length;i+=1){let n=r[i];if(n[0]===e)return n[1]}},e}(),uI=function(){function e(e,i,r,n){this.valueFn=e,this.valueAcc=i,this.keyFn=r,this.xf=n,this.inputs={}}return e.prototype["@@transducer/init"]=ur,e.prototype["@@transducer/result"]=function(e){var i;for(i in this.inputs)if(uo(i,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[i]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,i){var r=this.keyFn(i);return this.inputs[r]=this.inputs[r]||[r,uP(this.valueAcc)],this.inputs[r][1]=this.valueFn(this.inputs[r][1],i),e},e}(),uC=function e(i,r,n){return function(){for(var s,o=[],a=0,h=i,l=0,u=!1;l<r.length||a<arguments.length;)l<r.length&&(!l5(r[l])||a>=arguments.length)?s=r[l]:(s=arguments[a],a+=1),o[l]=s,l5(s)?u=!0:h-=1,l+=1;return!u&&h<=0?n.apply(this,o):ut(Math.max(0,h),e(i,o,n))}}(4,[],(f=[],p=function(e,i,r){return function(n){return new uI(e,i,r,n)}},_=function(e,i,r,n){return uE(new uw(function(n,s){var o=r(s),a=e(uo(o,n)?n[o]:uP(i),s);return a&&a["@@transducer/reduced"]?n&&n["@@transducer/reduced"]?n:{"@@transducer/value":n,"@@transducer/reduced":!0}:(n[o]=a,n)}),{},n)},function(){if(0==arguments.length)return _();var e=arguments[arguments.length-1];if(!ui(e)){for(var i=0;i<f.length;){if("function"==typeof e[f[i]])return e[f[i]].apply(e,Array.prototype.slice.call(arguments,0,-1));i+=1}if(null!=e&&"function"==typeof e["@@transducer/step"])return p.apply(null,Array.prototype.slice.call(arguments,0,-1))(e)}return _.apply(this,arguments)})),uR=l9(function(e,i){return null==i||i!=i?e:i}),uO=l7(function(e){var i;return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():ui(e)?[]:ub(e)?"":uy(e)?{}:ul(e)?function(){return arguments}():"[object Uint8ClampedArray]"===(i=Object.prototype.toString.call(e))||"[object Int8Array]"===i||"[object Uint8Array]"===i||"[object Int16Array]"===i||"[object Uint16Array]"===i||"[object Int32Array]"===i||"[object Uint32Array]"===i||"[object Float32Array]"===i||"[object Float64Array]"===i||"[object BigInt64Array]"===i||"[object BigUint64Array]"===i?e.constructor.from(""):void 0}),uD=l9((g="groupBy",v=uC(function(e,i){return e.push(i),e},[]),function(){var e=arguments.length;if(0===e)return v();var i=arguments[e-1];return ui(i)||"function"!=typeof i[g]?v.apply(this,arguments):i[g].apply(i,Array.prototype.slice.call(arguments,0,e-1))})),u$=function(e,i){switch(arguments.length){case 0:return u$;case 1:return function i(r){return 0==arguments.length?i:ua(e,r)};default:return ua(e,i)}},uL="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1,n=arguments.length;r<n;){var s=arguments[r];if(null!=s)for(var o in s)uo(o,s)&&(i[o]=s[o]);r+=1}return i},uF=l9(function(e,i){return i instanceof e||null!=i&&(i.constructor===e||"Object"===e.name&&"object"==typeof i)}),uB=l7(function(e){return null!=e&&uv(e,uO(e))}),uk=l7(function(e){return uL.apply(null,[{}].concat(e))}),uN=ue(function(e,i,r){var n,s={};for(n in r=r||{},i=i||{})uo(n,i)&&(s[n]=uo(n,r)?e(n,i[n],r[n]):i[n]);for(n in r)uo(n,r)&&!uo(n,s)&&(s[n]=r[n]);return s}),uU=ue(function e(i,r,n){return uN(function(r,n,s){return uy(n)&&uy(s)?e(i,n,s):i(r,n,s)},r,n)}),uG=ue(function(e,i,r){return uU(function(i,r,n){return e(r,n)},i,r)});class uX{static mixin(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];for(let i of r)for(let r of Object.getOwnPropertyNames(i.prototype))e.prototype.hasOwnProperty(r)||Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(i.prototype,r));return e}static mixinProperty(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(!e)return e;for(let i of r)if(i)for(let r of Object.keys(i))e[r]=i[r];return e}static isNotValid(e){return uS(e)||u$(e,NaN)||uB(e)}static isValid(e){return!uX.isNotValid(e)}static random(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e>i&&(i=e);let n=Math.random()*(i-e)+e;return"floor"===r?Math.floor(n):"ceil"===r?Math.ceil(n):n}static groupBy(e,i){return uD(e)(i)}static is(e,i){return uF(e,i)}static mergeAll(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return uk(i)}static mergeDeepWith(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];let n={};for(let e of i)n=uG(s,n,e);return n;function s(e,i){return uF(Array,e)&&uF(Array,i)?e.concat(i):i}}static T(){return!0}static F(){return!1}static clamp(e,i,r){return e>i&&(i=e),r<e?e:r>i?i:r}static defaultTo(e,i){return uR(e,i)}static sayHello(){console.log("\n%c\uD83C\uDF89\uD83C\uDF89\uD83C\uDF89%c  wl-live2d v1.0.4 -  !!  %c\uD83C\uDF89\uD83C\uDF89\uD83C\uDF89%c\n\n",...["background: linear-gradient(to right, #ff00cc, #ffcc00);padding: 8px 30px;font-size: 1em;","background: linear-gradient(to right, #ff4fa9, #ffa233) text, linear-gradient(to right, #ffcc00, #6fff66, #00ffcc) border-box;color: transparent;padding: 8px 30px;font-size: 1em;","background: linear-gradient(to right, #00ffcc, #ff00cc);padding: 8px 30px;font-size: 1em;",""])}}class uV{}uV.init=Symbol("init"),uV.destroy=Symbol("destroy"),uV.modelStart=Symbol("model-start"),uV.modelLoaded=Symbol("model-loaded"),uV.modelError=Symbol("model-error"),uV.fadeStart=Symbol("fade-start"),uV.fadeEnd=Symbol("fade-end"),uV.fadeCancel=Symbol("fade-cancel"),uV.motionStart=Symbol("motion-start"),uV.motionFinish=Symbol("motion-finish");class uH{get live2d(){return this._live2d}get options(){return this._live2d.data}get app(){return this._live2d.app}get event(){return this._live2d.event}get ref(){return this._live2d.ref}init(){}destroy(){this.event.removeListener(uV.init,this.destroy,this),this.event.removeListener(uV.destroy,this.destroy,this)}constructor(e){if(uX.isNotValid(e))throw Error("live2d is not valid");this._live2d=e,this._live2d.event.once(uV.init,this.init,this),this._live2d.event.once(uV.destroy,this.destroy,this)}}var uj=Math.pow;let uY=new is;class uz extends hY{init(){let e=this.parent.internalModel,i=new h0({fontSize:24,fill:"#ffffff",stroke:"#000000",strokeThickness:4});this.texts=Object.keys(e.hitAreas).map(e=>{let r=new h5(e,i);return r.visible=!1,this.addChild(r),r})}onPointerMove(e){let i=this.parent.hitTest(e.data.global.x,e.data.global.y);this.texts.forEach(e=>{e.visible=i.includes(e.text)})}_render(e){let i=this.parent.internalModel,r=1/Math.sqrt(uj(this.transform.worldTransform.a,2)+uj(this.transform.worldTransform.b,2));this.texts.forEach(e=>{this.lineStyle({width:this.strokeWidth*r,color:e.visible?this.activeColor:this.normalColor});let n=i.getDrawableBounds(i.hitAreas[e.text].index,uY),s=i.localTransform;n.x=n.x*s.a+s.tx,n.y=n.y*s.d+s.ty,n.width=n.width*s.a,n.height=n.height*s.d,this.drawRect(n.x,n.y,n.width,n.height),e.x=n.x+this.strokeWidth*r,e.y=n.y+this.strokeWidth*r,e.scale.set(r)}),super._render(e),this.clear()}constructor(){super(),this.initialized=!1,this.texts=[],this.strokeWidth=4,this.normalColor=14883354,this.activeColor=2017330,this.interactive=!0,this.on("added",this.init).on("pointermove",this.onPointerMove)}}class uW{constructor(e=null){var i,r,n,s;uX.mixinProperty(this,e),this.condition=null!==(i=null==e?void 0:e.condition)&&void 0!==i?i:uX.T,this.text=null!==(r=null==e?void 0:e.text)&&void 0!==r?r:"",this.priority=null!==(n=null==e?void 0:e.priority)&&void 0!==n?n:uW.priority,this.type=null!==(s=null==e?void 0:e.type)&&void 0!==s?s:null}}uW.priority=2;class uq{constructor(e=null){var i,r,n,s,o,a,h,l,u;uX.mixinProperty(this,e),this.path=null!==(i=null==e?void 0:e.path)&&void 0!==i?i:"",this.volume=null!==(r=null==e?void 0:e.volume)&&void 0!==r?r:.5,this.scale=null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1,this.rotate=null!==(s=null==e?void 0:e.rotate)&&void 0!==s?s:0,this.position=null!==(o=null==e?void 0:e.position)&&void 0!==o?o:{x:0,y:0},this.backgroundColor=null!==(a=null==e?void 0:e.backgroundColor)&&void 0!==a?a:"transparent",this.width=null!==(h=null==e?void 0:e.width)&&void 0!==h?h:null,this.height=null!==(l=null==e?void 0:e.height)&&void 0!==l?l:null,this.motionPreload=null!==(u=null==e?void 0:e.motionPreload)&&void 0!==u?u:nX.NONE}}class uZ{constructor(e=null){var i,r,n,s,o,a,h,l,u,c,d,f;uX.mixinProperty(this,e),this.sayHello=null===(i=null==e?void 0:e.sayHello)||void 0===i||i,this.transitionTime=null!==(r=null==e?void 0:e.transitionTime)&&void 0!==r?r:500,this.models=null!==(n=null==e?void 0:e.models)&&void 0!==n?n:[],this.tips=null!==(s=null==e?void 0:e.tips)&&void 0!==s?s:null,this.menus=null!==(o=null==e?void 0:e.menus)&&void 0!==o?o:["home","switchModule","switchTexture","capture","info","quit"],this.selector=null!==(a=null==e?void 0:e.selector)&&void 0!==a?a:"",this.fixed=null===(h=null==e?void 0:e.fixed)||void 0===h||h,this.plugins=null!==(l=null==e?void 0:e.plugins)&&void 0!==l?l:[],this.drag=null===(u=null==e?void 0:e.drag)||void 0===u||u,this.homePath=null!==(c=null==e?void 0:e.homePath)&&void 0!==c?c:"",this.hitFrame=null!==(d=null==e?void 0:e.hitFrame)&&void 0!==d&&d,this.dockedRight=null===(f=null==e?void 0:e.dockedRight)||void 0===f||f}}class uQ{constructor(e=null){var i,r,n,s,o,a;this.parent=null!==(i=null==e?void 0:e.parent)&&void 0!==i?i:document.body,this.wrapper=null!==(r=null==e?void 0:e.wrapper)&&void 0!==r?r:document.createElement("div"),this.canvas=null!==(n=null==e?void 0:e.canvas)&&void 0!==n?n:document.createElement("canvas"),this.tips=null!==(s=null==e?void 0:e.tips)&&void 0!==s?s:document.createElement("div"),this.menus=null!==(o=null==e?void 0:e.menus)&&void 0!==o?o:document.createElement("div"),this.other=null!==(a=null==e?void 0:e.other)&&void 0!==a?a:document.createElement("div")}}class uJ{constructor(e=null){var i,r,n,s,o,a,h,l,u,c,d,f;uX.mixinProperty(this,e),this.minWidth=null!==(i=null==e?void 0:e.minWidth)&&void 0!==i?i:230,this.minHeight=null!==(r=null==e?void 0:e.minHeight)&&void 0!==r?r:100,this.offsetX=null!==(n=null==e?void 0:e.offsetX)&&void 0!==n?n:0,this.offsetY=null!==(s=null==e?void 0:e.offsetY)&&void 0!==s?s:0,this.duration=null!==(o=null==e?void 0:e.duration)&&void 0!==o?o:3e3,this.interval=null!==(a=null==e?void 0:e.interval)&&void 0!==a?a:5e3,this.message=null!==(h=null==e?void 0:e.message)&&void 0!==h?h:[],this.drag=null===(l=null==e?void 0:e.drag)||void 0===l||l,this.talk=null===(u=null==e?void 0:e.talk)||void 0===u||u,this.talkInterval=null!==(c=null==e?void 0:e.talkInterval)&&void 0!==c?c:3e4,this.talkApis=null!==(d=null==e?void 0:e.talkApis)&&void 0!==d?d:[],this.motionMessage=null===(f=null==e?void 0:e.motionMessage)||void 0===f||f}}class uK extends uH{get data(){return this._data}get modelId(){return this._modelId}set modelId(e){this._modelId=uX.clamp(0,this._data.length-1,e),localStorage.setItem("model-id","".concat(this._modelId))}get textureId(){return this._textureId}set textureId(e){this._textureId=uX.clamp(0,this.textureMaxIndex,e),localStorage.setItem("texture-id","".concat(this._textureId))}get textureMaxIndex(){let e=this.modelData;return uX.is(Array,e)?e.length-1:0}get model(){return this._model}get modelData(){return this._data[this.modelId]}get currentMotion(){return this._currentMotion}get backgroundColor(){var e;let i=this.modelData;return uX.is(Array,i)&&(i=i[this.textureId]),null!==(e=null==i?void 0:i.backgroundColor)&&void 0!==e?e:"transparent"}constructor(){super(...arguments),this._hitAreaFrames=null,this._modelId=0,this._textureId=0,this._model=null,this._currentMotion=null}}class u0 extends uK{init(){this.loadModel(this.modelId,this.textureId).catch(uX.F)}destroy(){var e;super.destroy(),null===(e=this._model)||void 0===e||e.destroy(),this._model=null,this._currentMotion=null}async loadModel(e){var i,r,n,s,o,a;let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=this.app.stage,u=this.event,c=this.data[e];if(c=uX.is(Array,c)?c[h]:c,uX.isNotValid(c))return void u.emit(uV.modelError,Error(""));u.emit(uV.modelStart);let d=c.path;uX.isNotValid(d)&&(d="https://fastly.jsdelivr.net/gh/guansss/pixi-live2d-display/test/assets/shizuku/shizuku.model.json");let f=await window.ILive2DModel.from(d,{motionPreload:c.motionPreload,crossOrigin:"anonymous"}).catch(e=>e);if(uX.is(Error,f))return u.emit(uV.modelError,f),u.emit(uV.modelLoaded,null),void await this.live2d.tips.notify(f.message);this._model=f,l.removeChildren(0,l.children.length),this.modelId=e,this.textureId=h,f.x=null!==(n=null===(i=c.position)||void 0===i?void 0:i.x)&&void 0!==n?n:0,f.y=null!==(s=null===(r=c.position)||void 0===r?void 0:r.y)&&void 0!==s?s:0,f.scale.set(.15*(null!==(o=c.scale)&&void 0!==o?o:1)),f.rotation=null!==(a=c.rotate)&&void 0!==a?a:0,c.width&&(f.width=c.width),c.height&&(f.height=c.height),this._bindMotion(f),l.addChild(f),u.emit(uV.modelLoaded,f)}async switchModel(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.live2d.stage;await r.fadeOut(r.canvas),await this.loadModel(e,i),await r.fadeIn(r.canvas)}async nextModel(){let e=this._data.length-1;e<=0?await this.live2d.tips.notify(""):await this.switchModel(this.modelId>=e?0:this.modelId+1,0)}async nextTexture(){let e=this.textureMaxIndex;e<=0?await this.live2d.tips.notify(""):await this.switchModel(this.modelId,this.textureId>=e?0:this.textureId+1)}async resetModel(){await this.loadModel(this.modelId,this.textureId)}showHitAreaFrames(){null!=this._model&&(null==this._hitAreaFrames&&(this._hitAreaFrames=new uz),this._hitAreaFrames.visible=!0,this.model.addChild(this._hitAreaFrames))}hiddenHitAreaFrames(){var e;null!=this._hitAreaFrames&&(this._hitAreaFrames.visible=!1,null===(e=this.model)||void 0===e||e.removeChild(this._hitAreaFrames))}onModelHit(e,i){var r,n;let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s?null===(r=this.model)||void 0===r||r.once("hit",e,i):null===(n=this.model)||void 0===n||n.on("hit",e,i)}_bindMotion(e){e.on("hit",async i=>{i.find(e=>/head/i.test(e))&&await e.expression()});let i=e.internalModel.motionManager;return i.on("motionStart",(e,i,r)=>{var n;let s=this.modelData;r&&uX.is(uq,s)&&(r.volume=null!==(n=s.volume)&&void 0!==n?n:.5),this._currentMotion=e,this.event.emit(uV.motionStart,e,i,r)}),i.on("motionFinish",()=>{this._currentMotion=null,this.event.emit(uV.motionFinish)}),this}constructor(e,i=[]){var r,n;super(e);let s=e=>uX.is(Array,e)?e.map(s):new uq(e);this._data=uX.is(Array,i)?i.map(s):[],this.modelId=uX.defaultTo(0,parseInt(null!==(r=localStorage.getItem("model-id"))&&void 0!==r?r:"")),this.textureId=uX.defaultTo(0,parseInt(null!==(n=localStorage.getItem("texture-id"))&&void 0!==n?n:""))}}var u2={exports:{}};!function(e){var i=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,i,r){this.fn=e,this.context=i,this.once=r||!1}function o(e,i,n,o,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var h=new s(n,o||e,a),l=r?r+i:i;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],h]:e._events[l].push(h):(e._events[l]=h,e._eventsCount++),e}function a(e,i){0==--e._eventsCount?e._events=new n:delete e._events[i]}function h(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),h.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)i.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},h.prototype.listeners=function(e){var i=r?r+e:e,n=this._events[i];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=Array(o);s<o;s++)a[s]=n[s].fn;return a},h.prototype.listenerCount=function(e){var i=r?r+e:e,n=this._events[i];return n?n.fn?1:n.length:0},h.prototype.emit=function(e,i,n,s,o,a){var h=r?r+e:e;if(!this._events[h])return!1;var l,u,c=this._events[h],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,i),!0;case 3:return c.fn.call(c.context,i,n),!0;case 4:return c.fn.call(c.context,i,n,s),!0;case 5:return c.fn.call(c.context,i,n,s,o),!0;case 6:return c.fn.call(c.context,i,n,s,o,a),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,i);break;case 3:c[u].fn.call(c[u].context,i,n);break;case 4:c[u].fn.call(c[u].context,i,n,s);break;default:if(!l)for(f=1,l=Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},h.prototype.on=function(e,i,r){return o(this,e,i,r,!1)},h.prototype.once=function(e,i,r){return o(this,e,i,r,!0)},h.prototype.removeListener=function(e,i,n,s){var o=r?r+e:e;if(!this._events[o])return this;if(!i)return a(this,o),this;var h=this._events[o];if(h.fn)h.fn!==i||s&&!h.once||n&&h.context!==n||a(this,o);else{for(var l=0,u=[],c=h.length;l<c;l++)(h[l].fn!==i||s&&!h[l].once||n&&h[l].context!==n)&&u.push(h[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},h.prototype.removeAllListeners=function(e){var i;return e?(i=r?r+e:e,this._events[i]&&a(this,i)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,e.exports=h}(u2);var u1=X(u2.exports),u4={models:[{path:"https://fastly.jsdelivr.net/gh/Eikanya/Live2d-model/%E5%B4%A9%E5%9D%8F%E5%AD%A6%E5%9B%AD2/yiselin/model.json",scale:.7},{path:"https://fastly.jsdelivr.net/gh/Eikanya/Live2d-model/%E5%B0%91%E5%A5%B3%E5%89%8D%E7%BA%BF%20girls%20Frontline/live2dold/old/kp31/normal/model.json",scale:.5}],tips:{message:[{text:""},{text:""},{text:""},{text:""},{text:""},{text:"~"},{text:""},{text:""},{text:""},{type:"seasons",date:"01/01",text:"<span></span>{year}"},{type:"seasons",date:"02/14",text:"<span></span>{year}"},{type:"seasons",date:"03/08",text:"<span></span>"},{type:"seasons",date:"03/12",text:"<span></span>"},{type:"seasons",date:"04/01",text:"<span></span>"},{type:"seasons",date:"05/01",text:"<span></span>"},{type:"seasons",date:"06/01",text:"<span></span>"},{type:"seasons",date:"09/03",text:"<span></span>"},{type:"seasons",date:"09/10",text:"<span></span>"},{type:"seasons",date:"10/01",text:"<span></span>"},{type:"seasons",date:"11/05-11/12",text:"<span></span>"},{type:"seasons",date:"12/20-12/31",text:"<span></span>"},{type:"hour",hour:"6-7",text:""},{type:"hour",hour:"8-11",text:""},{type:"hour",hour:"12-13",text:""},{type:"hour",hour:"14-17",text:["","~"]},{type:"hour",hour:"18-19",text:["","~"]},{type:"hour",hour:"20-21",text:""},{type:"hour",hour:"22-23",text:["",""]},{type:"hour",hour:"0-4",text:""},{type:"hour",hour:"0-5",text:""},{type:"event",event:"console",text:""},{type:"event",event:"copy",text:["~","~~"]},{type:"event",event:"visibilitychange",text:""}]},selector:""};class u3{get live2d(){return this._live2d}static setContext(e,i){e._live2d=i}install(){}uninstall(){}constructor(){this.name="",this.priority=0,this._live2d=null}}class u6 extends u3{install(){this.live2d.data.menus.includes(this.name)&&(this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._button.title="",this._button.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M220.6 121.2L271.1 96 448 96v96H333.2c-21.9-15.1-48.5-24-77.2-24s-55.2 8.9-77.2 24H64V128H192c9.9 0 19.7-2.3 28.6-6.8zM0 128V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H271.1c-9.9 0-19.7 2.3-28.6 6.8L192 64H160V48c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16l0 16C28.7 64 0 92.7 0 128zM344 304c0 48.6-39.4 88-88 88s-88-39.4-88-88s39.4-88 88-88s88 39.4 88 88z"></path></svg>\n    ',this._func=this.downloadImage.bind(this),this._button.addEventListener("click",this._func),this.live2d.stage.addMenu(this._button,this.priority))}uninstall(){var e;null===(e=this._button)||void 0===e||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._button),this._button=null}async downloadImage(){let{app:e}=this.live2d,i=e.renderer.plugins.extract.image(e.stage).getAttribute("src");await fetch(i).then(e=>e.blob()).then(e=>{var r;let n=document.createElement("a");n.download=null===(r=i.split("/").pop())||void 0===r?void 0:r.slice(0,40),n.href=URL.createObjectURL(e),document.body.appendChild(n),n.click(),document.body.removeChild(n)})}constructor(){super(...arguments),this.name="capture",this.priority=24,this._button=null,this._func=void 0}}class u8 extends u3{install(){this.live2d.data.drag&&(this._element=this.getDragElement(),this._startFun=this._start.bind(this),this._runFun=this._run.bind(this),this._endFun=this._end.bind(this),this._element.addEventListener("mousedown",this._startFun,{passive:!0}),this._element.addEventListener("touchstart",this._startFun,{passive:!0}))}uninstall(){var e,i;null===(e=this._element)||void 0===e||e.removeEventListener("mousedown",this._startFun),null===(i=this._element)||void 0===i||i.removeEventListener("touchstart",this._startFun),this._element=null}getDragElement(){return this.live2d.stage.wrapper}getWidthHeight(){return{width:Math.min(window.screen.width,window.visualViewport.width,window.innerWidth),height:Math.min(window.screen.height,window.visualViewport.height,window.innerHeight)}}_run(e){var i,r,n,s,o;let a=this._element.getBoundingClientRect(),h=null!==(s=null===(i=e.targetTouches)||void 0===i?void 0:i[0])&&void 0!==s?s:e,l=null!==(o=null===(n=this._event)||void 0===n?void 0:null===(r=n.targetTouches)||void 0===r?void 0:r[0])&&void 0!==o?o:this._event,u=h.screenX-l.screenX,c=h.screenY-l.screenY,d=this._screen.width-a.width,f=this._screen.height-a.height;this._event=e;let{classList:p,style:_}=this._element,g=uX.clamp(0,d,a.left+u),v=uX.clamp(0,f,f-a.top-c),y=g<=.5*d;y!==this._isLeft&&((this._isLeft=y)?p.remove("live2d-right"):p.add("live2d-right")),_.left="".concat(g,"px"),_.bottom="".concat(v,"px")}_end(){let e=this._element;e.removeEventListener("mousemove",this._runFun),e.removeEventListener("mouseup",this._endFun),e.removeEventListener("mouseout",this._endFun),e.removeEventListener("touchmove",this._runFun),e.removeEventListener("touchend",this._endFun),e.removeEventListener("touchcancel",this._endFun),e.classList.remove("live2d-drag")}_start(e){this._event=e,this._screen=this.getWidthHeight();let i=this._element;i.classList.add("live2d-drag"),i.addEventListener("mousemove",this._runFun,{passive:!0}),i.addEventListener("mouseup",this._endFun,{passive:!0}),i.addEventListener("mouseout",this._endFun,{passive:!0}),i.addEventListener("touchmove",this._runFun,{passive:!0}),i.addEventListener("touchend",this._endFun,{passive:!0}),i.addEventListener("touchcancel",this._endFun,{passive:!0})}constructor(){super(...arguments),this.name="drag",this._screen={width:0,height:0},this._isLeft=!0,this._element=null,this._event=null}}class u5 extends u8{install(){super.install(),this._element&&this._element.classList.add("live2d-cursor-default")}uninstall(){var e;null===(e=this._element)||void 0===e||e.classList.remove("live2d-cursor-default"),super.uninstall()}getDragElement(){return this.live2d.stage.tips}_start(e){e.stopPropagation(),super._start(e)}_run(e){var i,r,n,s,o;e.stopPropagation();let a=null!==(s=null===(i=e.targetTouches)||void 0===i?void 0:i[0])&&void 0!==s?s:e,h=null!==(o=null===(n=this._event)||void 0===n?void 0:null===(r=n.targetTouches)||void 0===r?void 0:r[0])&&void 0!==o?o:this._event,l=a.screenX-h.screenX,u=a.screenY-h.screenY,c=this._element.offsetTop+u,d=this._element.offsetLeft+l;this._event=e;let f=this._element.style;f.top="".concat(c,"px"),f.left="".concat(d,"px")}constructor(){super(...arguments),this.name="tipsDrag"}}class u7 extends u3{install(){this.live2d.data.menus.includes(this.name)&&(this._back=document.createElement("div"),this._back.className="live2d-menu-item live2d-flex-center",this._back.title="",this._back.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M 25 1.0507812 C 24.7825 1.0507812 24.565859 1.1197656 24.380859 1.2597656 L 1.3808594 19.210938 C 0.95085938 19.550938 0.8709375 20.179141 1.2109375 20.619141 C 1.5509375 21.049141 2.1791406 21.129062 2.6191406 20.789062 L 4 19.710938 L 4 46 C 4 46.55 4.45 47 5 47 L 19 47 L 19 29 L 31 29 L 31 47 L 45 47 C 45.55 47 46 46.55 46 46 L 46 19.710938 L 47.380859 20.789062 C 47.570859 20.929063 47.78 21 48 21 C 48.3 21 48.589063 20.869141 48.789062 20.619141 C 49.129063 20.179141 49.049141 19.550938 48.619141 19.210938 L 25.619141 1.2597656 C 25.434141 1.1197656 25.2175 1.0507812 25 1.0507812 z M 35 5 L 35 6.0507812 L 41 10.730469 L 41 5 L 35 5 z"></path></svg>\n    ',this._func=this.backToHome.bind(this),this._back.addEventListener("click",this._func),this.live2d.stage.addMenu(this._back,this.priority))}uninstall(){var e;null===(e=this._back)||void 0===e||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._back),this._back=null}backToHome(){let e=this.live2d.data.homePath;/https?:\/\//.test(e)||(e.startsWith("/")&&(e="/"+e),e=window.location.origin+e),window.location.assign(e)}constructor(){super(...arguments),this.name="home",this.priority=48,this._back=null,this._func=void 0}}class u9 extends u3{install(){this.live2d.data.menus.includes(this.name)&&(this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._button.title="",this._button.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"></path></svg>\n    ',this._button.addEventListener("click",this.openDocs),this.live2d.stage.addMenu(this._button,this.priority))}uninstall(){var e;null===(e=this._button)||void 0===e||e.removeEventListener("click",this.openDocs),this.live2d.stage.removeMenu(this._button),this._button=null}openDocs(){window.open("https://live2d.doc.nianian.cn/")}constructor(){super(...arguments),this.name="info",this.priority=16,this._button=null}}class ct extends u3{install(){for(let e of(this._messages=this.live2d.tips.messages,this._messages=this._messages.filter(this.isType.bind(this)),this._messages))e.condition=this.condition.bind(e),e.priority===uW.priority&&(e.priority=this.priority)}uninstall(){for(let e of this._messages)this.setDefault(e)}isType(e){var i;return this._type===(null!==(i=e.type)&&void 0!==i?i:null)&&e.condition===uX.T}condition(){return!0}setDefault(e){e.condition=uX.T,e.priority===this.priority&&(e.priority=uW.priority)}constructor(){super(...arguments),this.name="nullMessage",this.priority=2,this._type=null,this._messages=[]}}class ce extends ct{install(){super.install(),this.addListener()}uninstall(){super.uninstall(),this.removeListener()}isType(e){var i;return super.isType(e)&&this._event===(null!==(i=e.event)&&void 0!==i?i:null)}condition(){return!1}setDefault(e){super.setDefault(e),e.condition=uX.F}addListener(){}removeListener(){}async notify(){let e=this._messages;if(e.length<=0)return;let i,r=e[uX.random(0,e.length,"floor")];i=uX.is(Array,r.text)?r.text[uX.random(0,r.text.length,"floor")]:r.text,await this.live2d.tips.notify(i)}constructor(){super(...arguments),this.name="eventMessage",this.priority=18,this._type="event",this._event=null}}class ci extends ce{addListener(){var e;this._func=this.notify.bind(this),window.addEventListener("resize",this._func),null===(e=this._func)||void 0===e||e.call(this,null)}removeListener(){window.removeEventListener("resize",this._func)}async notify(){let e=this.isOpen();!this._open&&e&&await super.notify(),this._open=e}isOpen(){return window.outerWidth-window.innerWidth>30||window.outerHeight-window.innerHeight>140}constructor(){super(...arguments),this.name="consoleEventMessage",this._open=!1,this._event="console",this._func=void 0}}class cr extends ce{addListener(){this._func=this.notify.bind(this),window.addEventListener("copy",this._func)}removeListener(){window.removeEventListener("copy",this._func)}constructor(){super(...arguments),this.name="copyEventMessage",this._event="copy",this._func=void 0}}class cn extends ce{addListener(){let e=!0,i=this.live2d.stage.wrapper.classList,r=Object.getOwnPropertyDescriptor(i.__proto__,"add");this._prop=r;let n=this,s={configurable:null==r?void 0:r.configurable,enumerable:null==r?void 0:r.enumerable,writable:!0,value:function(){for(var s=arguments.length,o=Array(s),a=0;a<s;a++)o[a]=arguments[a];null==r||r.value.bind(i)(...o);let h=/live2d-opacity-1/.test(i.value);e?e=!h:(!n._show&&h&&n.notify().catch(uX.F),n._show=h)}};Object.defineProperty(i,"add",s)}removeListener(){Object.defineProperty(this.live2d.stage.wrapper.classList,"add",this._prop)}constructor(){super(...arguments),this.name="visibilityEventMessage",this._event="visibilitychange",this._show=!0,this._prop=null}}class cs extends ct{condition(){!0===this.once&&(this.condition=uX.F);let e=this.hour+"-",i=(new Date).getHours(),[r,n]=e.split("-",2).map(e=>parseInt(e));return!uX.isNotValid(r)&&(uX.isNotValid(n)?r===i:r<=i&&i<=n)}constructor(){super(...arguments),this.name="hourMessage",this._type="hour",this.priority=8}}class co extends u3{install(){this.live2d.tips.data.motionMessage&&this.live2d.event.on(uV.motionStart,this.motion,this)}uninstall(){this.live2d.event.off(uV.motionStart,this.motion,this)}async motion(e,i,r){var n,s,o;if(/idle/.test(e))return;let{tips:a,model:h}=this.live2d,l=h.model.internalModel.settings.json,u=(null==l?void 0:l.motions)||(null==l?void 0:null===(n=l.FileReferences)||void 0===n?void 0:n.Motions),c=null==u?void 0:null===(o=u[e])||void 0===o?void 0:null===(s=o[i])||void 0===s?void 0:s.text;if(uX.isNotValid(c))return;let d=a.duration,f=uX.isValid(r)?1e3*r.duration:d;a.data.duration=Math.max(f,d),await a.notify(c).finally(()=>a.data.duration=d)}constructor(){super(...arguments),this.name="motionMessage",this.priority=22}}class ca extends ct{condition(){!0===this.once&&(this.condition=uX.F);let e=new Date(this.date+""),i=e.getDate(),r=e.getMonth()+1;if(uX.isNotValid(i)||uX.isNotValid(r))return!1;let n=new Date;return i===n.getDate()&&r===n.getMonth()+1}constructor(){super(...arguments),this.name="seasonsMessage",this.priority=16,this._type="seasons"}}class ch extends u3{install(){let{talk:e,talkInterval:i,talkApis:r}=this.live2d.tips.data;e&&(this._message=new uW,this._message.condition=uX.F,this._message.priority=2*this.priority,this._message.type=this._type,this._talkApis=[{url:"https://v1.hitokoto.cn/",handle:async e=>(await e.json()).hitokoto},{url:"https://api.nnxv.cn/api/yiyan.php",handle:async e=>(await e.json()).content},{url:"https://tenapi.cn/v2/yiyan",handle:async e=>(await e.json()).msg}],r&&r.length<=0&&r.push(...this._talkApis),this._handler=setInterval(this.getTalkValue.bind(this),null!=i?i:3e4))}uninstall(){let{talkApis:e}=this.live2d.tips.data;for(let r of(this._handler&&clearInterval(this._handler),this._handler=null,this._message&&this.live2d.tips.removeMessage(this._message),this._message=null,this._talkApis)){var i;let n=null!==(i=null==e?void 0:e.indexOf(r))&&void 0!==i?i:-1;n>=0&&(null==e||e.splice(n,1))}}condition(e){return this.condition=uX.F,e.removeMessage(this),!0}async getTalkValue(){let{talkApis:e}=this.live2d.tips.data;try{for(let i of null!=e?e:[])try{let e=await fetch(i.url,i.init);if(!e.ok)continue;return this._message.text=await i.handle(e),this._message.condition=this.condition.bind(this._message,this.live2d.tips),void this.live2d.tips.addMessage(this._message)}catch(e){}}catch(e){}}constructor(){super(...arguments),this.name="sentenceMessage",this.priority=20,this._type="talk",this._message=null,this._handler=null,this._talkApis=[]}}class cl extends u3{install(){this.live2d.data.menus.includes(this.name)&&(this._quit=document.createElement("div"),this._quit.className="live2d-menu-item live2d-flex-center",this._quit.title="",this._quit.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path></svg>\n    ',this._show=document.createElement("div"),this._show.className="live2d-fixed live2d-toggle live2d-transition-all live2d-opacity-0 live2d-hidden",this._show.innerHTML="",this._hiddenFun=this.hiddenLive2d.bind(this),this._showFun=this.showLive2d.bind(this),this._quit.addEventListener("click",this._hiddenFun),this._show.addEventListener("click",this._showFun),this.live2d.stage.addMenu(this._quit,this.priority),document.body.appendChild(this._show))}uninstall(){var e,i,r;null===(e=this._quit)||void 0===e||e.removeEventListener("click",this._hiddenFun),null===(i=this._show)||void 0===i||i.removeEventListener("click",this._showFun),this.live2d.stage.removeMenu(this._quit),null===(r=this._show)||void 0===r||r.remove(),this._quit=null,this._show=null}hiddenLive2d(){this.isRight()&&!this._show.classList.contains("live2d-right")&&this._show.classList.add("live2d-right"),this.live2d.stage.fadeOut(null).catch(uX.F),this.live2d.stage.fadeIn(this._show).catch(uX.F)}showLive2d(){let{stage:e,model:i}=this.live2d;e.wrapper.classList.remove("live2d-hidden"),i.resetModel().then(()=>{e.fadeIn(e.wrapper).catch(uX.F),e.fadeOut(this._show).catch(uX.F)})}isRight(){return this.live2d.stage.isRight()}constructor(){super(...arguments),this.name="quit",this.priority=0,this._quit=null,this._show=null,this._hiddenFun=void 0,this._showFun=void 0}}class cu extends u3{install(){this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._loading=document.createElement("div"),this._loading.className="live2d-fixed live2d-toggle live2d-transition-all live2d-opacity-0 live2d-hidden",this._loading.innerHTML="",this._func=this.startSwitch.bind(this),this._button.addEventListener("click",this._func),this.live2d.stage.addMenu(this._button,this.priority)}uninstall(){var e;null===(e=this._button)||void 0===e||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._button),this._button=null,this._loading=null}async startSwitch(){if(!this.showLoading())return await this.switch();let e=this.live2d.stage;e.isRight()?this._loading.classList.add("live2d-right"):this._loading.classList.remove("live2d-right"),e.other.appendChild(this._loading),await Promise.all([this.switch(),e.fadeIn(this._loading)]),await e.fadeOut(this._loading),e.other.removeChild(this._loading)}showLoading(){return!0}async switch(){}constructor(){super(...arguments),this.name="switch",this._button=null,this._loading=null,this._func=void 0}}class cc extends cu{install(){this.live2d.data.menus.includes(this.name)&&(super.install(),this._button.title="",this._button.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M320 64c0-35.3-28.7-64-64-64s-64 28.7-64 64s28.7 64 64 64s64-28.7 64-64zm-96 96c-35.3 0-64 28.7-64 64v48c0 17.7 14.3 32 32 32h1.8l11.1 99.5c1.8 16.2 15.5 28.5 31.8 28.5h38.7c16.3 0 30-12.3 31.8-28.5L318.2 304H320c17.7 0 32-14.3 32-32V224c0-35.3-28.7-64-64-64H224zM132.3 394.2c13-2.4 21.7-14.9 19.3-27.9s-14.9-21.7-27.9-19.3c-32.4 5.9-60.9 14.2-82 24.8c-10.5 5.3-20.3 11.7-27.8 19.6C6.4 399.5 0 410.5 0 424c0 21.4 15.5 36.1 29.1 45c14.7 9.6 34.3 17.3 56.4 23.4C130.2 504.7 190.4 512 256 512s125.8-7.3 170.4-19.6c22.1-6.1 41.8-13.8 56.4-23.4c13.7-8.9 29.1-23.6 29.1-45c0-13.5-6.4-24.5-14-32.6c-7.5-7.9-17.3-14.3-27.8-19.6c-21-10.6-49.5-18.9-82-24.8c-13-2.4-25.5 6.3-27.9 19.3s6.3 25.5 19.3 27.9c30.2 5.5 53.7 12.8 69 20.5c3.2 1.6 5.8 3.1 7.9 4.5c3.6 2.4 3.6 7.2 0 9.6c-8.8 5.7-23.1 11.8-43 17.3C374.3 457 318.5 464 256 464s-118.3-7-157.7-17.9c-19.9-5.5-34.2-11.6-43-17.3c-3.6-2.4-3.6-7.2 0-9.6c2.1-1.4 4.8-2.9 7.9-4.5c15.3-7.7 38.8-14.9 69-20.5z"></path></svg>\n    ')}async switch(){await this.live2d.model.nextModel()}showLoading(){return this.live2d.model.data.length>1}constructor(){super(...arguments),this.name="switchModule",this.priority=40}}class cd extends cu{install(){this.live2d.data.menus.includes(this.name)&&(super.install(),this._button.title="",this._button.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM256 272c39.8 0 72-32.2 72-72s-32.2-72-72-72s-72 32.2-72 72s32.2 72 72 72z"></path></svg>\n    ')}async switch(){await this.live2d.model.nextTexture()}showLoading(){return this.live2d.model.textureMaxIndex>1}constructor(){super(...arguments),this.name="switchTexture",this.priority=32}}let cf={FHomePlugin:u7,FDragPlugin:u8,FInfoPlugin:u9,FQuitPlugin:cl,FCapturePlugin:u6,FTipsDragPlugin:u5,FTestFramePlugin:class extends u3{install(){this.live2d.data.hitFrame&&(this._button=document.createElement("div"),this._button.className="live2d-menu-item live2d-flex-center",this._button.title="",this._icons.open='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z"></path><path d="M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176z m0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',this._icons.close='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path d="M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"/><path d="M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"/></svg>',this._button.innerHTML=this._icons.close,this._func=this.clickTestFrame.bind(this),this._button.addEventListener("click",this._func),this.live2d.stage.addMenu(this._button,this.priority))}uninstall(){var e,i;null===(e=this._button)||void 0===e||e.removeEventListener("click",this._func),this.live2d.stage.removeMenu(this._button),null===(i=this._button)||void 0===i||i.remove(),this._button=null}clickTestFrame(){if(null==this._button)return;let e=//.test(this._button.title);this._button.title=e?"":"",this._button.innerHTML=e?this._icons.open:this._icons.close,e?this.live2d.model.showHitAreaFrames():this.live2d.model.hiddenHitAreaFrames()}constructor(){super(...arguments),this.name="hitFrames",this.priority=8,this._button=null,this._icons={open:"",close:""},this._func=void 0}},FSwitchModulePlugin:cc,FSwitchTexturePlugin:cd,FHourMessagePlugin:cs,FMotionMessagePlugin:co,FSeasonsMessagePlugin:ca,FTalkMessagePlugin:ch,FCopyMessagePlugin:cr,FConsoleMessagePlugin:ci,FVisibilityMessagePlugin:cn};(y=b||(b={})).fadeIn="fadeIn",y.fadeOut="fadeOut";class cp extends uH{get menuItems(){return this._menuItems}get wrapper(){return this._data.wrapper}get canvas(){return this._data.canvas}get tips(){return this._data.tips}get menus(){return this._data.menus}get other(){return this._data.other}get parent(){return this._data.parent}init(){this.wrapper.appendChild(this.canvas),this.wrapper.appendChild(this.menus),this.wrapper.appendChild(this.tips),this.wrapper.appendChild(this.other),this.parent.appendChild(this.wrapper);let{fixed:e,transitionTime:i,dockedRight:r}=this.options;this.wrapper.classList.add(...[e?"live2d-fixed":"live2d-relative",r?"right":""],"live2d-wrapper","live2d-transition-all","live2d-opacity-0"),this.canvas.classList.add("live2d-canvas","live2d-transition-all","live2d-opacity-1"),this.tips.classList.add("live2d-tips","live2d-shake","live2d-transition-all","live2d-opacity-0"),this.menus.classList.add("live2d-menus","live2d-transition-all","live2d-opacity-0"),this.other.classList.add("live2d-other","live2d-transition-all","live2d-opacity-1"),this.canvas.style.setProperty("--live2d-duration","".concat(i,"ms")),this._menuFunc=this._showAndHiddenMenus.bind(this),this.wrapper.addEventListener("mouseover",this._menuFunc),this.wrapper.addEventListener("mouseleave",this._menuFunc),document.addEventListener("touchstart",this._menuFunc)}destroy(){for(let e of(super.destroy(),this.event.removeListener(uV.modelLoaded,this._onModelLoad,this),this.menuItems.splice(0,this.menuItems.length)))e.element.remove();this.wrapper.removeEventListener("mouseover",this._menuFunc),this.wrapper.removeEventListener("mouseleave",this._menuFunc),document.removeEventListener("touchstart",this._menuFunc),this.wrapper.remove(),this._menuFunc=null,this._data=null}async fadeIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this._fade(e,b.fadeIn,b.fadeOut).catch(uX.F)}async fadeOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this._fade(e,b.fadeOut,b.fadeIn).catch(uX.F)}addMenu(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return uX.is(HTMLElement,e)&&(this.menuItems.push({element:e,priority:i}),this.menuItems.sort((e,i)=>i.priority-e.priority),this.menus.innerHTML="",this.menus.append(...this.menuItems.map(e=>e.element))),this}removeMenu(e){let i=this.menuItems.findIndex(i=>e===i.element);return i>=0&&(this.menuItems.splice(i,1),e.remove()),this}getParentFromSelector(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==e)return document.body;try{let i;try{i=document.querySelector(e)}catch(r){i=document.evaluate(e,document).iterateNext()}return null!=i?i:document.body}catch(e){return document.body}}getTransitionDuration(e){if(!e)return 0;let i=getComputedStyle(e).getPropertyValue("transition-duration");return uX.defaultTo(0,parseFloat(i))*(/ms/.test(i)?1:1e3)}isRight(){let e=this.wrapper,i=(Math.min(window.screen.width,window.visualViewport.width,window.innerWidth)-e.clientWidth)/2;return e.offsetLeft>i}_onModelLoad(e){var i,r;this.wrapper.classList.remove("live2d-transition-all"),this.canvas.classList.remove("live2d-transition-all"),this.canvas.style.width=this.wrapper.style.width="".concat(null!==(i=null==e?void 0:e.width)&&void 0!==i?i:260,"px"),this.canvas.style.height=this.wrapper.style.height="".concat(null!==(r=null==e?void 0:e.height)&&void 0!==r?r:260,"px"),this.wrapper.style.backgroundColor=this.live2d.model.backgroundColor,this.isRight()?this.wrapper.classList.add("live2d-right"):this.wrapper.classList.remove("live2d-right"),this.app.resize(),this.wrapper.classList.add("live2d-transition-all"),this.canvas.classList.add("live2d-transition-all"),this.fadeIn().finally(()=>{})}_showAndHiddenMenus(e){let i="touchstart"===e.type&&this.wrapper.contains(e.touches[0].target);"mouseover"===e.type||i?this.fadeIn(this.menus).catch(uX.F):this.fadeOut(this.menus).catch(uX.F)}async _fade(e,i,r){var n,s,o,a=this;let h={},l=null!=e?e:e=this.wrapper;null===(n=l[r])||void 0===n||n.call(l),null===(s=l[i])||void 0===s||s.call(l),l[i]=function(){var r;let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(let e in h)null===(r=h[e])||void 0===r||r.call(h);l[i]=null,a.event.emit(n?uV.fadeEnd:uV.fadeCancel,e)},this.event.emit(uV.fadeStart,e);let u=this.getTransitionDuration(e);async function c(e,i){await new Promise((r,n)=>{let s=setTimeout(()=>{h[i]=null,r()},e);h[i]=()=>{clearTimeout(s),n()}})}e.classList.contains("live2d-transition-all")||e.classList.add("live2d-transition-all"),i==b.fadeIn?(e.classList.remove("live2d-hidden"),await c(20,"wait"),e.classList.remove("live2d-opacity-0"),e.classList.add("live2d-opacity-1"),await c(u-20,"cancel")):(e.classList.remove("live2d-opacity-1"),e.classList.add("live2d-opacity-0"),await c(u,"cancel"),e.classList.add("live2d-hidden")),null===(o=l[i])||void 0===o||o.call(l,!0)}constructor(e,i=null,r=null){super(e),this._menuFunc=null,r=uX.mergeAll(null!=r?r:{},{parent:this.getParentFromSelector(i)}),this._data=new uQ(r),this._menuItems=[],this.event.on(uV.modelLoaded,this._onModelLoad,this),this.event.off(uV.init,this.init,this),this.init()}}class c_ extends uH{get data(){return this._data}get messages(){return this._messages}get text(){return this._text}get stop(){return this._stop}get duration(){return this.data.duration}set duration(e){this.data.duration=null!=e?e:3e3}get interval(){return this.data.interval}set interval(e){this.data.interval=null!=e?e:5e3}}class cm extends c_{init(){this._hiddenId=setTimeout(this.startFade.bind(this),this.interval)}destroy(){super.destroy(),this.stopFade(),this._messages=[]}async fadeIn(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.stop||e&&null!=this._showId&&this._showId>0)return;if(this._clearTime(),this.messages.length<=0||(this._text=this.getRandomMessage()).trim().length<=0)return void(this._showId=setTimeout(()=>{this._showId=void 0,this.fadeIn().catch(uX.F)},this.interval));let i=this.live2d.stage.tips;i.innerHTML=this._text,await this.live2d.stage.fadeIn(i),this._showId=setTimeout(()=>{this._showId=void 0,this.fadeOut().catch(uX.F)},this.duration)}async fadeOut(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&null!=this._hiddenId&&this._hiddenId>0||(this._clearTime(),await this.live2d.stage.fadeOut(this.live2d.stage.tips),this._hiddenId=setTimeout(()=>{this._hiddenId=void 0,this.fadeIn().catch(uX.F)},this.interval))}startFade(){this._stop=!1,this.fadeIn().catch(uX.F)}stopFade(){this.fadeOut().catch(uX.F),this._stop=!0}async notify(e){let i=new uW;i.text=this._text=e,i.priority=99999,this.addMessage(i),await this.fadeIn().catch(uX.F).finally(()=>this.removeMessage(i))}addMessage(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return this.messages.push(...i.filter(e=>uX.is(uW,e))),this}removeMessage(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];for(let e of i){let i=this.messages.indexOf(e);i>=0&&this.messages.splice(i,1)}return this}getRandomMessage(){let e=this.messages.filter(e=>null==e.condition||e.condition()),i=uX.groupBy(e=>e.priority.toString(),e),r=Object.keys(i).map(e=>parseInt(e)).sort().map(e=>Array.from({length:Math.ceil(i[e.toString()].length/5)+Math.max(e,0)},()=>e)).flat();if(r.length<=0)return this.text;let n=i[r[uX.random(0,r.length,"floor")]],s=n[uX.random(0,n.length,"floor")];return uX.is(Array,s.text)?s.text[uX.random(0,s.text.length,"floor")]:s.text}_clearTime(){clearInterval(this._showId),clearInterval(this._hiddenId),this._showId=void 0,this._hiddenId=void 0}constructor(e,i=null){var r,n;super(e),this._data=uX.mergeAll(new uJ,null!=i?i:{}),this._messages=null!==(n=null===(r=this._data.message)||void 0===r?void 0:r.map(e=>new uW(e)))&&void 0!==n?n:[],this._stop=!1,this._text="",this._showId=void 0,this._hiddenId=void 0;let s=this.live2d.stage.tips,{minWidth:o,minHeight:a,offsetX:h,offsetY:l}=this.data;s.style.minWidth="".concat(o,"px"),s.style.minHeight="".concat(a,"px"),s.style.setProperty("--tips-offset-x","".concat(h,"px")),s.style.setProperty("--tips-offset-y","".concat(l,"px"))}}class cg{get app(){return this._app}get data(){return this._data}get event(){return this._event}get plugins(){return this._plugins}get stage(){return this._stage}get model(){return this._model}get tips(){return this._tips}get ref(){return this._ref}}class cv extends cg{onModelStart(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.modelStart,e,i,r)}onModelLoaded(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.modelLoaded,e,i,r)}onModelError(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.modelError,e,i,r)}onFadeStart(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.fadeStart,e,i,r)}onFadeEnd(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.fadeEnd,e,i,r)}onFadeCancel(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.fadeCancel,e,i,r)}onMotionStart(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.motionStart,e,i,r)}onMotionFinish(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._onAddEvent(uV.motionFinish,e,i,r)}_onAddEvent(e,i,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.event.once(e,i,r):this.event.on(e,i,r)}}class cy extends cv{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new cy(uX.mergeAll(u4,e))}installPlugin(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];let n=this.plugins.reduce((e,i)=>(e[i.name]=i.name,e),{});for(let e of(i=i.filter(e=>uX.is(u3,e)&&!n[e.name]).sort(s),this.plugins.push(...i),this.plugins.sort(s),i))u3.setContext(e,this),e.install();function s(e,i){return i.priority-e.priority}}uninstallPlugin(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];for(let e of i){let i=this.plugins.indexOf(e);i<0||(e.uninstall(),u3.setContext(e,null),this.plugins.splice(i,1))}}init(){let e=this.plugins.splice(0,this.plugins.length);e.push(...Object.values(cf).map(e=>new e)),this.installPlugin(...e),this._data.sayHello&&uX.sayHello(),this._event.emit(uV.init)}destroy(){let e=this.plugins;this.uninstallPlugin(...e),e.splice(0,e.length),this.app.renderer.destroy(!0),this.event.emit(uV.destroy)}constructor(e){var i,r;super(),this._data=e=new uZ(e),this._event=new u1,this._ref={},this._stage=new cp(this,e.selector),this._model=new u0(this,e.models),this._tips=new cm(this,e.tips),this._plugins=null!==(r=null===(i=e.plugins)||void 0===i?void 0:i.filter(e=>uX.is(u3,e)))&&void 0!==r?r:[],this._app=new l0({view:this._stage.canvas,backgroundAlpha:0,backgroundColor:0,resolution:2,autoStart:!0,autoDensity:!0,resizeTo:this._stage.wrapper}),this.init()}}!function(e,i){void 0===i&&(i={});var r=i.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===r&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}(":root{--tips-bg:#58b0fc;--tips-color:#fff;--tips-shadow:#999;--tips-border-color:#fff;--tips-offset-x:0px;--tips-offset-y:0px;--tips-translate:translate(-50%,-100%);--tips-translate-to:translate(-50%,-105%);--menu-item:pink;--menu-item-hover:#43b1ee;--live2d-duration:500ms;--live2d-anim-duration:1000ms;--live2d-tips-duration:calc(var(--live2d-duration)*2);--toggle-bg:#fa0;--toggle-pos-start:-35px;--toggle-pos-end:-20px;--tips-anim-shake:live2d-shake}.live2d-hidden{display:none}.live2d-fixed{position:fixed}.live2d-relative{position:relative}.live2d-opacity-1{opacity:1;visibility:visible}.live2d-opacity-0{opacity:0;visibility:hidden}.live2d-cursor-default{cursor:default}.live2d-cursor-pointer{cursor:pointer}.live2d-transition-all{transition-duration:var(--live2d-duration);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.live2d-flex-center{align-items:center;display:flex;justify-content:center}.live2d-drag{transition-duration:var(--live2d-duration),0ms;transition-property:all,inset}.live2d-shake{--anim:var(--tips-anim-shake);animation-duration:var(--live2d-anim-duration);animation-fill-mode:none;animation-iteration-count:infinite;animation-name:var(--anim)}.live2d-wrapper{bottom:0;height:auto;left:0;width:-moz-min-content;width:min-content;z-index:5000}.live2d-wrapper.right{left:auto;right:0}.live2d-canvas{position:relative}.live2d-tips{--live2d-duration:var(--live2d-tips-duration);align-items:center;background-color:var(--tips-bg);border:2px solid var(--tips-border-color);border-radius:10px;color:var(--tips-color);display:flex;filter:drop-shadow(0 0 5px var(--tips-shadow));justify-content:center;left:calc(50% + var(--tips-offset-x));overflow:hidden;padding:.625em;top:calc(var(--tips-offset-y));transform:var(--tips-translate)}.live2d-menus,.live2d-tips{position:absolute;text-align:center;z-index:6000}.live2d-menus{right:0;top:10%}.live2d-menu-item{color:var(--menu-item);cursor:pointer;height:30px;width:25px}.live2d-menu-item:hover{color:var(--menu-item-hover)}.live2d-menu-item svg{fill:currentColor;height:25px}.live2d-toggle{background-color:var(--toggle-bg);border-radius:5px;bottom:66px;color:var(--tips-color);cursor:pointer;left:0;padding:5px;transform:translateX(var(--toggle-pos-start));width:60px;writing-mode:vertical-rl;z-index:4000}.live2d-toggle:hover{transform:translateX(var(--toggle-pos-end))}.live2d-toggle.live2d-right{left:auto;right:0;--toggle-pos-start:35px;--toggle-pos-end:20px;writing-mode:vertical-lr}.live2d-right .live2d-menus{left:0;right:auto}@keyframes live2d-shake{0%,to{transform:var(--tips-translate-to) scale(.99)}50%{transform:var(--tips-translate) scale(1)}}"),st.registerTicker(iO);let cb=cy.create;window.wlLive2d=cb,window.ILive2DModel=st}}]);